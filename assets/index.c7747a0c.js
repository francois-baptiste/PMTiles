function gD(e,t){return t.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(o){if(o!=="default"&&!(o in e)){var l=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(e,o,l.get?l:{enumerable:!0,get:function(){return r[o]}})}})}),Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const yD=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const g of h.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function r(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerpolicy&&(h.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?h.credentials="include":l.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(l){if(l.ep)return;l.ep=!0;const h=r(l);fetch(l.href,h)}};yD();var vf=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function _D(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var W={exports:{}},ir={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xf=Symbol.for("react.element"),vD=Symbol.for("react.portal"),xD=Symbol.for("react.fragment"),wD=Symbol.for("react.strict_mode"),bD=Symbol.for("react.profiler"),SD=Symbol.for("react.provider"),ED=Symbol.for("react.context"),kD=Symbol.for("react.forward_ref"),TD=Symbol.for("react.suspense"),CD=Symbol.for("react.memo"),PD=Symbol.for("react.lazy"),ES=Symbol.iterator;function ID(e){return e===null||typeof e!="object"?null:(e=ES&&e[ES]||e["@@iterator"],typeof e=="function"?e:null)}var AC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zC=Object.assign,DC={};function gh(e,t,r){this.props=e,this.context=t,this.refs=DC,this.updater=r||AC}gh.prototype.isReactComponent={};gh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function RC(){}RC.prototype=gh.prototype;function Bx(e,t,r){this.props=e,this.context=t,this.refs=DC,this.updater=r||AC}var Vx=Bx.prototype=new RC;Vx.constructor=Bx;zC(Vx,gh.prototype);Vx.isPureReactComponent=!0;var kS=Array.isArray,LC=Object.prototype.hasOwnProperty,Nx={current:null},FC={key:!0,ref:!0,__self:!0,__source:!0};function OC(e,t,r){var o,l={},h=null,g=null;if(t!=null)for(o in t.ref!==void 0&&(g=t.ref),t.key!==void 0&&(h=""+t.key),t)LC.call(t,o)&&!FC.hasOwnProperty(o)&&(l[o]=t[o]);var u=arguments.length-2;if(u===1)l.children=r;else if(1<u){for(var b=Array(u),w=0;w<u;w++)b[w]=arguments[w+2];l.children=b}if(e&&e.defaultProps)for(o in u=e.defaultProps,u)l[o]===void 0&&(l[o]=u[o]);return{$$typeof:Xf,type:e,key:h,ref:g,props:l,_owner:Nx.current}}function MD(e,t){return{$$typeof:Xf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ux(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xf}function AD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var TS=/\/+/g;function j_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?AD(""+e.key):t.toString(36)}function Qm(e,t,r,o,l){var h=typeof e;(h==="undefined"||h==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(h){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case Xf:case vD:g=!0}}if(g)return g=e,l=l(g),e=o===""?"."+j_(g,0):o,kS(l)?(r="",e!=null&&(r=e.replace(TS,"$&/")+"/"),Qm(l,t,r,"",function(w){return w})):l!=null&&(Ux(l)&&(l=MD(l,r+(!l.key||g&&g.key===l.key?"":(""+l.key).replace(TS,"$&/")+"/")+e)),t.push(l)),1;if(g=0,o=o===""?".":o+":",kS(e))for(var u=0;u<e.length;u++){h=e[u];var b=o+j_(h,u);g+=Qm(h,t,r,b,l)}else if(b=ID(e),typeof b=="function")for(e=b.call(e),u=0;!(h=e.next()).done;)h=h.value,b=o+j_(h,u++),g+=Qm(h,t,r,b,l);else if(h==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return g}function mm(e,t,r){if(e==null)return e;var o=[],l=0;return Qm(e,o,"","",function(h){return t.call(r,h,l++)}),o}function zD(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ui={current:null},eg={transition:null},DD={ReactCurrentDispatcher:Ui,ReactCurrentBatchConfig:eg,ReactCurrentOwner:Nx};ir.Children={map:mm,forEach:function(e,t,r){mm(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return mm(e,function(){t++}),t},toArray:function(e){return mm(e,function(t){return t})||[]},only:function(e){if(!Ux(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ir.Component=gh;ir.Fragment=xD;ir.Profiler=bD;ir.PureComponent=Bx;ir.StrictMode=wD;ir.Suspense=TD;ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DD;ir.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=zC({},e.props),l=e.key,h=e.ref,g=e._owner;if(t!=null){if(t.ref!==void 0&&(h=t.ref,g=Nx.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(b in t)LC.call(t,b)&&!FC.hasOwnProperty(b)&&(o[b]=t[b]===void 0&&u!==void 0?u[b]:t[b])}var b=arguments.length-2;if(b===1)o.children=r;else if(1<b){u=Array(b);for(var w=0;w<b;w++)u[w]=arguments[w+2];o.children=u}return{$$typeof:Xf,type:e.type,key:l,ref:h,props:o,_owner:g}};ir.createContext=function(e){return e={$$typeof:ED,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:SD,_context:e},e.Consumer=e};ir.createElement=OC;ir.createFactory=function(e){var t=OC.bind(null,e);return t.type=e,t};ir.createRef=function(){return{current:null}};ir.forwardRef=function(e){return{$$typeof:kD,render:e}};ir.isValidElement=Ux;ir.lazy=function(e){return{$$typeof:PD,_payload:{_status:-1,_result:e},_init:zD}};ir.memo=function(e,t){return{$$typeof:CD,type:e,compare:t===void 0?null:t}};ir.startTransition=function(e){var t=eg.transition;eg.transition={};try{e()}finally{eg.transition=t}};ir.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ir.useCallback=function(e,t){return Ui.current.useCallback(e,t)};ir.useContext=function(e){return Ui.current.useContext(e)};ir.useDebugValue=function(){};ir.useDeferredValue=function(e){return Ui.current.useDeferredValue(e)};ir.useEffect=function(e,t){return Ui.current.useEffect(e,t)};ir.useId=function(){return Ui.current.useId()};ir.useImperativeHandle=function(e,t,r){return Ui.current.useImperativeHandle(e,t,r)};ir.useInsertionEffect=function(e,t){return Ui.current.useInsertionEffect(e,t)};ir.useLayoutEffect=function(e,t){return Ui.current.useLayoutEffect(e,t)};ir.useMemo=function(e,t){return Ui.current.useMemo(e,t)};ir.useReducer=function(e,t,r){return Ui.current.useReducer(e,t,r)};ir.useRef=function(e){return Ui.current.useRef(e)};ir.useState=function(e){return Ui.current.useState(e)};ir.useSyncExternalStore=function(e,t,r){return Ui.current.useSyncExternalStore(e,t,r)};ir.useTransition=function(){return Ui.current.useTransition()};ir.version="18.1.0";W.exports=ir;var Re=W.exports,Yv=gD({__proto__:null,default:Re},[W.exports]),Jv={},My={exports:{}},Ao={},$C={exports:{}},BC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ne,rt){var ht=Ne.length;Ne.push(rt);e:for(;0<ht;){var Dt=ht-1>>>1,it=Ne[Dt];if(0<l(it,rt))Ne[Dt]=rt,Ne[ht]=it,ht=Dt;else break e}}function r(Ne){return Ne.length===0?null:Ne[0]}function o(Ne){if(Ne.length===0)return null;var rt=Ne[0],ht=Ne.pop();if(ht!==rt){Ne[0]=ht;e:for(var Dt=0,it=Ne.length,xr=it>>>1;Dt<xr;){var qt=2*(Dt+1)-1,Dr=Ne[qt],At=qt+1,Pr=Ne[At];if(0>l(Dr,ht))At<it&&0>l(Pr,Dr)?(Ne[Dt]=Pr,Ne[At]=ht,Dt=At):(Ne[Dt]=Dr,Ne[qt]=ht,Dt=qt);else if(At<it&&0>l(Pr,ht))Ne[Dt]=Pr,Ne[At]=ht,Dt=At;else break e}}return rt}function l(Ne,rt){var ht=Ne.sortIndex-rt.sortIndex;return ht!==0?ht:Ne.id-rt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var g=Date,u=g.now();e.unstable_now=function(){return g.now()-u}}var b=[],w=[],T=1,I=null,z=3,j=!1,Z=!1,H=!1,le=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function X(Ne){for(var rt=r(w);rt!==null;){if(rt.callback===null)o(w);else if(rt.startTime<=Ne)o(w),rt.sortIndex=rt.expirationTime,t(b,rt);else break;rt=r(w)}}function ue(Ne){if(H=!1,X(Ne),!Z)if(r(b)!==null)Z=!0,Xt(ce);else{var rt=r(w);rt!==null&&or(ue,rt.startTime-Ne)}}function ce(Ne,rt){Z=!1,H&&(H=!1,$(xe),xe=-1),j=!0;var ht=z;try{for(X(rt),I=r(b);I!==null&&(!(I.expirationTime>rt)||Ne&&!Be());){var Dt=I.callback;if(typeof Dt=="function"){I.callback=null,z=I.priorityLevel;var it=Dt(I.expirationTime<=rt);rt=e.unstable_now(),typeof it=="function"?I.callback=it:I===r(b)&&o(b),X(rt)}else o(b);I=r(b)}if(I!==null)var xr=!0;else{var qt=r(w);qt!==null&&or(ue,qt.startTime-rt),xr=!1}return xr}finally{I=null,z=ht,j=!1}}var me=!1,ge=null,xe=-1,je=5,ke=-1;function Be(){return!(e.unstable_now()-ke<je)}function zt(){if(ge!==null){var Ne=e.unstable_now();ke=Ne;var rt=!0;try{rt=ge(!0,Ne)}finally{rt?vt():(me=!1,ge=null)}}else me=!1}var vt;if(typeof B=="function")vt=function(){B(zt)};else if(typeof MessageChannel!="undefined"){var Et=new MessageChannel,Ot=Et.port2;Et.port1.onmessage=zt,vt=function(){Ot.postMessage(null)}}else vt=function(){le(zt,0)};function Xt(Ne){ge=Ne,me||(me=!0,vt())}function or(Ne,rt){xe=le(function(){Ne(e.unstable_now())},rt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ne){Ne.callback=null},e.unstable_continueExecution=function(){Z||j||(Z=!0,Xt(ce))},e.unstable_forceFrameRate=function(Ne){0>Ne||125<Ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):je=0<Ne?Math.floor(1e3/Ne):5},e.unstable_getCurrentPriorityLevel=function(){return z},e.unstable_getFirstCallbackNode=function(){return r(b)},e.unstable_next=function(Ne){switch(z){case 1:case 2:case 3:var rt=3;break;default:rt=z}var ht=z;z=rt;try{return Ne()}finally{z=ht}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ne,rt){switch(Ne){case 1:case 2:case 3:case 4:case 5:break;default:Ne=3}var ht=z;z=Ne;try{return rt()}finally{z=ht}},e.unstable_scheduleCallback=function(Ne,rt,ht){var Dt=e.unstable_now();switch(typeof ht=="object"&&ht!==null?(ht=ht.delay,ht=typeof ht=="number"&&0<ht?Dt+ht:Dt):ht=Dt,Ne){case 1:var it=-1;break;case 2:it=250;break;case 5:it=1073741823;break;case 4:it=1e4;break;default:it=5e3}return it=ht+it,Ne={id:T++,callback:rt,priorityLevel:Ne,startTime:ht,expirationTime:it,sortIndex:-1},ht>Dt?(Ne.sortIndex=ht,t(w,Ne),r(b)===null&&Ne===r(w)&&(H?($(xe),xe=-1):H=!0,or(ue,ht-Dt))):(Ne.sortIndex=it,t(b,Ne),Z||j||(Z=!0,Xt(ce))),Ne},e.unstable_shouldYield=Be,e.unstable_wrapCallback=function(Ne){var rt=z;return function(){var ht=z;z=rt;try{return Ne.apply(this,arguments)}finally{z=ht}}}})(BC);$C.exports=BC;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VC=W.exports,Po=$C.exports;function Ge(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var NC=new Set,xf={};function _u(e,t){th(e,t),th(e+"Capture",t)}function th(e,t){for(xf[e]=t,e=0;e<t.length;e++)NC.add(t[e])}var fs=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Qv=Object.prototype.hasOwnProperty,RD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,CS={},PS={};function LD(e){return Qv.call(PS,e)?!0:Qv.call(CS,e)?!1:RD.test(e)?PS[e]=!0:(CS[e]=!0,!1)}function FD(e,t,r,o){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function OD(e,t,r,o){if(t===null||typeof t=="undefined"||FD(e,t,r,o))return!0;if(o)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ji(e,t,r,o,l,h,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=l,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=g}var ai={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ai[e]=new ji(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ai[t]=new ji(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ai[e]=new ji(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ai[e]=new ji(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ai[e]=new ji(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ai[e]=new ji(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ai[e]=new ji(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ai[e]=new ji(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ai[e]=new ji(e,5,!1,e.toLowerCase(),null,!1,!1)});var jx=/[\-:]([a-z])/g;function Gx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(jx,Gx);ai[t]=new ji(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(jx,Gx);ai[t]=new ji(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(jx,Gx);ai[t]=new ji(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ai[e]=new ji(e,1,!1,e.toLowerCase(),null,!1,!1)});ai.xlinkHref=new ji("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ai[e]=new ji(e,1,!1,e.toLowerCase(),null,!0,!0)});function Wx(e,t,r,o){var l=ai.hasOwnProperty(t)?ai[t]:null;(l!==null?l.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(OD(t,r,l,o)&&(r=null),o||l===null?LD(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):l.mustUseProperty?e[l.propertyName]=r===null?l.type===3?!1:"":r:(t=l.attributeName,o=l.attributeNamespace,r===null?e.removeAttribute(t):(l=l.type,r=l===3||l===4&&r===!0?"":""+r,o?e.setAttributeNS(o,t,r):e.setAttribute(t,r))))}var bs=VC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gm=Symbol.for("react.element"),Mc=Symbol.for("react.portal"),Ac=Symbol.for("react.fragment"),qx=Symbol.for("react.strict_mode"),e1=Symbol.for("react.profiler"),UC=Symbol.for("react.provider"),jC=Symbol.for("react.context"),Zx=Symbol.for("react.forward_ref"),t1=Symbol.for("react.suspense"),r1=Symbol.for("react.suspense_list"),Hx=Symbol.for("react.memo"),js=Symbol.for("react.lazy"),GC=Symbol.for("react.offscreen"),IS=Symbol.iterator;function Ad(e){return e===null||typeof e!="object"?null:(e=IS&&e[IS]||e["@@iterator"],typeof e=="function"?e:null)}var ln=Object.assign,G_;function qd(e){if(G_===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);G_=t&&t[1]||""}return`
`+G_+e}var W_=!1;function q_(e,t){if(!e||W_)return"";W_=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var o=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){o=w}e.call(t.prototype)}else{try{throw Error()}catch(w){o=w}e()}}catch(w){if(w&&o&&typeof w.stack=="string"){for(var l=w.stack.split(`
`),h=o.stack.split(`
`),g=l.length-1,u=h.length-1;1<=g&&0<=u&&l[g]!==h[u];)u--;for(;1<=g&&0<=u;g--,u--)if(l[g]!==h[u]){if(g!==1||u!==1)do if(g--,u--,0>u||l[g]!==h[u]){var b=`
`+l[g].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=g&&0<=u);break}}}finally{W_=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?qd(e):""}function $D(e){switch(e.tag){case 5:return qd(e.type);case 16:return qd("Lazy");case 13:return qd("Suspense");case 19:return qd("SuspenseList");case 0:case 2:case 15:return e=q_(e.type,!1),e;case 11:return e=q_(e.type.render,!1),e;case 1:return e=q_(e.type,!0),e;default:return""}}function n1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ac:return"Fragment";case Mc:return"Portal";case e1:return"Profiler";case qx:return"StrictMode";case t1:return"Suspense";case r1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case jC:return(e.displayName||"Context")+".Consumer";case UC:return(e._context.displayName||"Context")+".Provider";case Zx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Hx:return t=e.displayName||null,t!==null?t:n1(e.type)||"Memo";case js:t=e._payload,e=e._init;try{return n1(e(t))}catch{}}return null}function BD(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return n1(t);case 8:return t===qx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function sl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function WC(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function VD(e){var t=WC(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var l=r.get,h=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(g){o=""+g,h.call(this,g)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(g){o=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ym(e){e._valueTracker||(e._valueTracker=VD(e))}function qC(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return e&&(o=WC(e)?e.checked?"true":"false":e.value),e=o,e!==r?(t.setValue(e),!0):!1}function Ag(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function i1(e,t){var r=t.checked;return ln({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function MS(e,t){var r=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;r=sl(t.value!=null?t.value:r),e._wrapperState={initialChecked:o,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ZC(e,t){t=t.checked,t!=null&&Wx(e,"checked",t,!1)}function o1(e,t){ZC(e,t);var r=sl(t.value),o=t.type;if(r!=null)o==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?a1(e,t.type,r):t.hasOwnProperty("defaultValue")&&a1(e,t.type,sl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function AS(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function a1(e,t,r){(t!=="number"||Ag(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Zd=Array.isArray;function Wc(e,t,r,o){if(e=e.options,t){t={};for(var l=0;l<r.length;l++)t["$"+r[l]]=!0;for(r=0;r<e.length;r++)l=t.hasOwnProperty("$"+e[r].value),e[r].selected!==l&&(e[r].selected=l),l&&o&&(e[r].defaultSelected=!0)}else{for(r=""+sl(r),t=null,l=0;l<e.length;l++){if(e[l].value===r){e[l].selected=!0,o&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function s1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ge(91));return ln({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zS(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Ge(92));if(Zd(r)){if(1<r.length)throw Error(Ge(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:sl(r)}}function HC(e,t){var r=sl(t.value),o=sl(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),o!=null&&(e.defaultValue=""+o)}function DS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function XC(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function l1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?XC(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var _m,KC=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,r,o,l){MSApp.execUnsafeLocalFunction(function(){return e(t,r,o,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(_m=_m||document.createElement("div"),_m.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=_m.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function wf(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var nf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ND=["Webkit","ms","Moz","O"];Object.keys(nf).forEach(function(e){ND.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),nf[t]=nf[e]})});function YC(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||nf.hasOwnProperty(e)&&nf[e]?(""+t).trim():t+"px"}function JC(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var o=r.indexOf("--")===0,l=YC(r,t[r],o);r==="float"&&(r="cssFloat"),o?e.setProperty(r,l):e[r]=l}}var UD=ln({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function u1(e,t){if(t){if(UD[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ge(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ge(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ge(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ge(62))}}function c1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var h1=null;function Xx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var d1=null,qc=null,Zc=null;function RS(e){if(e=Jf(e)){if(typeof d1!="function")throw Error(Ge(280));var t=e.stateNode;t&&(t=Ly(t),d1(e.stateNode,e.type,t))}}function QC(e){qc?Zc?Zc.push(e):Zc=[e]:qc=e}function eP(){if(qc){var e=qc,t=Zc;if(Zc=qc=null,RS(e),t)for(e=0;e<t.length;e++)RS(t[e])}}function tP(e,t){return e(t)}function rP(){}var Z_=!1;function nP(e,t,r){if(Z_)return e(t,r);Z_=!0;try{return tP(e,t,r)}finally{Z_=!1,(qc!==null||Zc!==null)&&(rP(),eP())}}function bf(e,t){var r=e.stateNode;if(r===null)return null;var o=Ly(r);if(o===null)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Ge(231,t,typeof r));return r}var f1=!1;if(fs)try{var zd={};Object.defineProperty(zd,"passive",{get:function(){f1=!0}}),window.addEventListener("test",zd,zd),window.removeEventListener("test",zd,zd)}catch{f1=!1}function jD(e,t,r,o,l,h,g,u,b){var w=Array.prototype.slice.call(arguments,3);try{t.apply(r,w)}catch(T){this.onError(T)}}var of=!1,zg=null,Dg=!1,p1=null,GD={onError:function(e){of=!0,zg=e}};function WD(e,t,r,o,l,h,g,u,b){of=!1,zg=null,jD.apply(GD,arguments)}function qD(e,t,r,o,l,h,g,u,b){if(WD.apply(this,arguments),of){if(of){var w=zg;of=!1,zg=null}else throw Error(Ge(198));Dg||(Dg=!0,p1=w)}}function vu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function iP(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function LS(e){if(vu(e)!==e)throw Error(Ge(188))}function ZD(e){var t=e.alternate;if(!t){if(t=vu(e),t===null)throw Error(Ge(188));return t!==e?null:e}for(var r=e,o=t;;){var l=r.return;if(l===null)break;var h=l.alternate;if(h===null){if(o=l.return,o!==null){r=o;continue}break}if(l.child===h.child){for(h=l.child;h;){if(h===r)return LS(l),e;if(h===o)return LS(l),t;h=h.sibling}throw Error(Ge(188))}if(r.return!==o.return)r=l,o=h;else{for(var g=!1,u=l.child;u;){if(u===r){g=!0,r=l,o=h;break}if(u===o){g=!0,o=l,r=h;break}u=u.sibling}if(!g){for(u=h.child;u;){if(u===r){g=!0,r=h,o=l;break}if(u===o){g=!0,o=h,r=l;break}u=u.sibling}if(!g)throw Error(Ge(189))}}if(r.alternate!==o)throw Error(Ge(190))}if(r.tag!==3)throw Error(Ge(188));return r.stateNode.current===r?e:t}function oP(e){return e=ZD(e),e!==null?aP(e):null}function aP(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=aP(e);if(t!==null)return t;e=e.sibling}return null}var sP=Po.unstable_scheduleCallback,FS=Po.unstable_cancelCallback,HD=Po.unstable_shouldYield,XD=Po.unstable_requestPaint,wn=Po.unstable_now,KD=Po.unstable_getCurrentPriorityLevel,Kx=Po.unstable_ImmediatePriority,lP=Po.unstable_UserBlockingPriority,Rg=Po.unstable_NormalPriority,YD=Po.unstable_LowPriority,uP=Po.unstable_IdlePriority,Ay=null,Fa=null;function JD(e){if(Fa&&typeof Fa.onCommitFiberRoot=="function")try{Fa.onCommitFiberRoot(Ay,e,void 0,(e.current.flags&128)===128)}catch{}}var ga=Math.clz32?Math.clz32:t4,QD=Math.log,e4=Math.LN2;function t4(e){return e>>>=0,e===0?32:31-(QD(e)/e4|0)|0}var vm=64,xm=4194304;function Hd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Lg(e,t){var r=e.pendingLanes;if(r===0)return 0;var o=0,l=e.suspendedLanes,h=e.pingedLanes,g=r&268435455;if(g!==0){var u=g&~l;u!==0?o=Hd(u):(h&=g,h!==0&&(o=Hd(h)))}else g=r&~l,g!==0?o=Hd(g):h!==0&&(o=Hd(h));if(o===0)return 0;if(t!==0&&t!==o&&(t&l)===0&&(l=o&-o,h=t&-t,l>=h||l===16&&(h&4194240)!==0))return t;if((o&4)!==0&&(o|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)r=31-ga(t),l=1<<r,o|=e[r],t&=~l;return o}function r4(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function n4(e,t){for(var r=e.suspendedLanes,o=e.pingedLanes,l=e.expirationTimes,h=e.pendingLanes;0<h;){var g=31-ga(h),u=1<<g,b=l[g];b===-1?((u&r)===0||(u&o)!==0)&&(l[g]=r4(u,t)):b<=t&&(e.expiredLanes|=u),h&=~u}}function m1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function cP(){var e=vm;return vm<<=1,(vm&4194240)===0&&(vm=64),e}function H_(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Kf(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ga(t),e[t]=r}function i4(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<r;){var l=31-ga(r),h=1<<l;t[l]=0,o[l]=-1,e[l]=-1,r&=~h}}function Yx(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var o=31-ga(r),l=1<<o;l&t|e[o]&t&&(e[o]|=t),r&=~l}}var Er=0;function hP(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var dP,Jx,fP,pP,mP,g1=!1,wm=[],Qs=null,el=null,tl=null,Sf=new Map,Ef=new Map,Ws=[],o4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function OS(e,t){switch(e){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":el=null;break;case"mouseover":case"mouseout":tl=null;break;case"pointerover":case"pointerout":Sf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ef.delete(t.pointerId)}}function Dd(e,t,r,o,l,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:r,eventSystemFlags:o,nativeEvent:h,targetContainers:[l]},t!==null&&(t=Jf(t),t!==null&&Jx(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function a4(e,t,r,o,l){switch(t){case"focusin":return Qs=Dd(Qs,e,t,r,o,l),!0;case"dragenter":return el=Dd(el,e,t,r,o,l),!0;case"mouseover":return tl=Dd(tl,e,t,r,o,l),!0;case"pointerover":var h=l.pointerId;return Sf.set(h,Dd(Sf.get(h)||null,e,t,r,o,l)),!0;case"gotpointercapture":return h=l.pointerId,Ef.set(h,Dd(Ef.get(h)||null,e,t,r,o,l)),!0}return!1}function gP(e){var t=eu(e.target);if(t!==null){var r=vu(t);if(r!==null){if(t=r.tag,t===13){if(t=iP(r),t!==null){e.blockedOn=t,mP(e.priority,function(){fP(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=y1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);h1=o,r.target.dispatchEvent(o),h1=null}else return t=Jf(r),t!==null&&Jx(t),e.blockedOn=r,!1;t.shift()}return!0}function $S(e,t,r){tg(e)&&r.delete(t)}function s4(){g1=!1,Qs!==null&&tg(Qs)&&(Qs=null),el!==null&&tg(el)&&(el=null),tl!==null&&tg(tl)&&(tl=null),Sf.forEach($S),Ef.forEach($S)}function Rd(e,t){e.blockedOn===t&&(e.blockedOn=null,g1||(g1=!0,Po.unstable_scheduleCallback(Po.unstable_NormalPriority,s4)))}function kf(e){function t(l){return Rd(l,e)}if(0<wm.length){Rd(wm[0],e);for(var r=1;r<wm.length;r++){var o=wm[r];o.blockedOn===e&&(o.blockedOn=null)}}for(Qs!==null&&Rd(Qs,e),el!==null&&Rd(el,e),tl!==null&&Rd(tl,e),Sf.forEach(t),Ef.forEach(t),r=0;r<Ws.length;r++)o=Ws[r],o.blockedOn===e&&(o.blockedOn=null);for(;0<Ws.length&&(r=Ws[0],r.blockedOn===null);)gP(r),r.blockedOn===null&&Ws.shift()}var Hc=bs.ReactCurrentBatchConfig,Fg=!0;function l4(e,t,r,o){var l=Er,h=Hc.transition;Hc.transition=null;try{Er=1,Qx(e,t,r,o)}finally{Er=l,Hc.transition=h}}function u4(e,t,r,o){var l=Er,h=Hc.transition;Hc.transition=null;try{Er=4,Qx(e,t,r,o)}finally{Er=l,Hc.transition=h}}function Qx(e,t,r,o){if(Fg){var l=y1(e,t,r,o);if(l===null)iv(e,t,o,Og,r),OS(e,o);else if(a4(l,e,t,r,o))o.stopPropagation();else if(OS(e,o),t&4&&-1<o4.indexOf(e)){for(;l!==null;){var h=Jf(l);if(h!==null&&dP(h),h=y1(e,t,r,o),h===null&&iv(e,t,o,Og,r),h===l)break;l=h}l!==null&&o.stopPropagation()}else iv(e,t,o,null,r)}}var Og=null;function y1(e,t,r,o){if(Og=null,e=Xx(o),e=eu(e),e!==null)if(t=vu(e),t===null)e=null;else if(r=t.tag,r===13){if(e=iP(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Og=e,null}function yP(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KD()){case Kx:return 1;case lP:return 4;case Rg:case YD:return 16;case uP:return 536870912;default:return 16}default:return 16}}var Hs=null,ew=null,rg=null;function _P(){if(rg)return rg;var e,t=ew,r=t.length,o,l="value"in Hs?Hs.value:Hs.textContent,h=l.length;for(e=0;e<r&&t[e]===l[e];e++);var g=r-e;for(o=1;o<=g&&t[r-o]===l[h-o];o++);return rg=l.slice(e,1<o?1-o:void 0)}function ng(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bm(){return!0}function BS(){return!1}function zo(e){function t(r,o,l,h,g){this._reactName=r,this._targetInst=l,this.type=o,this.nativeEvent=h,this.target=g,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(r=e[u],this[u]=r?r(h):h[u]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?bm:BS,this.isPropagationStopped=BS,this}return ln(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=bm)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=bm)},persist:function(){},isPersistent:bm}),t}var yh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tw=zo(yh),Yf=ln({},yh,{view:0,detail:0}),c4=zo(Yf),X_,K_,Ld,zy=ln({},Yf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ld&&(Ld&&e.type==="mousemove"?(X_=e.screenX-Ld.screenX,K_=e.screenY-Ld.screenY):K_=X_=0,Ld=e),X_)},movementY:function(e){return"movementY"in e?e.movementY:K_}}),VS=zo(zy),h4=ln({},zy,{dataTransfer:0}),d4=zo(h4),f4=ln({},Yf,{relatedTarget:0}),Y_=zo(f4),p4=ln({},yh,{animationName:0,elapsedTime:0,pseudoElement:0}),m4=zo(p4),g4=ln({},yh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),y4=zo(g4),_4=ln({},yh,{data:0}),NS=zo(_4),v4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},x4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},w4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function b4(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=w4[e])?!!t[e]:!1}function rw(){return b4}var S4=ln({},Yf,{key:function(e){if(e.key){var t=v4[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ng(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?x4[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rw,charCode:function(e){return e.type==="keypress"?ng(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ng(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),E4=zo(S4),k4=ln({},zy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),US=zo(k4),T4=ln({},Yf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rw}),C4=zo(T4),P4=ln({},yh,{propertyName:0,elapsedTime:0,pseudoElement:0}),I4=zo(P4),M4=ln({},zy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),A4=zo(M4),z4=[9,13,27,32],nw=fs&&"CompositionEvent"in window,af=null;fs&&"documentMode"in document&&(af=document.documentMode);var D4=fs&&"TextEvent"in window&&!af,vP=fs&&(!nw||af&&8<af&&11>=af),jS=String.fromCharCode(32),GS=!1;function xP(e,t){switch(e){case"keyup":return z4.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wP(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zc=!1;function R4(e,t){switch(e){case"compositionend":return wP(t);case"keypress":return t.which!==32?null:(GS=!0,jS);case"textInput":return e=t.data,e===jS&&GS?null:e;default:return null}}function L4(e,t){if(zc)return e==="compositionend"||!nw&&xP(e,t)?(e=_P(),rg=ew=Hs=null,zc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return vP&&t.locale!=="ko"?null:t.data;default:return null}}var F4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function WS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!F4[e.type]:t==="textarea"}function bP(e,t,r,o){QC(o),t=$g(t,"onChange"),0<t.length&&(r=new tw("onChange","change",null,r,o),e.push({event:r,listeners:t}))}var sf=null,Tf=null;function O4(e){DP(e,0)}function Dy(e){var t=Lc(e);if(qC(t))return e}function $4(e,t){if(e==="change")return t}var SP=!1;if(fs){var J_;if(fs){var Q_="oninput"in document;if(!Q_){var qS=document.createElement("div");qS.setAttribute("oninput","return;"),Q_=typeof qS.oninput=="function"}J_=Q_}else J_=!1;SP=J_&&(!document.documentMode||9<document.documentMode)}function ZS(){sf&&(sf.detachEvent("onpropertychange",EP),Tf=sf=null)}function EP(e){if(e.propertyName==="value"&&Dy(Tf)){var t=[];bP(t,Tf,e,Xx(e)),nP(O4,t)}}function B4(e,t,r){e==="focusin"?(ZS(),sf=t,Tf=r,sf.attachEvent("onpropertychange",EP)):e==="focusout"&&ZS()}function V4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Dy(Tf)}function N4(e,t){if(e==="click")return Dy(t)}function U4(e,t){if(e==="input"||e==="change")return Dy(t)}function j4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ya=typeof Object.is=="function"?Object.is:j4;function Cf(e,t){if(ya(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var l=r[o];if(!Qv.call(t,l)||!ya(e[l],t[l]))return!1}return!0}function HS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function XS(e,t){var r=HS(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=t&&o>=t)return{node:r,offset:t-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=HS(r)}}function kP(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kP(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function TP(){for(var e=window,t=Ag();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ag(e.document)}return t}function iw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function G4(e){var t=TP(),r=e.focusedElem,o=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&kP(r.ownerDocument.documentElement,r)){if(o!==null&&iw(r)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=r.textContent.length,h=Math.min(o.start,l);o=o.end===void 0?h:Math.min(o.end,l),!e.extend&&h>o&&(l=o,o=h,h=l),l=XS(r,h);var g=XS(r,o);l&&g&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),h>o?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var W4=fs&&"documentMode"in document&&11>=document.documentMode,Dc=null,_1=null,lf=null,v1=!1;function KS(e,t,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;v1||Dc==null||Dc!==Ag(o)||(o=Dc,"selectionStart"in o&&iw(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),lf&&Cf(lf,o)||(lf=o,o=$g(_1,"onSelect"),0<o.length&&(t=new tw("onSelect","select",null,t,r),e.push({event:t,listeners:o}),t.target=Dc)))}function Sm(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Rc={animationend:Sm("Animation","AnimationEnd"),animationiteration:Sm("Animation","AnimationIteration"),animationstart:Sm("Animation","AnimationStart"),transitionend:Sm("Transition","TransitionEnd")},ev={},CP={};fs&&(CP=document.createElement("div").style,"AnimationEvent"in window||(delete Rc.animationend.animation,delete Rc.animationiteration.animation,delete Rc.animationstart.animation),"TransitionEvent"in window||delete Rc.transitionend.transition);function Ry(e){if(ev[e])return ev[e];if(!Rc[e])return e;var t=Rc[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in CP)return ev[e]=t[r];return e}var PP=Ry("animationend"),IP=Ry("animationiteration"),MP=Ry("animationstart"),AP=Ry("transitionend"),zP=new Map,YS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dl(e,t){zP.set(e,t),_u(t,[e])}for(var tv=0;tv<YS.length;tv++){var rv=YS[tv],q4=rv.toLowerCase(),Z4=rv[0].toUpperCase()+rv.slice(1);dl(q4,"on"+Z4)}dl(PP,"onAnimationEnd");dl(IP,"onAnimationIteration");dl(MP,"onAnimationStart");dl("dblclick","onDoubleClick");dl("focusin","onFocus");dl("focusout","onBlur");dl(AP,"onTransitionEnd");th("onMouseEnter",["mouseout","mouseover"]);th("onMouseLeave",["mouseout","mouseover"]);th("onPointerEnter",["pointerout","pointerover"]);th("onPointerLeave",["pointerout","pointerover"]);_u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_u("onBeforeInput",["compositionend","keypress","textInput","paste"]);_u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),H4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xd));function JS(e,t,r){var o=e.type||"unknown-event";e.currentTarget=r,qD(o,t,void 0,e),e.currentTarget=null}function DP(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],l=o.event;o=o.listeners;e:{var h=void 0;if(t)for(var g=o.length-1;0<=g;g--){var u=o[g],b=u.instance,w=u.currentTarget;if(u=u.listener,b!==h&&l.isPropagationStopped())break e;JS(l,u,w),h=b}else for(g=0;g<o.length;g++){if(u=o[g],b=u.instance,w=u.currentTarget,u=u.listener,b!==h&&l.isPropagationStopped())break e;JS(l,u,w),h=b}}}if(Dg)throw e=p1,Dg=!1,p1=null,e}function jr(e,t){var r=t[E1];r===void 0&&(r=t[E1]=new Set);var o=e+"__bubble";r.has(o)||(RP(t,e,2,!1),r.add(o))}function nv(e,t,r){var o=0;t&&(o|=4),RP(r,e,o,t)}var Em="_reactListening"+Math.random().toString(36).slice(2);function Pf(e){if(!e[Em]){e[Em]=!0,NC.forEach(function(r){r!=="selectionchange"&&(H4.has(r)||nv(r,!1,e),nv(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Em]||(t[Em]=!0,nv("selectionchange",!1,t))}}function RP(e,t,r,o){switch(yP(t)){case 1:var l=l4;break;case 4:l=u4;break;default:l=Qx}r=l.bind(null,t,r,e),l=void 0,!f1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),o?l!==void 0?e.addEventListener(t,r,{capture:!0,passive:l}):e.addEventListener(t,r,!0):l!==void 0?e.addEventListener(t,r,{passive:l}):e.addEventListener(t,r,!1)}function iv(e,t,r,o,l){var h=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var g=o.tag;if(g===3||g===4){var u=o.stateNode.containerInfo;if(u===l||u.nodeType===8&&u.parentNode===l)break;if(g===4)for(g=o.return;g!==null;){var b=g.tag;if((b===3||b===4)&&(b=g.stateNode.containerInfo,b===l||b.nodeType===8&&b.parentNode===l))return;g=g.return}for(;u!==null;){if(g=eu(u),g===null)return;if(b=g.tag,b===5||b===6){o=h=g;continue e}u=u.parentNode}}o=o.return}nP(function(){var w=h,T=Xx(r),I=[];e:{var z=zP.get(e);if(z!==void 0){var j=tw,Z=e;switch(e){case"keypress":if(ng(r)===0)break e;case"keydown":case"keyup":j=E4;break;case"focusin":Z="focus",j=Y_;break;case"focusout":Z="blur",j=Y_;break;case"beforeblur":case"afterblur":j=Y_;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=VS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=d4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=C4;break;case PP:case IP:case MP:j=m4;break;case AP:j=I4;break;case"scroll":j=c4;break;case"wheel":j=A4;break;case"copy":case"cut":case"paste":j=y4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=US}var H=(t&4)!==0,le=!H&&e==="scroll",$=H?z!==null?z+"Capture":null:z;H=[];for(var B=w,X;B!==null;){X=B;var ue=X.stateNode;if(X.tag===5&&ue!==null&&(X=ue,$!==null&&(ue=bf(B,$),ue!=null&&H.push(If(B,ue,X)))),le)break;B=B.return}0<H.length&&(z=new j(z,Z,null,r,T),I.push({event:z,listeners:H}))}}if((t&7)===0){e:{if(z=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",z&&r!==h1&&(Z=r.relatedTarget||r.fromElement)&&(eu(Z)||Z[ps]))break e;if((j||z)&&(z=T.window===T?T:(z=T.ownerDocument)?z.defaultView||z.parentWindow:window,j?(Z=r.relatedTarget||r.toElement,j=w,Z=Z?eu(Z):null,Z!==null&&(le=vu(Z),Z!==le||Z.tag!==5&&Z.tag!==6)&&(Z=null)):(j=null,Z=w),j!==Z)){if(H=VS,ue="onMouseLeave",$="onMouseEnter",B="mouse",(e==="pointerout"||e==="pointerover")&&(H=US,ue="onPointerLeave",$="onPointerEnter",B="pointer"),le=j==null?z:Lc(j),X=Z==null?z:Lc(Z),z=new H(ue,B+"leave",j,r,T),z.target=le,z.relatedTarget=X,ue=null,eu(T)===w&&(H=new H($,B+"enter",Z,r,T),H.target=X,H.relatedTarget=le,ue=H),le=ue,j&&Z)t:{for(H=j,$=Z,B=0,X=H;X;X=fc(X))B++;for(X=0,ue=$;ue;ue=fc(ue))X++;for(;0<B-X;)H=fc(H),B--;for(;0<X-B;)$=fc($),X--;for(;B--;){if(H===$||$!==null&&H===$.alternate)break t;H=fc(H),$=fc($)}H=null}else H=null;j!==null&&QS(I,z,j,H,!1),Z!==null&&le!==null&&QS(I,le,Z,H,!0)}}e:{if(z=w?Lc(w):window,j=z.nodeName&&z.nodeName.toLowerCase(),j==="select"||j==="input"&&z.type==="file")var ce=$4;else if(WS(z))if(SP)ce=U4;else{ce=V4;var me=B4}else(j=z.nodeName)&&j.toLowerCase()==="input"&&(z.type==="checkbox"||z.type==="radio")&&(ce=N4);if(ce&&(ce=ce(e,w))){bP(I,ce,r,T);break e}me&&me(e,z,w),e==="focusout"&&(me=z._wrapperState)&&me.controlled&&z.type==="number"&&a1(z,"number",z.value)}switch(me=w?Lc(w):window,e){case"focusin":(WS(me)||me.contentEditable==="true")&&(Dc=me,_1=w,lf=null);break;case"focusout":lf=_1=Dc=null;break;case"mousedown":v1=!0;break;case"contextmenu":case"mouseup":case"dragend":v1=!1,KS(I,r,T);break;case"selectionchange":if(W4)break;case"keydown":case"keyup":KS(I,r,T)}var ge;if(nw)e:{switch(e){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else zc?xP(e,r)&&(xe="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(xe="onCompositionStart");xe&&(vP&&r.locale!=="ko"&&(zc||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&zc&&(ge=_P()):(Hs=T,ew="value"in Hs?Hs.value:Hs.textContent,zc=!0)),me=$g(w,xe),0<me.length&&(xe=new NS(xe,e,null,r,T),I.push({event:xe,listeners:me}),ge?xe.data=ge:(ge=wP(r),ge!==null&&(xe.data=ge)))),(ge=D4?R4(e,r):L4(e,r))&&(w=$g(w,"onBeforeInput"),0<w.length&&(T=new NS("onBeforeInput","beforeinput",null,r,T),I.push({event:T,listeners:w}),T.data=ge))}DP(I,t)})}function If(e,t,r){return{instance:e,listener:t,currentTarget:r}}function $g(e,t){for(var r=t+"Capture",o=[];e!==null;){var l=e,h=l.stateNode;l.tag===5&&h!==null&&(l=h,h=bf(e,r),h!=null&&o.unshift(If(e,h,l)),h=bf(e,t),h!=null&&o.push(If(e,h,l))),e=e.return}return o}function fc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function QS(e,t,r,o,l){for(var h=t._reactName,g=[];r!==null&&r!==o;){var u=r,b=u.alternate,w=u.stateNode;if(b!==null&&b===o)break;u.tag===5&&w!==null&&(u=w,l?(b=bf(r,h),b!=null&&g.unshift(If(r,b,u))):l||(b=bf(r,h),b!=null&&g.push(If(r,b,u)))),r=r.return}g.length!==0&&e.push({event:t,listeners:g})}var X4=/\r\n?/g,K4=/\u0000|\uFFFD/g;function eE(e){return(typeof e=="string"?e:""+e).replace(X4,`
`).replace(K4,"")}function km(e,t,r){if(t=eE(t),eE(e)!==t&&r)throw Error(Ge(425))}function Bg(){}var x1=null,w1=null;function b1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var S1=typeof setTimeout=="function"?setTimeout:void 0,Y4=typeof clearTimeout=="function"?clearTimeout:void 0,tE=typeof Promise=="function"?Promise:void 0,J4=typeof queueMicrotask=="function"?queueMicrotask:typeof tE!="undefined"?function(e){return tE.resolve(null).then(e).catch(Q4)}:S1;function Q4(e){setTimeout(function(){throw e})}function ov(e,t){var r=t,o=0;do{var l=r.nextSibling;if(e.removeChild(r),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(o===0){e.removeChild(l),kf(t);return}o--}else r!=="$"&&r!=="$?"&&r!=="$!"||o++;r=l}while(r);kf(t)}function ls(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function rE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var _h=Math.random().toString(36).slice(2),Da="__reactFiber$"+_h,Mf="__reactProps$"+_h,ps="__reactContainer$"+_h,E1="__reactEvents$"+_h,eR="__reactListeners$"+_h,tR="__reactHandles$"+_h;function eu(e){var t=e[Da];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ps]||r[Da]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=rE(e);e!==null;){if(r=e[Da])return r;e=rE(e)}return t}e=r,r=e.parentNode}return null}function Jf(e){return e=e[Da]||e[ps],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Lc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ge(33))}function Ly(e){return e[Mf]||null}var k1=[],Fc=-1;function fl(e){return{current:e}}function qr(e){0>Fc||(e.current=k1[Fc],k1[Fc]=null,Fc--)}function Vr(e,t){Fc++,k1[Fc]=e.current,e.current=t}var ll={},Ei=fl(ll),ro=fl(!1),hu=ll;function rh(e,t){var r=e.type.contextTypes;if(!r)return ll;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var l={},h;for(h in r)l[h]=t[h];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function no(e){return e=e.childContextTypes,e!=null}function Vg(){qr(ro),qr(Ei)}function nE(e,t,r){if(Ei.current!==ll)throw Error(Ge(168));Vr(Ei,t),Vr(ro,r)}function LP(e,t,r){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return r;o=o.getChildContext();for(var l in o)if(!(l in t))throw Error(Ge(108,BD(e)||"Unknown",l));return ln({},r,o)}function Ng(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ll,hu=Ei.current,Vr(Ei,e),Vr(ro,ro.current),!0}function iE(e,t,r){var o=e.stateNode;if(!o)throw Error(Ge(169));r?(e=LP(e,t,hu),o.__reactInternalMemoizedMergedChildContext=e,qr(ro),qr(Ei),Vr(Ei,e)):qr(ro),Vr(ro,r)}var ss=null,Fy=!1,av=!1;function FP(e){ss===null?ss=[e]:ss.push(e)}function rR(e){Fy=!0,FP(e)}function pl(){if(!av&&ss!==null){av=!0;var e=0,t=Er;try{var r=ss;for(Er=1;e<r.length;e++){var o=r[e];do o=o(!0);while(o!==null)}ss=null,Fy=!1}catch(l){throw ss!==null&&(ss=ss.slice(e+1)),sP(Kx,pl),l}finally{Er=t,av=!1}}return null}var nR=bs.ReactCurrentBatchConfig;function ha(e,t){if(e&&e.defaultProps){t=ln({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var Ug=fl(null),jg=null,Oc=null,ow=null;function aw(){ow=Oc=jg=null}function sw(e){var t=Ug.current;qr(Ug),e._currentValue=t}function T1(e,t,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===r)break;e=e.return}}function Xc(e,t){jg=e,ow=Oc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(to=!0),e.firstContext=null)}function Qo(e){var t=e._currentValue;if(ow!==e)if(e={context:e,memoizedValue:t,next:null},Oc===null){if(jg===null)throw Error(Ge(308));Oc=e,jg.dependencies={lanes:0,firstContext:e}}else Oc=Oc.next=e;return t}var pa=null,Gs=!1;function lw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OP(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function hs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rl(e,t){var r=e.updateQueue;r!==null&&(r=r.shared,TI(e)?(e=r.interleaved,e===null?(t.next=t,pa===null?pa=[r]:pa.push(r)):(t.next=e.next,e.next=t),r.interleaved=t):(e=r.pending,e===null?t.next=t:(t.next=e.next,e.next=t),r.pending=t))}function ig(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,Yx(e,r)}}function oE(e,t){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var l=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var g={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};h===null?l=h=g:h=h.next=g,r=r.next}while(r!==null);h===null?l=h=t:h=h.next=t}else l=h=t;r={baseState:o.baseState,firstBaseUpdate:l,lastBaseUpdate:h,shared:o.shared,effects:o.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Gg(e,t,r,o){var l=e.updateQueue;Gs=!1;var h=l.firstBaseUpdate,g=l.lastBaseUpdate,u=l.shared.pending;if(u!==null){l.shared.pending=null;var b=u,w=b.next;b.next=null,g===null?h=w:g.next=w,g=b;var T=e.alternate;T!==null&&(T=T.updateQueue,u=T.lastBaseUpdate,u!==g&&(u===null?T.firstBaseUpdate=w:u.next=w,T.lastBaseUpdate=b))}if(h!==null){var I=l.baseState;g=0,T=w=b=null,u=h;do{var z=u.lane,j=u.eventTime;if((o&z)===z){T!==null&&(T=T.next={eventTime:j,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var Z=e,H=u;switch(z=t,j=r,H.tag){case 1:if(Z=H.payload,typeof Z=="function"){I=Z.call(j,I,z);break e}I=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=H.payload,z=typeof Z=="function"?Z.call(j,I,z):Z,z==null)break e;I=ln({},I,z);break e;case 2:Gs=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,z=l.effects,z===null?l.effects=[u]:z.push(u))}else j={eventTime:j,lane:z,tag:u.tag,payload:u.payload,callback:u.callback,next:null},T===null?(w=T=j,b=I):T=T.next=j,g|=z;if(u=u.next,u===null){if(u=l.shared.pending,u===null)break;z=u,u=z.next,z.next=null,l.lastBaseUpdate=z,l.shared.pending=null}}while(1);if(T===null&&(b=I),l.baseState=b,l.firstBaseUpdate=w,l.lastBaseUpdate=T,t=l.shared.interleaved,t!==null){l=t;do g|=l.lane,l=l.next;while(l!==t)}else h===null&&(l.shared.lanes=0);pu|=g,e.lanes=g,e.memoizedState=I}}function aE(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],l=o.callback;if(l!==null){if(o.callback=null,o=r,typeof l!="function")throw Error(Ge(191,l));l.call(o)}}}var $P=new VC.Component().refs;function C1(e,t,r,o){t=e.memoizedState,r=r(o,t),r=r==null?t:ln({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Oy={isMounted:function(e){return(e=e._reactInternals)?vu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var o=Bi(),l=il(e),h=hs(o,l);h.payload=t,r!=null&&(h.callback=r),rl(e,h),t=Yo(e,l,o),t!==null&&ig(t,e,l)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var o=Bi(),l=il(e),h=hs(o,l);h.tag=1,h.payload=t,r!=null&&(h.callback=r),rl(e,h),t=Yo(e,l,o),t!==null&&ig(t,e,l)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Bi(),o=il(e),l=hs(r,o);l.tag=2,t!=null&&(l.callback=t),rl(e,l),t=Yo(e,o,r),t!==null&&ig(t,e,o)}};function sE(e,t,r,o,l,h,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,h,g):t.prototype&&t.prototype.isPureReactComponent?!Cf(r,o)||!Cf(l,h):!0}function BP(e,t,r){var o=!1,l=ll,h=t.contextType;return typeof h=="object"&&h!==null?h=Qo(h):(l=no(t)?hu:Ei.current,o=t.contextTypes,h=(o=o!=null)?rh(e,l):ll),t=new t(r,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Oy,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=h),t}function lE(e,t,r,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==e&&Oy.enqueueReplaceState(t,t.state,null)}function P1(e,t,r,o){var l=e.stateNode;l.props=r,l.state=e.memoizedState,l.refs=$P,lw(e);var h=t.contextType;typeof h=="object"&&h!==null?l.context=Qo(h):(h=no(t)?hu:Ei.current,l.context=rh(e,h)),l.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(C1(e,t,h,r),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Oy.enqueueReplaceState(l,l.state,null),Gg(e,r,l,o),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}var $c=[],Bc=0,Wg=null,qg=0,Zo=[],Ho=0,du=null,us=1,cs="";function ql(e,t){$c[Bc++]=qg,$c[Bc++]=Wg,Wg=e,qg=t}function VP(e,t,r){Zo[Ho++]=us,Zo[Ho++]=cs,Zo[Ho++]=du,du=e;var o=us;e=cs;var l=32-ga(o)-1;o&=~(1<<l),r+=1;var h=32-ga(t)+l;if(30<h){var g=l-l%5;h=(o&(1<<g)-1).toString(32),o>>=g,l-=g,us=1<<32-ga(t)+l|r<<l|o,cs=h+e}else us=1<<h|r<<l|o,cs=e}function uw(e){e.return!==null&&(ql(e,1),VP(e,1,0))}function cw(e){for(;e===Wg;)Wg=$c[--Bc],$c[Bc]=null,qg=$c[--Bc],$c[Bc]=null;for(;e===du;)du=Zo[--Ho],Zo[Ho]=null,cs=Zo[--Ho],Zo[Ho]=null,us=Zo[--Ho],Zo[Ho]=null}var ko=null,eo=null,Jr=!1,fa=null;function NP(e,t){var r=Xo(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function uE(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ko=e,eo=ls(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ko=e,eo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=du!==null?{id:us,overflow:cs}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Xo(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ko=e,eo=null,!0):!1;default:return!1}}function I1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function M1(e){if(Jr){var t=eo;if(t){var r=t;if(!uE(e,t)){if(I1(e))throw Error(Ge(418));t=ls(r.nextSibling);var o=ko;t&&uE(e,t)?NP(o,r):(e.flags=e.flags&-4097|2,Jr=!1,ko=e)}}else{if(I1(e))throw Error(Ge(418));e.flags=e.flags&-4097|2,Jr=!1,ko=e}}}function cE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ko=e}function Fd(e){if(e!==ko)return!1;if(!Jr)return cE(e),Jr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!b1(e.type,e.memoizedProps)),t&&(t=eo)){if(I1(e)){for(e=eo;e;)e=ls(e.nextSibling);throw Error(Ge(418))}for(;t;)NP(e,t),t=ls(t.nextSibling)}if(cE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ge(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){eo=ls(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}eo=null}}else eo=ko?ls(e.stateNode.nextSibling):null;return!0}function nh(){eo=ko=null,Jr=!1}function hw(e){fa===null?fa=[e]:fa.push(e)}function Od(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ge(309));var o=r.stateNode}if(!o)throw Error(Ge(147,e));var l=o,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(g){var u=l.refs;u===$P&&(u=l.refs={}),g===null?delete u[h]:u[h]=g},t._stringRef=h,t)}if(typeof e!="string")throw Error(Ge(284));if(!r._owner)throw Error(Ge(290,e))}return e}function Tm(e,t){throw e=Object.prototype.toString.call(t),Error(Ge(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function hE(e){var t=e._init;return t(e._payload)}function UP(e){function t($,B){if(e){var X=$.deletions;X===null?($.deletions=[B],$.flags|=16):X.push(B)}}function r($,B){if(!e)return null;for(;B!==null;)t($,B),B=B.sibling;return null}function o($,B){for($=new Map;B!==null;)B.key!==null?$.set(B.key,B):$.set(B.index,B),B=B.sibling;return $}function l($,B){return $=ul($,B),$.index=0,$.sibling=null,$}function h($,B,X){return $.index=X,e?(X=$.alternate,X!==null?(X=X.index,X<B?($.flags|=2,B):X):($.flags|=2,B)):($.flags|=1048576,B)}function g($){return e&&$.alternate===null&&($.flags|=2),$}function u($,B,X,ue){return B===null||B.tag!==6?(B=dv(X,$.mode,ue),B.return=$,B):(B=l(B,X),B.return=$,B)}function b($,B,X,ue){var ce=X.type;return ce===Ac?T($,B,X.props.children,ue,X.key):B!==null&&(B.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===js&&hE(ce)===B.type)?(ue=l(B,X.props),ue.ref=Od($,B,X),ue.return=$,ue):(ue=ug(X.type,X.key,X.props,null,$.mode,ue),ue.ref=Od($,B,X),ue.return=$,ue)}function w($,B,X,ue){return B===null||B.tag!==4||B.stateNode.containerInfo!==X.containerInfo||B.stateNode.implementation!==X.implementation?(B=fv(X,$.mode,ue),B.return=$,B):(B=l(B,X.children||[]),B.return=$,B)}function T($,B,X,ue,ce){return B===null||B.tag!==7?(B=ou(X,$.mode,ue,ce),B.return=$,B):(B=l(B,X),B.return=$,B)}function I($,B,X){if(typeof B=="string"&&B!==""||typeof B=="number")return B=dv(""+B,$.mode,X),B.return=$,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case gm:return X=ug(B.type,B.key,B.props,null,$.mode,X),X.ref=Od($,null,B),X.return=$,X;case Mc:return B=fv(B,$.mode,X),B.return=$,B;case js:var ue=B._init;return I($,ue(B._payload),X)}if(Zd(B)||Ad(B))return B=ou(B,$.mode,X,null),B.return=$,B;Tm($,B)}return null}function z($,B,X,ue){var ce=B!==null?B.key:null;if(typeof X=="string"&&X!==""||typeof X=="number")return ce!==null?null:u($,B,""+X,ue);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case gm:return X.key===ce?b($,B,X,ue):null;case Mc:return X.key===ce?w($,B,X,ue):null;case js:return ce=X._init,z($,B,ce(X._payload),ue)}if(Zd(X)||Ad(X))return ce!==null?null:T($,B,X,ue,null);Tm($,X)}return null}function j($,B,X,ue,ce){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return $=$.get(X)||null,u(B,$,""+ue,ce);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case gm:return $=$.get(ue.key===null?X:ue.key)||null,b(B,$,ue,ce);case Mc:return $=$.get(ue.key===null?X:ue.key)||null,w(B,$,ue,ce);case js:var me=ue._init;return j($,B,X,me(ue._payload),ce)}if(Zd(ue)||Ad(ue))return $=$.get(X)||null,T(B,$,ue,ce,null);Tm(B,ue)}return null}function Z($,B,X,ue){for(var ce=null,me=null,ge=B,xe=B=0,je=null;ge!==null&&xe<X.length;xe++){ge.index>xe?(je=ge,ge=null):je=ge.sibling;var ke=z($,ge,X[xe],ue);if(ke===null){ge===null&&(ge=je);break}e&&ge&&ke.alternate===null&&t($,ge),B=h(ke,B,xe),me===null?ce=ke:me.sibling=ke,me=ke,ge=je}if(xe===X.length)return r($,ge),Jr&&ql($,xe),ce;if(ge===null){for(;xe<X.length;xe++)ge=I($,X[xe],ue),ge!==null&&(B=h(ge,B,xe),me===null?ce=ge:me.sibling=ge,me=ge);return Jr&&ql($,xe),ce}for(ge=o($,ge);xe<X.length;xe++)je=j(ge,$,xe,X[xe],ue),je!==null&&(e&&je.alternate!==null&&ge.delete(je.key===null?xe:je.key),B=h(je,B,xe),me===null?ce=je:me.sibling=je,me=je);return e&&ge.forEach(function(Be){return t($,Be)}),Jr&&ql($,xe),ce}function H($,B,X,ue){var ce=Ad(X);if(typeof ce!="function")throw Error(Ge(150));if(X=ce.call(X),X==null)throw Error(Ge(151));for(var me=ce=null,ge=B,xe=B=0,je=null,ke=X.next();ge!==null&&!ke.done;xe++,ke=X.next()){ge.index>xe?(je=ge,ge=null):je=ge.sibling;var Be=z($,ge,ke.value,ue);if(Be===null){ge===null&&(ge=je);break}e&&ge&&Be.alternate===null&&t($,ge),B=h(Be,B,xe),me===null?ce=Be:me.sibling=Be,me=Be,ge=je}if(ke.done)return r($,ge),Jr&&ql($,xe),ce;if(ge===null){for(;!ke.done;xe++,ke=X.next())ke=I($,ke.value,ue),ke!==null&&(B=h(ke,B,xe),me===null?ce=ke:me.sibling=ke,me=ke);return Jr&&ql($,xe),ce}for(ge=o($,ge);!ke.done;xe++,ke=X.next())ke=j(ge,$,xe,ke.value,ue),ke!==null&&(e&&ke.alternate!==null&&ge.delete(ke.key===null?xe:ke.key),B=h(ke,B,xe),me===null?ce=ke:me.sibling=ke,me=ke);return e&&ge.forEach(function(zt){return t($,zt)}),Jr&&ql($,xe),ce}function le($,B,X,ue){if(typeof X=="object"&&X!==null&&X.type===Ac&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case gm:e:{for(var ce=X.key,me=B;me!==null;){if(me.key===ce){if(ce=X.type,ce===Ac){if(me.tag===7){r($,me.sibling),B=l(me,X.props.children),B.return=$,$=B;break e}}else if(me.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===js&&hE(ce)===me.type){r($,me.sibling),B=l(me,X.props),B.ref=Od($,me,X),B.return=$,$=B;break e}r($,me);break}else t($,me);me=me.sibling}X.type===Ac?(B=ou(X.props.children,$.mode,ue,X.key),B.return=$,$=B):(ue=ug(X.type,X.key,X.props,null,$.mode,ue),ue.ref=Od($,B,X),ue.return=$,$=ue)}return g($);case Mc:e:{for(me=X.key;B!==null;){if(B.key===me)if(B.tag===4&&B.stateNode.containerInfo===X.containerInfo&&B.stateNode.implementation===X.implementation){r($,B.sibling),B=l(B,X.children||[]),B.return=$,$=B;break e}else{r($,B);break}else t($,B);B=B.sibling}B=fv(X,$.mode,ue),B.return=$,$=B}return g($);case js:return me=X._init,le($,B,me(X._payload),ue)}if(Zd(X))return Z($,B,X,ue);if(Ad(X))return H($,B,X,ue);Tm($,X)}return typeof X=="string"&&X!==""||typeof X=="number"?(X=""+X,B!==null&&B.tag===6?(r($,B.sibling),B=l(B,X),B.return=$,$=B):(r($,B),B=dv(X,$.mode,ue),B.return=$,$=B),g($)):r($,B)}return le}var ih=UP(!0),jP=UP(!1),Qf={},Oa=fl(Qf),Af=fl(Qf),zf=fl(Qf);function tu(e){if(e===Qf)throw Error(Ge(174));return e}function dw(e,t){switch(Vr(zf,t),Vr(Af,e),Vr(Oa,Qf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:l1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=l1(t,e)}qr(Oa),Vr(Oa,t)}function oh(){qr(Oa),qr(Af),qr(zf)}function GP(e){tu(zf.current);var t=tu(Oa.current),r=l1(t,e.type);t!==r&&(Vr(Af,e),Vr(Oa,r))}function fw(e){Af.current===e&&(qr(Oa),qr(Af))}var an=fl(0);function Zg(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sv=[];function pw(){for(var e=0;e<sv.length;e++)sv[e]._workInProgressVersionPrimary=null;sv.length=0}var og=bs.ReactCurrentDispatcher,lv=bs.ReactCurrentBatchConfig,fu=0,sn=null,Dn=null,Zn=null,Hg=!1,uf=!1,Df=0,iR=0;function _i(){throw Error(Ge(321))}function mw(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ya(e[r],t[r]))return!1;return!0}function gw(e,t,r,o,l,h){if(fu=h,sn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,og.current=e===null||e.memoizedState===null?lR:uR,e=r(o,l),uf){h=0;do{if(uf=!1,Df=0,25<=h)throw Error(Ge(301));h+=1,Zn=Dn=null,t.updateQueue=null,og.current=cR,e=r(o,l)}while(uf)}if(og.current=Xg,t=Dn!==null&&Dn.next!==null,fu=0,Zn=Dn=sn=null,Hg=!1,t)throw Error(Ge(300));return e}function yw(){var e=Df!==0;return Df=0,e}function Ma(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zn===null?sn.memoizedState=Zn=e:Zn=Zn.next=e,Zn}function ea(){if(Dn===null){var e=sn.alternate;e=e!==null?e.memoizedState:null}else e=Dn.next;var t=Zn===null?sn.memoizedState:Zn.next;if(t!==null)Zn=t,Dn=e;else{if(e===null)throw Error(Ge(310));Dn=e,e={memoizedState:Dn.memoizedState,baseState:Dn.baseState,baseQueue:Dn.baseQueue,queue:Dn.queue,next:null},Zn===null?sn.memoizedState=Zn=e:Zn=Zn.next=e}return Zn}function Rf(e,t){return typeof t=="function"?t(e):t}function uv(e){var t=ea(),r=t.queue;if(r===null)throw Error(Ge(311));r.lastRenderedReducer=e;var o=Dn,l=o.baseQueue,h=r.pending;if(h!==null){if(l!==null){var g=l.next;l.next=h.next,h.next=g}o.baseQueue=l=h,r.pending=null}if(l!==null){h=l.next,o=o.baseState;var u=g=null,b=null,w=h;do{var T=w.lane;if((fu&T)===T)b!==null&&(b=b.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),o=w.hasEagerState?w.eagerState:e(o,w.action);else{var I={lane:T,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};b===null?(u=b=I,g=o):b=b.next=I,sn.lanes|=T,pu|=T}w=w.next}while(w!==null&&w!==h);b===null?g=o:b.next=u,ya(o,t.memoizedState)||(to=!0),t.memoizedState=o,t.baseState=g,t.baseQueue=b,r.lastRenderedState=o}if(e=r.interleaved,e!==null){l=e;do h=l.lane,sn.lanes|=h,pu|=h,l=l.next;while(l!==e)}else l===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function cv(e){var t=ea(),r=t.queue;if(r===null)throw Error(Ge(311));r.lastRenderedReducer=e;var o=r.dispatch,l=r.pending,h=t.memoizedState;if(l!==null){r.pending=null;var g=l=l.next;do h=e(h,g.action),g=g.next;while(g!==l);ya(h,t.memoizedState)||(to=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),r.lastRenderedState=h}return[h,o]}function WP(){}function qP(e,t){var r=sn,o=ea(),l=t(),h=!ya(o.memoizedState,l);if(h&&(o.memoizedState=l,to=!0),o=o.queue,_w(XP.bind(null,r,o,e),[e]),o.getSnapshot!==t||h||Zn!==null&&Zn.memoizedState.tag&1){if(r.flags|=2048,Lf(9,HP.bind(null,r,o,l,t),void 0,null),Fn===null)throw Error(Ge(349));(fu&30)!==0||ZP(r,t,l)}return l}function ZP(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=sn.updateQueue,t===null?(t={lastEffect:null,stores:null},sn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function HP(e,t,r,o){t.value=r,t.getSnapshot=o,KP(t)&&Yo(e,1,-1)}function XP(e,t,r){return r(function(){KP(t)&&Yo(e,1,-1)})}function KP(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ya(e,r)}catch{return!0}}function dE(e){var t=Ma();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rf,lastRenderedState:e},t.queue=e,e=e.dispatch=sR.bind(null,sn,e),[t.memoizedState,e]}function Lf(e,t,r,o){return e={tag:e,create:t,destroy:r,deps:o,next:null},t=sn.updateQueue,t===null?(t={lastEffect:null,stores:null},sn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,t.lastEffect=e)),e}function YP(){return ea().memoizedState}function ag(e,t,r,o){var l=Ma();sn.flags|=e,l.memoizedState=Lf(1|t,r,void 0,o===void 0?null:o)}function $y(e,t,r,o){var l=ea();o=o===void 0?null:o;var h=void 0;if(Dn!==null){var g=Dn.memoizedState;if(h=g.destroy,o!==null&&mw(o,g.deps)){l.memoizedState=Lf(t,r,h,o);return}}sn.flags|=e,l.memoizedState=Lf(1|t,r,h,o)}function fE(e,t){return ag(8390656,8,e,t)}function _w(e,t){return $y(2048,8,e,t)}function JP(e,t){return $y(4,2,e,t)}function QP(e,t){return $y(4,4,e,t)}function eI(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function tI(e,t,r){return r=r!=null?r.concat([e]):null,$y(4,4,eI.bind(null,t,e),r)}function vw(){}function rI(e,t){var r=ea();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&mw(t,o[1])?o[0]:(r.memoizedState=[e,t],e)}function nI(e,t){var r=ea();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&mw(t,o[1])?o[0]:(e=e(),r.memoizedState=[e,t],e)}function iI(e,t,r){return(fu&21)===0?(e.baseState&&(e.baseState=!1,to=!0),e.memoizedState=r):(ya(r,t)||(r=cP(),sn.lanes|=r,pu|=r,e.baseState=!0),t)}function oR(e,t){var r=Er;Er=r!==0&&4>r?r:4,e(!0);var o=lv.transition;lv.transition={};try{e(!1),t()}finally{Er=r,lv.transition=o}}function oI(){return ea().memoizedState}function aR(e,t,r){var o=il(e);r={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null},aI(e)?sI(t,r):(lI(e,t,r),r=Bi(),e=Yo(e,o,r),e!==null&&uI(e,t,o))}function sR(e,t,r){var o=il(e),l={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null};if(aI(e))sI(t,l);else{lI(e,t,l);var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var g=t.lastRenderedState,u=h(g,r);if(l.hasEagerState=!0,l.eagerState=u,ya(u,g))return}catch{}finally{}r=Bi(),e=Yo(e,o,r),e!==null&&uI(e,t,o)}}function aI(e){var t=e.alternate;return e===sn||t!==null&&t===sn}function sI(e,t){uf=Hg=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function lI(e,t,r){TI(e)?(e=t.interleaved,e===null?(r.next=r,pa===null?pa=[t]:pa.push(t)):(r.next=e.next,e.next=r),t.interleaved=r):(e=t.pending,e===null?r.next=r:(r.next=e.next,e.next=r),t.pending=r)}function uI(e,t,r){if((r&4194240)!==0){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,Yx(e,r)}}var Xg={readContext:Qo,useCallback:_i,useContext:_i,useEffect:_i,useImperativeHandle:_i,useInsertionEffect:_i,useLayoutEffect:_i,useMemo:_i,useReducer:_i,useRef:_i,useState:_i,useDebugValue:_i,useDeferredValue:_i,useTransition:_i,useMutableSource:_i,useSyncExternalStore:_i,useId:_i,unstable_isNewReconciler:!1},lR={readContext:Qo,useCallback:function(e,t){return Ma().memoizedState=[e,t===void 0?null:t],e},useContext:Qo,useEffect:fE,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ag(4194308,4,eI.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ag(4194308,4,e,t)},useInsertionEffect:function(e,t){return ag(4,2,e,t)},useMemo:function(e,t){var r=Ma();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var o=Ma();return t=r!==void 0?r(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=aR.bind(null,sn,e),[o.memoizedState,e]},useRef:function(e){var t=Ma();return e={current:e},t.memoizedState=e},useState:dE,useDebugValue:vw,useDeferredValue:function(e){return Ma().memoizedState=e},useTransition:function(){var e=dE(!1),t=e[0];return e=oR.bind(null,e[1]),Ma().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var o=sn,l=Ma();if(Jr){if(r===void 0)throw Error(Ge(407));r=r()}else{if(r=t(),Fn===null)throw Error(Ge(349));(fu&30)!==0||ZP(o,t,r)}l.memoizedState=r;var h={value:r,getSnapshot:t};return l.queue=h,fE(XP.bind(null,o,h,e),[e]),o.flags|=2048,Lf(9,HP.bind(null,o,h,r,t),void 0,null),r},useId:function(){var e=Ma(),t=Fn.identifierPrefix;if(Jr){var r=cs,o=us;r=(o&~(1<<32-ga(o)-1)).toString(32)+r,t=":"+t+"R"+r,r=Df++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=iR++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},uR={readContext:Qo,useCallback:rI,useContext:Qo,useEffect:_w,useImperativeHandle:tI,useInsertionEffect:JP,useLayoutEffect:QP,useMemo:nI,useReducer:uv,useRef:YP,useState:function(){return uv(Rf)},useDebugValue:vw,useDeferredValue:function(e){var t=ea();return iI(t,Dn.memoizedState,e)},useTransition:function(){var e=uv(Rf)[0],t=ea().memoizedState;return[e,t]},useMutableSource:WP,useSyncExternalStore:qP,useId:oI,unstable_isNewReconciler:!1},cR={readContext:Qo,useCallback:rI,useContext:Qo,useEffect:_w,useImperativeHandle:tI,useInsertionEffect:JP,useLayoutEffect:QP,useMemo:nI,useReducer:cv,useRef:YP,useState:function(){return cv(Rf)},useDebugValue:vw,useDeferredValue:function(e){var t=ea();return Dn===null?t.memoizedState=e:iI(t,Dn.memoizedState,e)},useTransition:function(){var e=cv(Rf)[0],t=ea().memoizedState;return[e,t]},useMutableSource:WP,useSyncExternalStore:qP,useId:oI,unstable_isNewReconciler:!1};function xw(e,t){try{var r="",o=t;do r+=$D(o),o=o.return;while(o);var l=r}catch(h){l=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:l}}function A1(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var hR=typeof WeakMap=="function"?WeakMap:Map;function cI(e,t,r){r=hs(-1,r),r.tag=3,r.payload={element:null};var o=t.value;return r.callback=function(){Yg||(Yg=!0,V1=o),A1(e,t)},r}function hI(e,t,r){r=hs(-1,r),r.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var l=t.value;r.payload=function(){return o(l)},r.callback=function(){A1(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(r.callback=function(){A1(e,t),typeof o!="function"&&(nl===null?nl=new Set([this]):nl.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),r}function pE(e,t,r){var o=e.pingCache;if(o===null){o=e.pingCache=new hR;var l=new Set;o.set(t,l)}else l=o.get(t),l===void 0&&(l=new Set,o.set(t,l));l.has(r)||(l.add(r),e=ER.bind(null,e,t,r),t.then(e,e))}function mE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function gE(e,t,r,o,l){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=hs(-1,1),t.tag=2,rl(r,t))),r.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var dI,z1,fI,pI;dI=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};z1=function(){};fI=function(e,t,r,o){var l=e.memoizedProps;if(l!==o){e=t.stateNode,tu(Oa.current);var h=null;switch(r){case"input":l=i1(e,l),o=i1(e,o),h=[];break;case"select":l=ln({},l,{value:void 0}),o=ln({},o,{value:void 0}),h=[];break;case"textarea":l=s1(e,l),o=s1(e,o),h=[];break;default:typeof l.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Bg)}u1(r,o);var g;r=null;for(w in l)if(!o.hasOwnProperty(w)&&l.hasOwnProperty(w)&&l[w]!=null)if(w==="style"){var u=l[w];for(g in u)u.hasOwnProperty(g)&&(r||(r={}),r[g]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(xf.hasOwnProperty(w)?h||(h=[]):(h=h||[]).push(w,null));for(w in o){var b=o[w];if(u=l!=null?l[w]:void 0,o.hasOwnProperty(w)&&b!==u&&(b!=null||u!=null))if(w==="style")if(u){for(g in u)!u.hasOwnProperty(g)||b&&b.hasOwnProperty(g)||(r||(r={}),r[g]="");for(g in b)b.hasOwnProperty(g)&&u[g]!==b[g]&&(r||(r={}),r[g]=b[g])}else r||(h||(h=[]),h.push(w,r)),r=b;else w==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,u=u?u.__html:void 0,b!=null&&u!==b&&(h=h||[]).push(w,b)):w==="children"?typeof b!="string"&&typeof b!="number"||(h=h||[]).push(w,""+b):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(xf.hasOwnProperty(w)?(b!=null&&w==="onScroll"&&jr("scroll",e),h||u===b||(h=[])):(h=h||[]).push(w,b))}r&&(h=h||[]).push("style",r);var w=h;(t.updateQueue=w)&&(t.flags|=4)}};pI=function(e,t,r,o){r!==o&&(t.flags|=4)};function $d(e,t){if(!Jr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function vi(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(t)for(var l=e.child;l!==null;)r|=l.lanes|l.childLanes,o|=l.subtreeFlags&14680064,o|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)r|=l.lanes|l.childLanes,o|=l.subtreeFlags,o|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=o,e.childLanes=r,t}function dR(e,t,r){var o=t.pendingProps;switch(cw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vi(t),null;case 1:return no(t.type)&&Vg(),vi(t),null;case 3:return o=t.stateNode,oh(),qr(ro),qr(Ei),pw(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Fd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,fa!==null&&(j1(fa),fa=null))),z1(e,t),vi(t),null;case 5:fw(t);var l=tu(zf.current);if(r=t.type,e!==null&&t.stateNode!=null)fI(e,t,r,o,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(Ge(166));return vi(t),null}if(e=tu(Oa.current),Fd(t)){o=t.stateNode,r=t.type;var h=t.memoizedProps;switch(o[Da]=t,o[Mf]=h,e=(t.mode&1)!==0,r){case"dialog":jr("cancel",o),jr("close",o);break;case"iframe":case"object":case"embed":jr("load",o);break;case"video":case"audio":for(l=0;l<Xd.length;l++)jr(Xd[l],o);break;case"source":jr("error",o);break;case"img":case"image":case"link":jr("error",o),jr("load",o);break;case"details":jr("toggle",o);break;case"input":MS(o,h),jr("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!h.multiple},jr("invalid",o);break;case"textarea":zS(o,h),jr("invalid",o)}u1(r,h),l=null;for(var g in h)if(h.hasOwnProperty(g)){var u=h[g];g==="children"?typeof u=="string"?o.textContent!==u&&(h.suppressHydrationWarning!==!0&&km(o.textContent,u,e),l=["children",u]):typeof u=="number"&&o.textContent!==""+u&&(h.suppressHydrationWarning!==!0&&km(o.textContent,u,e),l=["children",""+u]):xf.hasOwnProperty(g)&&u!=null&&g==="onScroll"&&jr("scroll",o)}switch(r){case"input":ym(o),AS(o,h,!0);break;case"textarea":ym(o),DS(o);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(o.onclick=Bg)}o=l,t.updateQueue=o,o!==null&&(t.flags|=4)}else{g=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=XC(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=g.createElement(r,{is:o.is}):(e=g.createElement(r),r==="select"&&(g=e,o.multiple?g.multiple=!0:o.size&&(g.size=o.size))):e=g.createElementNS(e,r),e[Da]=t,e[Mf]=o,dI(e,t,!1,!1),t.stateNode=e;e:{switch(g=c1(r,o),r){case"dialog":jr("cancel",e),jr("close",e),l=o;break;case"iframe":case"object":case"embed":jr("load",e),l=o;break;case"video":case"audio":for(l=0;l<Xd.length;l++)jr(Xd[l],e);l=o;break;case"source":jr("error",e),l=o;break;case"img":case"image":case"link":jr("error",e),jr("load",e),l=o;break;case"details":jr("toggle",e),l=o;break;case"input":MS(e,o),l=i1(e,o),jr("invalid",e);break;case"option":l=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},l=ln({},o,{value:void 0}),jr("invalid",e);break;case"textarea":zS(e,o),l=s1(e,o),jr("invalid",e);break;default:l=o}u1(r,l),u=l;for(h in u)if(u.hasOwnProperty(h)){var b=u[h];h==="style"?JC(e,b):h==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&KC(e,b)):h==="children"?typeof b=="string"?(r!=="textarea"||b!=="")&&wf(e,b):typeof b=="number"&&wf(e,""+b):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(xf.hasOwnProperty(h)?b!=null&&h==="onScroll"&&jr("scroll",e):b!=null&&Wx(e,h,b,g))}switch(r){case"input":ym(e),AS(e,o,!1);break;case"textarea":ym(e),DS(e);break;case"option":o.value!=null&&e.setAttribute("value",""+sl(o.value));break;case"select":e.multiple=!!o.multiple,h=o.value,h!=null?Wc(e,!!o.multiple,h,!1):o.defaultValue!=null&&Wc(e,!!o.multiple,o.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Bg)}switch(r){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vi(t),null;case 6:if(e&&t.stateNode!=null)pI(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(Ge(166));if(r=tu(zf.current),tu(Oa.current),Fd(t)){if(o=t.stateNode,r=t.memoizedProps,o[Da]=t,(h=o.nodeValue!==r)&&(e=ko,e!==null))switch(e.tag){case 3:km(o.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&km(o.nodeValue,r,(e.mode&1)!==0)}h&&(t.flags|=4)}else o=(r.nodeType===9?r:r.ownerDocument).createTextNode(o),o[Da]=t,t.stateNode=o}return vi(t),null;case 13:if(qr(an),o=t.memoizedState,Jr&&eo!==null&&(t.mode&1)!==0&&(t.flags&128)===0){for(o=eo;o;)o=ls(o.nextSibling);return nh(),t.flags|=98560,t}if(o!==null&&o.dehydrated!==null){if(o=Fd(t),e===null){if(!o)throw Error(Ge(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Ge(317));o[Da]=t}else nh(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;return vi(t),null}return fa!==null&&(j1(fa),fa=null),(t.flags&128)!==0?(t.lanes=r,t):(o=o!==null,r=!1,e===null?Fd(t):r=e.memoizedState!==null,o!==r&&o&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(an.current&1)!==0?Rn===0&&(Rn=3):Tw())),t.updateQueue!==null&&(t.flags|=4),vi(t),null);case 4:return oh(),z1(e,t),e===null&&Pf(t.stateNode.containerInfo),vi(t),null;case 10:return sw(t.type._context),vi(t),null;case 17:return no(t.type)&&Vg(),vi(t),null;case 19:if(qr(an),h=t.memoizedState,h===null)return vi(t),null;if(o=(t.flags&128)!==0,g=h.rendering,g===null)if(o)$d(h,!1);else{if(Rn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=Zg(e),g!==null){for(t.flags|=128,$d(h,!1),o=g.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=r,r=t.child;r!==null;)h=r,e=o,h.flags&=14680066,g=h.alternate,g===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=g.childLanes,h.lanes=g.lanes,h.child=g.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=g.memoizedProps,h.memoizedState=g.memoizedState,h.updateQueue=g.updateQueue,h.type=g.type,e=g.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Vr(an,an.current&1|2),t.child}e=e.sibling}h.tail!==null&&wn()>ah&&(t.flags|=128,o=!0,$d(h,!1),t.lanes=4194304)}else{if(!o)if(e=Zg(g),e!==null){if(t.flags|=128,o=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),$d(h,!0),h.tail===null&&h.tailMode==="hidden"&&!g.alternate&&!Jr)return vi(t),null}else 2*wn()-h.renderingStartTime>ah&&r!==1073741824&&(t.flags|=128,o=!0,$d(h,!1),t.lanes=4194304);h.isBackwards?(g.sibling=t.child,t.child=g):(r=h.last,r!==null?r.sibling=g:t.child=g,h.last=g)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=wn(),t.sibling=null,r=an.current,Vr(an,o?r&1|2:r&1),t):(vi(t),null);case 22:case 23:return kw(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&(t.mode&1)!==0?(mo&1073741824)!==0&&(vi(t),t.subtreeFlags&6&&(t.flags|=8192)):vi(t),null;case 24:return null;case 25:return null}throw Error(Ge(156,t.tag))}var fR=bs.ReactCurrentOwner,to=!1;function Fi(e,t,r,o){t.child=e===null?jP(t,null,r,o):ih(t,e.child,r,o)}function yE(e,t,r,o,l){r=r.render;var h=t.ref;return Xc(t,l),o=gw(e,t,r,o,h,l),r=yw(),e!==null&&!to?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,ms(e,t,l)):(Jr&&r&&uw(t),t.flags|=1,Fi(e,t,o,l),t.child)}function _E(e,t,r,o,l){if(e===null){var h=r.type;return typeof h=="function"&&!Cw(h)&&h.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=h,mI(e,t,h,o,l)):(e=ug(r.type,null,o,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,(e.lanes&l)===0){var g=h.memoizedProps;if(r=r.compare,r=r!==null?r:Cf,r(g,o)&&e.ref===t.ref)return ms(e,t,l)}return t.flags|=1,e=ul(h,o),e.ref=t.ref,e.return=t,t.child=e}function mI(e,t,r,o,l){if(e!==null){var h=e.memoizedProps;if(Cf(h,o)&&e.ref===t.ref)if(to=!1,t.pendingProps=o=h,(e.lanes&l)!==0)(e.flags&131072)!==0&&(to=!0);else return t.lanes=e.lanes,ms(e,t,l)}return D1(e,t,r,o,l)}function gI(e,t,r){var o=t.pendingProps,l=o.children,h=e!==null?e.memoizedState:null;if(o.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vr(Nc,mo),mo|=r;else if((r&1073741824)!==0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=h!==null?h.baseLanes:r,Vr(Nc,mo),mo|=o;else return e=h!==null?h.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Vr(Nc,mo),mo|=e,null;else h!==null?(o=h.baseLanes|r,t.memoizedState=null):o=r,Vr(Nc,mo),mo|=o;return Fi(e,t,l,r),t.child}function yI(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function D1(e,t,r,o,l){var h=no(r)?hu:Ei.current;return h=rh(t,h),Xc(t,l),r=gw(e,t,r,o,h,l),o=yw(),e!==null&&!to?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,ms(e,t,l)):(Jr&&o&&uw(t),t.flags|=1,Fi(e,t,r,l),t.child)}function vE(e,t,r,o,l){if(no(r)){var h=!0;Ng(t)}else h=!1;if(Xc(t,l),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),BP(t,r,o),P1(t,r,o,l),o=!0;else if(e===null){var g=t.stateNode,u=t.memoizedProps;g.props=u;var b=g.context,w=r.contextType;typeof w=="object"&&w!==null?w=Qo(w):(w=no(r)?hu:Ei.current,w=rh(t,w));var T=r.getDerivedStateFromProps,I=typeof T=="function"||typeof g.getSnapshotBeforeUpdate=="function";I||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(u!==o||b!==w)&&lE(t,g,o,w),Gs=!1;var z=t.memoizedState;g.state=z,Gg(t,o,g,l),b=t.memoizedState,u!==o||z!==b||ro.current||Gs?(typeof T=="function"&&(C1(t,r,T,o),b=t.memoizedState),(u=Gs||sE(t,r,u,o,z,b,w))?(I||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=b),g.props=o,g.state=b,g.context=w,o=u):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{g=t.stateNode,OP(e,t),u=t.memoizedProps,w=t.type===t.elementType?u:ha(t.type,u),g.props=w,I=t.pendingProps,z=g.context,b=r.contextType,typeof b=="object"&&b!==null?b=Qo(b):(b=no(r)?hu:Ei.current,b=rh(t,b));var j=r.getDerivedStateFromProps;(T=typeof j=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(u!==I||z!==b)&&lE(t,g,o,b),Gs=!1,z=t.memoizedState,g.state=z,Gg(t,o,g,l);var Z=t.memoizedState;u!==I||z!==Z||ro.current||Gs?(typeof j=="function"&&(C1(t,r,j,o),Z=t.memoizedState),(w=Gs||sE(t,r,w,o,z,Z,b)||!1)?(T||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,Z,b),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,Z,b)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||u===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=Z),g.props=o,g.state=Z,g.context=b,o=w):(typeof g.componentDidUpdate!="function"||u===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),o=!1)}return R1(e,t,r,o,h,l)}function R1(e,t,r,o,l,h){yI(e,t);var g=(t.flags&128)!==0;if(!o&&!g)return l&&iE(t,r,!1),ms(e,t,h);o=t.stateNode,fR.current=t;var u=g&&typeof r.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&g?(t.child=ih(t,e.child,null,h),t.child=ih(t,null,u,h)):Fi(e,t,u,h),t.memoizedState=o.state,l&&iE(t,r,!0),t.child}function _I(e){var t=e.stateNode;t.pendingContext?nE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nE(e,t.context,!1),dw(e,t.containerInfo)}function xE(e,t,r,o,l){return nh(),hw(l),t.flags|=256,Fi(e,t,r,o),t.child}var Cm={dehydrated:null,treeContext:null,retryLane:0};function Pm(e){return{baseLanes:e,cachePool:null,transitions:null}}function wE(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function vI(e,t,r){var o=t.pendingProps,l=an.current,h=!1,g=(t.flags&128)!==0,u;if((u=g)||(u=e!==null&&e.memoizedState===null?!1:(l&2)!==0),u?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Vr(an,l&1),e===null)return M1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,h?(o=t.mode,h=t.child,l={mode:"hidden",children:l},(o&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=l):h=ey(l,o,0,null),e=ou(e,o,r,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=Pm(r),t.memoizedState=Cm,e):L1(t,l));if(l=e.memoizedState,l!==null){if(u=l.dehydrated,u!==null){if(g)return t.flags&256?(t.flags&=-257,Im(e,t,r,Error(Ge(422)))):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=o.fallback,l=t.mode,o=ey({mode:"visible",children:o.children},l,0,null),h=ou(h,l,r,null),h.flags|=2,o.return=t,h.return=t,o.sibling=h,t.child=o,(t.mode&1)!==0&&ih(t,e.child,null,r),t.child.memoizedState=Pm(r),t.memoizedState=Cm,h);if((t.mode&1)===0)t=Im(e,t,r,null);else if(u.data==="$!")t=Im(e,t,r,Error(Ge(419)));else if(o=(r&e.childLanes)!==0,to||o){if(o=Fn,o!==null){switch(r&-r){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}o=(h&(o.suspendedLanes|r))!==0?0:h,o!==0&&o!==l.retryLane&&(l.retryLane=o,Yo(e,o,-1))}Tw(),t=Im(e,t,r,Error(Ge(421)))}else u.data==="$?"?(t.flags|=128,t.child=e.child,t=kR.bind(null,e),u._reactRetry=t,t=null):(r=l.treeContext,eo=ls(u.nextSibling),ko=t,Jr=!0,fa=null,r!==null&&(Zo[Ho++]=us,Zo[Ho++]=cs,Zo[Ho++]=du,us=r.id,cs=r.overflow,du=t),t=L1(t,t.pendingProps.children),t.flags|=4096);return t}return h?(o=SE(e,t,o.children,o.fallback,r),h=t.child,l=e.child.memoizedState,h.memoizedState=l===null?Pm(r):wE(l,r),h.childLanes=e.childLanes&~r,t.memoizedState=Cm,o):(r=bE(e,t,o.children,r),t.memoizedState=null,r)}return h?(o=SE(e,t,o.children,o.fallback,r),h=t.child,l=e.child.memoizedState,h.memoizedState=l===null?Pm(r):wE(l,r),h.childLanes=e.childLanes&~r,t.memoizedState=Cm,o):(r=bE(e,t,o.children,r),t.memoizedState=null,r)}function L1(e,t){return t=ey({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function bE(e,t,r,o){var l=e.child;return e=l.sibling,r=ul(l,{mode:"visible",children:r}),(t.mode&1)===0&&(r.lanes=o),r.return=t,r.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=r}function SE(e,t,r,o,l){var h=t.mode;e=e.child;var g=e.sibling,u={mode:"hidden",children:r};return(h&1)===0&&t.child!==e?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=ul(e,u),r.subtreeFlags=e.subtreeFlags&14680064),g!==null?o=ul(g,o):(o=ou(o,h,l,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,o}function Im(e,t,r,o){return o!==null&&hw(o),ih(t,e.child,null,r),e=L1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function EE(e,t,r){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),T1(e.return,t,r)}function hv(e,t,r,o,l){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:l}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=o,h.tail=r,h.tailMode=l)}function xI(e,t,r){var o=t.pendingProps,l=o.revealOrder,h=o.tail;if(Fi(e,t,o.children,r),o=an.current,(o&2)!==0)o=o&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&EE(e,r,t);else if(e.tag===19)EE(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(Vr(an,o),(t.mode&1)===0)t.memoizedState=null;else switch(l){case"forwards":for(r=t.child,l=null;r!==null;)e=r.alternate,e!==null&&Zg(e)===null&&(l=r),r=r.sibling;r=l,r===null?(l=t.child,t.child=null):(l=r.sibling,r.sibling=null),hv(t,!1,l,r,h);break;case"backwards":for(r=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Zg(e)===null){t.child=l;break}e=l.sibling,l.sibling=r,r=l,l=e}hv(t,!0,r,null,h);break;case"together":hv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ms(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),pu|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(Ge(153));if(t.child!==null){for(e=t.child,r=ul(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ul(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function pR(e,t,r){switch(t.tag){case 3:_I(t),nh();break;case 5:GP(t);break;case 1:no(t.type)&&Ng(t);break;case 4:dw(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,l=t.memoizedProps.value;Vr(Ug,o._currentValue),o._currentValue=l;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(Vr(an,an.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?vI(e,t,r):(Vr(an,an.current&1),e=ms(e,t,r),e!==null?e.sibling:null);Vr(an,an.current&1);break;case 19:if(o=(r&t.childLanes)!==0,(e.flags&128)!==0){if(o)return xI(e,t,r);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Vr(an,an.current),o)break;return null;case 22:case 23:return t.lanes=0,gI(e,t,r)}return ms(e,t,r)}function mR(e,t){switch(cw(t),t.tag){case 1:return no(t.type)&&Vg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return oh(),qr(ro),qr(Ei),pw(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return fw(t),null;case 13:if(qr(an),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ge(340));nh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qr(an),null;case 4:return oh(),null;case 10:return sw(t.type._context),null;case 22:case 23:return kw(),null;case 24:return null;default:return null}}var Mm=!1,wi=!1,gR=typeof WeakSet=="function"?WeakSet:Set,ft=null;function Vc(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(o){pn(e,t,o)}else r.current=null}function F1(e,t,r){try{r()}catch(o){pn(e,t,o)}}var kE=!1;function yR(e,t){if(x1=Fg,e=TP(),iw(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var l=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var g=0,u=-1,b=-1,w=0,T=0,I=e,z=null;t:for(;;){for(var j;I!==r||l!==0&&I.nodeType!==3||(u=g+l),I!==h||o!==0&&I.nodeType!==3||(b=g+o),I.nodeType===3&&(g+=I.nodeValue.length),(j=I.firstChild)!==null;)z=I,I=j;for(;;){if(I===e)break t;if(z===r&&++w===l&&(u=g),z===h&&++T===o&&(b=g),(j=I.nextSibling)!==null)break;I=z,z=I.parentNode}I=j}r=u===-1||b===-1?null:{start:u,end:b}}else r=null}r=r||{start:0,end:0}}else r=null;for(w1={focusedElem:e,selectionRange:r},Fg=!1,ft=t;ft!==null;)if(t=ft,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ft=e;else for(;ft!==null;){t=ft;try{var Z=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Z!==null){var H=Z.memoizedProps,le=Z.memoizedState,$=t.stateNode,B=$.getSnapshotBeforeUpdate(t.elementType===t.type?H:ha(t.type,H),le);$.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var X=t.stateNode.containerInfo;if(X.nodeType===1)X.textContent="";else if(X.nodeType===9){var ue=X.body;ue!=null&&(ue.textContent="")}break;case 5:case 6:case 4:case 17:break;default:throw Error(Ge(163))}}catch(ce){pn(t,t.return,ce)}if(e=t.sibling,e!==null){e.return=t.return,ft=e;break}ft=t.return}return Z=kE,kE=!1,Z}function cf(e,t,r){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&e)===e){var h=l.destroy;l.destroy=void 0,h!==void 0&&F1(t,r,h)}l=l.next}while(l!==o)}}function By(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var o=r.create;r.destroy=o()}r=r.next}while(r!==t)}}function O1(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function wI(e){var t=e.alternate;t!==null&&(e.alternate=null,wI(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Da],delete t[Mf],delete t[E1],delete t[eR],delete t[tR])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bI(e){return e.tag===5||e.tag===3||e.tag===4}function TE(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bI(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $1(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Bg));else if(o!==4&&(e=e.child,e!==null))for($1(e,t,r),e=e.sibling;e!==null;)$1(e,t,r),e=e.sibling}function B1(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(B1(e,t,r),e=e.sibling;e!==null;)B1(e,t,r),e=e.sibling}var ri=null,da=!1;function Bs(e,t,r){for(r=r.child;r!==null;)SI(e,t,r),r=r.sibling}function SI(e,t,r){if(Fa&&typeof Fa.onCommitFiberUnmount=="function")try{Fa.onCommitFiberUnmount(Ay,r)}catch{}switch(r.tag){case 5:wi||Vc(r,t);case 6:var o=ri,l=da;ri=null,Bs(e,t,r),ri=o,da=l,ri!==null&&(da?(e=ri,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ri.removeChild(r.stateNode));break;case 18:ri!==null&&(da?(e=ri,r=r.stateNode,e.nodeType===8?ov(e.parentNode,r):e.nodeType===1&&ov(e,r),kf(e)):ov(ri,r.stateNode));break;case 4:o=ri,l=da,ri=r.stateNode.containerInfo,da=!0,Bs(e,t,r),ri=o,da=l;break;case 0:case 11:case 14:case 15:if(!wi&&(o=r.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){l=o=o.next;do{var h=l,g=h.destroy;h=h.tag,g!==void 0&&((h&2)!==0||(h&4)!==0)&&F1(r,t,g),l=l.next}while(l!==o)}Bs(e,t,r);break;case 1:if(!wi&&(Vc(r,t),o=r.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=r.memoizedProps,o.state=r.memoizedState,o.componentWillUnmount()}catch(u){pn(r,t,u)}Bs(e,t,r);break;case 21:Bs(e,t,r);break;case 22:r.mode&1?(wi=(o=wi)||r.memoizedState!==null,Bs(e,t,r),wi=o):Bs(e,t,r);break;default:Bs(e,t,r)}}function CE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new gR),t.forEach(function(o){var l=TR.bind(null,e,o);r.has(o)||(r.add(o),o.then(l,l))})}}function la(e,t){var r=t.deletions;if(r!==null)for(var o=0;o<r.length;o++){var l=r[o];try{var h=e,g=t,u=g;e:for(;u!==null;){switch(u.tag){case 5:ri=u.stateNode,da=!1;break e;case 3:ri=u.stateNode.containerInfo,da=!0;break e;case 4:ri=u.stateNode.containerInfo,da=!0;break e}u=u.return}if(ri===null)throw Error(Ge(160));SI(h,g,l),ri=null,da=!1;var b=l.alternate;b!==null&&(b.return=null),l.return=null}catch(w){pn(l,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)EI(t,e),t=t.sibling}function EI(e,t){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(la(t,e),Ca(e),o&4){try{cf(3,e,e.return),By(3,e)}catch(Z){pn(e,e.return,Z)}try{cf(5,e,e.return)}catch(Z){pn(e,e.return,Z)}}break;case 1:la(t,e),Ca(e),o&512&&r!==null&&Vc(r,r.return);break;case 5:if(la(t,e),Ca(e),o&512&&r!==null&&Vc(r,r.return),e.flags&32){var l=e.stateNode;try{wf(l,"")}catch(Z){pn(e,e.return,Z)}}if(o&4&&(l=e.stateNode,l!=null)){var h=e.memoizedProps,g=r!==null?r.memoizedProps:h,u=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{u==="input"&&h.type==="radio"&&h.name!=null&&ZC(l,h),c1(u,g);var w=c1(u,h);for(g=0;g<b.length;g+=2){var T=b[g],I=b[g+1];T==="style"?JC(l,I):T==="dangerouslySetInnerHTML"?KC(l,I):T==="children"?wf(l,I):Wx(l,T,I,w)}switch(u){case"input":o1(l,h);break;case"textarea":HC(l,h);break;case"select":var z=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!h.multiple;var j=h.value;j!=null?Wc(l,!!h.multiple,j,!1):z!==!!h.multiple&&(h.defaultValue!=null?Wc(l,!!h.multiple,h.defaultValue,!0):Wc(l,!!h.multiple,h.multiple?[]:"",!1))}l[Mf]=h}catch(Z){pn(e,e.return,Z)}}break;case 6:if(la(t,e),Ca(e),o&4){if(e.stateNode===null)throw Error(Ge(162));w=e.stateNode,T=e.memoizedProps;try{w.nodeValue=T}catch(Z){pn(e,e.return,Z)}}break;case 3:if(la(t,e),Ca(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{kf(t.containerInfo)}catch(Z){pn(e,e.return,Z)}break;case 4:la(t,e),Ca(e);break;case 13:la(t,e),Ca(e),w=e.child,w.flags&8192&&w.memoizedState!==null&&(w.alternate===null||w.alternate.memoizedState===null)&&(Sw=wn()),o&4&&CE(e);break;case 22:if(w=r!==null&&r.memoizedState!==null,e.mode&1?(wi=(T=wi)||w,la(t,e),wi=T):la(t,e),Ca(e),o&8192){T=e.memoizedState!==null;e:for(I=null,z=e;;){if(z.tag===5){if(I===null){I=z;try{l=z.stateNode,T?(h=l.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(u=z.stateNode,b=z.memoizedProps.style,g=b!=null&&b.hasOwnProperty("display")?b.display:null,u.style.display=YC("display",g))}catch(Z){pn(e,e.return,Z)}}}else if(z.tag===6){if(I===null)try{z.stateNode.nodeValue=T?"":z.memoizedProps}catch(Z){pn(e,e.return,Z)}}else if((z.tag!==22&&z.tag!==23||z.memoizedState===null||z===e)&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===e)break e;for(;z.sibling===null;){if(z.return===null||z.return===e)break e;I===z&&(I=null),z=z.return}I===z&&(I=null),z.sibling.return=z.return,z=z.sibling}if(T&&!w&&(e.mode&1)!==0)for(ft=e,e=e.child;e!==null;){for(w=ft=e;ft!==null;){switch(T=ft,I=T.child,T.tag){case 0:case 11:case 14:case 15:cf(4,T,T.return);break;case 1:if(Vc(T,T.return),h=T.stateNode,typeof h.componentWillUnmount=="function"){z=T,j=T.return;try{l=z,h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(Z){pn(z,j,Z)}}break;case 5:Vc(T,T.return);break;case 22:if(T.memoizedState!==null){IE(w);continue}}I!==null?(I.return=T,ft=I):IE(w)}e=e.sibling}}break;case 19:la(t,e),Ca(e),o&4&&CE(e);break;case 21:break;default:la(t,e),Ca(e)}}function Ca(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(bI(r)){var o=r;break e}r=r.return}throw Error(Ge(160))}switch(o.tag){case 5:var l=o.stateNode;o.flags&32&&(wf(l,""),o.flags&=-33);var h=TE(e);B1(e,h,l);break;case 3:case 4:var g=o.stateNode.containerInfo,u=TE(e);$1(e,u,g);break;default:throw Error(Ge(161))}}catch(b){pn(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _R(e,t,r){ft=e,kI(e)}function kI(e,t,r){for(var o=(e.mode&1)!==0;ft!==null;){var l=ft,h=l.child;if(l.tag===22&&o){var g=l.memoizedState!==null||Mm;if(!g){var u=l.alternate,b=u!==null&&u.memoizedState!==null||wi;u=Mm;var w=wi;if(Mm=g,(wi=b)&&!w)for(ft=l;ft!==null;)g=ft,b=g.child,g.tag===22&&g.memoizedState!==null?ME(l):b!==null?(b.return=g,ft=b):ME(l);for(;h!==null;)ft=h,kI(h),h=h.sibling;ft=l,Mm=u,wi=w}PE(e)}else(l.subtreeFlags&8772)!==0&&h!==null?(h.return=l,ft=h):PE(e)}}function PE(e){for(;ft!==null;){var t=ft;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:wi||By(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!wi)if(r===null)o.componentDidMount();else{var l=t.elementType===t.type?r.memoizedProps:ha(t.type,r.memoizedProps);o.componentDidUpdate(l,r.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&aE(t,h,o);break;case 3:var g=t.updateQueue;if(g!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}aE(t,g,r)}break;case 5:var u=t.stateNode;if(r===null&&t.flags&4){r=u;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&r.focus();break;case"img":b.src&&(r.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var T=w.memoizedState;if(T!==null){var I=T.dehydrated;I!==null&&kf(I)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(Ge(163))}wi||t.flags&512&&O1(t)}catch(z){pn(t,t.return,z)}}if(t===e){ft=null;break}if(r=t.sibling,r!==null){r.return=t.return,ft=r;break}ft=t.return}}function IE(e){for(;ft!==null;){var t=ft;if(t===e){ft=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ft=r;break}ft=t.return}}function ME(e){for(;ft!==null;){var t=ft;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{By(4,t)}catch(b){pn(t,r,b)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var l=t.return;try{o.componentDidMount()}catch(b){pn(t,l,b)}}var h=t.return;try{O1(t)}catch(b){pn(t,h,b)}break;case 5:var g=t.return;try{O1(t)}catch(b){pn(t,g,b)}}}catch(b){pn(t,t.return,b)}if(t===e){ft=null;break}var u=t.sibling;if(u!==null){u.return=t.return,ft=u;break}ft=t.return}}var vR=Math.ceil,Kg=bs.ReactCurrentDispatcher,ww=bs.ReactCurrentOwner,Ko=bs.ReactCurrentBatchConfig,gr=0,Fn=null,In=null,oi=0,mo=0,Nc=fl(0),Rn=0,Ff=null,pu=0,Vy=0,bw=0,hf=null,Qi=null,Sw=0,ah=1/0,as=null,Yg=!1,V1=null,nl=null,Am=!1,Xs=null,Jg=0,df=0,N1=null,sg=-1,lg=0;function Bi(){return(gr&6)!==0?wn():sg!==-1?sg:sg=wn()}function il(e){return(e.mode&1)===0?1:(gr&2)!==0&&oi!==0?oi&-oi:nR.transition!==null?(lg===0&&(lg=cP()),lg):(e=Er,e!==0||(e=window.event,e=e===void 0?16:yP(e.type)),e)}function Yo(e,t,r){if(50<df)throw df=0,N1=null,Error(Ge(185));var o=Ny(e,t);return o===null?null:(Kf(o,t,r),((gr&2)===0||o!==Fn)&&(o===Fn&&((gr&2)===0&&(Vy|=t),Rn===4&&qs(o,oi)),io(o,r),t===1&&gr===0&&(e.mode&1)===0&&(ah=wn()+500,Fy&&pl())),o)}function Ny(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function TI(e){return(Fn!==null||pa!==null)&&(e.mode&1)!==0&&(gr&2)===0}function io(e,t){var r=e.callbackNode;n4(e,t);var o=Lg(e,e===Fn?oi:0);if(o===0)r!==null&&FS(r),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(r!=null&&FS(r),t===1)e.tag===0?rR(AE.bind(null,e)):FP(AE.bind(null,e)),J4(function(){gr===0&&pl()}),r=null;else{switch(hP(o)){case 1:r=Kx;break;case 4:r=lP;break;case 16:r=Rg;break;case 536870912:r=uP;break;default:r=Rg}r=RI(r,CI.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function CI(e,t){if(sg=-1,lg=0,(gr&6)!==0)throw Error(Ge(327));var r=e.callbackNode;if(Kc()&&e.callbackNode!==r)return null;var o=Lg(e,e===Fn?oi:0);if(o===0)return null;if((o&30)!==0||(o&e.expiredLanes)!==0||t)t=Qg(e,o);else{t=o;var l=gr;gr|=2;var h=II();(Fn!==e||oi!==t)&&(as=null,ah=wn()+500,iu(e,t));do try{bR();break}catch(u){PI(e,u)}while(1);aw(),Kg.current=h,gr=l,In!==null?t=0:(Fn=null,oi=0,t=Rn)}if(t!==0){if(t===2&&(l=m1(e),l!==0&&(o=l,t=U1(e,l))),t===1)throw r=Ff,iu(e,0),qs(e,o),io(e,wn()),r;if(t===6)qs(e,o);else{if(l=e.current.alternate,(o&30)===0&&!xR(l)&&(t=Qg(e,o),t===2&&(h=m1(e),h!==0&&(o=h,t=U1(e,h))),t===1))throw r=Ff,iu(e,0),qs(e,o),io(e,wn()),r;switch(e.finishedWork=l,e.finishedLanes=o,t){case 0:case 1:throw Error(Ge(345));case 2:Zl(e,Qi,as);break;case 3:if(qs(e,o),(o&130023424)===o&&(t=Sw+500-wn(),10<t)){if(Lg(e,0)!==0)break;if(l=e.suspendedLanes,(l&o)!==o){Bi(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=S1(Zl.bind(null,e,Qi,as),t);break}Zl(e,Qi,as);break;case 4:if(qs(e,o),(o&4194240)===o)break;for(t=e.eventTimes,l=-1;0<o;){var g=31-ga(o);h=1<<g,g=t[g],g>l&&(l=g),o&=~h}if(o=l,o=wn()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*vR(o/1960))-o,10<o){e.timeoutHandle=S1(Zl.bind(null,e,Qi,as),o);break}Zl(e,Qi,as);break;case 5:Zl(e,Qi,as);break;default:throw Error(Ge(329))}}}return io(e,wn()),e.callbackNode===r?CI.bind(null,e):null}function U1(e,t){var r=hf;return e.current.memoizedState.isDehydrated&&(iu(e,t).flags|=256),e=Qg(e,t),e!==2&&(t=Qi,Qi=r,t!==null&&j1(t)),e}function j1(e){Qi===null?Qi=e:Qi.push.apply(Qi,e)}function xR(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var o=0;o<r.length;o++){var l=r[o],h=l.getSnapshot;l=l.value;try{if(!ya(h(),l))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qs(e,t){for(t&=~bw,t&=~Vy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ga(t),o=1<<r;e[r]=-1,t&=~o}}function AE(e){if((gr&6)!==0)throw Error(Ge(327));Kc();var t=Lg(e,0);if((t&1)===0)return io(e,wn()),null;var r=Qg(e,t);if(e.tag!==0&&r===2){var o=m1(e);o!==0&&(t=o,r=U1(e,o))}if(r===1)throw r=Ff,iu(e,0),qs(e,t),io(e,wn()),r;if(r===6)throw Error(Ge(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Zl(e,Qi,as),io(e,wn()),null}function Ew(e,t){var r=gr;gr|=1;try{return e(t)}finally{gr=r,gr===0&&(ah=wn()+500,Fy&&pl())}}function mu(e){Xs!==null&&Xs.tag===0&&(gr&6)===0&&Kc();var t=gr;gr|=1;var r=Ko.transition,o=Er;try{if(Ko.transition=null,Er=1,e)return e()}finally{Er=o,Ko.transition=r,gr=t,(gr&6)===0&&pl()}}function kw(){mo=Nc.current,qr(Nc)}function iu(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Y4(r)),In!==null)for(r=In.return;r!==null;){var o=r;switch(cw(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Vg();break;case 3:oh(),qr(ro),qr(Ei),pw();break;case 5:fw(o);break;case 4:oh();break;case 13:qr(an);break;case 19:qr(an);break;case 10:sw(o.type._context);break;case 22:case 23:kw()}r=r.return}if(Fn=e,In=e=ul(e.current,null),oi=mo=t,Rn=0,Ff=null,bw=Vy=pu=0,Qi=hf=null,pa!==null){for(t=0;t<pa.length;t++)if(r=pa[t],o=r.interleaved,o!==null){r.interleaved=null;var l=o.next,h=r.pending;if(h!==null){var g=h.next;h.next=l,o.next=g}r.pending=o}pa=null}return e}function PI(e,t){do{var r=In;try{if(aw(),og.current=Xg,Hg){for(var o=sn.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}Hg=!1}if(fu=0,Zn=Dn=sn=null,uf=!1,Df=0,ww.current=null,r===null||r.return===null){Rn=1,Ff=t,In=null;break}e:{var h=e,g=r.return,u=r,b=t;if(t=oi,u.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var w=b,T=u,I=T.tag;if((T.mode&1)===0&&(I===0||I===11||I===15)){var z=T.alternate;z?(T.updateQueue=z.updateQueue,T.memoizedState=z.memoizedState,T.lanes=z.lanes):(T.updateQueue=null,T.memoizedState=null)}var j=mE(g);if(j!==null){j.flags&=-257,gE(j,g,u,h,t),j.mode&1&&pE(h,w,t),t=j,b=w;var Z=t.updateQueue;if(Z===null){var H=new Set;H.add(b),t.updateQueue=H}else Z.add(b);break e}else{if((t&1)===0){pE(h,w,t),Tw();break e}b=Error(Ge(426))}}else if(Jr&&u.mode&1){var le=mE(g);if(le!==null){(le.flags&65536)===0&&(le.flags|=256),gE(le,g,u,h,t),hw(b);break e}}h=b,Rn!==4&&(Rn=2),hf===null?hf=[h]:hf.push(h),b=xw(b,u),u=g;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var $=cI(u,b,t);oE(u,$);break e;case 1:h=b;var B=u.type,X=u.stateNode;if((u.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(nl===null||!nl.has(X)))){u.flags|=65536,t&=-t,u.lanes|=t;var ue=hI(u,h,t);oE(u,ue);break e}}u=u.return}while(u!==null)}AI(r)}catch(ce){t=ce,In===r&&r!==null&&(In=r=r.return);continue}break}while(1)}function II(){var e=Kg.current;return Kg.current=Xg,e===null?Xg:e}function Tw(){(Rn===0||Rn===3||Rn===2)&&(Rn=4),Fn===null||(pu&268435455)===0&&(Vy&268435455)===0||qs(Fn,oi)}function Qg(e,t){var r=gr;gr|=2;var o=II();(Fn!==e||oi!==t)&&(as=null,iu(e,t));do try{wR();break}catch(l){PI(e,l)}while(1);if(aw(),gr=r,Kg.current=o,In!==null)throw Error(Ge(261));return Fn=null,oi=0,Rn}function wR(){for(;In!==null;)MI(In)}function bR(){for(;In!==null&&!HD();)MI(In)}function MI(e){var t=DI(e.alternate,e,mo);e.memoizedProps=e.pendingProps,t===null?AI(e):In=t,ww.current=null}function AI(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=dR(r,t,mo),r!==null){In=r;return}}else{if(r=mR(r,t),r!==null){r.flags&=32767,In=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Rn=6,In=null;return}}if(t=t.sibling,t!==null){In=t;return}In=t=e}while(t!==null);Rn===0&&(Rn=5)}function Zl(e,t,r){var o=Er,l=Ko.transition;try{Ko.transition=null,Er=1,SR(e,t,r,o)}finally{Ko.transition=l,Er=o}return null}function SR(e,t,r,o){do Kc();while(Xs!==null);if((gr&6)!==0)throw Error(Ge(327));r=e.finishedWork;var l=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Ge(177));e.callbackNode=null,e.callbackPriority=0;var h=r.lanes|r.childLanes;if(i4(e,h),e===Fn&&(In=Fn=null,oi=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||Am||(Am=!0,RI(Rg,function(){return Kc(),null})),h=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||h){h=Ko.transition,Ko.transition=null;var g=Er;Er=1;var u=gr;gr|=4,ww.current=null,yR(e,r),EI(r,e),G4(w1),Fg=!!x1,w1=x1=null,e.current=r,_R(r),XD(),gr=u,Er=g,Ko.transition=h}else e.current=r;if(Am&&(Am=!1,Xs=e,Jg=l),h=e.pendingLanes,h===0&&(nl=null),JD(r.stateNode),io(e,wn()),t!==null)for(o=e.onRecoverableError,r=0;r<t.length;r++)o(t[r]);if(Yg)throw Yg=!1,e=V1,V1=null,e;return(Jg&1)!==0&&e.tag!==0&&Kc(),h=e.pendingLanes,(h&1)!==0?e===N1?df++:(df=0,N1=e):df=0,pl(),null}function Kc(){if(Xs!==null){var e=hP(Jg),t=Ko.transition,r=Er;try{if(Ko.transition=null,Er=16>e?16:e,Xs===null)var o=!1;else{if(e=Xs,Xs=null,Jg=0,(gr&6)!==0)throw Error(Ge(331));var l=gr;for(gr|=4,ft=e.current;ft!==null;){var h=ft,g=h.child;if((ft.flags&16)!==0){var u=h.deletions;if(u!==null){for(var b=0;b<u.length;b++){var w=u[b];for(ft=w;ft!==null;){var T=ft;switch(T.tag){case 0:case 11:case 15:cf(8,T,h)}var I=T.child;if(I!==null)I.return=T,ft=I;else for(;ft!==null;){T=ft;var z=T.sibling,j=T.return;if(wI(T),T===w){ft=null;break}if(z!==null){z.return=j,ft=z;break}ft=j}}}var Z=h.alternate;if(Z!==null){var H=Z.child;if(H!==null){Z.child=null;do{var le=H.sibling;H.sibling=null,H=le}while(H!==null)}}ft=h}}if((h.subtreeFlags&2064)!==0&&g!==null)g.return=h,ft=g;else e:for(;ft!==null;){if(h=ft,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:cf(9,h,h.return)}var $=h.sibling;if($!==null){$.return=h.return,ft=$;break e}ft=h.return}}var B=e.current;for(ft=B;ft!==null;){g=ft;var X=g.child;if((g.subtreeFlags&2064)!==0&&X!==null)X.return=g,ft=X;else e:for(g=B;ft!==null;){if(u=ft,(u.flags&2048)!==0)try{switch(u.tag){case 0:case 11:case 15:By(9,u)}}catch(ce){pn(u,u.return,ce)}if(u===g){ft=null;break e}var ue=u.sibling;if(ue!==null){ue.return=u.return,ft=ue;break e}ft=u.return}}if(gr=l,pl(),Fa&&typeof Fa.onPostCommitFiberRoot=="function")try{Fa.onPostCommitFiberRoot(Ay,e)}catch{}o=!0}return o}finally{Er=r,Ko.transition=t}}return!1}function zE(e,t,r){t=xw(r,t),t=cI(e,t,1),rl(e,t),t=Bi(),e=Ny(e,1),e!==null&&(Kf(e,1,t),io(e,t))}function pn(e,t,r){if(e.tag===3)zE(e,e,r);else for(;t!==null;){if(t.tag===3){zE(t,e,r);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(nl===null||!nl.has(o))){e=xw(r,e),e=hI(t,e,1),rl(t,e),e=Bi(),t=Ny(t,1),t!==null&&(Kf(t,1,e),io(t,e));break}}t=t.return}}function ER(e,t,r){var o=e.pingCache;o!==null&&o.delete(t),t=Bi(),e.pingedLanes|=e.suspendedLanes&r,Fn===e&&(oi&r)===r&&(Rn===4||Rn===3&&(oi&130023424)===oi&&500>wn()-Sw?iu(e,0):bw|=r),io(e,t)}function zI(e,t){t===0&&((e.mode&1)===0?t=1:(t=xm,xm<<=1,(xm&130023424)===0&&(xm=4194304)));var r=Bi();e=Ny(e,t),e!==null&&(Kf(e,t,r),io(e,r))}function kR(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),zI(e,r)}function TR(e,t){var r=0;switch(e.tag){case 13:var o=e.stateNode,l=e.memoizedState;l!==null&&(r=l.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(Ge(314))}o!==null&&o.delete(t),zI(e,r)}var DI;DI=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ro.current)to=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return to=!1,pR(e,t,r);to=(e.flags&131072)!==0}else to=!1,Jr&&(t.flags&1048576)!==0&&VP(t,qg,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var l=rh(t,Ei.current);Xc(t,r),l=gw(null,t,o,e,l,r);var h=yw();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,no(o)?(h=!0,Ng(t)):h=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,lw(t),l.updater=Oy,t.stateNode=l,l._reactInternals=t,P1(t,o,e,r),t=R1(null,t,o,!0,h,r)):(t.tag=0,Jr&&h&&uw(t),Fi(null,t,l,r),t=t.child),t;case 16:o=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,l=o._init,o=l(o._payload),t.type=o,l=t.tag=PR(o),e=ha(o,e),l){case 0:t=D1(null,t,o,e,r);break e;case 1:t=vE(null,t,o,e,r);break e;case 11:t=yE(null,t,o,e,r);break e;case 14:t=_E(null,t,o,ha(o.type,e),r);break e}throw Error(Ge(306,o,""))}return t;case 0:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:ha(o,l),D1(e,t,o,l,r);case 1:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:ha(o,l),vE(e,t,o,l,r);case 3:e:{if(_I(t),e===null)throw Error(Ge(387));o=t.pendingProps,h=t.memoizedState,l=h.element,OP(e,t),Gg(t,o,null,r);var g=t.memoizedState;if(o=g.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){l=Error(Ge(423)),t=xE(e,t,o,r,l);break e}else if(o!==l){l=Error(Ge(424)),t=xE(e,t,o,r,l);break e}else for(eo=ls(t.stateNode.containerInfo.firstChild),ko=t,Jr=!0,fa=null,r=jP(t,null,o,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(nh(),o===l){t=ms(e,t,r);break e}Fi(e,t,o,r)}t=t.child}return t;case 5:return GP(t),e===null&&M1(t),o=t.type,l=t.pendingProps,h=e!==null?e.memoizedProps:null,g=l.children,b1(o,l)?g=null:h!==null&&b1(o,h)&&(t.flags|=32),yI(e,t),Fi(e,t,g,r),t.child;case 6:return e===null&&M1(t),null;case 13:return vI(e,t,r);case 4:return dw(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=ih(t,null,o,r):Fi(e,t,o,r),t.child;case 11:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:ha(o,l),yE(e,t,o,l,r);case 7:return Fi(e,t,t.pendingProps,r),t.child;case 8:return Fi(e,t,t.pendingProps.children,r),t.child;case 12:return Fi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(o=t.type._context,l=t.pendingProps,h=t.memoizedProps,g=l.value,Vr(Ug,o._currentValue),o._currentValue=g,h!==null)if(ya(h.value,g)){if(h.children===l.children&&!ro.current){t=ms(e,t,r);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var u=h.dependencies;if(u!==null){g=h.child;for(var b=u.firstContext;b!==null;){if(b.context===o){if(h.tag===1){b=hs(-1,r&-r),b.tag=2;var w=h.updateQueue;if(w!==null){w=w.shared;var T=w.pending;T===null?b.next=b:(b.next=T.next,T.next=b),w.pending=b}}h.lanes|=r,b=h.alternate,b!==null&&(b.lanes|=r),T1(h.return,r,t),u.lanes|=r;break}b=b.next}}else if(h.tag===10)g=h.type===t.type?null:h.child;else if(h.tag===18){if(g=h.return,g===null)throw Error(Ge(341));g.lanes|=r,u=g.alternate,u!==null&&(u.lanes|=r),T1(g,r,t),g=h.sibling}else g=h.child;if(g!==null)g.return=h;else for(g=h;g!==null;){if(g===t){g=null;break}if(h=g.sibling,h!==null){h.return=g.return,g=h;break}g=g.return}h=g}Fi(e,t,l.children,r),t=t.child}return t;case 9:return l=t.type,o=t.pendingProps.children,Xc(t,r),l=Qo(l),o=o(l),t.flags|=1,Fi(e,t,o,r),t.child;case 14:return o=t.type,l=ha(o,t.pendingProps),l=ha(o.type,l),_E(e,t,o,l,r);case 15:return mI(e,t,t.type,t.pendingProps,r);case 17:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:ha(o,l),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,no(o)?(e=!0,Ng(t)):e=!1,Xc(t,r),BP(t,o,l),P1(t,o,l,r),R1(null,t,o,!0,e,r);case 19:return xI(e,t,r);case 22:return gI(e,t,r)}throw Error(Ge(156,t.tag))};function RI(e,t){return sP(e,t)}function CR(e,t,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xo(e,t,r,o){return new CR(e,t,r,o)}function Cw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function PR(e){if(typeof e=="function")return Cw(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Zx)return 11;if(e===Hx)return 14}return 2}function ul(e,t){var r=e.alternate;return r===null?(r=Xo(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ug(e,t,r,o,l,h){var g=2;if(o=e,typeof e=="function")Cw(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case Ac:return ou(r.children,l,h,t);case qx:g=8,l|=8;break;case e1:return e=Xo(12,r,t,l|2),e.elementType=e1,e.lanes=h,e;case t1:return e=Xo(13,r,t,l),e.elementType=t1,e.lanes=h,e;case r1:return e=Xo(19,r,t,l),e.elementType=r1,e.lanes=h,e;case GC:return ey(r,l,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case UC:g=10;break e;case jC:g=9;break e;case Zx:g=11;break e;case Hx:g=14;break e;case js:g=16,o=null;break e}throw Error(Ge(130,e==null?e:typeof e,""))}return t=Xo(g,r,t,l),t.elementType=e,t.type=o,t.lanes=h,t}function ou(e,t,r,o){return e=Xo(7,e,o,t),e.lanes=r,e}function ey(e,t,r,o){return e=Xo(22,e,o,t),e.elementType=GC,e.lanes=r,e.stateNode={},e}function dv(e,t,r){return e=Xo(6,e,null,t),e.lanes=r,e}function fv(e,t,r){return t=Xo(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function IR(e,t,r,o,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=H_(0),this.expirationTimes=H_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=H_(0),this.identifierPrefix=o,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Pw(e,t,r,o,l,h,g,u,b){return e=new IR(e,t,r,u,b),t===1?(t=1,h===!0&&(t|=8)):t=0,h=Xo(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:o,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},lw(h),e}function MR(e,t,r){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mc,key:o==null?null:""+o,children:e,containerInfo:t,implementation:r}}function LI(e){if(!e)return ll;e=e._reactInternals;e:{if(vu(e)!==e||e.tag!==1)throw Error(Ge(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(no(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ge(171))}if(e.tag===1){var r=e.type;if(no(r))return LP(e,r,t)}return t}function FI(e,t,r,o,l,h,g,u,b){return e=Pw(r,o,!0,e,l,h,g,u,b),e.context=LI(null),r=e.current,o=Bi(),l=il(r),h=hs(o,l),h.callback=t!=null?t:null,rl(r,h),e.current.lanes=l,Kf(e,l,o),io(e,o),e}function Uy(e,t,r,o){var l=t.current,h=Bi(),g=il(l);return r=LI(r),t.context===null?t.context=r:t.pendingContext=r,t=hs(h,g),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),rl(l,t),e=Yo(l,g,h),e!==null&&ig(e,l,g),g}function ty(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function DE(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Iw(e,t){DE(e,t),(e=e.alternate)&&DE(e,t)}function AR(){return null}var OI=typeof reportError=="function"?reportError:function(e){console.error(e)};function Mw(e){this._internalRoot=e}jy.prototype.render=Mw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ge(409));Uy(e,t,null,null)};jy.prototype.unmount=Mw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;mu(function(){Uy(null,e,null,null)}),t[ps]=null}};function jy(e){this._internalRoot=e}jy.prototype.unstable_scheduleHydration=function(e){if(e){var t=pP();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ws.length&&t!==0&&t<Ws[r].priority;r++);Ws.splice(r,0,e),r===0&&gP(e)}};function Aw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function RE(){}function zR(e,t,r,o,l){if(l){if(typeof o=="function"){var h=o;o=function(){var w=ty(g);h.call(w)}}var g=FI(t,o,e,0,null,!1,!1,"",RE);return e._reactRootContainer=g,e[ps]=g.current,Pf(e.nodeType===8?e.parentNode:e),mu(),g}for(;l=e.lastChild;)e.removeChild(l);if(typeof o=="function"){var u=o;o=function(){var w=ty(b);u.call(w)}}var b=Pw(e,0,!1,null,null,!1,!1,"",RE);return e._reactRootContainer=b,e[ps]=b.current,Pf(e.nodeType===8?e.parentNode:e),mu(function(){Uy(t,b,r,o)}),b}function Wy(e,t,r,o,l){var h=r._reactRootContainer;if(h){var g=h;if(typeof l=="function"){var u=l;l=function(){var b=ty(g);u.call(b)}}Uy(t,g,e,l)}else g=zR(r,t,e,l,o);return ty(g)}dP=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Hd(t.pendingLanes);r!==0&&(Yx(t,r|1),io(t,wn()),(gr&6)===0&&(ah=wn()+500,pl()))}break;case 13:var o=Bi();mu(function(){return Yo(e,1,o)}),Iw(e,1)}};Jx=function(e){if(e.tag===13){var t=Bi();Yo(e,134217728,t),Iw(e,134217728)}};fP=function(e){if(e.tag===13){var t=Bi(),r=il(e);Yo(e,r,t),Iw(e,r)}};pP=function(){return Er};mP=function(e,t){var r=Er;try{return Er=e,t()}finally{Er=r}};d1=function(e,t,r){switch(t){case"input":if(o1(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var l=Ly(o);if(!l)throw Error(Ge(90));qC(o),o1(o,l)}}}break;case"textarea":HC(e,r);break;case"select":t=r.value,t!=null&&Wc(e,!!r.multiple,t,!1)}};tP=Ew;rP=mu;var DR={usingClientEntryPoint:!1,Events:[Jf,Lc,Ly,QC,eP,Ew]},Bd={findFiberByHostInstance:eu,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},RR={bundleType:Bd.bundleType,version:Bd.version,rendererPackageName:Bd.rendererPackageName,rendererConfig:Bd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=oP(e),e===null?null:e.stateNode},findFiberByHostInstance:Bd.findFiberByHostInstance||AR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var zm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zm.isDisabled&&zm.supportsFiber)try{Ay=zm.inject(RR),Fa=zm}catch{}}Ao.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DR;Ao.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Aw(t))throw Error(Ge(200));return MR(e,t,null,r)};Ao.createRoot=function(e,t){if(!Aw(e))throw Error(Ge(299));var r=!1,o="",l=OI;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=Pw(e,1,!1,null,null,r,!1,o,l),e[ps]=t.current,Pf(e.nodeType===8?e.parentNode:e),new Mw(t)};Ao.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ge(188)):(e=Object.keys(e).join(","),Error(Ge(268,e)));return e=oP(t),e=e===null?null:e.stateNode,e};Ao.flushSync=function(e){return mu(e)};Ao.hydrate=function(e,t,r){if(!Gy(t))throw Error(Ge(200));return Wy(null,e,t,!0,r)};Ao.hydrateRoot=function(e,t,r){if(!Aw(e))throw Error(Ge(405));var o=r!=null&&r.hydratedSources||null,l=!1,h="",g=OI;if(r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onRecoverableError!==void 0&&(g=r.onRecoverableError)),t=FI(t,null,e,1,r!=null?r:null,l,!1,h,g),e[ps]=t.current,Pf(e),o)for(e=0;e<o.length;e++)r=o[e],l=r._getVersion,l=l(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,l]:t.mutableSourceEagerHydrationData.push(r,l);return new jy(t)};Ao.render=function(e,t,r){if(!Gy(t))throw Error(Ge(200));return Wy(null,e,t,!1,r)};Ao.unmountComponentAtNode=function(e){if(!Gy(e))throw Error(Ge(40));return e._reactRootContainer?(mu(function(){Wy(null,null,e,!1,function(){e._reactRootContainer=null,e[ps]=null})}),!0):!1};Ao.unstable_batchedUpdates=Ew;Ao.unstable_renderSubtreeIntoContainer=function(e,t,r,o){if(!Gy(r))throw Error(Ge(200));if(e==null||e._reactInternals===void 0)throw Error(Ge(38));return Wy(e,t,r,!1,o)};Ao.version="18.1.0-next-22edb9f77-20220426";function $I(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($I)}catch(e){console.error(e)}}$I(),My.exports=Ao;var LR=My.exports,LE=My.exports;Jv.createRoot=LE.createRoot,Jv.hydrateRoot=LE.hydrateRoot;var Cr="colors",Li="sizes",mt="space",FR={gap:mt,gridGap:mt,columnGap:mt,gridColumnGap:mt,rowGap:mt,gridRowGap:mt,inset:mt,insetBlock:mt,insetBlockEnd:mt,insetBlockStart:mt,insetInline:mt,insetInlineEnd:mt,insetInlineStart:mt,margin:mt,marginTop:mt,marginRight:mt,marginBottom:mt,marginLeft:mt,marginBlock:mt,marginBlockEnd:mt,marginBlockStart:mt,marginInline:mt,marginInlineEnd:mt,marginInlineStart:mt,padding:mt,paddingTop:mt,paddingRight:mt,paddingBottom:mt,paddingLeft:mt,paddingBlock:mt,paddingBlockEnd:mt,paddingBlockStart:mt,paddingInline:mt,paddingInlineEnd:mt,paddingInlineStart:mt,top:mt,right:mt,bottom:mt,left:mt,scrollMargin:mt,scrollMarginTop:mt,scrollMarginRight:mt,scrollMarginBottom:mt,scrollMarginLeft:mt,scrollMarginX:mt,scrollMarginY:mt,scrollMarginBlock:mt,scrollMarginBlockEnd:mt,scrollMarginBlockStart:mt,scrollMarginInline:mt,scrollMarginInlineEnd:mt,scrollMarginInlineStart:mt,scrollPadding:mt,scrollPaddingTop:mt,scrollPaddingRight:mt,scrollPaddingBottom:mt,scrollPaddingLeft:mt,scrollPaddingX:mt,scrollPaddingY:mt,scrollPaddingBlock:mt,scrollPaddingBlockEnd:mt,scrollPaddingBlockStart:mt,scrollPaddingInline:mt,scrollPaddingInlineEnd:mt,scrollPaddingInlineStart:mt,fontSize:"fontSizes",background:Cr,backgroundColor:Cr,backgroundImage:Cr,borderImage:Cr,border:Cr,borderBlock:Cr,borderBlockEnd:Cr,borderBlockStart:Cr,borderBottom:Cr,borderBottomColor:Cr,borderColor:Cr,borderInline:Cr,borderInlineEnd:Cr,borderInlineStart:Cr,borderLeft:Cr,borderLeftColor:Cr,borderRight:Cr,borderRightColor:Cr,borderTop:Cr,borderTopColor:Cr,caretColor:Cr,color:Cr,columnRuleColor:Cr,fill:Cr,outline:Cr,outlineColor:Cr,stroke:Cr,textDecorationColor:Cr,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Li,minBlockSize:Li,maxBlockSize:Li,inlineSize:Li,minInlineSize:Li,maxInlineSize:Li,width:Li,minWidth:Li,maxWidth:Li,height:Li,minHeight:Li,maxHeight:Li,flexBasis:Li,gridTemplateColumns:Li,gridTemplateRows:Li,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},OR=(e,t)=>typeof t=="function"?{"()":Function.prototype.toString.call(t)}:t,vh=()=>{const e=Object.create(null);return(t,r,...o)=>{const l=(h=>JSON.stringify(h,OR))(t);return l in e?e[l]:e[l]=r(t,...o)}},au=Symbol.for("sxs.internal"),zw=(e,t)=>Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)),FE=e=>{for(const t in e)return!0;return!1},{hasOwnProperty:$R}=Object.prototype,G1=e=>e.includes("-")?e:e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),BR=/\s+(?![^()]*\))/,pc=e=>t=>e(...typeof t=="string"?String(t).split(BR):[t]),OE={appearance:e=>({WebkitAppearance:e,appearance:e}),backfaceVisibility:e=>({WebkitBackfaceVisibility:e,backfaceVisibility:e}),backdropFilter:e=>({WebkitBackdropFilter:e,backdropFilter:e}),backgroundClip:e=>({WebkitBackgroundClip:e,backgroundClip:e}),boxDecorationBreak:e=>({WebkitBoxDecorationBreak:e,boxDecorationBreak:e}),clipPath:e=>({WebkitClipPath:e,clipPath:e}),content:e=>({content:e.includes('"')||e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(e)?e:`"${e}"`}),hyphens:e=>({WebkitHyphens:e,hyphens:e}),maskImage:e=>({WebkitMaskImage:e,maskImage:e}),maskSize:e=>({WebkitMaskSize:e,maskSize:e}),tabSize:e=>({MozTabSize:e,tabSize:e}),textSizeAdjust:e=>({WebkitTextSizeAdjust:e,textSizeAdjust:e}),userSelect:e=>({WebkitUserSelect:e,userSelect:e}),marginBlock:pc((e,t)=>({marginBlockStart:e,marginBlockEnd:t||e})),marginInline:pc((e,t)=>({marginInlineStart:e,marginInlineEnd:t||e})),maxSize:pc((e,t)=>({maxBlockSize:e,maxInlineSize:t||e})),minSize:pc((e,t)=>({minBlockSize:e,minInlineSize:t||e})),paddingBlock:pc((e,t)=>({paddingBlockStart:e,paddingBlockEnd:t||e})),paddingInline:pc((e,t)=>({paddingInlineStart:e,paddingInlineEnd:t||e}))},pv=/([\d.]+)([^]*)/,VR=(e,t)=>e.length?e.reduce((r,o)=>(r.push(...t.map(l=>l.includes("&")?l.replace(/&/g,/[ +>|~]/.test(o)&&/&.*&/.test(l)?`:is(${o})`:o):o+" "+l)),r),[]):t,NR=(e,t)=>e in UR&&typeof t=="string"?t.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(r,o,l,h)=>o+(l==="stretch"?`-moz-available${h};${G1(e)}:${o}-webkit-fill-available`:`-moz-fit-content${h};${G1(e)}:${o}fit-content`)+h):String(t),UR={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},gs=e=>e?e+"-":"",BI=(e,t,r)=>e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(o,l,h,g,u)=>g=="$"==!!h?o:(l||g=="--"?"calc(":"")+"var(--"+(g==="$"?gs(t)+(u.includes("$")?"":gs(r))+u.replace(/\$/g,"-"):u)+")"+(l||g=="--"?"*"+(l||"")+(h||"1")+")":"")),jR=/\s*,\s*(?![^()]*\))/,GR=Object.prototype.toString,Uc=(e,t,r,o,l)=>{let h,g,u;const b=(w,T,I)=>{let z,j;const Z=H=>{for(z in H){const B=z.charCodeAt(0)===64,X=B&&Array.isArray(H[z])?H[z]:[H[z]];for(j of X){const ue=/[A-Z]/.test($=z)?$:$.replace(/-[^]/g,me=>me[1].toUpperCase()),ce=typeof j=="object"&&j&&j.toString===GR&&(!o.utils[ue]||!T.length);if(ue in o.utils&&!ce){const me=o.utils[ue];if(me!==g){g=me,Z(me(j)),g=null;continue}}else if(ue in OE){const me=OE[ue];if(me!==u){u=me,Z(me(j)),u=null;continue}}if(B&&(le=z.slice(1)in o.media?"@media "+o.media[z.slice(1)]:z,z=le.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(me,ge,xe,je,ke,Be)=>{const zt=pv.test(ge),vt=.0625*(zt?-1:1),[Et,Ot]=zt?[je,ge]:[ge,je];return"("+(xe[0]==="="?"":xe[0]===">"===zt?"max-":"min-")+Et+":"+(xe[0]!=="="&&xe.length===1?Ot.replace(pv,(Xt,or,Ne)=>Number(or)+vt*(xe===">"?1:-1)+Ne):Ot)+(ke?") and ("+(ke[0]===">"?"min-":"max-")+Et+":"+(ke.length===1?Be.replace(pv,(Xt,or,Ne)=>Number(or)+vt*(ke===">"?-1:1)+Ne):Be):"")+")"})),ce){const me=B?I.concat(z):[...I],ge=B?[...T]:VR(T,z.split(jR));h!==void 0&&l($E(...h)),h=void 0,b(j,ge,me)}else h===void 0&&(h=[[],T,I]),z=B||z.charCodeAt(0)!==36?z:`--${gs(o.prefix)}${z.slice(1).replace(/\$/g,"-")}`,j=ce?j:typeof j=="number"?j&&ue in WR?String(j)+"px":String(j):BI(NR(ue,j==null?"":j),o.prefix,o.themeMap[ue]),h[0].push(`${B?`${z} `:`${G1(z)}:`}${j}`)}}var le,$};Z(w),h!==void 0&&l($E(...h)),h=void 0};b(e,t,r)},$E=(e,t,r)=>`${r.map(o=>`${o}{`).join("")}${t.length?`${t.join(",")}{`:""}${e.join(";")}${t.length?"}":""}${Array(r.length?r.length+1:0).join("}")}`,WR={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},BE=e=>String.fromCharCode(e+(e>25?39:97)),su=e=>(t=>{let r,o="";for(r=Math.abs(t);r>52;r=r/52|0)o=BE(r%52)+o;return BE(r%52)+o})(((t,r)=>{let o=r.length;for(;o;)t=33*t^r.charCodeAt(--o);return t})(5381,JSON.stringify(e))>>>0),Kd=["themed","global","styled","onevar","resonevar","allvar","inline"],qR=e=>{if(e.href&&!e.href.startsWith(location.origin))return!1;try{return!!e.cssRules}catch{return!1}},ZR=e=>{let t;const r=()=>{const{cssRules:l}=t.sheet;return[].map.call(l,(h,g)=>{const{cssText:u}=h;let b="";if(u.startsWith("--sxs"))return"";if(l[g-1]&&(b=l[g-1].cssText).startsWith("--sxs")){if(!h.cssRules.length)return"";for(const w in t.rules)if(t.rules[w].group===h)return`--sxs{--sxs:${[...t.rules[w].cache].join(" ")}}${u}`;return h.cssRules.length?`${b}${u}`:""}return u}).join("")},o=()=>{if(t){const{rules:u,sheet:b}=t;if(!b.deleteRule){for(;Object(Object(b.cssRules)[0]).type===3;)b.cssRules.splice(0,1);b.cssRules=[]}for(const w in u)delete u[w]}const l=Object(e).styleSheets||[];for(const u of l)if(qR(u)){for(let b=0,w=u.cssRules;w[b];++b){const T=Object(w[b]);if(T.type!==1)continue;const I=Object(w[b+1]);if(I.type!==4)continue;++b;const{cssText:z}=T;if(!z.startsWith("--sxs"))continue;const j=z.slice(14,-3).trim().split(/\s+/),Z=Kd[j[0]];Z&&(t||(t={sheet:u,reset:o,rules:{},toString:r}),t.rules[Z]={group:I,index:b,cache:new Set(j)})}if(t)break}if(!t){const u=(b,w)=>({type:w,cssRules:[],insertRule(T,I){this.cssRules.splice(I,0,u(T,{import:3,undefined:1}[(T.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return b==="@media{}"?`@media{${[].map.call(this.cssRules,T=>T.cssText).join("")}}`:b}});t={sheet:e?(e.head||e).appendChild(document.createElement("style")).sheet:u("","text/css"),rules:{},reset:o,toString:r}}const{sheet:h,rules:g}=t;for(let u=Kd.length-1;u>=0;--u){const b=Kd[u];if(!g[b]){const w=Kd[u+1],T=g[w]?g[w].index:h.cssRules.length;h.insertRule("@media{}",T),h.insertRule(`--sxs{--sxs:${u}}`,T),g[b]={group:h.cssRules[T+1],index:T,cache:new Set([u])}}HR(g[b])}};return o(),t},HR=e=>{const t=e.group;let r=t.cssRules.length;e.apply=o=>{try{t.insertRule(o,r),++r}catch{}}},Vd=Symbol(),XR=vh(),VE=(e,t)=>XR(e,()=>(...r)=>{let o={type:null,composers:new Set};for(const l of r)if(l!=null)if(l[au]){o.type==null&&(o.type=l[au].type);for(const h of l[au].composers)o.composers.add(h)}else l.constructor!==Object||l.$$typeof?o.type==null&&(o.type=l):o.composers.add(KR(l,e));return o.type==null&&(o.type="span"),o.composers.size||o.composers.add(["PJLV",{},[],[],{},[]]),YR(e,o,t)}),KR=({variants:e,compoundVariants:t,defaultVariants:r,...o},l)=>{const h=`${gs(l.prefix)}c-${su(o)}`,g=[],u=[],b=Object.create(null),w=[];for(const z in r)b[z]=String(r[z]);if(typeof e=="object"&&e)for(const z in e){T=b,I=z,$R.call(T,I)||(b[z]="undefined");const j=e[z];for(const Z in j){const H={[z]:String(Z)};String(Z)==="undefined"&&w.push(z);const le=j[Z],$=[H,le,!FE(le)];g.push($)}}var T,I;if(typeof t=="object"&&t)for(const z of t){let{css:j,...Z}=z;j=typeof j=="object"&&j||{};for(const le in Z)Z[le]=String(Z[le]);const H=[Z,j,!FE(j)];u.push(H)}return[h,o,g,u,b,w]},YR=(e,t,r)=>{const[o,l,h,g]=JR(t.composers),u=typeof t.type=="function"||t.type.$$typeof?(I=>{function z(){for(let j=0;j<z[Vd].length;j++){const[Z,H]=z[Vd][j];I.rules[Z].apply(H)}return z[Vd]=[],null}return z[Vd]=[],z.rules={},Kd.forEach(j=>z.rules[j]={apply:Z=>z[Vd].push([j,Z])}),z})(r):null,b=(u||r).rules,w=`.${o}${l.length>1?`:where(.${l.slice(1).join(".")})`:""}`,T=I=>{I=typeof I=="object"&&I||QR;const{css:z,...j}=I,Z={};for(const $ in h)if(delete j[$],$ in I){let B=I[$];typeof B=="object"&&B?Z[$]={"@initial":h[$],...B}:(B=String(B),Z[$]=B!=="undefined"||g.has($)?B:h[$])}else Z[$]=h[$];const H=new Set([...l]);for(const[$,B,X,ue]of t.composers){r.rules.styled.cache.has($)||(r.rules.styled.cache.add($),Uc(B,[`.${$}`],[],e,ge=>{b.styled.apply(ge)}));const ce=NE(X,Z,e.media),me=NE(ue,Z,e.media,!0);for(const ge of ce)if(ge!==void 0)for(const[xe,je,ke]of ge){const Be=`${$}-${su(je)}-${xe}`;H.add(Be);const zt=(ke?r.rules.resonevar:r.rules.onevar).cache,vt=ke?b.resonevar:b.onevar;zt.has(Be)||(zt.add(Be),Uc(je,[`.${Be}`],[],e,Et=>{vt.apply(Et)}))}for(const ge of me)if(ge!==void 0)for(const[xe,je]of ge){const ke=`${$}-${su(je)}-${xe}`;H.add(ke),r.rules.allvar.cache.has(ke)||(r.rules.allvar.cache.add(ke),Uc(je,[`.${ke}`],[],e,Be=>{b.allvar.apply(Be)}))}}if(typeof z=="object"&&z){const $=`${o}-i${su(z)}-css`;H.add($),r.rules.inline.cache.has($)||(r.rules.inline.cache.add($),Uc(z,[`.${$}`],[],e,B=>{b.inline.apply(B)}))}for(const $ of String(I.className||"").trim().split(/\s+/))$&&H.add($);const le=j.className=[...H].join(" ");return{type:t.type,className:le,selector:w,props:j,toString:()=>le,deferredInjector:u}};return zw(T,{className:o,selector:w,[au]:t,toString:()=>(r.rules.styled.cache.has(o)||T(),o)})},JR=e=>{let t="";const r=[],o={},l=[];for(const[h,,,,g,u]of e){t===""&&(t=h),r.push(h),l.push(...u);for(const b in g){const w=g[b];(o[b]===void 0||w!=="undefined"||u.includes(w))&&(o[b]=w)}}return[t,r,o,new Set(l)]},NE=(e,t,r,o)=>{const l=[];e:for(let[h,g,u]of e){if(u)continue;let b,w=0,T=!1;for(b in h){const I=h[b];let z=t[b];if(z!==I){if(typeof z!="object"||!z)continue e;{let j,Z,H=0;for(const le in z){if(I===String(z[le])){if(le!=="@initial"){const $=le.slice(1);(Z=Z||[]).push($ in r?r[$]:le.replace(/^@media ?/,"")),T=!0}w+=H,j=!0}++H}if(Z&&Z.length&&(g={["@media "+Z.join(", ")]:g}),!j)continue e}}}(l[w]=l[w]||[]).push([o?"cv":`${b}-${h[b]}`,g,T])}return l},QR={},eL=vh(),tL=(e,t)=>eL(e,()=>(...r)=>{const o=()=>{for(let l of r){l=typeof l=="object"&&l||{};let h=su(l);if(!t.rules.global.cache.has(h)){if(t.rules.global.cache.add(h),"@import"in l){let g=[].indexOf.call(t.sheet.cssRules,t.rules.themed.group)-1;for(let u of[].concat(l["@import"]))u=u.includes('"')||u.includes("'")?u:`"${u}"`,t.sheet.insertRule(`@import ${u};`,g++);delete l["@import"]}Uc(l,[],[],e,g=>{t.rules.global.apply(g)})}}return""};return zw(o,{toString:o})}),rL=vh(),nL=(e,t)=>rL(e,()=>r=>{const o=`${gs(e.prefix)}k-${su(r)}`,l=()=>{if(!t.rules.global.cache.has(o)){t.rules.global.cache.add(o);const h=[];Uc(r,[],[],e,u=>h.push(u));const g=`@keyframes ${o}{${h.join("")}}`;t.rules.global.apply(g)}return o};return zw(l,{get name(){return l()},toString:l})}),iL=class{constructor(e,t,r,o){this.token=e==null?"":String(e),this.value=t==null?"":String(t),this.scale=r==null?"":String(r),this.prefix=o==null?"":String(o)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+gs(this.prefix)+gs(this.scale)+this.token}toString(){return this.computedValue}},oL=vh(),aL=(e,t)=>oL(e,()=>(r,o)=>{o=typeof r=="object"&&r||Object(o);const l=`.${r=(r=typeof r=="string"?r:"")||`${gs(e.prefix)}t-${su(o)}`}`,h={},g=[];for(const b in o){h[b]={};for(const w in o[b]){const T=`--${gs(e.prefix)}${b}-${w}`,I=BI(String(o[b][w]),e.prefix,b);h[b][w]=new iL(w,I,b,e.prefix),g.push(`${T}:${I}`)}}const u=()=>{if(g.length&&!t.rules.themed.cache.has(r)){t.rules.themed.cache.add(r);const b=`${o===e.theme?":root,":""}.${r}{${g.join(";")}}`;t.rules.themed.apply(b)}return r};return{...h,get className(){return u()},selector:l,toString:u}}),sL=vh(),UE,lL=vh(),VI=e=>{const t=(r=>{let o=!1;const l=sL(r,h=>{o=!0;const g="prefix"in(h=typeof h=="object"&&h||{})?String(h.prefix):"",u=typeof h.media=="object"&&h.media||{},b=typeof h.root=="object"?h.root||null:globalThis.document||null,w=typeof h.theme=="object"&&h.theme||{},T={prefix:g,media:u,theme:w,themeMap:typeof h.themeMap=="object"&&h.themeMap||{...FR},utils:typeof h.utils=="object"&&h.utils||{}},I=ZR(b),z={css:VE(T,I),globalCss:tL(T,I),keyframes:nL(T,I),createTheme:aL(T,I),reset(){I.reset(),z.theme.toString()},theme:{},sheet:I,config:T,prefix:g,getCssText:I.toString,toString:I.toString};return String(z.theme=z.createTheme(w)),z});return o||l.reset(),l})(e);return t.styled=(({config:r,sheet:o})=>lL(r,()=>{const l=VE(r,o);return(...h)=>{const g=l(...h),u=g[au].type,b=Re.forwardRef((w,T)=>{const I=w&&w.as||u,{props:z,deferredInjector:j}=g(w);return delete z.as,z.ref=T,j?Re.createElement(Re.Fragment,null,Re.createElement(I,z),Re.createElement(j,null)):Re.createElement(I,z)});return b.className=g.className,b.displayName=`Styled.${u.displayName||u.name||u}`,b.selector=g.selector,b.toString=()=>g.selector,b[au]=g[au],b}}))(t),t},uL=()=>UE||(UE=VI()),cL=(...e)=>uL().globalCss(...e);const{styled:dr}=VI({theme:{colors:{black:"rgba(0, 0, 0)",white:"rgba(236, 237, 238)",hover:"#7180B9",primary:"#3423A6",primaryText:"white"},fonts:{sans:"Inter, sans-serif"},fontSizes:{1:"12px",2:"14px",3:"16px",4:"20px",5:"24px",6:"32px"},space:{1:"10px",2:"20px",3:"40px"},sizes:{1:"4px",2:"8px",3:"16px",4:"32px",5:"64px",6:"128px"},radii:{1:"2px",2:"4px",3:"8px",round:"9999px"},fontWeights:{},lineHeights:{},letterSpacings:{},borderWidths:{},borderStyles:{},shadows:{},zIndices:{},transitions:{}}}),hL=cL({"*":{margin:0,padding:0,border:0},body:{backgroundColor:"$black",color:"$white",fontFamily:"sans-serif"}});var jE={},dL=function(e,t,r,o,l){var h=new Worker(jE[t]||(jE[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return h.onmessage=function(g){var u=g.data,b=u.$e$;if(b){var w=new Error(b[0]);w.code=b[1],w.stack=b[2],l(w,null)}else l(null,u)},h.postMessage(r,o),h},bi=Uint8Array,Ks=Uint16Array,Dw=Uint32Array,Rw=new bi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Lw=new bi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),NI=new bi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),UI=function(e,t){for(var r=new Ks(31),o=0;o<31;++o)r[o]=t+=1<<e[o-1];for(var l=new Dw(r[30]),o=1;o<30;++o)for(var h=r[o];h<r[o+1];++h)l[h]=h-r[o]<<5|o;return[r,l]},jI=UI(Rw,2),Fw=jI[0],fL=jI[1];Fw[28]=258,fL[258]=28;var pL=UI(Lw,0),GI=pL[0],ry=new Ks(32768);for(var Gr=0;Gr<32768;++Gr){var Vs=(Gr&43690)>>>1|(Gr&21845)<<1;Vs=(Vs&52428)>>>2|(Vs&13107)<<2,Vs=(Vs&61680)>>>4|(Vs&3855)<<4,ry[Gr]=((Vs&65280)>>>8|(Vs&255)<<8)>>>1}var Yc=function(e,t,r){for(var o=e.length,l=0,h=new Ks(t);l<o;++l)e[l]&&++h[e[l]-1];var g=new Ks(t);for(l=0;l<t;++l)g[l]=g[l-1]+h[l-1]<<1;var u;if(r){u=new Ks(1<<t);var b=15-t;for(l=0;l<o;++l)if(e[l])for(var w=l<<4|e[l],T=t-e[l],I=g[e[l]-1]++<<T,z=I|(1<<T)-1;I<=z;++I)u[ry[I]>>>b]=w}else for(u=new Ks(o),l=0;l<o;++l)e[l]&&(u[l]=ry[g[e[l]-1]++]>>>15-e[l]);return u},ep=new bi(288);for(var Gr=0;Gr<144;++Gr)ep[Gr]=8;for(var Gr=144;Gr<256;++Gr)ep[Gr]=9;for(var Gr=256;Gr<280;++Gr)ep[Gr]=7;for(var Gr=280;Gr<288;++Gr)ep[Gr]=8;var WI=new bi(32);for(var Gr=0;Gr<32;++Gr)WI[Gr]=5;var qI=Yc(ep,9,1),ZI=Yc(WI,5,1),cg=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Go=function(e,t,r){var o=t/8|0;return(e[o]|e[o+1]<<8)>>(t&7)&r},hg=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},HI=function(e){return(e+7)/8|0},ff=function(e,t,r){(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length);var o=new(e.BYTES_PER_ELEMENT==2?Ks:e.BYTES_PER_ELEMENT==4?Dw:bi)(r-t);return o.set(e.subarray(t,r)),o},XI=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Hn=function(e,t,r){var o=new Error(t||XI[e]);if(o.code=e,Error.captureStackTrace&&Error.captureStackTrace(o,Hn),!r)throw o;return o},Ow=function(e,t,r){var o=e.length;if(!o||r&&r.f&&!r.l)return t||new bi(0);var l=!t||r,h=!r||r.i;r||(r={}),t||(t=new bi(o*3));var g=function(At){var Pr=t.length;if(At>Pr){var On=new bi(Math.max(Pr*2,At));On.set(t),t=On}},u=r.f||0,b=r.p||0,w=r.b||0,T=r.l,I=r.d,z=r.m,j=r.n,Z=o*8;do{if(!T){u=Go(e,b,1);var H=Go(e,b+1,3);if(b+=3,H)if(H==1)T=qI,I=ZI,z=9,j=5;else if(H==2){var X=Go(e,b,31)+257,ue=Go(e,b+10,15)+4,ce=X+Go(e,b+5,31)+1;b+=14;for(var me=new bi(ce),ge=new bi(19),xe=0;xe<ue;++xe)ge[NI[xe]]=Go(e,b+xe*3,7);b+=ue*3;for(var je=cg(ge),ke=(1<<je)-1,Be=Yc(ge,je,1),xe=0;xe<ce;){var zt=Be[Go(e,b,ke)];b+=zt&15;var le=zt>>>4;if(le<16)me[xe++]=le;else{var vt=0,Et=0;for(le==16?(Et=3+Go(e,b,3),b+=2,vt=me[xe-1]):le==17?(Et=3+Go(e,b,7),b+=3):le==18&&(Et=11+Go(e,b,127),b+=7);Et--;)me[xe++]=vt}}var Ot=me.subarray(0,X),Xt=me.subarray(X);z=cg(Ot),j=cg(Xt),T=Yc(Ot,z,1),I=Yc(Xt,j,1)}else Hn(1);else{var le=HI(b)+4,$=e[le-4]|e[le-3]<<8,B=le+$;if(B>o){h&&Hn(0);break}l&&g(w+$),t.set(e.subarray(le,B),w),r.b=w+=$,r.p=b=B*8,r.f=u;continue}if(b>Z){h&&Hn(0);break}}l&&g(w+131072);for(var or=(1<<z)-1,Ne=(1<<j)-1,rt=b;;rt=b){var vt=T[hg(e,b)&or],ht=vt>>>4;if(b+=vt&15,b>Z){h&&Hn(0);break}if(vt||Hn(2),ht<256)t[w++]=ht;else if(ht==256){rt=b,T=null;break}else{var Dt=ht-254;if(ht>264){var xe=ht-257,it=Rw[xe];Dt=Go(e,b,(1<<it)-1)+Fw[xe],b+=it}var xr=I[hg(e,b)&Ne],qt=xr>>>4;xr||Hn(3),b+=xr&15;var Xt=GI[qt];if(qt>3){var it=Lw[qt];Xt+=hg(e,b)&(1<<it)-1,b+=it}if(b>Z){h&&Hn(0);break}l&&g(w+131072);for(var Dr=w+Dt;w<Dr;w+=4)t[w]=t[w-Xt],t[w+1]=t[w+1-Xt],t[w+2]=t[w+2-Xt],t[w+3]=t[w+3-Xt];w=Dr}}r.l=T,r.p=rt,r.b=w,r.f=u,T&&(u=1,r.m=z,r.d=I,r.n=j)}while(!u);return w==t.length?t:ff(t,0,w)},mL=new bi(0),gL=function(e,t){var r={};for(var o in e)r[o]=e[o];for(var o in t)r[o]=t[o];return r},GE=function(e,t,r){for(var o=e(),l=e.toString(),h=l.slice(l.indexOf("[")+1,l.lastIndexOf("]")).replace(/\s+/g,"").split(","),g=0;g<o.length;++g){var u=o[g],b=h[g];if(typeof u=="function"){t+=";"+b+"=";var w=u.toString();if(u.prototype)if(w.indexOf("[native code]")!=-1){var T=w.indexOf(" ",8)+1;t+=w.slice(T,w.indexOf("(",T))}else{t+=w;for(var I in u.prototype)t+=";"+b+".prototype."+I+"="+u.prototype[I].toString()}else t+=w}else r[b]=u}return[t,r]},Dm=[],yL=function(e){var t=[];for(var r in e)e[r].buffer&&t.push((e[r]=new e[r].constructor(e[r])).buffer);return t},_L=function(e,t,r,o){var l;if(!Dm[r]){for(var h="",g={},u=e.length-1,b=0;b<u;++b)l=GE(e[b],h,g),h=l[0],g=l[1];Dm[r]=GE(e[u],h,g)}var w=gL({},Dm[r][1]);return dL(Dm[r][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",r,w,yL(w),o)},$w=function(){return[bi,Ks,Dw,Rw,Lw,NI,Fw,GI,qI,ZI,ry,XI,Yc,cg,Go,hg,HI,ff,Hn,Ow,TL,wL,bL]},vL=function(){return[KI,SL]},xL=function(){return[EL]},wL=function(e){return postMessage(e,[e.buffer])},bL=function(e){return e&&e.size&&new bi(e.size)},sh=function(e){return e.ondata=function(t,r){return postMessage([t,r],[t.buffer])},function(t){return e.push(t.data[0],t.data[1])}},Bw=function(e,t,r,o,l){var h,g=_L(e,o,l,function(u,b){u?(g.terminate(),t.ondata.call(t,u)):(b[1]&&g.terminate(),t.ondata.call(t,u,b[0],b[1]))});g.postMessage(r),t.push=function(u,b){t.ondata||Hn(5),h&&t.ondata(Hn(4,0,1),null,!!b),g.postMessage([u,h=b],[u.buffer])},t.terminate=function(){g.terminate()}},KI=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&Hn(6,"invalid gzip data");var t=e[3],r=10;t&4&&(r+=e[10]|(e[11]<<8)+2);for(var o=(t>>3&1)+(t>>4&1);o>0;o-=!e[r++]);return r+(t&2)},SL=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},EL=function(e){((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)&&Hn(6,"invalid zlib data"),e[1]&32&&Hn(6,"invalid zlib data: preset dictionaries not supported")},$a=function(){function e(t){this.s={},this.p=new bi(0),this.ondata=t}return e.prototype.e=function(t){this.ondata||Hn(5),this.d&&Hn(4);var r=this.p.length,o=new bi(r+t.length);o.set(this.p),o.set(t,r),this.p=o},e.prototype.c=function(t){this.d=this.s.i=t||!1;var r=this.s.b,o=Ow(this.p,this.o,this.s);this.ondata(ff(o,r,this.s.b),this.d),this.o=ff(o,this.s.b-32768),this.s.b=this.o.length,this.p=ff(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(t,r){this.e(t),this.c(r)},e}(),kL=function(){function e(t){this.ondata=t,Bw([$w,function(){return[sh,$a]}],this,0,function(){var r=new $a;onmessage=sh(r)},7)}return e}();function TL(e,t){return Ow(e,t)}var WE=function(){function e(t){this.v=1,$a.call(this,t)}return e.prototype.push=function(t,r){if($a.prototype.e.call(this,t),this.v){var o=this.p.length>3?KI(this.p):4;if(o>=this.p.length&&!r)return;this.p=this.p.subarray(o),this.v=0}r&&(this.p.length<8&&Hn(6,"invalid gzip data"),this.p=this.p.subarray(0,-8)),$a.prototype.c.call(this,r)},e}(),CL=function(){function e(t){this.ondata=t,Bw([$w,vL,function(){return[sh,$a,WE]}],this,0,function(){var r=new WE;onmessage=sh(r)},9)}return e}(),qE=function(){function e(t){this.v=1,$a.call(this,t)}return e.prototype.push=function(t,r){if($a.prototype.e.call(this,t),this.v){if(this.p.length<2&&!r)return;this.p=this.p.subarray(2),this.v=0}r&&(this.p.length<4&&Hn(6,"invalid zlib data"),this.p=this.p.subarray(0,-4)),$a.prototype.c.call(this,r)},e}(),PL=function(){function e(t){this.ondata=t,Bw([$w,xL,function(){return[sh,$a,qE]}],this,0,function(){var r=new qE;onmessage=sh(r)},11)}return e}(),IL=typeof TextDecoder!="undefined"&&new TextDecoder,ML=0;try{IL.decode(mL,{stream:!0}),ML=1}catch{}const AL={gzip:CL,deflate:PL,"deflate-raw":kL},zL=(e,t,r)=>{class o extends e{constructor(h){if(!arguments.length)throw new TypeError(`Failed to construct '${r}': 1 argument required, but only 0 present.`);const g=t[h];if(!g)throw new TypeError(`Failed to construct '${r}': Unsupported compression format: '${h}'`);let u=new g,b;super({start:w=>{u.ondata=(T,I,z)=>{T?w.error(T):I&&(w.enqueue(I),z&&w.terminate()),b()}},transform:w=>new Promise(T=>{if(b=T,w instanceof ArrayBuffer)w=new Uint8Array(w);else if(ArrayBuffer.isView(w))w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength);else throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");u.push(w)}),flush:()=>new Promise(w=>{b=w,u.push(new Uint8Array(0),!0)})},{size:w=>w.byteLength|0,highWaterMark:65536})}}return o};function DL(e){class t extends zL(e,AL,"DecompressionStream"){}return t}var Eo=Uint8Array,jc=Uint16Array,RL=Int32Array,YI=new Eo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),JI=new Eo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),LL=new Eo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),QI=function(e,t){for(var r=new jc(31),o=0;o<31;++o)r[o]=t+=1<<e[o-1];for(var l=new RL(r[30]),o=1;o<30;++o)for(var h=r[o];h<r[o+1];++h)l[h]=h-r[o]<<5|o;return{b:r,r:l}},eM=QI(YI,2),tM=eM.b,FL=eM.r;tM[28]=258,FL[258]=28;var OL=QI(JI,0),$L=OL.b,W1=new jc(32768);for(var Wr=0;Wr<32768;++Wr){var Ns=(Wr&43690)>>1|(Wr&21845)<<1;Ns=(Ns&52428)>>2|(Ns&13107)<<2,Ns=(Ns&61680)>>4|(Ns&3855)<<4,W1[Wr]=((Ns&65280)>>8|(Ns&255)<<8)>>1}var pf=function(e,t,r){for(var o=e.length,l=0,h=new jc(t);l<o;++l)e[l]&&++h[e[l]-1];var g=new jc(t);for(l=1;l<t;++l)g[l]=g[l-1]+h[l-1]<<1;var u;if(r){u=new jc(1<<t);var b=15-t;for(l=0;l<o;++l)if(e[l])for(var w=l<<4|e[l],T=t-e[l],I=g[e[l]-1]++<<T,z=I|(1<<T)-1;I<=z;++I)u[W1[I]>>b]=w}else for(u=new jc(o),l=0;l<o;++l)e[l]&&(u[l]=W1[g[e[l]-1]++]>>15-e[l]);return u},tp=new Eo(288);for(var Wr=0;Wr<144;++Wr)tp[Wr]=8;for(var Wr=144;Wr<256;++Wr)tp[Wr]=9;for(var Wr=256;Wr<280;++Wr)tp[Wr]=7;for(var Wr=280;Wr<288;++Wr)tp[Wr]=8;var rM=new Eo(32);for(var Wr=0;Wr<32;++Wr)rM[Wr]=5;var BL=pf(tp,9,1),VL=pf(rM,5,1),mv=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},ua=function(e,t,r){var o=t/8|0;return(e[o]|e[o+1]<<8)>>(t&7)&r},gv=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},NL=function(e){return(e+7)/8|0},UL=function(e,t,r){(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length);var o=new Eo(r-t);return o.set(e.subarray(t,r)),o},jL=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],go=function(e,t,r){var o=new Error(t||jL[e]);if(o.code=e,Error.captureStackTrace&&Error.captureStackTrace(o,go),!r)throw o;return o},Vw=function(e,t,r,o){var l=e.length,h=o?o.length:0;if(!l||t.f&&!t.l)return r||new Eo(0);var g=!r||t.i!=2,u=t.i;r||(r=new Eo(l*3));var b=function(bn){var Gt=r.length;if(bn>Gt){var ar=new Eo(Math.max(Gt*2,bn));ar.set(r),r=ar}},w=t.f||0,T=t.p||0,I=t.b||0,z=t.l,j=t.d,Z=t.m,H=t.n,le=l*8;do{if(!z){w=ua(e,T,1);var $=ua(e,T+1,3);if(T+=3,$)if($==1)z=BL,j=VL,Z=9,H=5;else if($==2){var ce=ua(e,T,31)+257,me=ua(e,T+10,15)+4,ge=ce+ua(e,T+5,31)+1;T+=14;for(var xe=new Eo(ge),je=new Eo(19),ke=0;ke<me;++ke)je[LL[ke]]=ua(e,T+ke*3,7);T+=me*3;for(var Be=mv(je),zt=(1<<Be)-1,vt=pf(je,Be,1),ke=0;ke<ge;){var Et=vt[ua(e,T,zt)];T+=Et&15;var B=Et>>4;if(B<16)xe[ke++]=B;else{var Ot=0,Xt=0;for(B==16?(Xt=3+ua(e,T,3),T+=2,Ot=xe[ke-1]):B==17?(Xt=3+ua(e,T,7),T+=3):B==18&&(Xt=11+ua(e,T,127),T+=7);Xt--;)xe[ke++]=Ot}}var or=xe.subarray(0,ce),Ne=xe.subarray(ce);Z=mv(or),H=mv(Ne),z=pf(or,Z,1),j=pf(Ne,H,1)}else go(1);else{var B=NL(T)+4,X=e[B-4]|e[B-3]<<8,ue=B+X;if(ue>l){u&&go(0);break}g&&b(I+X),r.set(e.subarray(B,ue),I),t.b=I+=X,t.p=T=ue*8,t.f=w;continue}if(T>le){u&&go(0);break}}g&&b(I+131072);for(var rt=(1<<Z)-1,ht=(1<<H)-1,Dt=T;;Dt=T){var Ot=z[gv(e,T)&rt],it=Ot>>4;if(T+=Ot&15,T>le){u&&go(0);break}if(Ot||go(2),it<256)r[I++]=it;else if(it==256){Dt=T,z=null;break}else{var xr=it-254;if(it>264){var ke=it-257,qt=YI[ke];xr=ua(e,T,(1<<qt)-1)+tM[ke],T+=qt}var Dr=j[gv(e,T)&ht],At=Dr>>4;Dr||go(3),T+=Dr&15;var Ne=$L[At];if(At>3){var qt=JI[At];Ne+=gv(e,T)&(1<<qt)-1,T+=qt}if(T>le){u&&go(0);break}g&&b(I+131072);var Pr=I+xr;if(I<Ne){var On=h-Ne,Mn=Math.min(Ne,Pr);for(On+I<0&&go(3);I<Mn;++I)r[I]=o[On+I]}for(;I<Pr;I+=4)r[I]=r[I-Ne],r[I+1]=r[I+1-Ne],r[I+2]=r[I+2-Ne],r[I+3]=r[I+3-Ne];I=Pr}}t.l=z,t.p=Dt,t.b=I,t.f=w,z&&(w=1,t.m=Z,t.d=j,t.n=H)}while(!w);return I==r.length?r:UL(r,0,I)},GL=new Eo(0),WL=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&go(6,"invalid gzip data");var t=e[3],r=10;t&4&&(r+=(e[10]|e[11]<<8)+2);for(var o=(t>>3&1)+(t>>4&1);o>0;o-=!e[r++]);return r+(t&2)},qL=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},ZL=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&go(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&go(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function HL(e,t){return Vw(e,{i:2},t&&t.out,t&&t.dictionary)}function XL(e,t){var r=WL(e);return r+8>e.length&&go(6,"invalid gzip data"),Vw(e.subarray(r,-8),{i:2},t&&t.out||new Eo(qL(e)),t&&t.dictionary)}function KL(e,t){return Vw(e.subarray(ZL(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}function ZE(e,t){return e[0]==31&&e[1]==139&&e[2]==8?XL(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?HL(e,t):KL(e,t)}var YL=typeof TextDecoder!="undefined"&&new TextDecoder,JL=0;try{YL.decode(GL,{stream:!0}),JL=1}catch{}const nM=(e,t)=>e*Math.pow(2,t),Nd=(e,t)=>Math.floor(e/Math.pow(2,t)),ny=(e,t)=>nM(e.getUint16(t+1,!0),8)+e.getUint8(t),iM=(e,t)=>nM(e.getUint32(t+2,!0),16)+e.getUint16(t,!0),QL=(e,t,r,o,l)=>{if(e!=o.getUint8(l))return e-o.getUint8(l);const h=ny(o,l+1);if(t!=h)return t-h;const g=ny(o,l+4);return r!=g?r-g:0},eF=(e,t,r,o)=>{const l=oM(e,t|128,r,o);return l?{z:t,x:r,y:o,offset:l[0],length:l[1],is_dir:!0}:null},HE=(e,t,r,o)=>{const l=oM(e,t,r,o);return l?{z:t,x:r,y:o,offset:l[0],length:l[1],is_dir:!1}:null},oM=(e,t,r,o)=>{let l=0,h=e.byteLength/17-1;for(;l<=h;){const g=h+l>>1,u=QL(t,r,o,e,g*17);if(u>0)l=g+1;else if(u<0)h=g-1;else return[iM(e,g*17+7),e.getUint32(g*17+13,!0)]}return null},tF=(e,t)=>e.is_dir&&!t.is_dir?1:!e.is_dir&&t.is_dir?-1:e.z!==t.z?e.z-t.z:e.x!==t.x?e.x-t.x:e.y-t.y,aM=(e,t)=>{const r=e.getUint8(t*17);return{z:r&127,x:ny(e,t*17+1),y:ny(e,t*17+4),offset:iM(e,t*17+7),length:e.getUint32(t*17+13,!0),is_dir:r>>7===1}},XE=e=>{const t=[],r=new DataView(e);for(let o=0;o<r.byteLength/17;o++)t.push(aM(r,o));return rF(t)},rF=e=>{e.sort(tF);const t=new ArrayBuffer(17*e.length),r=new Uint8Array(t);for(let o=0;o<e.length;o++){const l=e[o];let h=l.z;l.is_dir&&(h=h|128),r[o*17]=h,r[o*17+1]=l.x&255,r[o*17+2]=l.x>>8&255,r[o*17+3]=l.x>>16&255,r[o*17+4]=l.y&255,r[o*17+5]=l.y>>8&255,r[o*17+6]=l.y>>16&255,r[o*17+7]=l.offset&255,r[o*17+8]=Nd(l.offset,8)&255,r[o*17+9]=Nd(l.offset,16)&255,r[o*17+10]=Nd(l.offset,24)&255,r[o*17+11]=Nd(l.offset,32)&255,r[o*17+12]=Nd(l.offset,48)&255,r[o*17+13]=l.length&255,r[o*17+14]=l.length>>8&255,r[o*17+15]=l.length>>16&255,r[o*17+16]=l.length>>24&255}return t},nF=(e,t)=>{if(e.byteLength<17)return null;const r=e.byteLength/17,o=aM(e,r-1);if(o.is_dir){const l=o.z,h=t.z-l,g=Math.trunc(t.x/(1<<h)),u=Math.trunc(t.y/(1<<h));return{z:l,x:g,y:u}}return null};async function iF(e){const t=await e.getBytes(0,512e3),r=new DataView(t.data),o=r.getUint32(4,!0),l=r.getUint16(8,!0),h=new TextDecoder("utf-8"),g=JSON.parse(h.decode(new DataView(t.data,10,o)));let u=dg.Unknown;g.compression==="gzip"&&(u=dg.Gzip);let b=0;"minzoom"in g&&(b=+g.minzoom);let w=0;"maxzoom"in g&&(w=+g.maxzoom);let T=0,I=0,z=0,j=-180,Z=-85,H=180,le=85;if(g.bounds){const B=g.bounds.split(",");j=+B[0],Z=+B[1],H=+B[2],le=+B[3]}if(g.center){const B=g.center.split(",");T=+B[0],I=+B[1],z=+B[2]}return{specVersion:r.getUint16(2,!0),rootDirectoryOffset:10+o,rootDirectoryLength:l*17,jsonMetadataOffset:10,jsonMetadataLength:o,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:dg.None,tileCompression:u,tileType:lu.Mvt,minZoom:b,maxZoom:w,minLon:j,minLat:Z,maxLon:H,maxLat:le,centerZoom:z,centerLon:T,centerLat:I,etag:t.etag}}async function oF(e,t,r,o,l,h,g){let u=await r.getArrayBuffer(t,e.rootDirectoryOffset,e.rootDirectoryLength,e);e.specVersion===1&&(u=XE(u));const b=HE(new DataView(u),o,l,h);if(b){let I=(await t.getBytes(b.offset,b.length,g)).data;const z=new DataView(I);return z.getUint8(0)==31&&z.getUint8(1)==139&&(I=ZE(new Uint8Array(I))),{data:I}}const w=nF(new DataView(u),{z:o,x:l,y:h});if(w){const T=eF(new DataView(u),w.z,w.x,w.y);if(T){let I=await r.getArrayBuffer(t,T.offset,T.length,e);e.specVersion===1&&(I=XE(I));const z=HE(new DataView(I),o,l,h);if(z){let Z=(await t.getBytes(z.offset,z.length,g)).data;const H=new DataView(Z);return H.getUint8(0)==31&&H.getUint8(1)==139&&(Z=ZE(new Uint8Array(Z))),{data:Z}}}}}var sM={getHeader:iF,getZxy:oF};class aF{constructor(){this.tile=(t,r)=>{if(t.type=="json"){const o=t.url.substr(10);let l=this.tiles.get(o);return l||(l=new Jc(o),this.tiles.set(o,l)),l.getHeader().then(h=>{const g={tiles:[t.url+"/{z}/{x}/{y}"],minzoom:h.minZoom,maxzoom:h.maxZoom,bounds:[h.minLon,h.minLat,h.maxLon,h.maxLat]};r(null,g,null,null)}).catch(h=>{r(h,null,null,null)}),{cancel:()=>{}}}else{const o=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),l=t.url.match(o);if(!l)throw new Error("Invalid PMTiles protocol URL");const h=l[1];let g=this.tiles.get(h);g||(g=new Jc(h),this.tiles.set(h,g));const u=l[2],b=l[3],w=l[4],T=new AbortController,I=T.signal;let z=()=>{T.abort()};return g.getHeader().then(j=>{g.getZxy(+u,+b,+w,I).then(Z=>{Z?r(null,new Uint8Array(Z.data),Z.cacheControl,Z.expires):j.tileType==lu.Mvt?r(null,new Uint8Array,null,null):r(null,null,null,null)}).catch(Z=>{Z.name!=="AbortError"&&r(Z,null,null,null)})}),{cancel:z}}},this.tiles=new Map}add(t){this.tiles.set(t.source.getKey(),t)}get(t){return this.tiles.get(t)}}function mc(e,t){return(t>>>0)*4294967296+(e>>>0)}function sF(e,t){const r=t.buf;let o,l;if(l=r[t.pos++],o=(l&112)>>4,l<128||(l=r[t.pos++],o|=(l&127)<<3,l<128)||(l=r[t.pos++],o|=(l&127)<<10,l<128)||(l=r[t.pos++],o|=(l&127)<<17,l<128)||(l=r[t.pos++],o|=(l&127)<<24,l<128)||(l=r[t.pos++],o|=(l&1)<<31,l<128))return mc(e,o);throw new Error("Expected varint not more than 10 bytes")}function Ud(e){const t=e.buf;let r,o;return o=t[e.pos++],r=o&127,o<128||(o=t[e.pos++],r|=(o&127)<<7,o<128)||(o=t[e.pos++],r|=(o&127)<<14,o<128)||(o=t[e.pos++],r|=(o&127)<<21,o<128)?r:(o=t[e.pos],r|=(o&15)<<28,sF(r,e))}function lM(e,t,r,o){if(o==0){r==1&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);const l=t[0];t[0]=t[1],t[1]=l}}function lF(e,t){const r=Math.pow(2,e);let o=t,l=t,h=t;const g=[0,0];let u=1;for(;u<r;)o=1&h/2,l=1&(h^o),lM(u,g,o,l),g[0]+=u*o,g[1]+=u*l,h=h/4,u*=2;return[e,g[0],g[1]]}const uF=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function cF(e,t,r){if(e>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(t>Math.pow(2,e)-1||r>Math.pow(2,e)-1)throw Error("tile x/y outside zoom level bounds");const o=uF[e],l=Math.pow(2,e);let h=0,g=0,u=0;const b=[t,r];let w=l/2;for(;w>0;)h=(b[0]&w)>0?1:0,g=(b[1]&w)>0?1:0,u+=w*w*(3*h^g),lM(w,b,h,g),w=w/2;return o+u}function qy(e){let t=0;for(let r=0;r<27;r++){const o=(1<<r)*(1<<r);if(t+o>e)return lF(r,e-t);t+=o}throw Error("Tile zoom level exceeds max safe number limit (26)")}var dg=(e=>(e[e.Unknown=0]="Unknown",e[e.None=1]="None",e[e.Gzip=2]="Gzip",e[e.Brotli=3]="Brotli",e[e.Zstd=4]="Zstd",e))(dg||{});async function uM(e,t){if(t===1||t===0)return e;if(t===2){let r=new Response(e).body;const o=DL(TransformStream);let l=r.pipeThrough(new o("gzip"));return new Response(l).arrayBuffer()}else throw Error("Compression method not supported")}var lu=(e=>(e[e.Unknown=0]="Unknown",e[e.Mvt=1]="Mvt",e[e.Png=2]="Png",e[e.Jpeg=3]="Jpeg",e[e.Webp=4]="Webp",e[e.Avif=5]="Avif",e))(lu||{});const hF=127;function dF(e,t){let r=0,o=e.length-1;for(;r<=o;){const l=o+r>>1,h=t-e[l].tileId;if(h>0)r=l+1;else if(h<0)o=l-1;else return e[l]}return o>=0&&(e[o].runLength===0||t-e[o].tileId<e[o].runLength)?e[o]:null}class fF{constructor(t){this.file=t}getKey(){return this.file.name}async getBytes(t,r){return{data:await this.file.slice(t,t+r).arrayBuffer()}}}class pF{constructor(t){this.url=t}getKey(){return this.url}async getBytes(t,r,o){let l;o||(l=new AbortController,o=l.signal);let h=await fetch(this.url,{signal:o,headers:{Range:"bytes="+t+"-"+(t+r-1)}});if(h.status===416&&t===0){const b=h.headers.get("Content-Range");if(!b||!b.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const w=+b.substr(8);h=await fetch(this.url,{signal:o,headers:{Range:"bytes=0-"+(w-1)}})}if(h.status>=300)throw Error("Bad response code: "+h.status);const g=h.headers.get("Content-Length");if(h.status===200&&(!g||+g>r))throw l&&l.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:await h.arrayBuffer(),etag:h.headers.get("ETag")||void 0,cacheControl:h.headers.get("Cache-Control")||void 0,expires:h.headers.get("Expires")||void 0}}}function ca(e,t){const r=e.getUint32(t+4,!0),o=e.getUint32(t+0,!0);return r*Math.pow(2,32)+o}function mF(e,t){const r=new DataView(e),o=r.getUint8(7);if(o>3)throw Error(`Archive is spec version ${o} but this library supports up to spec version 3`);return{specVersion:o,rootDirectoryOffset:ca(r,8),rootDirectoryLength:ca(r,16),jsonMetadataOffset:ca(r,24),jsonMetadataLength:ca(r,32),leafDirectoryOffset:ca(r,40),leafDirectoryLength:ca(r,48),tileDataOffset:ca(r,56),tileDataLength:ca(r,64),numAddressedTiles:ca(r,72),numTileEntries:ca(r,80),numTileContents:ca(r,88),clustered:r.getUint8(96)===1,internalCompression:r.getUint8(97),tileCompression:r.getUint8(98),tileType:r.getUint8(99),minZoom:r.getUint8(100),maxZoom:r.getUint8(101),minLon:r.getInt32(102,!0)/1e7,minLat:r.getInt32(106,!0)/1e7,maxLon:r.getInt32(110,!0)/1e7,maxLat:r.getInt32(114,!0)/1e7,centerZoom:r.getUint8(118),centerLon:r.getInt32(119,!0)/1e7,centerLat:r.getInt32(123,!0)/1e7,etag:t}}function cM(e){const t={buf:new Uint8Array(e),pos:0},r=Ud(t),o=[];let l=0;for(let h=0;h<r;h++){const g=Ud(t);o.push({tileId:l+g,offset:0,length:0,runLength:1}),l+=g}for(let h=0;h<r;h++)o[h].runLength=Ud(t);for(let h=0;h<r;h++)o[h].length=Ud(t);for(let h=0;h<r;h++){const g=Ud(t);g===0&&h>0?o[h].offset=o[h-1].offset+o[h-1].length:o[h].offset=g-1}return o}function gF(e){const t=new DataView(e);return t.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):t.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}class Gc extends Error{}async function yF(e,t,r,o){const l=await e.getBytes(0,16384);if(new DataView(l.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(gF(l.data)<3)return[await sM.getHeader(e)];const g=l.data.slice(0,hF);let u=l.etag;o&&l.etag!=o&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+e.getKey()),u=void 0);const b=mF(g,u);if(r){const w=l.data.slice(b.rootDirectoryOffset,b.rootDirectoryOffset+b.rootDirectoryLength),T=e.getKey()+"|"+(b.etag||"")+"|"+b.rootDirectoryOffset+"|"+b.rootDirectoryLength,I=cM(await t(w,b.internalCompression));return[b,[T,I.length,I]]}return[b,void 0]}async function _F(e,t,r,o,l){const h=await e.getBytes(r,o);if(l.etag&&l.etag!==h.etag)throw new Gc(h.etag);const g=await t(h.data,l.internalCompression),u=cM(g);if(u.length===0)throw new Error("Empty directory is invalid");return u}class vF{constructor(t=100,r=!0,o=uM){this.cache=new Map,this.maxCacheEntries=t,this.counter=1,this.prefetch=r,this.decompress=o}async getHeader(t,r){const o=t.getKey();if(this.cache.has(o))return this.cache.get(o).lastUsed=this.counter++,await this.cache.get(o).data;const l=new Promise((h,g)=>{yF(t,this.decompress,this.prefetch,r).then(u=>{u[1]&&this.cache.set(u[1][0],{lastUsed:this.counter++,data:Promise.resolve(u[1][2])}),h(u[0]),this.prune()}).catch(u=>{g(u)})});return this.cache.set(o,{lastUsed:this.counter++,data:l}),l}async getDirectory(t,r,o,l){const h=t.getKey()+"|"+(l.etag||"")+"|"+r+"|"+o;if(this.cache.has(h))return this.cache.get(h).lastUsed=this.counter++,await this.cache.get(h).data;const g=new Promise((u,b)=>{_F(t,this.decompress,r,o,l).then(w=>{u(w),this.prune()}).catch(w=>{b(w)})});return this.cache.set(h,{lastUsed:this.counter++,data:g}),g}async getArrayBuffer(t,r,o,l){const h=t.getKey()+"|"+(l.etag||"")+"|"+r+"|"+o;if(this.cache.has(h))return this.cache.get(h).lastUsed=this.counter++,await this.cache.get(h).data;const g=new Promise((u,b)=>{t.getBytes(r,o).then(w=>{if(l.etag&&l.etag!==w.etag)throw new Gc(w.etag);u(w.data),this.cache.has(h),this.prune()}).catch(w=>{b(w)})});return this.cache.set(h,{lastUsed:this.counter++,data:g}),g}prune(){if(this.cache.size>=this.maxCacheEntries){let t=1/0,r;this.cache.forEach((o,l)=>{o.lastUsed<t&&(t=o.lastUsed,r=l)}),r&&this.cache.delete(r)}}async invalidate(t,r){this.cache.delete(t.getKey()),await this.getHeader(t,r)}}class Jc{constructor(t,r,o){typeof t=="string"?this.source=new pF(t):this.source=t,o?this.decompress=o:this.decompress=uM,r?this.cache=r:this.cache=new vF}async getHeader(){return await this.cache.getHeader(this.source)}async getZxyAttempt(t,r,o,l){const h=cF(t,r,o),g=await this.cache.getHeader(this.source);if(g.specVersion<3)return sM.getZxy(g,this.source,this.cache,t,r,o,l);if(t<g.minZoom||t>g.maxZoom)return;let u=g.rootDirectoryOffset,b=g.rootDirectoryLength;for(let w=0;w<=3;w++){const T=await this.cache.getDirectory(this.source,u,b,g),I=dF(T,h);if(I)if(I.runLength>0){const z=await this.source.getBytes(g.tileDataOffset+I.offset,I.length,l);if(g.etag&&g.etag!==z.etag)throw new Gc(z.etag);return{data:await this.decompress(z.data,g.tileCompression),cacheControl:z.cacheControl,expires:z.expires}}else u=g.leafDirectoryOffset+I.offset,b=I.length;else return}throw Error("Maximum directory depth exceeded")}async getZxy(t,r,o,l){try{return await this.getZxyAttempt(t,r,o,l)}catch(h){if(h instanceof Gc)return this.cache.invalidate(this.source,h.message),await this.getZxyAttempt(t,r,o,l);throw h}}async getMetadataAttempt(){const t=await this.cache.getHeader(this.source),r=await this.source.getBytes(t.jsonMetadataOffset,t.jsonMetadataLength);if(t.etag&&t.etag!==r.etag)throw new Gc(r.etag);const o=await this.decompress(r.data,t.internalCompression),l=new TextDecoder("utf-8");return JSON.parse(l.decode(o))}async getMetadata(){try{return await this.getMetadataAttempt()}catch(t){if(t instanceof Gc)return this.cache.invalidate(this.source,t.message),await this.getMetadataAttempt();throw t}}}function hM(e,t){if(e==null)return{};var r={},o=Object.keys(e),l,h;for(h=0;h<o.length;h++)l=o[h],!(t.indexOf(l)>=0)&&(r[l]=e[l]);return r}var xF=["color"],wF=W.exports.forwardRef(function(e,t){var r=e.color,o=r===void 0?"currentColor":r,l=hM(e,xF);return W.exports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:t}),W.exports.createElement("path",{d:"M7.49933 0.25C3.49635 0.25 0.25 3.49593 0.25 7.50024C0.25 10.703 2.32715 13.4206 5.2081 14.3797C5.57084 14.446 5.70302 14.2222 5.70302 14.0299C5.70302 13.8576 5.69679 13.4019 5.69323 12.797C3.67661 13.235 3.25112 11.825 3.25112 11.825C2.92132 10.9874 2.44599 10.7644 2.44599 10.7644C1.78773 10.3149 2.49584 10.3238 2.49584 10.3238C3.22353 10.375 3.60629 11.0711 3.60629 11.0711C4.25298 12.1788 5.30335 11.8588 5.71638 11.6732C5.78225 11.205 5.96962 10.8854 6.17658 10.7043C4.56675 10.5209 2.87415 9.89918 2.87415 7.12104C2.87415 6.32925 3.15677 5.68257 3.62053 5.17563C3.54576 4.99226 3.29697 4.25521 3.69174 3.25691C3.69174 3.25691 4.30015 3.06196 5.68522 3.99973C6.26337 3.83906 6.8838 3.75895 7.50022 3.75583C8.1162 3.75895 8.73619 3.83906 9.31523 3.99973C10.6994 3.06196 11.3069 3.25691 11.3069 3.25691C11.7026 4.25521 11.4538 4.99226 11.3795 5.17563C11.8441 5.68257 12.1245 6.32925 12.1245 7.12104C12.1245 9.9063 10.4292 10.5192 8.81452 10.6985C9.07444 10.9224 9.30633 11.3648 9.30633 12.0413C9.30633 13.0102 9.29742 13.7922 9.29742 14.0299C9.29742 14.2239 9.42828 14.4496 9.79591 14.3788C12.6746 13.4179 14.75 10.7025 14.75 7.50024C14.75 3.49593 11.5036 0.25 7.49933 0.25Z",fill:o,fillRule:"evenodd",clipRule:"evenodd"}))}),bF=["color"],SF=W.exports.forwardRef(function(e,t){var r=e.color,o=r===void 0?"currentColor":r,l=hM(e,bF);return W.exports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:t}),W.exports.createElement("path",{d:"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z",fill:o,fillRule:"evenodd",clipRule:"evenodd"}))});function dM(...e){return t=>e.forEach(r=>function(o,l){typeof o=="function"?o(l):o!=null&&(o.current=l)}(r,t))}function ys(...e){return W.exports.useCallback(dM(...e),e)}function Ze(){return Ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ze.apply(this,arguments)}const Of=W.exports.forwardRef((e,t)=>{const{children:r,...o}=e;return W.exports.Children.toArray(r).some(KE)?W.exports.createElement(W.exports.Fragment,null,W.exports.Children.map(r,l=>KE(l)?W.exports.createElement(q1,Ze({},o,{ref:t}),l.props.children):l)):W.exports.createElement(q1,Ze({},o,{ref:t}),r)});Of.displayName="Slot";const q1=W.exports.forwardRef((e,t)=>{const{children:r,...o}=e;return W.exports.isValidElement(r)?W.exports.cloneElement(r,{...kF(o,r.props),ref:dM(t,r.ref)}):W.exports.Children.count(r)>1?W.exports.Children.only(null):null});q1.displayName="SlotClone";const EF=({children:e})=>W.exports.createElement(W.exports.Fragment,null,e);function KE(e){return W.exports.isValidElement(e)&&e.type===EF}function kF(e,t){const r={...t};for(const o in t){const l=e[o],h=t[o];/^on[A-Z]/.test(o)?r[o]=(...g)=>{h==null||h(...g),l==null||l(...g)}:o==="style"?r[o]={...l,...h}:o==="className"&&(r[o]=[l,h].filter(Boolean).join(" "))}return{...e,...r}}var TF=function(e){if(typeof document=="undefined")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},gc=new WeakMap,Rm=new WeakMap,Lm={},yv=0,CF=function(e,t,r){t===void 0&&(t=TF(e)),r===void 0&&(r="data-aria-hidden");var o=Array.isArray(e)?e:[e];Lm[r]||(Lm[r]=new WeakMap);var l=Lm[r],h=[],g=new Set,u=function(w){!w||g.has(w)||(g.add(w),u(w.parentNode))};o.forEach(u);var b=function(w){!w||o.indexOf(w)>=0||Array.prototype.forEach.call(w.children,function(T){if(g.has(T))b(T);else{var I=T.getAttribute("aria-hidden"),z=I!==null&&I!=="false",j=(gc.get(T)||0)+1,Z=(l.get(T)||0)+1;gc.set(T,j),l.set(T,Z),h.push(T),j===1&&z&&Rm.set(T,!0),Z===1&&T.setAttribute(r,"true"),z||T.setAttribute("aria-hidden","true")}})};return b(t),g.clear(),yv++,function(){h.forEach(function(w){var T=gc.get(w)-1,I=l.get(w)-1;gc.set(w,T),l.set(w,I),T||(Rm.has(w)||w.removeAttribute("aria-hidden"),Rm.delete(w)),I||w.removeAttribute(r)}),yv--,yv||(gc=new WeakMap,gc=new WeakMap,Rm=new WeakMap,Lm={})}},Zs=function(){return Zs=Object.assign||function(t){for(var r,o=1,l=arguments.length;o<l;o++){r=arguments[o];for(var h in r)Object.prototype.hasOwnProperty.call(r,h)&&(t[h]=r[h])}return t},Zs.apply(this,arguments)};function PF(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(e);l<o.length;l++)t.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(e,o[l])&&(r[o[l]]=e[o[l]]);return r}function IF(e,t,r){if(r||arguments.length===2)for(var o=0,l=t.length,h;o<l;o++)(h||!(o in t))&&(h||(h=Array.prototype.slice.call(t,0,o)),h[o]=t[o]);return e.concat(h||Array.prototype.slice.call(t))}var fg="right-scroll-bar-position",pg="width-before-scroll-bar",MF="with-scroll-bars-hidden",AF="--removed-body-scroll-bar-size";function zF(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function DF(e,t){var r=W.exports.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(o){var l=r.value;l!==o&&(r.value=o,r.callback(o,l))}}}})[0];return r.callback=t,r.facade}function RF(e,t){return DF(t||null,function(r){return e.forEach(function(o){return zF(o,r)})})}var iy=function(){return iy=Object.assign||function(t){for(var r,o=1,l=arguments.length;o<l;o++){r=arguments[o];for(var h in r)Object.prototype.hasOwnProperty.call(r,h)&&(t[h]=r[h])}return t},iy.apply(this,arguments)};function LF(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(e);l<o.length;l++)t.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(e,o[l])&&(r[o[l]]=e[o[l]]);return r}function FF(e){return e}function OF(e,t){t===void 0&&(t=FF);var r=[],o=!1,l={read:function(){if(o)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(h){var g=t(h,o);return r.push(g),function(){r=r.filter(function(u){return u!==g})}},assignSyncMedium:function(h){for(o=!0;r.length;){var g=r;r=[],g.forEach(h)}r={push:function(u){return h(u)},filter:function(){return r}}},assignMedium:function(h){o=!0;var g=[];if(r.length){var u=r;r=[],u.forEach(h),g=r}var b=function(){var T=g;g=[],T.forEach(h)},w=function(){return Promise.resolve().then(b)};w(),r={push:function(T){g.push(T),w()},filter:function(T){return g=g.filter(T),r}}}};return l}function $F(e){e===void 0&&(e={});var t=OF(null);return t.options=iy({async:!0,ssr:!1},e),t}var fM=function(e){var t=e.sideCar,r=LF(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=t.read();if(!o)throw new Error("Sidecar medium not found");return W.exports.createElement(o,iy({},r))};fM.isSideCarExport=!0;function BF(e,t){return e.useMedium(t),fM}var pM=$F(),_v=function(){},Zy=W.exports.forwardRef(function(e,t){var r=W.exports.useRef(null),o=W.exports.useState({onScrollCapture:_v,onWheelCapture:_v,onTouchMoveCapture:_v}),l=o[0],h=o[1],g=e.forwardProps,u=e.children,b=e.className,w=e.removeScrollBar,T=e.enabled,I=e.shards,z=e.sideCar,j=e.noIsolation,Z=e.inert,H=e.allowPinchZoom,le=e.as,$=le===void 0?"div":le,B=PF(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),X=z,ue=RF([r,t]),ce=Zs(Zs({},B),l);return W.exports.createElement(W.exports.Fragment,null,T&&W.exports.createElement(X,{sideCar:pM,removeScrollBar:w,shards:I,noIsolation:j,inert:Z,setCallbacks:h,allowPinchZoom:!!H,lockRef:r}),g?W.exports.cloneElement(W.exports.Children.only(u),Zs(Zs({},ce),{ref:ue})):W.exports.createElement($,Zs({},ce,{className:b,ref:ue}),u))});Zy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Zy.classNames={fullWidth:pg,zeroRight:fg};var VF=function(){if(typeof __webpack_nonce__!="undefined")return __webpack_nonce__};function NF(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=VF();return t&&e.setAttribute("nonce",t),e}function UF(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function jF(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var GF=function(){var e=0,t=null;return{add:function(r){e==0&&(t=NF())&&(UF(t,r),jF(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},WF=function(){var e=GF();return function(t){W.exports.useEffect(function(){return e.add(t),function(){e.remove()}},[t])}},mM=function(){var e=WF(),t=function(r){var o=r.styles;return e(o),null};return t},qF={left:0,top:0,right:0,gap:0},vv=function(e){return parseInt(e||"",10)||0},ZF=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],o=t[e==="padding"?"paddingTop":"marginTop"],l=t[e==="padding"?"paddingRight":"marginRight"];return[vv(r),vv(o),vv(l)]},YE=function(e){if(e===void 0&&(e="margin"),typeof window=="undefined")return qF;var t=ZF(e),r=document.documentElement.clientWidth,o=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,o-r+t[2]-t[0])}},HF=mM(),XF=function(e,t,r,o){var l=e.left,h=e.top,g=e.right,u=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(MF,` {
   overflow: hidden `).concat(o,`;
   padding-right: `).concat(u,"px ").concat(o,`;
  }
  body {
    overflow: hidden `).concat(o,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(o,";"),r==="margin"&&`
    padding-left: `.concat(l,`px;
    padding-top: `).concat(h,`px;
    padding-right: `).concat(g,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(o,`;
    `),r==="padding"&&"padding-right: ".concat(u,"px ").concat(o,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(fg,` {
    right: `).concat(u,"px ").concat(o,`;
  }
  
  .`).concat(pg,` {
    margin-right: `).concat(u,"px ").concat(o,`;
  }
  
  .`).concat(fg," .").concat(fg,` {
    right: 0 `).concat(o,`;
  }
  
  .`).concat(pg," .").concat(pg,` {
    margin-right: 0 `).concat(o,`;
  }
  
  body {
    `).concat(AF,": ").concat(u,`px;
  }
`)},KF=function(e){var t=W.exports.useState(YE(e.gapMode)),r=t[0],o=t[1];W.exports.useEffect(function(){o(YE(e.gapMode))},[e.gapMode]);var l=e.noRelative,h=e.noImportant,g=e.gapMode,u=g===void 0?"margin":g;return W.exports.createElement(HF,{styles:XF(r,!l,u,h?"":"!important")})},Z1=!1;if(typeof window!="undefined")try{var Fm=Object.defineProperty({},"passive",{get:function(){return Z1=!0,!0}});window.addEventListener("test",Fm,Fm),window.removeEventListener("test",Fm,Fm)}catch{Z1=!1}var yc=Z1?{passive:!1}:!1,YF=function(e){var t=window.getComputedStyle(e);return t.overflowY!=="hidden"&&!(t.overflowY===t.overflowX&&t.overflowY==="visible")},JF=function(e){var t=window.getComputedStyle(e);return t.overflowX!=="hidden"&&!(t.overflowY===t.overflowX&&t.overflowX==="visible")},JE=function(e,t){var r=t;do{typeof ShadowRoot!="undefined"&&r instanceof ShadowRoot&&(r=r.host);var o=gM(e,r);if(o){var l=yM(e,r),h=l[1],g=l[2];if(h>g)return!0}r=r.parentNode}while(r&&r!==document.body);return!1},QF=function(e){var t=e.scrollTop,r=e.scrollHeight,o=e.clientHeight;return[t,r,o]},e6=function(e){var t=e.scrollLeft,r=e.scrollWidth,o=e.clientWidth;return[t,r,o]},gM=function(e,t){return e==="v"?YF(t):JF(t)},yM=function(e,t){return e==="v"?QF(t):e6(t)},t6=function(e,t){return e==="h"&&t==="rtl"?-1:1},r6=function(e,t,r,o,l){var h=t6(e,window.getComputedStyle(t).direction),g=h*o,u=r.target,b=t.contains(u),w=!1,T=g>0,I=0,z=0;do{var j=yM(e,u),Z=j[0],H=j[1],le=j[2],$=H-le-h*Z;(Z||$)&&gM(e,u)&&(I+=$,z+=Z),u=u.parentNode}while(!b&&u!==document.body||b&&(t.contains(u)||t===u));return(T&&(l&&I===0||!l&&g>I)||!T&&(l&&z===0||!l&&-g>z))&&(w=!0),w},Om=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},QE=function(e){return[e.deltaX,e.deltaY]},ek=function(e){return e&&"current"in e?e.current:e},n6=function(e,t){return e[0]===t[0]&&e[1]===t[1]},i6=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},o6=0,_c=[];function a6(e){var t=W.exports.useRef([]),r=W.exports.useRef([0,0]),o=W.exports.useRef(),l=W.exports.useState(o6++)[0],h=W.exports.useState(function(){return mM()})[0],g=W.exports.useRef(e);W.exports.useEffect(function(){g.current=e},[e]),W.exports.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(l));var H=IF([e.lockRef.current],(e.shards||[]).map(ek),!0).filter(Boolean);return H.forEach(function(le){return le.classList.add("allow-interactivity-".concat(l))}),function(){document.body.classList.remove("block-interactivity-".concat(l)),H.forEach(function(le){return le.classList.remove("allow-interactivity-".concat(l))})}}},[e.inert,e.lockRef.current,e.shards]);var u=W.exports.useCallback(function(H,le){if("touches"in H&&H.touches.length===2)return!g.current.allowPinchZoom;var $=Om(H),B=r.current,X="deltaX"in H?H.deltaX:B[0]-$[0],ue="deltaY"in H?H.deltaY:B[1]-$[1],ce,me=H.target,ge=Math.abs(X)>Math.abs(ue)?"h":"v";if("touches"in H&&ge==="h"&&me.type==="range")return!1;var xe=JE(ge,me);if(!xe)return!0;if(xe?ce=ge:(ce=ge==="v"?"h":"v",xe=JE(ge,me)),!xe)return!1;if(!o.current&&"changedTouches"in H&&(X||ue)&&(o.current=ce),!ce)return!0;var je=o.current||ce;return r6(je,le,H,je==="h"?X:ue,!0)},[]),b=W.exports.useCallback(function(H){var le=H;if(!(!_c.length||_c[_c.length-1]!==h)){var $="deltaY"in le?QE(le):Om(le),B=t.current.filter(function(ce){return ce.name===le.type&&ce.target===le.target&&n6(ce.delta,$)})[0];if(B&&B.should){le.preventDefault();return}if(!B){var X=(g.current.shards||[]).map(ek).filter(Boolean).filter(function(ce){return ce.contains(le.target)}),ue=X.length>0?u(le,X[0]):!g.current.noIsolation;ue&&le.preventDefault()}}},[]),w=W.exports.useCallback(function(H,le,$,B){var X={name:H,delta:le,target:$,should:B};t.current.push(X),setTimeout(function(){t.current=t.current.filter(function(ue){return ue!==X})},1)},[]),T=W.exports.useCallback(function(H){r.current=Om(H),o.current=void 0},[]),I=W.exports.useCallback(function(H){w(H.type,QE(H),H.target,u(H,e.lockRef.current))},[]),z=W.exports.useCallback(function(H){w(H.type,Om(H),H.target,u(H,e.lockRef.current))},[]);W.exports.useEffect(function(){return _c.push(h),e.setCallbacks({onScrollCapture:I,onWheelCapture:I,onTouchMoveCapture:z}),document.addEventListener("wheel",b,yc),document.addEventListener("touchmove",b,yc),document.addEventListener("touchstart",T,yc),function(){_c=_c.filter(function(H){return H!==h}),document.removeEventListener("wheel",b,yc),document.removeEventListener("touchmove",b,yc),document.removeEventListener("touchstart",T,yc)}},[]);var j=e.removeScrollBar,Z=e.inert;return W.exports.createElement(W.exports.Fragment,null,Z?W.exports.createElement(h,{styles:i6(l)}):null,j?W.exports.createElement(KF,{gapMode:"margin"}):null)}var s6=BF(pM,a6),_M=W.exports.forwardRef(function(e,t){return W.exports.createElement(Zy,Zs({},e,{ref:t,sideCar:s6}))});_M.classNames=Zy.classNames;var l6=_M;let xv=0;function u6(){W.exports.useEffect(()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=r[0])!==null&&e!==void 0?e:tk()),document.body.insertAdjacentElement("beforeend",(t=r[1])!==null&&t!==void 0?t:tk()),xv++,()=>{xv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(o=>o.remove()),xv--}},[])}function tk(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const oo=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>({...e,[t]:W.exports.forwardRef((r,o)=>{const{asChild:l,...h}=r,g=l?Of:t;return W.exports.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),W.exports.createElement(g,Ze({},h,{ref:o}))})}),{}),oy=Boolean(globalThis==null?void 0:globalThis.document)?W.exports.useLayoutEffect:()=>{},Hy=e=>{const{present:t,children:r}=e,o=function(g){const[u,b]=W.exports.useState(),w=W.exports.useRef({}),T=W.exports.useRef(g),I=W.exports.useRef("none"),z=g?"mounted":"unmounted",[j,Z]=function(H,le){return W.exports.useReducer(($,B)=>{const X=le[$][B];return X!=null?X:$},H)}(z,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return W.exports.useEffect(()=>{const H=$m(w.current);I.current=j==="mounted"?H:"none"},[j]),oy(()=>{const H=w.current,le=T.current;if(le!==g){const $=I.current,B=$m(H);g?Z("MOUNT"):B==="none"||(H==null?void 0:H.display)==="none"?Z("UNMOUNT"):Z(le&&$!==B?"ANIMATION_OUT":"UNMOUNT"),T.current=g}},[g,Z]),oy(()=>{if(u){const H=$=>{const B=$m(w.current).includes($.animationName);$.target===u&&B&&Z("ANIMATION_END")},le=$=>{$.target===u&&(I.current=$m(w.current))};return u.addEventListener("animationstart",le),u.addEventListener("animationcancel",H),u.addEventListener("animationend",H),()=>{u.removeEventListener("animationstart",le),u.removeEventListener("animationcancel",H),u.removeEventListener("animationend",H)}}Z("ANIMATION_END")},[u,Z]),{isPresent:["mounted","unmountSuspended"].includes(j),ref:W.exports.useCallback(H=>{H&&(w.current=getComputedStyle(H)),b(H)},[])}}(t),l=typeof r=="function"?r({present:o.isPresent}):W.exports.Children.only(r),h=ys(o.ref,l.ref);return typeof r=="function"||o.isPresent?W.exports.cloneElement(l,{ref:h}):null};function $m(e){return(e==null?void 0:e.animationName)||"none"}Hy.displayName="Presence";const c6=W.exports.forwardRef((e,t)=>{var r;const{container:o=globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,...l}=e;return o?LR.createPortal(W.exports.createElement(oo.div,Ze({},l,{ref:t})),o):null});function cl(e){const t=W.exports.useRef(e);return W.exports.useEffect(()=>{t.current=e}),W.exports.useMemo(()=>(...r)=>{var o;return(o=t.current)===null||o===void 0?void 0:o.call(t,...r)},[])}const rk={bubbles:!1,cancelable:!0},h6=W.exports.forwardRef((e,t)=>{const{loop:r=!1,trapped:o=!1,onMountAutoFocus:l,onUnmountAutoFocus:h,...g}=e,[u,b]=W.exports.useState(null),w=cl(l),T=cl(h),I=W.exports.useRef(null),z=ys(t,H=>b(H)),j=W.exports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;W.exports.useEffect(()=>{if(o){let $=function(X){if(j.paused||!u)return;const ue=X.target;u.contains(ue)?I.current=ue:Wl(I.current,{select:!0})},B=function(X){!j.paused&&u&&(u.contains(X.relatedTarget)||Wl(I.current,{select:!0}))};var H=$,le=B;return document.addEventListener("focusin",$),document.addEventListener("focusout",B),()=>{document.removeEventListener("focusin",$),document.removeEventListener("focusout",B)}}},[o,u,j.paused]),W.exports.useEffect(()=>{if(u){ok.add(j);const le=document.activeElement;if(!u.contains(le)){const $=new Event("focusScope.autoFocusOnMount",rk);u.addEventListener("focusScope.autoFocusOnMount",w),u.dispatchEvent($),$.defaultPrevented||(function(B,{select:X=!1}={}){const ue=document.activeElement;for(const ce of B)if(Wl(ce,{select:X}),document.activeElement!==ue)return}((H=nk(u),H.filter(B=>B.tagName!=="A")),{select:!0}),document.activeElement===le&&Wl(u))}return()=>{u.removeEventListener("focusScope.autoFocusOnMount",w),setTimeout(()=>{const $=new Event("focusScope.autoFocusOnUnmount",rk);u.addEventListener("focusScope.autoFocusOnUnmount",T),u.dispatchEvent($),$.defaultPrevented||Wl(le!=null?le:document.body,{select:!0}),u.removeEventListener("focusScope.autoFocusOnUnmount",T),ok.remove(j)},0)}}var H},[u,w,T,j]);const Z=W.exports.useCallback(H=>{if(!r&&!o||j.paused)return;const le=H.key==="Tab"&&!H.altKey&&!H.ctrlKey&&!H.metaKey,$=document.activeElement;if(le&&$){const B=H.currentTarget,[X,ue]=function(ce){const me=nk(ce),ge=ik(me,ce),xe=ik(me.reverse(),ce);return[ge,xe]}(B);X&&ue?H.shiftKey||$!==ue?H.shiftKey&&$===X&&(H.preventDefault(),r&&Wl(ue,{select:!0})):(H.preventDefault(),r&&Wl(X,{select:!0})):$===B&&H.preventDefault()}},[r,o,j.paused]);return W.exports.createElement(oo.div,Ze({tabIndex:-1},g,{ref:z,onKeyDown:Z}))});function nk(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const l=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||l?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function ik(e,t){for(const r of e)if(!d6(r,{upTo:t}))return r}function d6(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Wl(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&function(o){return o instanceof HTMLInputElement&&"select"in o}(e)&&t&&e.select()}}const ok=function(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=ak(e,t),e.unshift(t)},remove(t){var r;e=ak(e,t),(r=e[0])===null||r===void 0||r.resume()}}}();function ak(e,t){const r=[...e],o=r.indexOf(t);return o!==-1&&r.splice(o,1),r}function f6(e){const t=cl(e);W.exports.useEffect(()=>{const r=o=>{o.key==="Escape"&&t(o)};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t])}let sk,Bm=0;function p6({disabled:e}){const t=W.exports.useRef(!1);oy(()=>{if(e){let l=function(){Bm--,Bm===0&&(document.body.style.pointerEvents=sk)},h=function(g){t.current=g.pointerType!=="mouse"};var r=l,o=h;return Bm===0&&(sk=document.body.style.pointerEvents),document.body.style.pointerEvents="none",Bm++,document.addEventListener("pointerup",h),()=>{t.current?document.addEventListener("click",l,{once:!0}):l(),document.removeEventListener("pointerup",h)}}},[e])}function Vi(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e==null||e(o),r===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}const m6=W.exports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),g6=W.exports.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:h,onInteractOutside:g,onDismiss:u,...b}=e,w=W.exports.useContext(m6),[T,I]=W.exports.useState(null),[,z]=W.exports.useState({}),j=ys(t,me=>I(me)),Z=Array.from(w.layers),[H]=[...w.layersWithOutsidePointerEventsDisabled].slice(-1),le=Z.indexOf(H),$=T?Z.indexOf(T):-1,B=w.layersWithOutsidePointerEventsDisabled.size>0,X=$>=le,ue=function(me){const ge=cl(me),xe=W.exports.useRef(!1);return W.exports.useEffect(()=>{const je=Be=>{Be.target&&!xe.current&&uk("dismissableLayer.pointerDownOutside",ge,{originalEvent:Be}),xe.current=!1},ke=window.setTimeout(()=>{document.addEventListener("pointerdown",je)},0);return()=>{window.clearTimeout(ke),document.removeEventListener("pointerdown",je)}},[ge]),{onPointerDownCapture:()=>xe.current=!0}}(me=>{const ge=me.target,xe=[...w.branches].some(je=>je.contains(ge));X&&!xe&&(l==null||l(me),g==null||g(me),me.defaultPrevented||u==null||u())}),ce=function(me){const ge=cl(me),xe=W.exports.useRef(!1);return W.exports.useEffect(()=>{const je=ke=>{ke.target&&!xe.current&&uk("dismissableLayer.focusOutside",ge,{originalEvent:ke})};return document.addEventListener("focusin",je),()=>document.removeEventListener("focusin",je)},[ge]),{onFocusCapture:()=>xe.current=!0,onBlurCapture:()=>xe.current=!1}}(me=>{const ge=me.target;[...w.branches].some(xe=>xe.contains(ge))||(h==null||h(me),g==null||g(me),me.defaultPrevented||u==null||u())});return f6(me=>{$===w.layers.size-1&&(o==null||o(me),me.defaultPrevented||u==null||u())}),p6({disabled:r}),W.exports.useEffect(()=>{T&&(r&&w.layersWithOutsidePointerEventsDisabled.add(T),w.layers.add(T),lk())},[T,r,w]),W.exports.useEffect(()=>()=>{T&&(w.layers.delete(T),w.layersWithOutsidePointerEventsDisabled.delete(T),lk())},[T,w]),W.exports.useEffect(()=>{const me=()=>z({});return document.addEventListener("dismissableLayer.update",me),()=>document.removeEventListener("dismissableLayer.update",me)},[]),W.exports.createElement(oo.div,Ze({},b,{ref:j,style:{pointerEvents:B?X?"auto":"none":void 0,...e.style},onFocusCapture:Vi(e.onFocusCapture,ce.onFocusCapture),onBlurCapture:Vi(e.onBlurCapture,ce.onBlurCapture),onPointerDownCapture:Vi(e.onPointerDownCapture,ue.onPointerDownCapture)}))});function lk(){const e=new Event("dismissableLayer.update");document.dispatchEvent(e)}function uk(e,t,r){const o=r.originalEvent.target,l=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});return t&&o.addEventListener(e,t,{once:!0}),!o.dispatchEvent(l)}function rp({prop:e,defaultProp:t,onChange:r=()=>{}}){const[o,l]=function({defaultProp:b,onChange:w}){const T=W.exports.useState(b),[I]=T,z=W.exports.useRef(I),j=cl(w);return W.exports.useEffect(()=>{z.current!==I&&(j(I),z.current=I)},[I,z,j]),T}({defaultProp:t,onChange:r}),h=e!==void 0,g=h?e:o,u=cl(r);return[g,W.exports.useCallback(b=>{if(h){const w=b,T=typeof b=="function"?w(e):b;T!==e&&u(T)}else l(b)},[h,e,l,u])]}const y6=Yv["useId".toString()]||(()=>{});let _6=0;function mf(e){const[t,r]=W.exports.useState(y6());return oy(()=>{e||r(o=>o!=null?o:String(_6++))},[e]),e||(t?`radix-${t}`:"")}function vM(e,t){const r=W.exports.createContext(t);function o(l){const{children:h,...g}=l,u=W.exports.useMemo(()=>g,Object.values(g));return W.exports.createElement(r.Provider,{value:u},h)}return o.displayName=e+"Provider",[o,function(l){const h=W.exports.useContext(r);if(h)return h;if(t!==void 0)return t;throw new Error(`\`${l}\` must be used within \`${e}\``)}]}function np(e,t=[]){let r=[];const o=()=>{const l=r.map(h=>W.exports.createContext(h));return function(h){const g=(h==null?void 0:h[e])||l;return W.exports.useMemo(()=>({[`__scope${e}`]:{...h,[e]:g}}),[h,g])}};return o.scopeName=e,[function(l,h){const g=W.exports.createContext(h),u=r.length;function b(w){const{scope:T,children:I,...z}=w,j=(T==null?void 0:T[e][u])||g,Z=W.exports.useMemo(()=>z,Object.values(z));return W.exports.createElement(j.Provider,{value:Z},I)}return r=[...r,h],b.displayName=l+"Provider",[b,function(w,T){const I=(T==null?void 0:T[e][u])||g,z=W.exports.useContext(I);if(z)return z;if(h!==void 0)return h;throw new Error(`\`${w}\` must be used within \`${l}\``)}]},v6(o,...t)]}function v6(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const o=e.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(l){const h=o.reduce((g,{useScope:u,scopeName:b})=>({...g,...u(l)[`__scope${b}`]}),{});return W.exports.useMemo(()=>({[`__scope${t.scopeName}`]:h}),[h])}};return r.scopeName=t.scopeName,r}const[x6,OZ]=np("Dialog"),[w6,ml]=x6("Dialog"),b6=e=>{const{__scopeDialog:t,children:r,open:o,defaultOpen:l,onOpenChange:h,modal:g=!0,allowPinchZoom:u}=e,b=W.exports.useRef(null),w=W.exports.useRef(null),[T=!1,I]=rp({prop:o,defaultProp:l,onChange:h});return W.exports.createElement(w6,{scope:t,triggerRef:b,contentRef:w,contentId:mf(),titleId:mf(),descriptionId:mf(),open:T,onOpenChange:I,onOpenToggle:W.exports.useCallback(()=>I(z=>!z),[I]),modal:g,allowPinchZoom:u},r)},S6=e=>{const{__scopeDialog:t,forceMount:r,children:o,container:l}=e,h=ml("DialogPortal",t);return W.exports.createElement(W.exports.Fragment,null,W.exports.Children.map(o,g=>W.exports.createElement(Hy,{present:r||h.open},W.exports.createElement(c6,{asChild:!0,container:l},g))))},E6=W.exports.forwardRef((e,t)=>{const{forceMount:r,...o}=e,l=ml("DialogOverlay",e.__scopeDialog);return l.modal?W.exports.createElement(Hy,{present:r||l.open},W.exports.createElement(k6,Ze({},o,{ref:t}))):null}),k6=W.exports.forwardRef((e,t)=>{const{__scopeDialog:r,...o}=e,l=ml("DialogOverlay",r);return W.exports.createElement(l6,{as:Of,allowPinchZoom:l.allowPinchZoom,shards:[l.contentRef]},W.exports.createElement(oo.div,Ze({"data-state":wM(l.open)},o,{ref:t,style:{pointerEvents:"auto",...o.style}})))}),T6=W.exports.forwardRef((e,t)=>{const{forceMount:r,...o}=e,l=ml("DialogContent",e.__scopeDialog);return W.exports.createElement(Hy,{present:r||l.open},l.modal?W.exports.createElement(C6,Ze({},o,{ref:t})):W.exports.createElement(P6,Ze({},o,{ref:t})))}),C6=W.exports.forwardRef((e,t)=>{const r=ml("DialogContent",e.__scopeDialog),o=W.exports.useRef(null),l=ys(t,r.contentRef,o);return W.exports.useEffect(()=>{const h=o.current;if(h)return CF(h)},[]),W.exports.createElement(xM,Ze({},e,{ref:l,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Vi(e.onCloseAutoFocus,h=>{var g;h.preventDefault(),(g=r.triggerRef.current)===null||g===void 0||g.focus()}),onPointerDownOutside:Vi(e.onPointerDownOutside,h=>{const g=h.detail.originalEvent,u=g.button===0&&g.ctrlKey===!0;(g.button===2||u)&&h.preventDefault()}),onFocusOutside:Vi(e.onFocusOutside,h=>h.preventDefault())}))}),P6=W.exports.forwardRef((e,t)=>{const r=ml("DialogContent",e.__scopeDialog),o=W.exports.useRef(!1);return W.exports.createElement(xM,Ze({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{var h,g;(h=e.onCloseAutoFocus)===null||h===void 0||h.call(e,l),l.defaultPrevented||(o.current||(g=r.triggerRef.current)===null||g===void 0||g.focus(),l.preventDefault()),o.current=!1},onInteractOutside:l=>{var h,g;(h=e.onInteractOutside)===null||h===void 0||h.call(e,l),l.defaultPrevented||(o.current=!0);const u=l.target;!((g=r.triggerRef.current)===null||g===void 0)&&g.contains(u)&&l.preventDefault()}}))}),xM=W.exports.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:o,onOpenAutoFocus:l,onCloseAutoFocus:h,...g}=e,u=ml("DialogContent",r),b=W.exports.useRef(null),w=ys(t,b);return u6(),W.exports.createElement(W.exports.Fragment,null,W.exports.createElement(h6,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:l,onUnmountAutoFocus:h},W.exports.createElement(g6,Ze({role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":wM(u.open)},g,{ref:w,onDismiss:()=>u.onOpenChange(!1)}))),!1)}),I6=W.exports.forwardRef((e,t)=>{const{__scopeDialog:r,...o}=e,l=ml("DialogClose",r);return W.exports.createElement(oo.button,Ze({type:"button"},o,{ref:t,onClick:Vi(e.onClick,()=>l.onOpenChange(!1))}))});function wM(e){return e?"open":"closed"}vM("DialogTitleWarning",{contentName:"DialogContent",titleName:"DialogTitle",docsSlug:"dialog"});const M6=b6,A6=S6,z6=E6,D6=T6,R6=I6;var bM={exports:{}},L6="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",F6=L6,O6=F6;function SM(){}function EM(){}EM.resetWarningCache=SM;var $6=function(){function e(o,l,h,g,u,b){if(b!==O6){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:EM,resetWarningCache:SM};return r.PropTypes=r,r};bM.exports=$6();var Pe=bM.exports;function xh(e,t,r,o){function l(h){return h instanceof r?h:new r(function(g){g(h)})}return new(r||(r=Promise))(function(h,g){function u(T){try{w(o.next(T))}catch(I){g(I)}}function b(T){try{w(o.throw(T))}catch(I){g(I)}}function w(T){T.done?h(T.value):l(T.value).then(u,b)}w((o=o.apply(e,t||[])).next())})}function wh(e,t){var r={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},o,l,h,g;return g={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function u(w){return function(T){return b([w,T])}}function b(w){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,l&&(h=w[0]&2?l.return:w[0]?l.throw||((h=l.return)&&h.call(l),0):l.next)&&!(h=h.call(l,w[1])).done)return h;switch(l=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return r.label++,{value:w[1],done:!1};case 5:r.label++,l=w[1],w=[0];continue;case 7:w=r.ops.pop(),r.trys.pop();continue;default:if(h=r.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){r=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){r.label=w[1];break}if(w[0]===6&&r.label<h[1]){r.label=h[1],h=w;break}if(h&&r.label<h[2]){r.label=h[2],r.ops.push(w);break}h[2]&&r.ops.pop(),r.trys.pop();continue}w=t.call(e,r)}catch(T){w=[6,T],l=0}finally{o=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}}function B6(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var o=r.call(e),l,h=[],g;try{for(;(t===void 0||t-- >0)&&!(l=o.next()).done;)h.push(l.value)}catch(u){g={error:u}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(g)throw g.error}}return h}function V6(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(B6(arguments[t]));return e}var N6=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function ip(e,t){var r=U6(e);if(typeof r.path!="string"){var o=e.webkitRelativePath;Object.defineProperty(r,"path",{value:typeof t=="string"?t:typeof o=="string"&&o.length>0?o:e.name,writable:!1,configurable:!1,enumerable:!0})}return r}function U6(e){var t=e.name,r=t&&t.lastIndexOf(".")!==-1;if(r&&!e.type){var o=t.split(".").pop().toLowerCase(),l=N6.get(o);l&&Object.defineProperty(e,"type",{value:l,writable:!1,configurable:!1,enumerable:!0})}return e}var j6=[".DS_Store","Thumbs.db"];function G6(e){return xh(this,void 0,void 0,function(){return wh(this,function(t){return ay(e)&&W6(e)?[2,X6(e.dataTransfer,e.type)]:q6(e)?[2,Z6(e)]:Array.isArray(e)&&e.every(function(r){return"getFile"in r&&typeof r.getFile=="function"})?[2,H6(e)]:[2,[]]})})}function W6(e){return ay(e.dataTransfer)}function q6(e){return ay(e)&&ay(e.target)}function ay(e){return typeof e=="object"&&e!==null}function Z6(e){return H1(e.target.files).map(function(t){return ip(t)})}function H6(e){return xh(this,void 0,void 0,function(){var t;return wh(this,function(r){switch(r.label){case 0:return[4,Promise.all(e.map(function(o){return o.getFile()}))];case 1:return t=r.sent(),[2,t.map(function(o){return ip(o)})]}})})}function X6(e,t){return xh(this,void 0,void 0,function(){var r,o;return wh(this,function(l){switch(l.label){case 0:return e===null?[2,[]]:e.items?(r=H1(e.items).filter(function(h){return h.kind==="file"}),t!=="drop"?[2,r]:[4,Promise.all(r.map(K6))]):[3,2];case 1:return o=l.sent(),[2,ck(kM(o))];case 2:return[2,ck(H1(e.files).map(function(h){return ip(h)}))]}})})}function ck(e){return e.filter(function(t){return j6.indexOf(t.name)===-1})}function H1(e){if(e===null)return[];for(var t=[],r=0;r<e.length;r++){var o=e[r];t.push(o)}return t}function K6(e){if(typeof e.webkitGetAsEntry!="function")return hk(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?TM(t):hk(e)}function kM(e){return e.reduce(function(t,r){return V6(t,Array.isArray(r)?kM(r):[r])},[])}function hk(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var r=ip(t);return Promise.resolve(r)}function Y6(e){return xh(this,void 0,void 0,function(){return wh(this,function(t){return[2,e.isDirectory?TM(e):J6(e)]})})}function TM(e){var t=e.createReader();return new Promise(function(r,o){var l=[];function h(){var g=this;t.readEntries(function(u){return xh(g,void 0,void 0,function(){var b,w,T;return wh(this,function(I){switch(I.label){case 0:if(u.length)return[3,5];I.label=1;case 1:return I.trys.push([1,3,,4]),[4,Promise.all(l)];case 2:return b=I.sent(),r(b),[3,4];case 3:return w=I.sent(),o(w),[3,4];case 4:return[3,6];case 5:T=Promise.all(u.map(Y6)),l.push(T),h(),I.label=6;case 6:return[2]}})})},function(u){o(u)})}h()})}function J6(e){return xh(this,void 0,void 0,function(){return wh(this,function(t){return[2,new Promise(function(r,o){e.file(function(l){var h=ip(l,e.fullPath);r(h)},function(l){o(l)})})]})})}var Q6=function(e,t){if(e&&t){var r=Array.isArray(t)?t:t.split(","),o=e.name||"",l=(e.type||"").toLowerCase(),h=l.replace(/\/.*$/,"");return r.some(function(g){var u=g.trim().toLowerCase();return u.charAt(0)==="."?o.toLowerCase().endsWith(u):u.endsWith("/*")?h===u.replace(/\/.*$/,""):l===u})}return!0};function dk(e){return rO(e)||tO(e)||CM(e)||eO()}function eO(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tO(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rO(e){if(Array.isArray(e))return X1(e)}function nO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $f(e,t){return aO(e)||oO(e,t)||CM(e,t)||iO()}function iO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CM(e,t){if(!!e){if(typeof e=="string")return X1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X1(e,t)}}function X1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function oO(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var o=[],l=!0,h=!1,g,u;try{for(r=r.call(e);!(l=(g=r.next()).done)&&(o.push(g.value),!(t&&o.length===t));l=!0);}catch(b){h=!0,u=b}finally{try{!l&&r.return!=null&&r.return()}finally{if(h)throw u}}return o}}function aO(e){if(Array.isArray(e))return e}var sO="file-invalid-type",lO="file-too-large",uO="file-too-small",cO="too-many-files",hO=function(t){t=Array.isArray(t)&&t.length===1?t[0]:t;var r=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:sO,message:"File type must be ".concat(r)}},fk=function(t){return{code:lO,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},pk=function(t){return{code:uO,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},dO={code:cO,message:"Too many files"};function PM(e,t){var r=e.type==="application/x-moz-file"||Q6(e,t);return[r,r?null:hO(t)]}function IM(e,t,r){if(Kl(e.size))if(Kl(t)&&Kl(r)){if(e.size>r)return[!1,fk(r)];if(e.size<t)return[!1,pk(t)]}else{if(Kl(t)&&e.size<t)return[!1,pk(t)];if(Kl(r)&&e.size>r)return[!1,fk(r)]}return[!0,null]}function Kl(e){return e!=null}function fO(e){var t=e.files,r=e.accept,o=e.minSize,l=e.maxSize,h=e.multiple,g=e.maxFiles,u=e.validator;return!h&&t.length>1||h&&g>=1&&t.length>g?!1:t.every(function(b){var w=PM(b,r),T=$f(w,1),I=T[0],z=IM(b,o,l),j=$f(z,1),Z=j[0],H=u?u(b):null;return I&&Z&&!H})}function sy(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble!="undefined"?e.cancelBubble:!1}function Vm(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function mk(e){e.preventDefault()}function pO(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function mO(e){return e.indexOf("Edge/")!==-1}function gO(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return pO(e)||mO(e)}function Pa(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(o){for(var l=arguments.length,h=new Array(l>1?l-1:0),g=1;g<l;g++)h[g-1]=arguments[g];return t.some(function(u){return!sy(o)&&u&&u.apply(void 0,[o].concat(h)),sy(o)})}}function yO(){return"showOpenFilePicker"in window}function _O(e){return Kl(e)?Object.entries(e).filter(function(t){var r=$f(t,2),o=r[0],l=r[1],h=!0;return MM(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),h=!1),(!Array.isArray(l)||!l.every(AM))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),h=!1),h}).map(function(t){var r=$f(t,2),o=r[0],l=r[1];return{accept:nO({},o,l)}}):e}function vO(e){if(Kl(e))return Object.entries(e).reduce(function(t,r){var o=$f(r,2),l=o[0],h=o[1];return[].concat(dk(t),[l],dk(h))},[]).filter(function(t){return MM(t)||AM(t)}).join(",")}function xO(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function wO(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function MM(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function AM(e){return/^.*\.[\w]+$/.test(e)}var Xy={exports:{}},Ky={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bO=W.exports,SO=Symbol.for("react.element"),EO=Symbol.for("react.fragment"),kO=Object.prototype.hasOwnProperty,TO=bO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CO={key:!0,ref:!0,__self:!0,__source:!0};function zM(e,t,r){var o,l={},h=null,g=null;r!==void 0&&(h=""+r),t.key!==void 0&&(h=""+t.key),t.ref!==void 0&&(g=t.ref);for(o in t)kO.call(t,o)&&!CO.hasOwnProperty(o)&&(l[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)l[o]===void 0&&(l[o]=t[o]);return{$$typeof:SO,type:e,key:h,ref:g,props:l,_owner:TO.current}}Ky.Fragment=EO;Ky.jsx=zM;Ky.jsxs=zM;Xy.exports=Ky;const Oe=Xy.exports.jsx,Pt=Xy.exports.jsxs,Bf=Xy.exports.Fragment;var PO=["children"],IO=["open"],MO=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],AO=["refKey","onChange","onClick"];function zO(e){return LO(e)||RO(e)||DM(e)||DO()}function DO(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RO(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function LO(e){if(Array.isArray(e))return K1(e)}function wv(e,t){return $O(e)||OO(e,t)||DM(e,t)||FO()}function FO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DM(e,t){if(!!e){if(typeof e=="string")return K1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K1(e,t)}}function K1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function OO(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var o=[],l=!0,h=!1,g,u;try{for(r=r.call(e);!(l=(g=r.next()).done)&&(o.push(g.value),!(t&&o.length===t));l=!0);}catch(b){h=!0,u=b}finally{try{!l&&r.return!=null&&r.return()}finally{if(h)throw u}}return o}}function $O(e){if(Array.isArray(e))return e}function gk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,o)}return r}function on(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gk(Object(r),!0).forEach(function(o){Y1(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gk(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function Y1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ly(e,t){if(e==null)return{};var r=BO(e,t),o,l;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(l=0;l<h.length;l++)o=h[l],!(t.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,o)||(r[o]=e[o]))}return r}function BO(e,t){if(e==null)return{};var r={},o=Object.keys(e),l,h;for(h=0;h<o.length;h++)l=o[h],!(t.indexOf(l)>=0)&&(r[l]=e[l]);return r}var Nw=W.exports.forwardRef(function(e,t){var r=e.children,o=ly(e,PO),l=LM(o),h=l.open,g=ly(l,IO);return W.exports.useImperativeHandle(t,function(){return{open:h}},[h]),Oe(Bf,{children:r(on(on({},g),{},{open:h}))})});Nw.displayName="Dropzone";var RM={disabled:!1,getFilesFromEvent:G6,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Nw.defaultProps=RM;Nw.propTypes={children:Pe.func,accept:Pe.objectOf(Pe.arrayOf(Pe.string)),multiple:Pe.bool,preventDropOnDocument:Pe.bool,noClick:Pe.bool,noKeyboard:Pe.bool,noDrag:Pe.bool,noDragEventsBubbling:Pe.bool,minSize:Pe.number,maxSize:Pe.number,maxFiles:Pe.number,disabled:Pe.bool,getFilesFromEvent:Pe.func,onFileDialogCancel:Pe.func,onFileDialogOpen:Pe.func,useFsAccessApi:Pe.bool,autoFocus:Pe.bool,onDragEnter:Pe.func,onDragLeave:Pe.func,onDragOver:Pe.func,onDrop:Pe.func,onDropAccepted:Pe.func,onDropRejected:Pe.func,onError:Pe.func,validator:Pe.func};var J1={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function LM(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=on(on({},RM),e),r=t.accept,o=t.disabled,l=t.getFilesFromEvent,h=t.maxSize,g=t.minSize,u=t.multiple,b=t.maxFiles,w=t.onDragEnter,T=t.onDragLeave,I=t.onDragOver,z=t.onDrop,j=t.onDropAccepted,Z=t.onDropRejected,H=t.onFileDialogCancel,le=t.onFileDialogOpen,$=t.useFsAccessApi,B=t.autoFocus,X=t.preventDropOnDocument,ue=t.noClick,ce=t.noKeyboard,me=t.noDrag,ge=t.noDragEventsBubbling,xe=t.onError,je=t.validator,ke=W.exports.useMemo(function(){return vO(r)},[r]),Be=W.exports.useMemo(function(){return _O(r)},[r]),zt=W.exports.useMemo(function(){return typeof le=="function"?le:yk},[le]),vt=W.exports.useMemo(function(){return typeof H=="function"?H:yk},[H]),Et=W.exports.useRef(null),Ot=W.exports.useRef(null),Xt=W.exports.useReducer(VO,J1),or=wv(Xt,2),Ne=or[0],rt=or[1],ht=Ne.isFocused,Dt=Ne.isFileDialogActive,it=W.exports.useRef(typeof window!="undefined"&&window.isSecureContext&&$&&yO()),xr=function(){!it.current&&Dt&&setTimeout(function(){if(Ot.current){var kt=Ot.current.files;kt.length||(rt({type:"closeDialog"}),vt())}},300)};W.exports.useEffect(function(){return window.addEventListener("focus",xr,!1),function(){window.removeEventListener("focus",xr,!1)}},[Ot,Dt,vt,it]);var qt=W.exports.useRef([]),Dr=function(kt){Et.current&&Et.current.contains(kt.target)||(kt.preventDefault(),qt.current=[])};W.exports.useEffect(function(){return X&&(document.addEventListener("dragover",mk,!1),document.addEventListener("drop",Dr,!1)),function(){X&&(document.removeEventListener("dragover",mk),document.removeEventListener("drop",Dr))}},[Et,X]),W.exports.useEffect(function(){return!o&&B&&Et.current&&Et.current.focus(),function(){}},[Et,B,o]);var At=W.exports.useCallback(function(Qe){xe?xe(Qe):console.error(Qe)},[xe]),Pr=W.exports.useCallback(function(Qe){Qe.preventDefault(),Qe.persist(),ui(Qe),qt.current=[].concat(zO(qt.current),[Qe.target]),Vm(Qe)&&Promise.resolve(l(Qe)).then(function(kt){if(!(sy(Qe)&&!ge)){var Le=kt.length,Jt=Le>0&&fO({files:kt,accept:ke,minSize:g,maxSize:h,multiple:u,maxFiles:b,validator:je}),Mt=Le>0&&!Jt;rt({isDragAccept:Jt,isDragReject:Mt,isDragActive:!0,type:"setDraggedFiles"}),w&&w(Qe)}}).catch(function(kt){return At(kt)})},[l,w,At,ge,ke,g,h,u,b,je]),On=W.exports.useCallback(function(Qe){Qe.preventDefault(),Qe.persist(),ui(Qe);var kt=Vm(Qe);if(kt&&Qe.dataTransfer)try{Qe.dataTransfer.dropEffect="copy"}catch{}return kt&&I&&I(Qe),!1},[I,ge]),Mn=W.exports.useCallback(function(Qe){Qe.preventDefault(),Qe.persist(),ui(Qe);var kt=qt.current.filter(function(Jt){return Et.current&&Et.current.contains(Jt)}),Le=kt.indexOf(Qe.target);Le!==-1&&kt.splice(Le,1),qt.current=kt,!(kt.length>0)&&(rt({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Vm(Qe)&&T&&T(Qe))},[Et,T,ge]),bn=W.exports.useCallback(function(Qe,kt){var Le=[],Jt=[];Qe.forEach(function(Mt){var gn=PM(Mt,ke),yn=wv(gn,2),We=yn[0],Rt=yn[1],It=IM(Mt,g,h),Ur=wv(It,2),Kn=Ur[0],pt=Ur[1],ki=je?je(Mt):null;if(We&&Kn&&!ki)Le.push(Mt);else{var Zi=[Rt,pt];ki&&(Zi=Zi.concat(ki)),Jt.push({file:Mt,errors:Zi.filter(function(wa){return wa})})}}),(!u&&Le.length>1||u&&b>=1&&Le.length>b)&&(Le.forEach(function(Mt){Jt.push({file:Mt,errors:[dO]})}),Le.splice(0)),rt({acceptedFiles:Le,fileRejections:Jt,type:"setFiles"}),z&&z(Le,Jt,kt),Jt.length>0&&Z&&Z(Jt,kt),Le.length>0&&j&&j(Le,kt)},[rt,u,ke,g,h,b,z,j,Z,je]),Gt=W.exports.useCallback(function(Qe){Qe.preventDefault(),Qe.persist(),ui(Qe),qt.current=[],Vm(Qe)&&Promise.resolve(l(Qe)).then(function(kt){sy(Qe)&&!ge||bn(kt,Qe)}).catch(function(kt){return At(kt)}),rt({type:"reset"})},[l,bn,At,ge]),ar=W.exports.useCallback(function(){if(it.current){rt({type:"openDialog"}),zt();var Qe={multiple:u,types:Be};window.showOpenFilePicker(Qe).then(function(kt){return l(kt)}).then(function(kt){bn(kt,null),rt({type:"closeDialog"})}).catch(function(kt){xO(kt)?(vt(kt),rt({type:"closeDialog"})):wO(kt)?(it.current=!1,Ot.current&&(Ot.current.value=null,Ot.current.click())):At(kt)});return}Ot.current&&(rt({type:"openDialog"}),zt(),Ot.current.value=null,Ot.current.click())},[rt,zt,vt,$,bn,At,Be,u]),mn=W.exports.useCallback(function(Qe){!Et.current||!Et.current.isEqualNode(Qe.target)||(Qe.key===" "||Qe.key==="Enter"||Qe.keyCode===32||Qe.keyCode===13)&&(Qe.preventDefault(),ar())},[Et,ar]),Ce=W.exports.useCallback(function(){rt({type:"focus"})},[]),$n=W.exports.useCallback(function(){rt({type:"blur"})},[]),qi=W.exports.useCallback(function(){ue||(gO()?setTimeout(ar,0):ar())},[ue,ar]),Kt=function(kt){return o?null:kt},Zt=function(kt){return ce?null:Kt(kt)},un=function(kt){return me?null:Kt(kt)},ui=function(kt){ge&&kt.stopPropagation()},Bn=W.exports.useMemo(function(){return function(){var Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},kt=Qe.refKey,Le=kt===void 0?"ref":kt,Jt=Qe.role,Mt=Qe.onKeyDown,gn=Qe.onFocus,yn=Qe.onBlur,We=Qe.onClick,Rt=Qe.onDragEnter,It=Qe.onDragOver,Ur=Qe.onDragLeave,Kn=Qe.onDrop,pt=ly(Qe,MO);return on(on(Y1({onKeyDown:Zt(Pa(Mt,mn)),onFocus:Zt(Pa(gn,Ce)),onBlur:Zt(Pa(yn,$n)),onClick:Kt(Pa(We,qi)),onDragEnter:un(Pa(Rt,Pr)),onDragOver:un(Pa(It,On)),onDragLeave:un(Pa(Ur,Mn)),onDrop:un(Pa(Kn,Gt)),role:typeof Jt=="string"&&Jt!==""?Jt:"presentation"},Le,Et),!o&&!ce?{tabIndex:0}:{}),pt)}},[Et,mn,Ce,$n,qi,Pr,On,Mn,Gt,ce,me,o]),xa=W.exports.useCallback(function(Qe){Qe.stopPropagation()},[]),Rr=W.exports.useMemo(function(){return function(){var Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},kt=Qe.refKey,Le=kt===void 0?"ref":kt,Jt=Qe.onChange,Mt=Qe.onClick,gn=ly(Qe,AO),yn=Y1({accept:ke,multiple:u,type:"file",style:{display:"none"},onChange:Kt(Pa(Jt,Gt)),onClick:Kt(Pa(Mt,xa)),tabIndex:-1},Le,Ot);return on(on({},yn),gn)}},[Ot,r,u,Gt,o]);return on(on({},Ne),{},{isFocused:ht&&!o,getRootProps:Bn,getInputProps:Rr,rootRef:Et,inputRef:Ot,open:Kt(ar)})}function VO(e,t){switch(t.type){case"focus":return on(on({},e),{},{isFocused:!0});case"blur":return on(on({},e),{},{isFocused:!1});case"openDialog":return on(on({},J1),{},{isFileDialogActive:!0});case"closeDialog":return on(on({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return on(on({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return on(on({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return on({},J1);default:return e}}function yk(){}const[NO,$Z]=vM("Label",{id:void 0,controlRef:{current:null}}),UO=W.exports.forwardRef((e,t)=>{const{htmlFor:r,id:o,...l}=e,h=W.exports.useRef(null),g=W.exports.useRef(null),u=ys(t,g),b=mf(o);return W.exports.useEffect(()=>{if(r){const w=document.getElementById(r);if(g.current&&w){const T=()=>w.getAttribute("aria-labelledby"),I=[b,T()].filter(Boolean).join(" ");return w.setAttribute("aria-labelledby",I),h.current=w,()=>{var z;const j=(z=T())===null||z===void 0?void 0:z.replace(b,"");j===""?w.removeAttribute("aria-labelledby"):j&&w.setAttribute("aria-labelledby",j)}}}},[b,r]),W.exports.createElement(NO,{id:b,controlRef:h},W.exports.createElement(oo.span,Ze({role:"label",id:b},l,{ref:u,onMouseDown:w=>{var T;(T=e.onMouseDown)===null||T===void 0||T.call(e,w),!w.defaultPrevented&&w.detail>1&&w.preventDefault()},onClick:w=>{var T;if((T=e.onClick)===null||T===void 0||T.call(e,w),!h.current||w.defaultPrevented)return;const I=h.current.contains(w.target),z=w.isTrusted===!0;!I&&z&&(h.current.click(),h.current.focus())}})))}),jO=UO,GO=dr("input",{all:"unset",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"$3",fontFamily:"$sans","&:focus":{boxShadow:"0 0 0 1px black"},width:"100%",border:"1px solid $white",padding:"$1",boxSizing:"border-box",margin:"0 0 $2 0",borderRadius:"$2"}),bv=dr(jO,{display:"block",fontSize:"$3",fontWeight:300,userSelect:"none",padding:"0 0 $1 0"}),WO=dr("h1",{paddingBottom:"$1",fontWeight:500}),qO=dr("div",{maxWidth:780,marginLeft:"auto",marginRight:"auto",padding:"$3"}),ZO=dr("button",{padding:"$1 $2",marginBottom:"$1",borderRadius:"$2",cursor:"pointer",variants:{color:{violet:{backgroundColor:"blueviolet",color:"white","&:hover":{backgroundColor:"darkviolet"}},gray:{backgroundColor:"gainsboro","&:hover":{backgroundColor:"lightgray"}}}}}),HO=dr("div",{padding:"$2",border:"1px dashed $white",textAlign:"center",margin:"0 0 $2 0"}),XO=dr("div",{padding:"$1","&:not(:last-child)":{borderBottom:"1px solid $white"},"&:hover":{backgroundColor:"$hover"},variants:{selected:{true:{backgroundColor:"red"}}}}),KO=dr("div",{borderRadius:"$1",border:"1px solid $white",margin:"0 0 $2 0"}),_k=["https://r2-public.protomaps.com/protomaps-sample-datasets/protomaps-basemap-opensource-20230408.pmtiles","https://protomaps.github.io/PMTiles/protomaps(vector)ODbL_firenze.pmtiles","https://protomaps.github.io/PMTiles/stamen_toner(raster)CC-BY+ODbL_z3.pmtiles","https://r2-public.protomaps.com/protomaps-sample-datasets/cb_2018_us_zcta510_500k.pmtiles","https://protomaps.github.io/PMTiles/usgs-mt-whitney-8-15-webp-512.pmtiles"];function YO(e){const t=W.exports.useCallback(T=>{e.setFile(new Jc(new fF(T[0])))},[]),{acceptedFiles:r,getRootProps:o,getInputProps:l}=LM({onDrop:t});let[h,g]=W.exports.useState("");W.exports.useState(1);const u=T=>{g(T.target.value)},b=T=>()=>{e.setFile(new Jc(_k[T]))};return Pt(qO,{children:[Oe(WO,{children:"PMTiles Viewer"}),Oe(bv,{htmlFor:"remoteUrl",children:"Specify a remote URL"}),Oe(GO,{id:"remoteUrl",placeholder:"https://example.com/my_archive.pmtiles",onChange:u}),Oe(ZO,{color:"gray",onClick:()=>{e.setFile(new Jc(h))},disabled:!h.trim(),children:"Load URL"}),Oe(bv,{htmlFor:"localFile",children:"Select a local file"}),Pt(HO,{...o(),children:[Oe("input",{...l()}),Oe("p",{children:"Drag + drop a file here, or click to select"})]}),Oe(bv,{children:"Load an example"}),Oe(KO,{children:_k.map((T,I)=>Oe(XO,{onClick:b(I),children:T},I))})]})}var Uw={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Uw.read=function(e,t,r,o,l){var h,g,u=l*8-o-1,b=(1<<u)-1,w=b>>1,T=-7,I=r?l-1:0,z=r?-1:1,j=e[t+I];for(I+=z,h=j&(1<<-T)-1,j>>=-T,T+=u;T>0;h=h*256+e[t+I],I+=z,T-=8);for(g=h&(1<<-T)-1,h>>=-T,T+=o;T>0;g=g*256+e[t+I],I+=z,T-=8);if(h===0)h=1-w;else{if(h===b)return g?NaN:(j?-1:1)*(1/0);g=g+Math.pow(2,o),h=h-w}return(j?-1:1)*g*Math.pow(2,h-o)};Uw.write=function(e,t,r,o,l,h){var g,u,b,w=h*8-l-1,T=(1<<w)-1,I=T>>1,z=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=o?0:h-1,Z=o?1:-1,H=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,g=T):(g=Math.floor(Math.log(t)/Math.LN2),t*(b=Math.pow(2,-g))<1&&(g--,b*=2),g+I>=1?t+=z/b:t+=z*Math.pow(2,1-I),t*b>=2&&(g++,b/=2),g+I>=T?(u=0,g=T):g+I>=1?(u=(t*b-1)*Math.pow(2,l),g=g+I):(u=t*Math.pow(2,I-1)*Math.pow(2,l),g=0));l>=8;e[r+j]=u&255,j+=Z,u/=256,l-=8);for(g=g<<l|u,w+=l;w>0;e[r+j]=g&255,j+=Z,g/=256,w-=8);e[r+j-Z]|=H*128};var JO=vr,Nm=Uw;function vr(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}vr.Varint=0;vr.Fixed64=1;vr.Bytes=2;vr.Fixed32=5;var Q1=(1<<16)*(1<<16),vk=1/Q1,QO=12,FM=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");vr.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var o=this.readVarint(),l=o>>3,h=this.pos;this.type=o&7,e(l,t,this),this.pos===h&&this.skip(o)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Um(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=wk(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Um(this.buf,this.pos)+Um(this.buf,this.pos+4)*Q1;return this.pos+=8,e},readSFixed64:function(){var e=Um(this.buf,this.pos)+wk(this.buf,this.pos+4)*Q1;return this.pos+=8,e},readFloat:function(){var e=Nm.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Nm.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,r,o;return o=t[this.pos++],r=o&127,o<128||(o=t[this.pos++],r|=(o&127)<<7,o<128)||(o=t[this.pos++],r|=(o&127)<<14,o<128)||(o=t[this.pos++],r|=(o&127)<<21,o<128)?r:(o=t[this.pos],r|=(o&15)<<28,e$(r,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=QO&&FM?p$(this.buf,t,e):f$(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==vr.Bytes)return e.push(this.readVarint(t));var r=ts(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==vr.Bytes)return e.push(this.readSVarint());var t=ts(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==vr.Bytes)return e.push(this.readBoolean());var t=ts(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==vr.Bytes)return e.push(this.readFloat());var t=ts(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==vr.Bytes)return e.push(this.readDouble());var t=ts(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==vr.Bytes)return e.push(this.readFixed32());var t=ts(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==vr.Bytes)return e.push(this.readSFixed32());var t=ts(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==vr.Bytes)return e.push(this.readFixed64());var t=ts(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==vr.Bytes)return e.push(this.readSFixed64());var t=ts(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===vr.Varint)for(;this.buf[this.pos++]>127;);else if(t===vr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===vr.Fixed32)this.pos+=4;else if(t===vr.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),xc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),xc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),xc(this.buf,e&-1,this.pos),xc(this.buf,Math.floor(e*vk),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),xc(this.buf,e&-1,this.pos),xc(this.buf,Math.floor(e*vk),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){t$(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=m$(this.buf,e,this.pos);var r=this.pos-t;r>=128&&xk(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),Nm.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Nm.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var o=this.pos-r;o>=128&&xk(r,o,this),this.pos=r-1,this.writeVarint(o),this.pos+=o},writeMessage:function(e,t,r){this.writeTag(e,vr.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,i$,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,o$,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,l$,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,a$,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,s$,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,u$,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,c$,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,h$,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,d$,t)},writeBytesField:function(e,t){this.writeTag(e,vr.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,vr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,vr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,vr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,vr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,vr.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,vr.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,vr.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,vr.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,vr.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};function e$(e,t,r){var o=r.buf,l,h;if(h=o[r.pos++],l=(h&112)>>4,h<128||(h=o[r.pos++],l|=(h&127)<<3,h<128)||(h=o[r.pos++],l|=(h&127)<<10,h<128)||(h=o[r.pos++],l|=(h&127)<<17,h<128)||(h=o[r.pos++],l|=(h&127)<<24,h<128)||(h=o[r.pos++],l|=(h&1)<<31,h<128))return vc(e,l,t);throw new Error("Expected varint not more than 10 bytes")}function ts(e){return e.type===vr.Bytes?e.readVarint()+e.pos:e.pos+1}function vc(e,t,r){return r?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function t$(e,t){var r,o;if(e>=0?(r=e%4294967296|0,o=e/4294967296|0):(r=~(-e%4294967296),o=~(-e/4294967296),r^4294967295?r=r+1|0:(r=0,o=o+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),r$(r,o,t),n$(o,t)}function r$(e,t,r){r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos]=e&127}function n$(e,t){var r=(e&7)<<4;t.buf[t.pos++]|=r|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function xk(e,t,r){var o=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));r.realloc(o);for(var l=r.pos-1;l>=e;l--)r.buf[l+o]=r.buf[l]}function i$(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function o$(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function a$(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function s$(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function l$(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function u$(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function c$(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function h$(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function d$(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function Um(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function xc(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function wk(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function f$(e,t,r){for(var o="",l=t;l<r;){var h=e[l],g=null,u=h>239?4:h>223?3:h>191?2:1;if(l+u>r)break;var b,w,T;u===1?h<128&&(g=h):u===2?(b=e[l+1],(b&192)===128&&(g=(h&31)<<6|b&63,g<=127&&(g=null))):u===3?(b=e[l+1],w=e[l+2],(b&192)===128&&(w&192)===128&&(g=(h&15)<<12|(b&63)<<6|w&63,(g<=2047||g>=55296&&g<=57343)&&(g=null))):u===4&&(b=e[l+1],w=e[l+2],T=e[l+3],(b&192)===128&&(w&192)===128&&(T&192)===128&&(g=(h&15)<<18|(b&63)<<12|(w&63)<<6|T&63,(g<=65535||g>=1114112)&&(g=null))),g===null?(g=65533,u=1):g>65535&&(g-=65536,o+=String.fromCharCode(g>>>10&1023|55296),g=56320|g&1023),o+=String.fromCharCode(g),l+=u}return o}function p$(e,t,r){return FM.decode(e.subarray(t,r))}function m$(e,t,r){for(var o=0,l,h;o<t.length;o++){if(l=t.charCodeAt(o),l>55295&&l<57344)if(h)if(l<56320){e[r++]=239,e[r++]=191,e[r++]=189,h=l;continue}else l=h-55296<<10|l-56320|65536,h=null;else{l>56319||o+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):h=l;continue}else h&&(e[r++]=239,e[r++]=191,e[r++]=189,h=null);l<128?e[r++]=l:(l<2048?e[r++]=l>>6|192:(l<65536?e[r++]=l>>12|224:(e[r++]=l>>18|240,e[r++]=l>>12&63|128),e[r++]=l>>6&63|128),e[r++]=l&63|128)}return r}var g$=Qc;function Qc(e,t){this.x=e,this.y=t}Qc.prototype={clone:function(){return new Qc(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),o=t*this.x-r*this.y,l=r*this.x+t*this.y;return this.x=o,this.y=l,this},_rotateAround:function(e,t){var r=Math.cos(e),o=Math.sin(e),l=t.x+r*(this.x-t.x)-o*(this.y-t.y),h=t.y+o*(this.x-t.x)+r*(this.y-t.y);return this.x=l,this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};Qc.convert=function(e){return e instanceof Qc?e:Array.isArray(e)?new Qc(e[0],e[1]):e};var y$=g$,_$=lh;function lh(e,t,r,o,l){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=o,this._values=l,e.readFields(v$,this,t)}function v$(e,t,r){e==1?t.id=r.readVarint():e==2?x$(r,t):e==3?t.type=r.readVarint():e==4&&(t._geometry=r.pos)}function x$(e,t){for(var r=e.readVarint()+e.pos;e.pos<r;){var o=t._keys[e.readVarint()],l=t._values[e.readVarint()];t.properties[o]=l}}lh.types=["Unknown","Point","LineString","Polygon"];lh.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,o=0,l=0,h=0,g=[],u;e.pos<t;){if(o<=0){var b=e.readVarint();r=b&7,o=b>>3}if(o--,r===1||r===2)l+=e.readSVarint(),h+=e.readSVarint(),r===1&&(u&&g.push(u),u=[]),u.push(new y$(l,h));else if(r===7)u&&u.push(u[0].clone());else throw new Error("unknown command "+r)}return u&&g.push(u),g};lh.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,o=0,l=0,h=0,g=1/0,u=-1/0,b=1/0,w=-1/0;e.pos<t;){if(o<=0){var T=e.readVarint();r=T&7,o=T>>3}if(o--,r===1||r===2)l+=e.readSVarint(),h+=e.readSVarint(),l<g&&(g=l),l>u&&(u=l),h<b&&(b=h),h>w&&(w=h);else if(r!==7)throw new Error("unknown command "+r)}return[g,b,u,w]};lh.prototype.toGeoJSON=function(e,t,r){var o=this.extent*Math.pow(2,r),l=this.extent*e,h=this.extent*t,g=this.loadGeometry(),u=lh.types[this.type],b,w;function T(j){for(var Z=0;Z<j.length;Z++){var H=j[Z],le=180-(H.y+h)*360/o;j[Z]=[(H.x+l)*360/o-180,360/Math.PI*Math.atan(Math.exp(le*Math.PI/180))-90]}}switch(this.type){case 1:var I=[];for(b=0;b<g.length;b++)I[b]=g[b][0];g=I,T(g);break;case 2:for(b=0;b<g.length;b++)T(g[b]);break;case 3:for(g=w$(g),b=0;b<g.length;b++)for(w=0;w<g[b].length;w++)T(g[b][w]);break}g.length===1?g=g[0]:u="Multi"+u;var z={type:"Feature",geometry:{type:u,coordinates:g},properties:this.properties};return"id"in this&&(z.id=this.id),z};function w$(e){var t=e.length;if(t<=1)return[e];for(var r=[],o,l,h=0;h<t;h++){var g=b$(e[h]);g!==0&&(l===void 0&&(l=g<0),l===g<0?(o&&r.push(o),o=[e[h]]):o.push(e[h]))}return o&&r.push(o),r}function b$(e){for(var t=0,r=0,o=e.length,l=o-1,h,g;r<o;l=r++)h=e[r],g=e[l],t+=(g.x-h.x)*(h.y+g.y);return t}var S$=_$,E$=OM;function OM(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(k$,this,t),this.length=this._features.length}function k$(e,t,r){e===15?t.version=r.readVarint():e===1?t.name=r.readString():e===5?t.extent=r.readVarint():e===2?t._features.push(r.pos):e===3?t._keys.push(r.readString()):e===4&&t._values.push(T$(r))}function T$(e){for(var t=null,r=e.readVarint()+e.pos;e.pos<r;){var o=e.readVarint()>>3;t=o===1?e.readString():o===2?e.readFloat():o===3?e.readDouble():o===4?e.readVarint64():o===5?e.readVarint():o===6?e.readSVarint():o===7?e.readBoolean():null}return t}OM.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new S$(this._pbf,t,this.extent,this._keys,this._values)};var C$=E$,P$=I$;function I$(e,t){this.layers=e.readFields(M$,{},t)}function M$(e,t,r){if(e===3){var o=new C$(r,r.readVarint()+r.pos);o.length&&(t[o.name]=o)}}var A$=P$;const ex=Math.PI,tx=2*ex,Hl=1e-6,z$=tx-Hl;function rx(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function $M(){return new rx}rx.prototype=$M.prototype={constructor:rx,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,r,o){this._+="Q"+ +e+","+ +t+","+(this._x1=+r)+","+(this._y1=+o)},bezierCurveTo:function(e,t,r,o,l,h){this._+="C"+ +e+","+ +t+","+ +r+","+ +o+","+(this._x1=+l)+","+(this._y1=+h)},arcTo:function(e,t,r,o,l){e=+e,t=+t,r=+r,o=+o,l=+l;var h=this._x1,g=this._y1,u=r-e,b=o-t,w=h-e,T=g-t,I=w*w+T*T;if(l<0)throw new Error("negative radius: "+l);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(I>Hl)if(!(Math.abs(T*u-b*w)>Hl)||!l)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var z=r-h,j=o-g,Z=u*u+b*b,H=z*z+j*j,le=Math.sqrt(Z),$=Math.sqrt(I),B=l*Math.tan((ex-Math.acos((Z+I-H)/(2*le*$)))/2),X=B/$,ue=B/le;Math.abs(X-1)>Hl&&(this._+="L"+(e+X*w)+","+(t+X*T)),this._+="A"+l+","+l+",0,0,"+ +(T*z>w*j)+","+(this._x1=e+ue*u)+","+(this._y1=t+ue*b)}},arc:function(e,t,r,o,l,h){e=+e,t=+t,r=+r,h=!!h;var g=r*Math.cos(o),u=r*Math.sin(o),b=e+g,w=t+u,T=1^h,I=h?o-l:l-o;if(r<0)throw new Error("negative radius: "+r);this._x1===null?this._+="M"+b+","+w:(Math.abs(this._x1-b)>Hl||Math.abs(this._y1-w)>Hl)&&(this._+="L"+b+","+w),r&&(I<0&&(I=I%tx+tx),I>z$?this._+="A"+r+","+r+",0,1,"+T+","+(e-g)+","+(t-u)+"A"+r+","+r+",0,1,"+T+","+(this._x1=b)+","+(this._y1=w):I>Hl&&(this._+="A"+r+","+r+",0,"+ +(I>=ex)+","+T+","+(this._x1=e+r*Math.cos(l))+","+(this._y1=t+r*Math.sin(l))))},rect:function(e,t,r,o){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +r+"v"+ +o+"h"+-r+"Z"},toString:function(){return this._}};function D$(e){for(var t=e.length/6|0,r=new Array(t),o=0;o<t;)r[o]="#"+e.slice(o*6,++o*6);return r}var mg=D$("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),R$=function(){},BM=typeof window!="undefined",L$=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,r=[],o=0;o<e.rangeCount;o++)r.push(e.getRangeAt(o));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||r.forEach(function(l){e.addRange(l)}),t&&t.focus()}},F$=L$,bk={"text/plain":"Text","text/html":"Url",default:"Text"},O$="Copy to clipboard: #{key}, Enter";function $$(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function B$(e,t){var r,o,l,h,g,u,b=!1;t||(t={}),r=t.debug||!1;try{l=F$(),h=document.createRange(),g=document.getSelection(),u=document.createElement("span"),u.textContent=e,u.ariaHidden="true",u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",function(T){if(T.stopPropagation(),t.format)if(T.preventDefault(),typeof T.clipboardData=="undefined"){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var I=bk[t.format]||bk.default;window.clipboardData.setData(I,e)}else T.clipboardData.clearData(),T.clipboardData.setData(t.format,e);t.onCopy&&(T.preventDefault(),t.onCopy(T.clipboardData))}),document.body.appendChild(u),h.selectNodeContents(u),g.addRange(h);var w=document.execCommand("copy");if(!w)throw new Error("copy command was unsuccessful");b=!0}catch(T){r&&console.error("unable to copy using execCommand: ",T),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),b=!0}catch(I){r&&console.error("unable to copy using clipboardData: ",I),r&&console.error("falling back to prompt"),o=$$("message"in t?t.message:O$),window.prompt(o,e)}}finally{g&&(typeof g.removeRange=="function"?g.removeRange(h):g.removeAllRanges()),u&&document.body.removeChild(u),l()}return b}var Sk=B$,V$=BM?W.exports.useLayoutEffect:W.exports.useEffect,N$=V$,VM={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function U$(){var e=W.exports.useState(null),t=e[0],r=e[1],o=W.exports.useState(VM),l=o[0],h=o[1],g=W.exports.useMemo(function(){return new window.ResizeObserver(function(u){if(u[0]){var b=u[0].contentRect,w=b.x,T=b.y,I=b.width,z=b.height,j=b.top,Z=b.left,H=b.bottom,le=b.right;h({x:w,y:T,width:I,height:z,top:j,left:Z,bottom:H,right:le})}})},[]);return N$(function(){if(!!t)return g.observe(t),function(){g.disconnect()}},[t]),[r,l]}var j$=BM&&typeof window.ResizeObserver!="undefined"?U$:function(){return[R$,VM]};function NM(e,t){return Array.isArray(t)?[e.a*t[0]+e.c*t[1]+e.e,e.b*t[0]+e.d*t[1]+e.f]:{x:e.a*t.x+e.c*t.y+e.e,y:e.b*t.x+e.d*t.y+e.f}}function UM(e,t){return t.map(r=>NM(e,r))}function op(e){return{a:parseFloat(e.a),b:parseFloat(e.b),c:parseFloat(e.c),d:parseFloat(e.d),e:parseFloat(e.e),f:parseFloat(e.f)}}function jM(){return{a:1,c:0,e:0,b:0,d:1,f:0}}function GM(e){const{a:t,b:r,c:o,d:l,e:h,f:g}=e,u=t*l-r*o;return{a:l/u,b:r/-u,c:o/-u,d:t/u,e:(l*h-o*g)/-u,f:(r*h-t*g)/u}}function Sv(e){return typeof e=="undefined"}function To(e,t=0){return{a:1,c:0,e,b:0,d:1,f:t}}function _s(...e){e=Array.isArray(e[0])?e[0]:e;const t=(r,o)=>({a:r.a*o.a+r.c*o.b,c:r.a*o.c+r.c*o.d,e:r.a*o.e+r.c*o.f+r.e,b:r.b*o.a+r.d*o.b,d:r.b*o.c+r.d*o.d,f:r.b*o.e+r.d*o.f+r.f});switch(e.length){case 0:throw new Error("no matrices provided");case 1:return e[0];case 2:return t(e[0],e[1]);default:{const[r,o,...l]=e,h=t(r,o);return _s(h,...l)}}}function uu(e,t=void 0,r=void 0,o=void 0){Sv(t)&&(t=e);const l={a:e,c:0,e:0,b:0,d:t,f:0};return Sv(r)||Sv(o)?l:_s([To(r,o),l,To(-r,-o)])}function G$(e){return W$(e)}function W$(e){return`matrix(${e.a},${e.b},${e.c},${e.d},${e.e},${e.f})`}function q$(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function Yy(e,t,r,o){var l=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(l,Yy.prototype),l.expected=t,l.found=r,l.location=o,l.name="SyntaxError",l}q$(Yy,Error);function Ev(e,t,r){return r=r||" ",e.length>t?e:(t-=e.length,r+=r.repeat(t),e+r.slice(0,t))}Yy.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var r=null,o;for(o=0;o<e.length;o++)if(e[o].source===this.location.source){r=e[o].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,h=this.location.source+":"+l.line+":"+l.column;if(r){var g=this.location.end,u=Ev("",l.line.toString().length," "),b=r[l.line-1],w=l.line===g.line?g.column:b.length+1,T=w-l.column||1;t+=`
 --> `+h+`
`+u+` |
`+l.line+" | "+b+`
`+u+" | "+Ev("",l.column-1," ")+Ev("",T,"^")}else t+=`
 at `+h}return t};Yy.buildMessage=function(e,t){var r={literal:function(w){return'"'+l(w.text)+'"'},class:function(w){var T=w.parts.map(function(I){return Array.isArray(I)?h(I[0])+"-"+h(I[1]):h(I)});return"["+(w.inverted?"^":"")+T.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(w){return w.description}};function o(w){return w.charCodeAt(0).toString(16).toUpperCase()}function l(w){return w.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(T){return"\\x0"+o(T)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(T){return"\\x"+o(T)})}function h(w){return w.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(T){return"\\x0"+o(T)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(T){return"\\x"+o(T)})}function g(w){return r[w.type](w)}function u(w){var T=w.map(g),I,z;if(T.sort(),T.length>0){for(I=1,z=1;I<T.length;I++)T[I-1]!==T[I]&&(T[z]=T[I],z++);T.length=z}switch(T.length){case 1:return T[0];case 2:return T[0]+" or "+T[1];default:return T.slice(0,-1).join(", ")+", or "+T[T.length-1]}}function b(w){return w?'"'+l(w)+'"':"end of input"}return"Expected "+u(e)+" but "+b(t)+" found."};var Io="idle",_a="panning",va="zooming",ma="auto",ol="none",Ba="pan",vs="zoom-in",hl="zoom-out",uy="none",Ra="top",Mo="right",La="bottom",Ni="left",Jy="zoom",ap="pan",uh="center",ch="left",jw="right",hh="top",Gw="bottom",Ek="cover";function nx(e){return nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nx(e)}function kk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,o)}return r}function cy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kk(Object(r),!0).forEach(function(o){Z$(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kk(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function Z$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var WM=3,qM=Io;function Tk(e,t,r,o,l,h){var g=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null;return Nr({},cy(cy({},jM()),{},{version:WM,mode:qM,focus:!1,pinchPointDistance:null,prePinchMode:null,viewerWidth:e,viewerHeight:t,SVGMinX:r,SVGMinY:o,SVGWidth:l,SVGHeight:h,scaleFactorMin:g,scaleFactorMax:u,startX:null,startY:null,endX:null,endY:null,miniatureOpen:!0,lastAction:null}))}function Nr(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return e=Object.assign({},e,t,{lastAction:r}),Object.freeze(e)}function H$(e){return e!==null&&nx(e)==="object"&&e.hasOwnProperty("version")&&e.version===WM}function Jo(e,t,r){var o=op(e),l=GM(o);return NM(l,{x:t,y:r})}function gg(e){var t=op(e);return{scaleFactor:t.a,translationX:t.e,translationY:t.f}}function X$(e,t){return Nr(e,{focus:t})}function K$(e,t,r){return Nr(e,{viewerWidth:t,viewerHeight:r})}function Ck(e,t,r,o,l){return Nr(e,{SVGMinX:t,SVGMinY:r,SVGWidth:o,SVGHeight:l})}function Y$(e,t,r){return Nr(e,{scaleFactorMin:t,scaleFactorMax:r})}function J$(e,t,r,o){var l=e.viewerWidth,h=e.viewerHeight,g=_s(To(-t+l/2,-r+h/2),To(t,r),uu(o,o),To(-t,-r));return Nr(e,cy({mode:Io},g))}function Q$(e){return Nr(e,cy({mode:Io},jM()))}function ZM(e){return Nr(e,{mode:qM,startX:null,startY:null,endX:null,endY:null})}function eB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pk(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function tB(e,t,r){return t&&Pk(e.prototype,t),r&&Pk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var HM=function(){function e(t,r,o){eB(this,e),this.originalEvent=t,this.value=r,this.SVGViewer=o}return tB(e,[{key:"scaleFactor",get:function(){return this._cacheDecomposedValue=this._cacheDecomposedValue||gg(this.value),this._cacheDecomposedValue.scaleFactor}},{key:"translationX",get:function(){return this._cacheDecomposedValue=this._cacheDecomposedValue||gg(this.value),this._cacheDecomposedValue.translationX}},{key:"translationY",get:function(){return this._cacheDecomposedValue=this._cacheDecomposedValue||gg(this.value),this._cacheDecomposedValue.translationY}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}}]),e}();function Ik(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,o)}return r}function rB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ik(Object(r),!0).forEach(function(o){nB(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ik(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function nB(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iB(e,t){return lB(e)||sB(e,t)||aB(e,t)||oB()}function oB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aB(e,t){if(!!e){if(typeof e=="string")return Mk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mk(e,t)}}function Mk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function sB(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var o=[],l=!0,h=!1,g,u;try{for(r=r.call(e);!(l=(g=r.next()).done)&&(o.push(g.value),!(t&&o.length===t));l=!0);}catch(b){h=!0,u=b}finally{try{!l&&r.return!=null&&r.return()}finally{if(h)throw u}}return o}}function lB(e){if(Array.isArray(e))return e}function Ww(e,t,r){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0,l=_s(op(e),To(t,r));if(o){var h=UM(l,[{x:e.SVGMinX+o,y:e.SVGMinY+o},{x:e.SVGMinX+e.SVGWidth-o,y:e.SVGMinY+e.SVGHeight-o}]),g=iB(h,2),u=g[0],b=u.x,w=u.y,T=g[1],I=T.x,z=T.y,j=0;e.viewerWidth-b<0?j=e.viewerWidth-b:I<0&&(j=-I);var Z=0;e.viewerHeight-w<0?Z=e.viewerHeight-w:z<0&&(Z=-z),l=_s(To(j,Z),l)}return Nr(e,rB({mode:Io},l),ap)}function uB(e,t,r){return Nr(e,{mode:_a,startX:t,startY:r,endX:t,endY:r},ap)}function cB(e,t,r,o){if(e.mode!==_a)throw new Error("update pan not allowed in this mode "+e.mode);var l=e.endX,h=e.endY,g=Jo(e,l,h),u=Jo(e,t,r),b=u.x-g.x,w=u.y-g.y,T=Ww(e,b,w,o);return Nr(T,{mode:_a,endX:t,endY:r},ap)}function XM(e){return Nr(e,{mode:Io,startX:null,startY:null,endX:null,endY:null},ap)}function hB(e,t,r){var o=0,l=0;return r<=20&&(l=2),e.viewerWidth-t<=20&&(o=-2),e.viewerHeight-r<=20&&(l=-2),t<=20&&(o=2),o=o/e.d,l=l/e.d,o===0&&l===0?e:Ww(e,o,l)}function KM(e,t){if(e.x<=t.x&&e.y<=t.y)return{x:e.x,y:e.y,width:t.x-e.x,height:t.y-e.y};if(e.x>=t.x&&e.y<=t.y)return{x:t.x,y:e.y,width:e.x-t.x,height:t.y-e.y};if(e.x>=t.x&&e.y>=t.y)return{x:t.x,y:t.y,width:e.x-t.x,height:e.y-t.y};if(e.x<=t.x&&e.y>=t.y)return{x:e.x,y:t.y,width:t.x-e.x,height:e.y-t.y}}function Ak(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,o)}return r}function dh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ak(Object(r),!0).forEach(function(o){dB(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ak(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function dB(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qy(e,t){var r=gg(e),o=r.scaleFactor,l=e.scaleFactorMin&&o*t<e.scaleFactorMin,h=e.scaleFactorMax&&o*t>e.scaleFactorMax;return l&&t<1||h&&t>1}function qw(e,t){var r=t.a;return e.scaleFactorMin!=null&&(r=Math.max(r,e.scaleFactorMin)),e.scaleFactorMax!=null&&(r=Math.min(r,e.scaleFactorMax)),Nr(t,{a:r,d:r})}function bh(e,t,r,o){if(Qy(e,o))return e;var l=_s(op(e),To(t,r),uu(o,o),To(-t,-r));return Nr(e,dh(dh({mode:Io},l),{},{startX:null,startY:null,endX:null,endY:null}),Jy)}function YM(e,t,r,o,l){var h=e.viewerWidth,g=e.viewerHeight,u=h/o,b=g/l,w=Math.min(u,b),T=_s(uu(w,w),To(-t,-r));return Qy(e,w/e.d)?Nr(e,{mode:Io,startX:null,startY:null,endX:null,endY:null}):Nr(e,dh(dh({mode:Io},qw(e,T)),{},{startX:null,startY:null,endX:null,endY:null}),Jy)}function JM(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ch,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:hh,o=e.viewerWidth,l=e.viewerHeight,h=e.SVGMinX,g=e.SVGMinY,u=e.SVGWidth,b=e.SVGHeight,w=o/u,T=l/b,I=Math.min(w,T),z=uu(I,I),j=-h*w,Z=-g*T;if(w<T){var H=l-w*b;switch(r){case hh:Z=-g*I;break;case uh:Z=Math.round(H/2)-g*I;break;case Gw:Z=H-g*I;break;case Ek:z=uu(T,T);var le=o-T*u;j=h+Math.round(le/2);break}}else{var $=o-T*u;switch(t){case ch:j=-h*I;break;case uh:j=Math.round($/2)-h*I;break;case jw:j=$-h*I;break;case Ek:z=uu(w,w);var B=l-w*b;Z=g+Math.round(B/2);break}}var X=To(j,Z),ue=_s(X,z);return Qy(e,I/e.d)?Nr(e,{mode:Io,startX:null,startY:null,endX:null,endY:null}):Nr(e,dh(dh({mode:Io},qw(e,ue)),{},{startX:null,startY:null,endX:null,endY:null}),Jy)}function fB(e,t){var r=e.viewerWidth,o=e.viewerHeight,l=Jo(e,r/2,o/2);return bh(e,l.x,l.y,t)}function pB(e,t,r){return Nr(e,{mode:va,startX:t,startY:r,endX:t,endY:r})}function mB(e,t,r){if(e.mode!==va)throw new Error("update selection not allowed in this mode "+e.mode);return Nr(e,{endX:t,endY:r})}function ix(e,t,r,o){var l=7,h=e.startX,g=e.startY,u=Jo(e,h,g),b=Jo(e,t,r);if(Math.abs(h-t)>l&&Math.abs(g-r)>l){var w=KM(u,b);return YM(e,w.x,w.y,w.width,w.height)}else{var T=Jo(e,t,r);return bh(e,T.x,T.y,o)}}function gB(e,t,r,o,l){return o+(l-o)*(e-t)/(r-t)}function Sh(e,t){var r=t.getBoundingClientRect(),o=r.left,l=r.top,h=e.clientX-Math.round(o),g=e.clientY-Math.round(l);return{x:h,y:g}}function QM(e,t,r,o,l){var h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,g=h||Sh(e,t),u=g.x,b=g.y,w=o;switch(r){case hl:var T=Jo(o,u,b);w=bh(o,T.x,T.y,1/l.scaleFactor);break;case vs:w=pB(o,u,b);break;case ma:case Ba:w=uB(o,u,b);break;default:return o}return e.preventDefault(),w}function e3(e,t,r,o,l){var h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,g=h||Sh(e,t),u=g.x,b=g.y,w=e.buttons===0,T=o;switch(r){case vs:o.mode===va&&(T=w?ix(o,u,b,l.scaleFactor):mB(o,u,b));break;case ma:case Ba:o.mode===_a&&(T=w?XM(o):cB(o,u,b,l.preventPanOutside?20:void 0));break;default:return o}return e.preventDefault(),T}function t3(e,t,r,o,l){var h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,g=h||Sh(e,t),u=g.x,b=g.y,w=o;switch(r){case hl:o.mode===va&&(w=ix(o,u,b,1/l.scaleFactor));break;case vs:o.mode===va&&(w=ix(o,u,b,l.scaleFactor));break;case ma:case Ba:o.mode===_a&&(w=XM(o));break;default:return o}return e.preventDefault(),w}function yB(e,t,r,o,l){var h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,g=h||Sh(e,t),u=g.x,b=g.y,w=o;if(r===ma&&!l.disableDoubleClickZoomWithToolAuto){var T=l.modifierKeys,I=T===void 0?[]:T,z=Jo(o,u,b),j=function($,B){return $||e.getModifierState(B)},Z=I.reduce(j,!1),H=Z?1/l.scaleFactor:l.scaleFactor;w=bh(o,z.x,z.y,H)}return e.preventDefault(),w}function _B(e,t,r,o,l){var h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,g=h||Sh(e,t),u=g.x,b=g.y;if(!l.detectWheel)return o;var w=Math.max(-1,Math.min(1,e.deltaY)),T=gB(w,-1,1,l.scaleFactorOnWheel,1/l.scaleFactorOnWheel),I=Jo(o,u,b),z=bh(o,I.x,I.y,T);return e.preventDefault(),z}function zk(e,t,r,o,l){var h=X$(o,e.type==="mouseenter");return e.preventDefault(),h}function vB(e,t,r,o,l){var h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,g=h.x,u=h.y;return!([ol,ma].indexOf(r)>=0)||!l.detectAutoPan||!o.focus?o:hB(o,g,u)}function ox(e){return ox=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ox(e)}function xB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dk(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function wB(e,t,r){return t&&Dk(e.prototype,t),r&&Dk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function bB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ax(e,t)}function ax(e,t){return ax=Object.setPrototypeOf||function(o,l){return o.__proto__=l,o},ax(e,t)}function SB(e){var t=TB();return function(){var o=hy(e),l;if(t){var h=hy(this).constructor;l=Reflect.construct(o,arguments,h)}else l=o.apply(this,arguments);return EB(this,l)}}function EB(e,t){if(t&&(ox(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kB(e)}function kB(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TB(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function hy(e){return hy=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},hy(e)}var CB=function(e){bB(r,e);var t=SB(r);function r(){return xB(this,r),t.apply(this,arguments)}return wB(r,[{key:"point",get:function(){if(!this._cachePoint){var l=this.originalEvent,h=this.SVGViewer,g=this.value,u=Sh(l,h);this._cachePoint=Jo(g,u.x,u.y)}return this._cachePoint}},{key:"x",get:function(){return this.point.x}},{key:"y",get:function(){return this.point.y}}]),r}(HM);function sx(e){return sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sx(e)}function Rk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,o)}return r}function Lk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rk(Object(r),!0).forEach(function(o){PB(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rk(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function PB(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fk(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function MB(e,t,r){return t&&Fk(e.prototype,t),r&&Fk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function AB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lx(e,t)}function lx(e,t){return lx=Object.setPrototypeOf||function(o,l){return o.__proto__=l,o},lx(e,t)}function zB(e){var t=LB();return function(){var o=dy(e),l;if(t){var h=dy(this).constructor;l=Reflect.construct(o,arguments,h)}else l=o.apply(this,arguments);return DB(this,l)}}function DB(e,t){if(t&&(sx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RB(e)}function RB(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LB(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dy(e){return dy=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},dy(e)}var FB=function(e){AB(r,e);var t=zB(r);function r(){return IB(this,r),t.apply(this,arguments)}return MB(r,[{key:"points",get:function(){return this._cachePoints||(this._cachePoints=r.touchesToPoints(this.originalEvent.touches,this.SVGViewer,this.value)),this._cachePoints}},{key:"changedPoints",get:function(){return this._cacheChangedPoints||(this._cacheChangedPoints=r.touchesToPoints(this.originalEvent.changedTouches,this.SVGViewer,this.value)),this._cacheChangedPoints}}],[{key:"touchesToPoints",value:function(l,h,g){for(var u=[],b=0;b<l.length;b++){var w=l[b],T=h.getBoundingClientRect(),I=w.clientX-Math.round(T.left),z=w.clientY-Math.round(T.top),j=Jo(g,I,z);u.push(Lk(Lk({},j),{},{identifier:w.identifier}))}return u}}]),r}(HM);function OB(e,t,r){var o=e.type;switch(o){case"mousemove":case"mouseup":case"mousedown":case"click":case"dblclick":return new CB(e,t,r);case"touchstart":case"touchmove":case"touchend":case"touchcancel":return new FB(e,t,r);default:throw new Error("".concat(o," not supported"))}}function Ok(e){return e.split(/[ ,]/).filter(Boolean).map(Number)}function $k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,o)}return r}function Bk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$k(Object(r),!0).forEach(function(o){$B(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$k(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function $B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BB(e,t){var r=t.getBoundingClientRect(),o=r.left,l=r.top,h=e.clientX-Math.round(o),g=e.clientY-Math.round(l);return{x:h,y:g}}function VB(e,t,r,o,l){if(n3(e,l))return i3(e,t,r,o);if(e.touches.length!==1){if([_a,va].indexOf(o.mode)>=0)return ZM(o);if([Io].indexOf(o.mode)>=0)return o}return Zw(e,t,r,o,l,QM)}function NB(e,t,r,o,l){return n3(e,l)?i3(e,t,r,o):[_a,va].indexOf(o.mode)>=0?Zw(e,t,r,o,l,e3):o}function UB(e,t,r,o,l){if(!([_a,va].indexOf(o.mode)>=0))return o;var h=GB(e,o,l)?Nr(o,{pinchPointDistance:null}):o;return e.touches.length>0?h:Zw(e,t,r,h,l,t3)}function jB(e,t,r,o,l){return e.stopPropagation(),e.preventDefault(),ZM(o)}function r3(e){return typeof e.pinchPointDistance=="number"}function GB(e,t,r){return r.detectPinchGesture&&r3(t)&&e.touches.length<2}function n3(e,t){return t.detectPinchGesture&&e.touches.length>1}function Zw(e,t,r,o,l,h){var g=e.touches.length===0?Nr(o,{mode:o.prePinchMode?Io:o.mode,prePinchMode:null}):o,u=e.touches.length>0?e.touches[0]:e.changedTouches[0],b=BB(u,t);switch(r){case hl:case vs:case ma:case Ba:return e.stopPropagation(),e.preventDefault(),h(e,t,r,g,l,b);default:return g}}function i3(e,t,r,o,l){var h=t.getBoundingClientRect(),g=h.left,u=h.top,b=e.touches[0].clientX-Math.round(g),w=e.touches[0].clientY-Math.round(u),T=e.touches[1].clientX-Math.round(g),I=e.touches[1].clientY-Math.round(u),z=Math.sqrt(Math.pow(T-b,2)+Math.pow(I-w,2)),j=r3(o)?o.pinchPointDistance:z,Z=Jo(o,(b+T)/2,(w+I)/2),H=z/j;if(Qy(o,H))return o;e.cancelable&&e.preventDefault();var le=_s(op(o),To(Z.x,Z.y),uu(H,H),To(-Z.x,-Z.y));return Nr(o,Nr(Bk(Bk({mode:va},qw(o,le)),{},{startX:null,startY:null,endX:null,endY:null,prePinchMode:o.prePinchMode?o.prePinchMode:o.mode,pinchPointDistance:z})))}function o3(e){return Nr(e,{miniatureOpen:!0})}function a3(e){return Nr(e,{miniatureOpen:!1})}var WB=function(t){return["zoom-in","zoom-out","grab","grabbing"].indexOf(t)>-1},s3=function(){return navigator.userAgent.toLowerCase()},qB=function(){return s3().indexOf("firefox")>-1},ZB=function(){return s3().indexOf("webkit")>-1};function jm(e){if(!WB(e))return e;if(qB())return"-moz-".concat(e);if(ZB())return"-webkit-".concat(e)}function HB(e){return e.displayName||e.name||"Component"}function ux(e){return ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ux(e)}function cx(){return cx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},cx.apply(this,arguments)}function XB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vk(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function KB(e,t,r){return t&&Vk(e.prototype,t),r&&Vk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function YB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hx(e,t)}function hx(e,t){return hx=Object.setPrototypeOf||function(o,l){return o.__proto__=l,o},hx(e,t)}function JB(e){var t=t8();return function(){var o=fy(e),l;if(t){var h=fy(this).constructor;l=Reflect.construct(o,arguments,h)}else l=o.apply(this,arguments);return QB(this,l)}}function QB(e,t){if(t&&(ux(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e8(e)}function e8(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t8(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fy(e){return fy=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},fy(e)}var r8=1,n8=function(){return"uid".concat(r8++)};function l3(e){var t=function(r){YB(l,r);var o=JB(l);function l(h){var g;return XB(this,l),g=o.call(this,h),g.state={uid:n8()},g}return KB(l,[{key:"render",value:function(){return Re.createElement(e,cx({_uid:this.state.uid},this.props))}}]),l}(Re.Component);return t.displayName="RandomUID(".concat(HB(e),")"),t}var Nk="react-svg-pan-zoom_border_gradient";function u3(e){var t=e.direction,r=e.width,o=e.height,l=e._uid,h;switch(t){case Ra:h="translate(".concat(r,", 0) rotate(90)");break;case Mo:h="translate(".concat(r,", ").concat(o,") rotate(180)");break;case La:h="translate(0, ".concat(o,") rotate(270)");break;case Ni:default:h=" ";break}var g="".concat(Nk,"_gradient_").concat(l),u="".concat(Nk,"_mask_").concat(l);return Re.createElement("g",null,Re.createElement("defs",null,Re.createElement("linearGradient",{id:g,x1:"0%",y1:"0%",x2:"100%",y2:"0%",spreadMethod:"pad"},Re.createElement("stop",{offset:"0%",stopColor:"#fff",stopOpacity:"0.8"}),Re.createElement("stop",{offset:"100%",stopColor:"#000",stopOpacity:"0.5"})),Re.createElement("mask",{id:u,x:"0",y:"0",width:"20",height:Math.max(r,o)},Re.createElement("rect",{x:"0",y:"0",width:"20",height:Math.max(r,o),style:{stroke:"none",fill:"url(#".concat(g,")")}}))),Re.createElement("rect",{x:"0",y:"0",width:"20",height:Math.max(r,o),style:{stroke:"none",fill:"#000",mask:"url(#".concat(u,")")},transform:h}))}u3.propTypes={direction:Pe.oneOf([Ra,Mo,La,Ni]).isRequired,width:Pe.number.isRequired,height:Pe.number.isRequired};var Gm=l3(u3);function c3(e){var t=e.startX,r=e.startY,o=e.endX,l=e.endY;if(!t||!r||!o||!l)return null;var h=KM({x:t,y:r},{x:o,y:l});return Re.createElement("rect",{stroke:"#969FFF",strokeOpacity:.7,fill:"#F3F4FF",fillOpacity:.7,x:h.x,y:h.y,width:h.width,height:h.height,style:{pointerEvents:"none"}})}c3.propTypes={startX:Pe.number,startY:Pe.number,endX:Pe.number,endY:Pe.number};function i8(){return Re.createElement("svg",{width:24,height:24,stroke:"currentColor"},Re.createElement("path",{d:"M10.07,14.27C10.57,14.03 11.16,14.25 11.4,14.75L13.7,19.74L15.5,18.89L13.19,13.91C12.95,13.41 13.17,12.81 13.67,12.58L13.95,12.5L16.25,12.05L8,5.12V15.9L9.82,14.43L10.07,14.27M13.64,21.97C13.14,22.21 12.54,22 12.31,21.5L10.13,16.76L7.62,18.78C7.45,18.92 7.24,19 7,19A1,1 0 0,1 6,18V3A1,1 0 0,1 7,2C7.24,2 7.47,2.09 7.64,2.23L7.65,2.22L19.14,11.86C19.57,12.22 19.62,12.85 19.27,13.27C19.12,13.45 18.91,13.57 18.7,13.61L15.54,14.23L17.74,18.96C18,19.46 17.76,20.05 17.26,20.28L13.64,21.97Z"}))}function o8(){return Re.createElement("svg",{width:24,height:24,stroke:"currentColor"},Re.createElement("path",{d:"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"}))}function a8(){return Re.createElement("svg",{width:24,height:24,stroke:"currentColor"},Re.createElement("g",null,Re.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),Re.createElement("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})))}function s8(){return Re.createElement("svg",{width:24,height:24,stroke:"currentColor"},Re.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"}))}function l8(){return Re.createElement("svg",{width:24,height:24,stroke:"currentColor"},Re.createElement("path",{d:"M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z"}))}function dx(e){return dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dx(e)}function u8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Uk(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c8(e,t,r){return t&&Uk(e.prototype,t),r&&Uk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function h8(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fx(e,t)}function fx(e,t){return fx=Object.setPrototypeOf||function(o,l){return o.__proto__=l,o},fx(e,t)}function d8(e){var t=m8();return function(){var o=py(e),l;if(t){var h=py(this).constructor;l=Reflect.construct(o,arguments,h)}else l=o.apply(this,arguments);return f8(this,l)}}function f8(e,t){if(t&&(dx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p8(e)}function p8(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m8(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function py(e){return py=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},py(e)}var Cc=function(e){h8(r,e);var t=d8(r);function r(o){var l;return u8(this,r),l=t.call(this,o),l.state={hover:!1},l}return c8(r,[{key:"change",value:function(l){switch(l.preventDefault(),l.stopPropagation(),l.type){case"mouseenter":case"touchstart":this.setState({hover:!0});break;case"mouseleave":case"touchend":case"touchcancel":this.setState({hover:!1});break}}},{key:"render",value:function(){var l=this,h={display:"block",width:"24px",height:"24px",margin:[Ra,La].indexOf(this.props.toolbarPosition)>=0?"2px 1px":"1px 2px",color:this.props.active||this.state.hover?this.props.activeColor:"#FFF",transition:"color 200ms ease",background:"none",padding:"0px",border:"0px",outline:"0px",cursor:"pointer"};return Re.createElement("button",{onMouseEnter:function(u){return l.change(u)},onMouseLeave:function(u){return l.change(u)},onTouchStart:function(u){l.change(u),l.props.onClick(u)},onTouchEnd:function(u){return l.change(u)},onTouchCancel:function(u){return l.change(u)},onClick:this.props.onClick,style:h,title:this.props.title,name:this.props.name,type:"button"},this.props.children)}}]),r}(Re.Component);Cc.propTypes={title:Pe.string.isRequired,name:Pe.string.isRequired,toolbarPosition:Pe.string.isRequired,activeColor:Pe.string.isRequired,onClick:Pe.func.isRequired,active:Pe.bool.isRequired};function Hw(e){var t=e.tool,r=e.value,o=e.onChangeValue,l=e.onChangeTool,h=e.activeToolColor,g=e.position,u=e.SVGAlignX,b=e.SVGAlignY,w=function(Z,H){l(H),Z.stopPropagation(),Z.preventDefault()},T=function(Z){o(JM(r,u,b)),Z.stopPropagation(),Z.preventDefault()},I=[Ra,La].indexOf(g)>=0,z={position:"absolute",transform:[Ra,La].indexOf(g)>=0?"translate(-50%, 0px)":"none",top:[Ni,Mo,Ra].indexOf(g)>=0?"5px":"unset",left:[Ra,La].indexOf(g)>=0?"50%":Ni===g?"5px":"unset",right:[Mo].indexOf(g)>=0?"5px":"unset",bottom:[La].indexOf(g)>=0?"5px":"unset",backgroundColor:"rgba(19, 20, 22, 0.90)",borderRadius:"2px",display:"flex",flexDirection:I?"row":"column",padding:I?"1px 2px":"2px 1px"};return Re.createElement("div",{style:z,role:"toolbar"},Re.createElement(Cc,{toolbarPosition:g,active:t===ol,activeColor:h,name:"unselect-tools",title:"Selection",onClick:function(Z){return w(Z,ol)}},Re.createElement(i8,null)),Re.createElement(Cc,{toolbarPosition:g,active:t===Ba,activeColor:h,name:"select-tool-pan",title:"Pan",onClick:function(Z){return w(Z,Ba)}},Re.createElement(o8,null)),Re.createElement(Cc,{toolbarPosition:g,active:t===vs,activeColor:h,name:"select-tool-zoom-in",title:"Zoom in",onClick:function(Z){return w(Z,vs)}},Re.createElement(a8,null)),Re.createElement(Cc,{toolbarPosition:g,active:t===hl,activeColor:h,name:"select-tool-zoom-out",title:"Zoom out",onClick:function(Z){return w(Z,hl)}},Re.createElement(s8,null)),Re.createElement(Cc,{toolbarPosition:g,active:!1,activeColor:h,name:"fit-to-viewer",title:"Fit to viewer",onClick:function(Z){return T(Z)}},Re.createElement(l8,null)))}Hw.propTypes={tool:Pe.string.isRequired,onChangeTool:Pe.func.isRequired,value:Pe.object.isRequired,onChangeValue:Pe.func.isRequired,position:Pe.oneOf([Ra,Mo,La,Ni]),SVGAlignX:Pe.oneOf([uh,ch,jw]),SVGAlignY:Pe.oneOf([uh,hh,Gw]),activeToolColor:Pe.string};Hw.defaultProps={position:Mo,SVGAlignX:ch,SVGAlignY:hh,activeToolColor:"#1CA6FC"};function g8(){return"ontouchstart"in window||navigator.maxTouchPoints}function h3(e){var t=e.open,r=e.position,o=0;switch(r){case Ni:o=t?"rotate(225, 12, 13)":"rotate(45, 12, 13)";break;case Mo:o=o=t?"rotate(135, 12, 13)":"rotate(-45, 12, 13)";break}return Re.createElement("svg",{width:24,height:24,stroke:"currentColor"},Re.createElement("g",{transform:o},Re.createElement("path",{fill:"#000000",d:"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"})))}h3.propTypes={open:Pe.bool.isRequired,position:Pe.oneOf([Mo,Ni]).isRequired};function wc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d3(e){var t,r=e.value,o=e.onChangeValue,l=e.position,h=(t={width:"24px",height:"24px",display:"block",position:"absolute",bottom:0},wc(t,l===Ni?"left":"right","0px"),wc(t,"background","rgba(19, 20, 22, 0.901961)"),wc(t,"border",0),wc(t,"padding",0),wc(t,"outline",0),wc(t,"color","#fff"),t),g=r.miniatureOpen?a3:o3;return Re.createElement("button",{type:"button",style:h,onClick:function(){return o(g(r))}},Re.createElement(h3,{open:r.miniatureOpen,position:l}))}d3.propTypes={value:Pe.object.isRequired,onChangeValue:Pe.func.isRequired,position:Pe.oneOf([Mo,Ni]).isRequired};var y8="react-svg-pan-zoom_miniature";function f3(e){var t=e.SVGMinX,r=e.SVGMinY,o=e.SVGWidth,l=e.SVGHeight,h=e.x1,g=e.y1,u=e.x2,b=e.y2;e.zoomToFit;var w=e._uid,T="".concat(y8,"_mask_").concat(w);return Re.createElement("g",null,Re.createElement("defs",null,Re.createElement("mask",{id:T},Re.createElement("rect",{x:t,y:r,width:o,height:l,fill:"#ffffff"}),Re.createElement("rect",{x:h,y:g,width:u-h,height:b-g}))),Re.createElement("rect",{x:t,y:r,width:o,height:l,style:{stroke:"none",fill:"#000",mask:"url(#".concat(T,")"),opacity:.4}}))}f3.propTypes={SVGWidth:Pe.number.isRequired,SVGHeight:Pe.number.isRequired,SVGMinX:Pe.number.isRequired,SVGMinY:Pe.number.isRequired,x1:Pe.number.isRequired,y1:Pe.number.isRequired,x2:Pe.number.isRequired,y2:Pe.number.isRequired,zoomToFit:Pe.number.isRequired};var _8=l3(f3);function jk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v8(e,t){return S8(e)||b8(e,t)||w8(e,t)||x8()}function x8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w8(e,t){if(!!e){if(typeof e=="string")return Gk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gk(e,t)}}function Gk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function b8(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var o=[],l=!0,h=!1,g,u;try{for(r=r.call(e);!(l=(g=r.next()).done)&&(o.push(g.value),!(t&&o.length===t));l=!0);}catch(b){h=!0,u=b}finally{try{!l&&r.return!=null&&r.return()}finally{if(h)throw u}}return o}}function S8(e){if(Array.isArray(e))return e}function Xw(e){var t,r=e.value,o=e.onChangeValue,l=e.children,h=e.position,g=e.background,u=e.SVGBackground,b=e.width,w=e.height,T=r.SVGMinX,I=r.SVGMinY,z=r.SVGWidth,j=r.SVGHeight,Z=r.viewerWidth,H=r.viewerHeight,le=j/z,$=le>=1?w/j:b/z,B=UM(GM(r),[{x:0,y:0},{x:Z,y:H}]),X=v8(B,2),ue=X[0],ce=ue.x,me=ue.y,ge=X[1],xe=ge.x,je=ge.y,ke,Be;r.miniatureOpen?(ke=b,Be=w):(ke=24,Be=24);var zt=(t={position:"absolute",overflow:"hidden",outline:"1px solid rgba(19, 20, 22, 0.90)",transition:"width 200ms ease, height 200ms ease, bottom 200ms ease",width:ke+"px",height:Be+"px",bottom:"6px"},jk(t,h===Ni?"left":"right","6px"),jk(t,"background",g),t),vt=le>=1?"translate(".concat((b-z*$)/2-T*$,", ").concat(-I*$,")"):"translate(".concat(-T*$,", ").concat((w-j*$)/2-I*$,")");return Re.createElement("div",{role:"navigation",style:zt},Re.createElement("svg",{width:b,height:w,style:{pointerEvents:"none"}},Re.createElement("g",{transform:vt},Re.createElement("g",{transform:"scale(".concat($,", ").concat($,")")},Re.createElement("rect",{fill:u,x:T,y:I,width:z,height:j}),l,Re.createElement(_8,{SVGWidth:z,SVGHeight:j,SVGMinX:T,SVGMinY:I,x1:ce,y1:me,x2:xe,y2:je,zoomToFit:$})))),Re.createElement(d3,{value:r,onChangeValue:o,position:h}))}Xw.propTypes={value:Pe.object.isRequired,onChangeValue:Pe.func.isRequired,SVGBackground:Pe.string.isRequired,position:Pe.oneOf([Mo,Ni]),background:Pe.string.isRequired,width:Pe.number.isRequired,height:Pe.number.isRequired};Xw.defaultProps={position:Ni,background:"#616264",width:100,height:80};function px(e){return px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},px(e)}function my(){return my=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},my.apply(this,arguments)}function Wk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,o)}return r}function E8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wk(Object(r),!0).forEach(function(o){k8(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wk(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function k8(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qk(e,t){return I8(e)||P8(e,t)||C8(e,t)||T8()}function T8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C8(e,t){if(!!e){if(typeof e=="string")return Zk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zk(e,t)}}function Zk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function P8(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var o=[],l=!0,h=!1,g,u;try{for(r=r.call(e);!(l=(g=r.next()).done)&&(o.push(g.value),!(t&&o.length===t));l=!0);}catch(b){h=!0,u=b}finally{try{!l&&r.return!=null&&r.return()}finally{if(h)throw u}}return o}}function I8(e){if(Array.isArray(e))return e}function M8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hk(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function A8(e,t,r){return t&&Hk(e.prototype,t),r&&Hk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function z8(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mx(e,t)}function mx(e,t){return mx=Object.setPrototypeOf||function(o,l){return o.__proto__=l,o},mx(e,t)}function D8(e){var t=L8();return function(){var o=gy(e),l;if(t){var h=gy(this).constructor;l=Reflect.construct(o,arguments,h)}else l=o.apply(this,arguments);return R8(this,l)}}function R8(e,t){if(t&&(px(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gx(e)}function gx(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L8(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gy(e){return gy=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},gy(e)}var Kw=function(e){z8(r,e);var t=D8(r);function r(o,l){var h;M8(this,r);var g=o.width,u=o.height,b=o.scaleFactorMin,w=o.scaleFactorMax,T=o.children,I=T.props.viewBox,z;if(I){var j=Ok(I),Z=qk(j,4),H=Z[0],le=Z[1],$=Z[2],B=Z[3];z=Tk(g,u,H,le,$,B,b,w)}else{var X=T.props,ue=X.width,ce=X.height;z=Tk(g,u,0,0,ue,ce,b,w)}return h=t.call(this,o,l),h.ViewerDOM=null,h.state={pointerX:null,pointerY:null,defaultValue:z},h.autoPanLoop=h.autoPanLoop.bind(gx(h)),h.onWheel=h.onWheel.bind(gx(h)),h}return A8(r,[{key:"componentDidUpdate",value:function(l){var h=this.getValue(),g=this.props,u=h,b=!1,w=g.children.props.viewBox;if(w){var T=Ok(w),I=qk(T,4),z=I[0],j=I[1],Z=I[2],H=I[3];(h.SVGMinX!==z||h.SVGMinY!==j||h.SVGWidth!==Z||h.SVGHeight!==H)&&(u=Ck(u,z,j,Z,H),b=!0)}else{var le=g.children.props,$=le.width,B=le.height;(h.SVGWidth!==$||h.SVGHeight!==B)&&(u=Ck(u,0,0,$,B),b=!0)}(l.width!==g.width||l.height!==g.height)&&(u=K$(u,g.width,g.height),b=!0),(l.scaleFactorMin!==g.scaleFactorMin||l.scaleFactorMax!==g.scaleFactorMax)&&(u=Y$(u,g.scaleFactorMin,g.scaleFactorMax),b=!0),b&&this.setValue(u)}},{key:"componentDidMount",value:function(){this.autoPanIsRunning=!0,requestAnimationFrame(this.autoPanLoop),this.ViewerDOM.addEventListener("wheel",this.onWheel,!1)}},{key:"componentWillUnmount",value:function(){this.autoPanIsRunning=!1,this.ViewerDOM.removeEventListener("wheel",this.onWheel)}},{key:"getValue",value:function(){return H$(this.props.value)?this.props.value:this.state.defaultValue}},{key:"getTool",value:function(){return this.props.tool?this.props.tool:ol}},{key:"setValue",value:function(l){var h=this.props,g=h.onChangeValue,u=h.onZoom,b=h.onPan;g&&g(l),l.lastAction&&(u&&l.lastAction===Jy&&u(l),b&&l.lastAction===ap&&b(l))}},{key:"pan",value:function(l,h){var g=Ww(this.getValue(),l,h);this.setValue(g)}},{key:"zoom",value:function(l,h,g){var u=bh(this.getValue(),l,h,g);this.setValue(u)}},{key:"fitSelection",value:function(l,h,g,u){var b=YM(this.getValue(),l,h,g,u);this.setValue(b)}},{key:"fitToViewer",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ch,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hh,g=JM(this.getValue(),l,h);this.setValue(g)}},{key:"zoomOnViewerCenter",value:function(l){var h=fB(this.getValue(),l);this.setValue(h)}},{key:"setPointOnViewerCenter",value:function(l,h,g){var u=J$(this.getValue(),l,h,g);this.setValue(u)}},{key:"reset",value:function(){var l=Q$(this.getValue());this.setValue(l)}},{key:"openMiniature",value:function(){var l=o3(this.getValue());this.setValue(l)}},{key:"closeMiniature",value:function(){var l=a3(this.getValue());this.setValue(l)}},{key:"handleViewerEvent",value:function(l){var h=this.props,g=this.ViewerDOM;if([ol,ma].indexOf(this.getTool())>=0&&l.target!==g){var u={click:h.onClick,dblclick:h.onDoubleClick,mousemove:h.onMouseMove,mouseup:h.onMouseUp,mousedown:h.onMouseDown,touchstart:h.onTouchStart,touchmove:h.onTouchMove,touchend:h.onTouchEnd,touchcancel:h.onTouchCancel},b=u[l.type];!b||b(OB(l,h.value,g))}}},{key:"autoPanLoop",value:function(){var l={x:this.state.pointerX,y:this.state.pointerY},h=vB(null,this.ViewerDOM,this.getTool(),this.getValue(),this.props,l);this.getValue()!==h&&this.setValue(h),this.autoPanIsRunning&&requestAnimationFrame(this.autoPanLoop)}},{key:"onWheel",value:function(l){var h=_B(l,this.ViewerDOM,this.getTool(),this.getValue(),this.props);this.getValue()!==h&&this.setValue(h)}},{key:"render",value:function(){var l=this,h=this.props,g=this.state,u=g.pointerX,b=g.pointerY,w=this.getTool(),T=this.getValue(),I=h.customToolbar,z=I===void 0?Hw:I,j=h.customMiniature,Z=j===void 0?Xw:j,H=w===ma&&T.mode===_a&&T.startX!==T.endX&&T.startY!==T.endY,le;w===Ba&&(le=jm(T.mode===_a?"grabbing":"grab")),w===vs&&(le=jm("zoom-in")),w===hl&&(le=jm("zoom-out")),H&&(le=jm("grabbing"));var $=[Ba,vs,hl].indexOf(w)>=0;$=$||H;var B=this.props.detectPinchGesture||[Ba,ma].indexOf(this.getTool())!==-1?"none":void 0,X={display:"block",cursor:le,touchAction:B};return Re.createElement("div",{style:E8({position:"relative",width:T.viewerWidth,height:T.viewerHeight},h.style),className:this.props.className},Re.createElement("svg",{ref:function(ce){return l.ViewerDOM=ce},width:T.viewerWidth,height:T.viewerHeight,style:X,onMouseDown:function(ce){var me=QM(ce,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==me&&l.setValue(me),l.handleViewerEvent(ce)},onMouseMove:function(ce){var me=l.ViewerDOM.getBoundingClientRect(),ge=me.left,xe=me.top,je=ce.clientX-Math.round(ge),ke=ce.clientY-Math.round(xe),Be=e3(ce,l.ViewerDOM,l.getTool(),l.getValue(),l.props,{x:je,y:ke});l.getValue()!==Be&&l.setValue(Be),l.setState({pointerX:je,pointerY:ke}),l.handleViewerEvent(ce)},onMouseUp:function(ce){var me=t3(ce,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==me&&l.setValue(me),l.handleViewerEvent(ce)},onClick:function(ce){l.handleViewerEvent(ce)},onDoubleClick:function(ce){var me=yB(ce,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==me&&l.setValue(me),l.handleViewerEvent(ce)},onMouseEnter:function(ce){if(!g8()){var me=zk(ce,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==me&&l.setValue(me)}},onMouseLeave:function(ce){var me=zk(ce,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==me&&l.setValue(me)},onTouchStart:function(ce){var me=VB(ce,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==me&&l.setValue(me),l.handleViewerEvent(ce)},onTouchMove:function(ce){var me=NB(ce,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==me&&l.setValue(me),l.handleViewerEvent(ce)},onTouchEnd:function(ce){var me=UB(ce,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==me&&l.setValue(me),l.handleViewerEvent(ce)},onTouchCancel:function(ce){var me=jB(ce,l.ViewerDOM,l.getTool(),l.getValue(),l.props);l.getValue()!==me&&l.setValue(me),l.handleViewerEvent(ce)}},Re.createElement("rect",{fill:h.background,x:0,y:0,width:T.viewerWidth,height:T.viewerHeight,style:{pointerEvents:"none"}}),Re.createElement("g",{transform:G$(T),style:$?{pointerEvents:"none"}:{}},Re.createElement("rect",{fill:this.props.SVGBackground,style:this.props.SVGStyle,x:T.SVGMinX||0,y:T.SVGMinY||0,width:T.SVGWidth,height:T.SVGHeight}),Re.createElement("g",null,h.children.props.children)),[ol,ma].indexOf(w)>=0&&h.detectAutoPan&&T.focus?Re.createElement("g",{style:{pointerEvents:"none"}},b<=20?Re.createElement(Gm,{direction:Ra,width:T.viewerWidth,height:T.viewerHeight}):null,T.viewerWidth-u<=20?Re.createElement(Gm,{direction:Mo,width:T.viewerWidth,height:T.viewerHeight}):null,T.viewerHeight-b<=20?Re.createElement(Gm,{direction:La,width:T.viewerWidth,height:T.viewerHeight}):null,T.focus&&u<=20?Re.createElement(Gm,{direction:Ni,width:T.viewerWidth,height:T.viewerHeight}):null):null,T.mode!==va?null:Re.createElement(c3,{startX:T.startX,startY:T.startY,endX:T.endX,endY:T.endY})),h.toolbarProps.position===uy?null:Re.createElement(z,my({},this.props.toolbarProps,{value:T,onChangeValue:function(ce){return l.setValue(ce)},tool:w,onChangeTool:function(ce){return l.props.onChangeTool(ce)}})),h.miniatureProps.position===uy?null:Re.createElement(Z,my({},this.props.miniatureProps,{value:T,onChangeValue:function(ce){return l.setValue(ce)},SVGBackground:this.props.SVGBackground}),h.children.props.children))}}]),r}(Re.Component);Kw.propTypes={width:Pe.number.isRequired,height:Pe.number.isRequired,value:Pe.oneOfType([Pe.object,Pe.shape({version:Pe.oneOf([2]).isRequired,mode:Pe.oneOf([Io,_a,va]).isRequired,focus:Pe.bool.isRequired,a:Pe.number.isRequired,b:Pe.number.isRequired,c:Pe.number.isRequired,d:Pe.number.isRequired,e:Pe.number.isRequired,f:Pe.number.isRequired,viewerWidth:Pe.number.isRequired,viewerHeight:Pe.number.isRequired,SVGMinX:Pe.number.isRequired,SVGMinY:Pe.number.isRequired,SVGWidth:Pe.number.isRequired,SVGHeight:Pe.number.isRequired,startX:Pe.number,startY:Pe.number,endX:Pe.number,endY:Pe.number,miniatureOpen:Pe.bool.isRequired})]).isRequired,onChangeValue:Pe.func.isRequired,tool:Pe.oneOf([ma,ol,Ba,vs,hl]).isRequired,onChangeTool:Pe.func.isRequired,background:Pe.string,SVGBackground:Pe.string,SVGStyle:Pe.object,style:Pe.object,className:Pe.string,detectWheel:Pe.bool,detectAutoPan:Pe.bool,detectPinchGesture:Pe.bool,onZoom:Pe.func,onPan:Pe.func,onClick:Pe.func,onDoubleClick:Pe.func,onMouseUp:Pe.func,onMouseMove:Pe.func,onMouseDown:Pe.func,preventPanOutside:Pe.bool,scaleFactor:Pe.number,scaleFactorOnWheel:Pe.number,scaleFactorMax:Pe.number,scaleFactorMin:Pe.number,modifierKeys:Pe.array,disableDoubleClickZoomWithToolAuto:Pe.bool,customMiniature:Pe.oneOfType([Pe.element,Pe.func]),miniatureProps:Pe.shape({position:Pe.oneOf([uy,Mo,Ni]),background:Pe.string,width:Pe.number,height:Pe.number}),customToolbar:Pe.oneOfType([Pe.element,Pe.func]),toolbarProps:Pe.shape({position:Pe.oneOf([uy,Ra,Mo,La,Ni]),SVGAlignX:Pe.oneOf([uh,ch,jw]),SVGAlignY:Pe.oneOf([uh,hh,Gw]),activeToolColor:Pe.string}),children:function(t,r,o){var l=t[r],h=["svg"];if(Re.Children.count(l)!==1||h.indexOf(l.type)===-1)return new Error("`"+o+"` should have a single child of the following types:  `"+h.join("`, `")+"`.");if((!l.props.hasOwnProperty("width")||!l.props.hasOwnProperty("height"))&&!l.props.hasOwnProperty("viewBox"))return new Error("SVG should have props `width` and `height` or `viewBox`")}};Kw.defaultProps={style:{},background:"#616264",SVGBackground:"#fff",SVGStyle:{},detectWheel:!0,detectAutoPan:!0,detectPinchGesture:!0,modifierKeys:["Alt","Shift","Control"],preventPanOutside:!0,scaleFactor:1.1,scaleFactorOnWheel:1.06,disableZoomWithToolAuto:!1,onZoom:null,onPan:null,toolbarProps:{},miniatureProps:{}};function yx(e){return yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yx(e)}var F8=["width","height","onChangeTool","onChangeValue"];function _x(){return _x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_x.apply(this,arguments)}function O8(e,t){if(e==null)return{};var r=$8(e,t),o,l;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(l=0;l<h.length;l++)o=h[l],!(t.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,o)||(r[o]=e[o]))}return r}function $8(e,t){if(e==null)return{};var r={},o=Object.keys(e),l,h;for(h=0;h<o.length;h++)l=o[h],!(t.indexOf(l)>=0)&&(r[l]=e[l]);return r}function B8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xk(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function V8(e,t,r){return t&&Xk(e.prototype,t),r&&Xk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function N8(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vx(e,t)}function vx(e,t){return vx=Object.setPrototypeOf||function(o,l){return o.__proto__=l,o},vx(e,t)}function U8(e){var t=G8();return function(){var o=yy(e),l;if(t){var h=yy(this).constructor;l=Reflect.construct(o,arguments,h)}else l=o.apply(this,arguments);return j8(this,l)}}function j8(e,t){if(t&&(yx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xx(e)}function xx(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G8(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yy(e){return yy=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},yy(e)}var p3=function(e){N8(r,e);var t=U8(r);function r(o){var l;return B8(this,r),l=t.call(this,o),l.state={value:o.defaultValue||{},tool:o.defaultTool||ol},l.Viewer=null,l.changeTool=l.changeTool.bind(xx(l)),l.changeValue=l.changeValue.bind(xx(l)),l}return V8(r,[{key:"changeTool",value:function(l){this.setState({tool:l})}},{key:"changeValue",value:function(l){this.setState({value:l})}},{key:"pan",value:function(l,h){this.Viewer.pan(l,h)}},{key:"zoom",value:function(l,h,g){this.Viewer.zoom(l,h,g)}},{key:"fitSelection",value:function(l,h,g,u){this.Viewer.fitSelection(l,h,g,u)}},{key:"fitToViewer",value:function(l,h){this.Viewer.fitToViewer(l,h)}},{key:"zoomOnViewerCenter",value:function(l){this.Viewer.zoomOnViewerCenter(l)}},{key:"setPointOnViewerCenter",value:function(l,h,g){this.Viewer.setPointOnViewerCenter(l,h,g)}},{key:"reset",value:function(){this.Viewer.reset()}},{key:"openMiniature",value:function(){this.Viewer.openMiniature()}},{key:"closeMiniature",value:function(){this.Viewer.closeMiniature()}},{key:"render",value:function(){var l=this,h=this.props,g=h.width,u=h.height;h.onChangeTool,h.onChangeValue;var b=O8(h,F8),w=this.state,T=w.tool,I=w.value;return Re.createElement(Kw,_x({width:g,height:u,tool:T,onChangeTool:this.changeTool,value:I,onChangeValue:this.changeValue,ref:function(j){return l.Viewer=j}},b))}}]),r}(Re.Component);p3.propTypes={width:Pe.number.isRequired,height:Pe.number.isRequired,defaultValue:Pe.object,defaultTool:Pe.string};const W8=dr("div",{height:"calc(100vh - $4 - $4)",overflowY:"scroll",width:"calc(100%/3)"}),q8=dr("div",{width:"100%",height:"calc(100vh - $4 - $4)"}),Z8=dr("table",{padding:"$2"}),H8=dr("div",{width:"calc(100%/3*2)"}),X8=dr("tr",{cursor:"pointer",fontFamily:"monospace"},{"&:hover":{color:"red"}}),K8=dr("div",{display:"flex"}),Y8=e=>{let[t,r,o]=qy(e.entry.tileId);return Pt(X8,{onClick:()=>{e.setSelectedEntry(e.entry)},children:[Oe("td",{children:e.entry.tileId}),Oe("td",{children:t}),Oe("td",{children:r}),Oe("td",{children:o}),Oe("td",{children:e.entry.offset}),Oe("td",{children:e.entry.length}),Oe("td",{children:e.entry.runLength==0?"directory":`tile(${e.entry.runLength})`})]})};let J8=(e,t)=>e.name==="earth"?-4:e.name==="water"?-3:e.name==="natural"?-2:e.name==="landuse"?-1:e.name==="places"?1:0;const Q8=e=>{let[t,r]=W.exports.useState(!1),o="none",l="";e.feature.type===3?o=t?"white":"currentColor":l=t?"white":"currentColor";let h=()=>{r(!0)},g=()=>{r(!1)},u=()=>{e.setSelectedFeature(e.feature)};return Oe("path",{d:e.feature.path,stroke:l,strokeWidth:10,fill:o,fillOpacity:.5,onMouseOver:h,onMouseOut:g,onMouseDown:u})},eV=e=>{let t=e.layer.features.map((r,o)=>Oe(Q8,{feature:r,setSelectedFeature:e.setSelectedFeature},o));return Oe("g",{color:e.color,children:t})},tV=dr("div",{position:"absolute",right:0,bottom:0,backgroundColor:"$black",padding:"$1"}),rV=e=>{let t=[];for(var r in e.feature.properties)t.push([r,e.feature.properties[r]]);const o=t.map((l,h)=>Pt("tr",{children:[Oe("td",{children:l[0]}),Oe("td",{children:l[1]})]},h));return Pt(tV,{children:[e.feature.layerName,Oe("table",{children:Oe("tbody",{children:o})})]})},nV=e=>{let[t,r]=W.exports.useState([]),[o,l]=W.exports.useState(0),[h,g]=W.exports.useState(null);const u=W.exports.useRef(null),[b,{width:w,height:T}]=j$();W.exports.useEffect(()=>{u.current.zoomOnViewerCenter(.1)},[]),W.exports.useEffect(()=>{let z=async j=>{let[Z,H,le]=qy(j.tileId),$=await e.file.getZxy(Z,H,le),B=new A$(new JO(new Uint8Array($.data))),X=[],ue=0;for(let[ge,xe]of Object.entries(B.layers)){xe.extent>ue&&(ue=xe.extent);let je=[];for(var ce=0;ce<xe.length;ce++){let ke=xe.feature(ce),Be=$M(),zt=ke.loadGeometry();if(ke.type===1)for(let vt of zt)for(let Et of vt)Be.arc(Et.x,Et.y,20,0,2*Math.PI);else for(let vt of zt){Be.moveTo(vt[0].x,vt[0].y);for(var me=1;me<vt.length;me++)Be.lineTo(vt[me].x,vt[me].y);ke.type===3&&Be.closePath()}je.push({path:Be.toString(),type:ke.type,id:ke.id,properties:ke.properties,layerName:ge})}X.push({features:je,name:ge})}l(ue),X.sort(J8),r(X)};e.entry&&z(e.entry)},[e.entry]);let I=t.map((z,j)=>Oe(eV,{layer:z,color:mg[j%12],setSelectedFeature:g},j));return Pt(q8,{ref:b,children:[Oe(p3,{ref:u,width:w,height:T,detectAutoPan:!1,onClick:z=>console.log("click",z.x,z.y,z.originalEvent),children:Oe("svg",{viewBox:"0 0 4096 4096",children:I})}),h?Oe(rV,{feature:h}):null]})},iV=e=>{let[t,r]=W.exports.useState("");return W.exports.useEffect(()=>{let o=async l=>{let[h,g,u]=qy(l.tileId),b=await e.file.getZxy(h,g,u),w=new Blob([b.data]);var T=window.URL.createObjectURL(w);r(T)};e.entry&&o(e.entry)},[e.entry]),Oe("img",{src:t})};function oV(e){const[t,r,o]=qy(e.tileId);let l=`${t}/${r}/${o}`;const h="inspector";let g=!1;const u=window.location.hash.slice(1).split("&").map(b=>{const w=b.split("=")[0];return w===h?(g=!0,`${w}=${l}`):b}).filter(b=>b);return g||u.push(`${h}=${l}`),`#${u.join("&")}`}function aV(e){let[t,r]=W.exports.useState([]),[o,l]=W.exports.useState(null),[h,g]=W.exports.useState(null);function u(I){I&&I.runLength>0&&window.history.replaceState(window.history.state,"",oV(I)),l(I)}W.exports.useEffect(()=>{(async()=>{let z=await e.file.getHeader();if(g(z),z.specVersion<3)r([]);else if(o!==null&&o.runLength===0){let j=await e.file.cache.getDirectory(e.file.source,z.leafDirectoryOffset+o.offset,o.length,z);r(j)}else if(o===null){let j=await e.file.cache.getDirectory(e.file.source,z.rootDirectoryOffset,z.rootDirectoryLength,z);r(j)}})()},[e.file,o]);let b=t.map((I,z)=>Oe(Y8,{entry:I,setSelectedEntry:u},z)),w=Oe("div",{});o&&(h==null?void 0:h.tileType)&&(o.runLength===0||(h.tileType===lu.Mvt?w=Oe(nV,{file:e.file,entry:o,tileType:h.tileType}):w=Oe(iV,{file:e.file,entry:o})));let T="";return h&&h.specVersion<3&&(T="Directory listing supported only for PMTiles v3 archives."),Pt(K8,{children:[Pt(W8,{children:[T,Pt(Z8,{children:[Oe("thead",{children:Pt("tr",{children:[Oe("th",{children:"tileid"}),Oe("th",{children:"z"}),Oe("th",{children:"x"}),Oe("th",{children:"y"}),Oe("th",{children:"offset"}),Oe("th",{children:"length"}),Oe("th",{children:"type"})]})}),Oe("tbody",{children:b})]})]}),Oe(H8,{children:w})]})}var Eh={};/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m3=W.exports;function Ht(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kv=!1;function st(e,t){return kv&&(kv=!1,t[0]!=="<"&&e.push("<!-- -->")),t==="<!-- -->"?kv=!0:e.push(t)}var yo=Object.prototype.hasOwnProperty,sV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kk={},Yk={};function g3(e){return yo.call(Yk,e)?!0:yo.call(Kk,e)?!1:sV.test(e)?Yk[e]=!0:(Kk[e]=!0,!1)}function Gi(e,t,r,o,l,h,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=l,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=g}var si={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){si[e]=new Gi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];si[t]=new Gi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){si[e]=new Gi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){si[e]=new Gi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){si[e]=new Gi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){si[e]=new Gi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){si[e]=new Gi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){si[e]=new Gi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){si[e]=new Gi(e,5,!1,e.toLowerCase(),null,!1,!1)});var Yw=/[\-:]([a-z])/g;function Jw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Yw,Jw);si[t]=new Gi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Yw,Jw);si[t]=new Gi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Yw,Jw);si[t]=new Gi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){si[e]=new Gi(e,1,!1,e.toLowerCase(),null,!1,!1)});si.xlinkHref=new Gi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){si[e]=new Gi(e,1,!1,e.toLowerCase(),null,!0,!0)});var yg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lV=["Webkit","ms","Moz","O"];Object.keys(yg).forEach(function(e){lV.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yg[t]=yg[e]})});var uV=/["'&<>]/;function $i(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var t=uV.exec(e);if(t){var r="",o,l=0;for(o=t.index;o<e.length;o++){switch(e.charCodeAt(o)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}l!==o&&(r+=e.substring(l,o)),l=o+1,r+=t}e=l!==o?r+e.substring(l,o):r}return e}var cV=/([A-Z])/g,hV=/^ms-/,wx=Array.isArray;function rs(e,t){return{insertionMode:e,selectedValue:t}}function dV(e,t,r){switch(t){case"select":return rs(1,r.value!=null?r.value:r.defaultValue);case"svg":return rs(2,null);case"math":return rs(3,null);case"foreignObject":return rs(1,null);case"table":return rs(4,null);case"thead":case"tbody":case"tfoot":return rs(5,null);case"colgroup":return rs(7,null);case"tr":return rs(6,null)}return 4<=e.insertionMode||e.insertionMode===0?rs(1,null):e}function Jk(e,t){t!==""&&e.push($i(t),"<!-- -->")}var Qk=new Map;function y3(e,t,r){if(typeof r!="object")throw Error(Ht(62));t=!0;for(var o in r)if(yo.call(r,o)){var l=r[o];if(l!=null&&typeof l!="boolean"&&l!==""){if(o.indexOf("--")===0){var h=$i(o);l=$i((""+l).trim())}else{h=o;var g=Qk.get(h);g!==void 0||(g=$i(h.replace(cV,"-$1").toLowerCase().replace(hV,"-ms-")),Qk.set(h,g)),h=g,l=typeof l=="number"?l===0||yo.call(yg,o)?""+l:l+"px":$i((""+l).trim())}t?(t=!1,e.push(' style="',h,":",l)):e.push(";",h,":",l)}}t||e.push('"')}function Wo(e,t,r,o){switch(r){case"style":y3(e,t,o);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N"){if(t=si.hasOwnProperty(r)?si[r]:null,t!==null){switch(typeof o){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(r=t.attributeName,t.type){case 3:o&&e.push(" ",r,'=""');break;case 4:o===!0?e.push(" ",r,'=""'):o!==!1&&e.push(" ",r,'="',$i(o),'"');break;case 5:isNaN(o)||e.push(" ",r,'="',$i(o),'"');break;case 6:!isNaN(o)&&1<=o&&e.push(" ",r,'="',$i(o),'"');break;default:t.sanitizeURL&&(o=""+o),e.push(" ",r,'="',$i(o),'"')}}else if(g3(r)){switch(typeof o){case"function":case"symbol":return;case"boolean":if(t=r.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-")return}e.push(" ",r,'="',$i(o),'"')}}}function _g(e,t,r){if(t!=null){if(r!=null)throw Error(Ht(60));if(typeof t!="object"||!("__html"in t))throw Error(Ht(61));t=t.__html,t!=null&&e.push(""+t)}}function fV(e){var t="";return m3.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function Tv(e,t,r,o){e.push(is(r));var l=r=null,h;for(h in t)if(yo.call(t,h)){var g=t[h];if(g!=null)switch(h){case"children":r=g;break;case"dangerouslySetInnerHTML":l=g;break;default:Wo(e,o,h,g)}}return e.push(">"),_g(e,l,r),typeof r=="string"?(e.push($i(r)),null):r}var pV=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,eT=new Map;function is(e){var t=eT.get(e);if(t===void 0){if(!pV.test(e))throw Error(Ht(65,e));t="<"+e,eT.set(e,t)}return t}function mV(e,t,r,o,l){switch(t){case"select":e.push(is("select"));var h=null,g=null;for(T in r)if(yo.call(r,T)){var u=r[T];if(u!=null)switch(T){case"children":h=u;break;case"dangerouslySetInnerHTML":g=u;break;case"defaultValue":case"value":break;default:Wo(e,o,T,u)}}return e.push(">"),_g(e,g,h),h;case"option":g=l.selectedValue,e.push(is("option"));var b=u=null,w=null,T=null;for(h in r)if(yo.call(r,h)&&(t=r[h],t!=null))switch(h){case"children":u=t;break;case"selected":w=t;break;case"dangerouslySetInnerHTML":T=t;break;case"value":b=t;default:Wo(e,o,h,t)}if(g!=null)if(r=b!==null?""+b:fV(u),wx(g)){for(o=0;o<g.length;o++)if(""+g[o]===r){e.push(' selected=""');break}}else""+g===r&&e.push(' selected=""');else w&&e.push(' selected=""');return e.push(">"),_g(e,T,u),u;case"textarea":e.push(is("textarea")),T=g=h=null;for(u in r)if(yo.call(r,u)&&(b=r[u],b!=null))switch(u){case"children":T=b;break;case"value":h=b;break;case"defaultValue":g=b;break;case"dangerouslySetInnerHTML":throw Error(Ht(91));default:Wo(e,o,u,b)}if(h===null&&g!==null&&(h=g),e.push(">"),T!=null){if(h!=null)throw Error(Ht(92));if(wx(T)&&1<T.length)throw Error(Ht(93));h=""+T}return typeof h=="string"&&h[0]===`
`&&e.push(`
`),h!==null&&e.push($i(""+h)),null;case"input":e.push(is("input")),b=T=u=h=null;for(g in r)if(yo.call(r,g)&&(w=r[g],w!=null))switch(g){case"children":case"dangerouslySetInnerHTML":throw Error(Ht(399,"input"));case"defaultChecked":b=w;break;case"defaultValue":u=w;break;case"checked":T=w;break;case"value":h=w;break;default:Wo(e,o,g,w)}return T!==null?Wo(e,o,"checked",T):b!==null&&Wo(e,o,"checked",b),h!==null?Wo(e,o,"value",h):u!==null&&Wo(e,o,"value",u),e.push("/>"),null;case"menuitem":e.push(is("menuitem"));for(var I in r)if(yo.call(r,I)&&(h=r[I],h!=null))switch(I){case"children":case"dangerouslySetInnerHTML":throw Error(Ht(400));default:Wo(e,o,I,h)}return e.push(">"),null;case"listing":case"pre":e.push(is(t)),g=h=null;for(b in r)if(yo.call(r,b)&&(u=r[b],u!=null))switch(b){case"children":h=u;break;case"dangerouslySetInnerHTML":g=u;break;default:Wo(e,o,b,u)}if(e.push(">"),g!=null){if(h!=null)throw Error(Ht(60));if(typeof g!="object"||!("__html"in g))throw Error(Ht(61));r=g.__html,r!=null&&(typeof r=="string"&&0<r.length&&r[0]===`
`?e.push(`
`,r):e.push(""+r))}return typeof h=="string"&&h[0]===`
`&&e.push(`
`),h;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push(is(t));for(var z in r)if(yo.call(r,z)&&(h=r[z],h!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(Ht(399,t));default:Wo(e,o,z,h)}return e.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Tv(e,r,t,o);case"html":return l.insertionMode===0&&e.push("<!DOCTYPE html>"),Tv(e,r,t,o);default:if(t.indexOf("-")===-1&&typeof r.is!="string")return Tv(e,r,t,o);e.push(is(t)),g=h=null;for(w in r)if(yo.call(r,w)&&(u=r[w],u!=null))switch(w){case"children":h=u;break;case"dangerouslySetInnerHTML":g=u;break;case"style":y3(e,o,u);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:g3(w)&&typeof u!="function"&&typeof u!="symbol"&&e.push(" ",w,'="',$i(u),'"')}return e.push(">"),_g(e,g,h),h}}function tT(e,t,r){if(st(e,'<!--$?--><template id="'),r===null)throw Error(Ht(395));return st(e,r),st(e,'"></template>')}function gV(e,t,r,o){switch(r.insertionMode){case 0:case 1:return st(e,'<div hidden id="'),st(e,t.segmentPrefix),t=o.toString(16),st(e,t),st(e,'">');case 2:return st(e,'<svg aria-hidden="true" style="display:none" id="'),st(e,t.segmentPrefix),t=o.toString(16),st(e,t),st(e,'">');case 3:return st(e,'<math aria-hidden="true" style="display:none" id="'),st(e,t.segmentPrefix),t=o.toString(16),st(e,t),st(e,'">');case 4:return st(e,'<table hidden id="'),st(e,t.segmentPrefix),t=o.toString(16),st(e,t),st(e,'">');case 5:return st(e,'<table hidden><tbody id="'),st(e,t.segmentPrefix),t=o.toString(16),st(e,t),st(e,'">');case 6:return st(e,'<table hidden><tr id="'),st(e,t.segmentPrefix),t=o.toString(16),st(e,t),st(e,'">');case 7:return st(e,'<table hidden><colgroup id="'),st(e,t.segmentPrefix),t=o.toString(16),st(e,t),st(e,'">');default:throw Error(Ht(397))}}function yV(e,t){switch(t.insertionMode){case 0:case 1:return st(e,"</div>");case 2:return st(e,"</svg>");case 3:return st(e,"</math>");case 4:return st(e,"</table>");case 5:return st(e,"</tbody></table>");case 6:return st(e,"</tr></table>");case 7:return st(e,"</colgroup></table>");default:throw Error(Ht(397))}}function _V(e,t){return t=t===void 0?"":t,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:t+"P:",segmentPrefix:t+"S:",boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:e}}var gf=Object.assign,vV=Symbol.for("react.element"),_3=Symbol.for("react.portal"),v3=Symbol.for("react.fragment"),x3=Symbol.for("react.strict_mode"),w3=Symbol.for("react.profiler"),b3=Symbol.for("react.provider"),S3=Symbol.for("react.context"),E3=Symbol.for("react.forward_ref"),k3=Symbol.for("react.suspense"),T3=Symbol.for("react.suspense_list"),C3=Symbol.for("react.memo"),Qw=Symbol.for("react.lazy"),xV=Symbol.for("react.scope"),wV=Symbol.for("react.debug_trace_mode"),bV=Symbol.for("react.legacy_hidden"),SV=Symbol.for("react.default_value"),rT=Symbol.iterator;function bx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case v3:return"Fragment";case _3:return"Portal";case w3:return"Profiler";case x3:return"StrictMode";case k3:return"Suspense";case T3:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case S3:return(e.displayName||"Context")+".Consumer";case b3:return(e._context.displayName||"Context")+".Provider";case E3:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case C3:return t=e.displayName||null,t!==null?t:bx(e.type)||"Memo";case Qw:t=e._payload,e=e._init;try{return bx(e(t))}catch{}}return null}var P3={};function nT(e,t){if(e=e.contextTypes,!e)return P3;var r={},o;for(o in e)r[o]=t[o];return r}var ru=null;function e0(e,t){if(e!==t){e.context._currentValue2=e.parentValue,e=e.parent;var r=t.parent;if(e===null){if(r!==null)throw Error(Ht(401))}else{if(r===null)throw Error(Ht(401));e0(e,r)}t.context._currentValue2=t.value}}function I3(e){e.context._currentValue2=e.parentValue,e=e.parent,e!==null&&I3(e)}function M3(e){var t=e.parent;t!==null&&M3(t),e.context._currentValue2=e.value}function A3(e,t){if(e.context._currentValue2=e.parentValue,e=e.parent,e===null)throw Error(Ht(402));e.depth===t.depth?e0(e,t):A3(e,t)}function z3(e,t){var r=t.parent;if(r===null)throw Error(Ht(402));e.depth===r.depth?e0(e,r):z3(e,r),t.context._currentValue2=t.value}function _y(e){var t=ru;t!==e&&(t===null?M3(e):e===null?I3(t):t.depth===e.depth?e0(t,e):t.depth>e.depth?A3(t,e):z3(t,e),ru=e)}var iT={isMounted:function(){return!1},enqueueSetState:function(e,t){e=e._reactInternals,e.queue!==null&&e.queue.push(t)},enqueueReplaceState:function(e,t){e=e._reactInternals,e.replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function oT(e,t,r,o){var l=e.state!==void 0?e.state:null;e.updater=iT,e.props=r,e.state=l;var h={queue:[],replace:!1};e._reactInternals=h;var g=t.contextType;if(e.context=typeof g=="object"&&g!==null?g._currentValue2:o,g=t.getDerivedStateFromProps,typeof g=="function"&&(g=g(r,l),l=g==null?l:gf({},l,g),e.state=l),typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function"&&(typeof e.UNSAFE_componentWillMount=="function"||typeof e.componentWillMount=="function"))if(t=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),t!==e.state&&iT.enqueueReplaceState(e,e.state,null),h.queue!==null&&0<h.queue.length)if(t=h.queue,g=h.replace,h.queue=null,h.replace=!1,g&&t.length===1)e.state=t[0];else{for(h=g?t[0]:e.state,l=!0,g=g?1:0;g<t.length;g++){var u=t[g];u=typeof u=="function"?u.call(e,h,r,o):u,u!=null&&(l?(l=!1,h=gf({},h,u)):gf(h,u))}e.state=h}else h.queue=null}var EV={id:1,overflow:""};function Sx(e,t,r){var o=e.id;e=e.overflow;var l=32-vg(o)-1;o&=~(1<<l),r+=1;var h=32-vg(t)+l;if(30<h){var g=l-l%5;return h=(o&(1<<g)-1).toString(32),o>>=g,l-=g,{id:1<<32-vg(t)+l|r<<l|o,overflow:h+e}}return{id:1<<h|r<<l|o,overflow:e}}var vg=Math.clz32?Math.clz32:CV,kV=Math.log,TV=Math.LN2;function CV(e){return e>>>=0,e===0?32:31-(kV(e)/TV|0)|0}function PV(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var IV=typeof Object.is=="function"?Object.is:PV,xs=null,eb=null,xg=null,$r=null,Yd=!1,vy=!1,Vf=0,Ys=null,t0=0;function Yl(){if(xs===null)throw Error(Ht(321));return xs}function aT(){if(0<t0)throw Error(Ht(312));return{memoizedState:null,queue:null,next:null}}function tb(){return $r===null?xg===null?(Yd=!1,xg=$r=aT()):(Yd=!0,$r=xg):$r.next===null?(Yd=!1,$r=$r.next=aT()):(Yd=!0,$r=$r.next),$r}function rb(){eb=xs=null,vy=!1,xg=null,t0=0,$r=Ys=null}function D3(e,t){return typeof t=="function"?t(e):t}function sT(e,t,r){if(xs=Yl(),$r=tb(),Yd){var o=$r.queue;if(t=o.dispatch,Ys!==null&&(r=Ys.get(o),r!==void 0)){Ys.delete(o),o=$r.memoizedState;do o=e(o,r.action),r=r.next;while(r!==null);return $r.memoizedState=o,[o,t]}return[$r.memoizedState,t]}return e=e===D3?typeof t=="function"?t():t:r!==void 0?r(t):t,$r.memoizedState=e,e=$r.queue={last:null,dispatch:null},e=e.dispatch=MV.bind(null,xs,e),[$r.memoizedState,e]}function lT(e,t){if(xs=Yl(),$r=tb(),t=t===void 0?null:t,$r!==null){var r=$r.memoizedState;if(r!==null&&t!==null){var o=r[1];e:if(o===null)o=!1;else{for(var l=0;l<o.length&&l<t.length;l++)if(!IV(t[l],o[l])){o=!1;break e}o=!0}if(o)return r[0]}}return e=e(),$r.memoizedState=[e,t],e}function MV(e,t,r){if(25<=t0)throw Error(Ht(301));if(e===xs)if(vy=!0,e={action:r,next:null},Ys===null&&(Ys=new Map),r=Ys.get(t),r===void 0)Ys.set(t,e);else{for(t=r;t.next!==null;)t=t.next;t.next=e}}function AV(){throw Error(Ht(394))}function Wm(){}var uT={readContext:function(e){return e._currentValue2},useContext:function(e){return Yl(),e._currentValue2},useMemo:lT,useReducer:sT,useRef:function(e){xs=Yl(),$r=tb();var t=$r.memoizedState;return t===null?(e={current:e},$r.memoizedState=e):t},useState:function(e){return sT(D3,e)},useInsertionEffect:Wm,useLayoutEffect:function(){},useCallback:function(e,t){return lT(function(){return e},t)},useImperativeHandle:Wm,useEffect:Wm,useDebugValue:Wm,useDeferredValue:function(e){return Yl(),e},useTransition:function(){return Yl(),[!1,AV]},useId:function(){var e=eb.treeContext,t=e.overflow;e=e.id,e=(e&~(1<<32-vg(e)-1)).toString(32)+t;var r=wg;if(r===null)throw Error(Ht(404));return t=Vf++,e=":"+r.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return Yl(),t(e._source)},useSyncExternalStore:function(e,t,r){if(r===void 0)throw Error(Ht(407));return r()}},wg=null,Cv=m3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function zV(e){console.error(e)}function Jd(){}function DV(e,t,r,o,l,h,g,u,b){var w=[],T=new Set;return t={destination:null,responseState:t,progressiveChunkSize:o===void 0?12800:o,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:T,pingedTasks:w,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:l===void 0?zV:l,onAllReady:h===void 0?Jd:h,onShellReady:g===void 0?Jd:g,onShellError:u===void 0?Jd:u,onFatalError:b===void 0?Jd:b},r=xy(t,0,null,r),r.parentFlushed=!0,e=nb(t,e,null,r,T,P3,null,EV),w.push(e),t}function nb(e,t,r,o,l,h,g,u){e.allPendingTasks++,r===null?e.pendingRootTasks++:r.pendingTasks++;var b={node:t,ping:function(){var w=e.pingedTasks;w.push(b),w.length===1&&F3(e)},blockedBoundary:r,blockedSegment:o,abortSet:l,legacyContext:h,context:g,treeContext:u};return l.add(b),b}function xy(e,t,r,o){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:o,boundary:r}}function Nf(e,t){e=e.onError,e(t)}function wy(e,t){var r=e.onShellError;r(t),r=e.onFatalError,r(t),e.destination!==null?(e.status=2,e.destination.destroy(t)):(e.status=1,e.fatalError=t)}function cT(e,t,r,o,l){for(xs={},eb=t,Vf=0,e=r(o,l);vy;)vy=!1,Vf=0,t0+=1,$r=null,e=r(o,l);return rb(),e}function hT(e,t,r,o){var l=r.render(),h=o.childContextTypes;if(h!=null){var g=t.legacyContext;if(typeof r.getChildContext!="function")o=g;else{r=r.getChildContext();for(var u in r)if(!(u in h))throw Error(Ht(108,bx(o)||"Unknown",u));o=gf({},g,r)}t.legacyContext=o,_o(e,t,l),t.legacyContext=g}else _o(e,t,l)}function dT(e,t){if(e&&e.defaultProps){t=gf({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ex(e,t,r,o,l){if(typeof r=="function")if(r.prototype&&r.prototype.isReactComponent){l=nT(r,t.legacyContext);var h=r.contextType;h=new r(o,typeof h=="object"&&h!==null?h._currentValue2:l),oT(h,r,o,l),hT(e,t,h,r)}else{h=nT(r,t.legacyContext),l=cT(e,t,r,o,h);var g=Vf!==0;if(typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0)oT(l,r,o,h),hT(e,t,l,r);else if(g){o=t.treeContext,t.treeContext=Sx(o,1,0);try{_o(e,t,l)}finally{t.treeContext=o}}else _o(e,t,l)}else if(typeof r=="string")switch(l=t.blockedSegment,h=mV(l.chunks,r,o,e.responseState,l.formatContext),g=l.formatContext,l.formatContext=dV(g,r,o),kx(e,t,h),l.formatContext=g,r){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:l.chunks.push("</",r,">")}else{switch(r){case bV:case wV:case x3:case w3:case v3:_o(e,t,o.children);return;case T3:_o(e,t,o.children);return;case xV:throw Error(Ht(343));case k3:e:{r=t.blockedBoundary,l=t.blockedSegment,h=o.fallback,o=o.children,g=new Set;var u={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:g},b=xy(e,l.chunks.length,u,l.formatContext);l.children.push(b);var w=xy(e,0,null,l.formatContext);w.parentFlushed=!0,t.blockedBoundary=u,t.blockedSegment=w;try{if(kx(e,t,o),w.status=1,by(u,w),u.pendingTasks===0)break e}catch(T){w.status=4,Nf(e,T),u.forceClientRender=!0}finally{t.blockedBoundary=r,t.blockedSegment=l}t=nb(e,h,r,b,g,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if(typeof r=="object"&&r!==null)switch(r.$$typeof){case E3:if(o=cT(e,t,r.render,o,l),Vf!==0){r=t.treeContext,t.treeContext=Sx(r,1,0);try{_o(e,t,o)}finally{t.treeContext=r}}else _o(e,t,o);return;case C3:r=r.type,o=dT(r,o),Ex(e,t,r,o,l);return;case b3:if(l=o.children,r=r._context,o=o.value,h=r._currentValue2,r._currentValue2=o,g=ru,ru=o={parent:g,depth:g===null?0:g.depth+1,context:r,parentValue:h,value:o},t.context=o,_o(e,t,l),e=ru,e===null)throw Error(Ht(403));o=e.parentValue,e.context._currentValue2=o===SV?e.context._defaultValue:o,e=ru=e.parent,t.context=e;return;case S3:o=o.children,o=o(r._currentValue2),_o(e,t,o);return;case Qw:l=r._init,r=l(r._payload),o=dT(r,o),Ex(e,t,r,o,void 0);return}throw Error(Ht(130,r==null?r:typeof r,""))}}function _o(e,t,r){if(t.node=r,typeof r=="object"&&r!==null){switch(r.$$typeof){case vV:Ex(e,t,r.type,r.props,r.ref);return;case _3:throw Error(Ht(257));case Qw:var o=r._init;r=o(r._payload),_o(e,t,r);return}if(wx(r)){fT(e,t,r);return}if(r===null||typeof r!="object"?o=null:(o=rT&&r[rT]||r["@@iterator"],o=typeof o=="function"?o:null),o&&(o=o.call(r))){if(r=o.next(),!r.done){var l=[];do l.push(r.value),r=o.next();while(!r.done);fT(e,t,l)}return}throw e=Object.prototype.toString.call(r),Error(Ht(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}typeof r=="string"?(t=t.blockedSegment.chunks,e.responseState.generateStaticMarkup?t.push($i(r)):Jk(t,r)):typeof r=="number"&&(t=t.blockedSegment.chunks,r=""+r,e.responseState.generateStaticMarkup?t.push($i(r)):Jk(t,r))}function fT(e,t,r){for(var o=r.length,l=0;l<o;l++){var h=t.treeContext;t.treeContext=Sx(h,o,l);try{kx(e,t,r[l])}finally{t.treeContext=h}}}function kx(e,t,r){var o=t.blockedSegment.formatContext,l=t.legacyContext,h=t.context;try{return _o(e,t,r)}catch(b){if(rb(),typeof b=="object"&&b!==null&&typeof b.then=="function"){r=b;var g=t.blockedSegment,u=xy(e,g.chunks.length,null,g.formatContext);g.children.push(u),e=nb(e,t.node,t.blockedBoundary,u,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,r.then(e,e),t.blockedSegment.formatContext=o,t.legacyContext=l,t.context=h,_y(h)}else throw t.blockedSegment.formatContext=o,t.legacyContext=l,t.context=h,_y(h),b}}function RV(e){var t=e.blockedBoundary;e=e.blockedSegment,e.status=3,L3(this,t,e)}function R3(e){var t=e.blockedBoundary;e.blockedSegment.status=3,t===null?(this.allPendingTasks--,this.status!==2&&(this.status=2,this.destination!==null&&this.destination.push(null))):(t.pendingTasks--,t.forceClientRender||(t.forceClientRender=!0,t.parentFlushed&&this.clientRenderedBoundaries.push(t)),t.fallbackAbortableTasks.forEach(R3,this),t.fallbackAbortableTasks.clear(),this.allPendingTasks--,this.allPendingTasks===0&&(e=this.onAllReady,e()))}function by(e,t){if(t.chunks.length===0&&t.children.length===1&&t.children[0].boundary===null){var r=t.children[0];r.id=t.id,r.parentFlushed=!0,r.status===1&&by(e,r)}else e.completedSegments.push(t)}function L3(e,t,r){if(t===null){if(r.parentFlushed){if(e.completedRootSegment!==null)throw Error(Ht(389));e.completedRootSegment=r}e.pendingRootTasks--,e.pendingRootTasks===0&&(e.onShellError=Jd,t=e.onShellReady,t())}else t.pendingTasks--,t.forceClientRender||(t.pendingTasks===0?(r.parentFlushed&&r.status===1&&by(t,r),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(RV,e),t.fallbackAbortableTasks.clear()):r.parentFlushed&&r.status===1&&(by(t,r),t.completedSegments.length===1&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,e.allPendingTasks===0&&(e=e.onAllReady,e())}function F3(e){if(e.status!==2){var t=ru,r=Cv.current;Cv.current=uT;var o=wg;wg=e.responseState;try{var l=e.pingedTasks,h;for(h=0;h<l.length;h++){var g=l[h],u=e,b=g.blockedSegment;if(b.status===0){_y(g.context);try{_o(u,g,g.node),g.abortSet.delete(g),b.status=1,L3(u,g.blockedBoundary,b)}catch(j){if(rb(),typeof j=="object"&&j!==null&&typeof j.then=="function"){var w=g.ping;j.then(w,w)}else{g.abortSet.delete(g),b.status=4;var T=g.blockedBoundary,I=j;if(Nf(u,I),T===null?wy(u,I):(T.pendingTasks--,T.forceClientRender||(T.forceClientRender=!0,T.parentFlushed&&u.clientRenderedBoundaries.push(T))),u.allPendingTasks--,u.allPendingTasks===0){var z=u.onAllReady;z()}}}finally{}}}l.splice(0,h),e.destination!==null&&ib(e,e.destination)}catch(j){Nf(e,j),wy(e,j)}finally{wg=o,Cv.current=r,r===uT&&_y(t)}}}function qm(e,t,r){switch(r.parentFlushed=!0,r.status){case 0:var o=r.id=e.nextSegmentId++;return e=e.responseState,st(t,'<template id="'),st(t,e.placeholderPrefix),e=o.toString(16),st(t,e),st(t,'"></template>');case 1:r.status=2;var l=!0;o=r.chunks;var h=0;r=r.children;for(var g=0;g<r.length;g++){for(l=r[g];h<l.index;h++)st(t,o[h]);l=r0(e,t,l)}for(;h<o.length-1;h++)st(t,o[h]);return h<o.length&&(l=st(t,o[h])),l;default:throw Error(Ht(390))}}function r0(e,t,r){var o=r.boundary;if(o===null)return qm(e,t,r);if(o.parentFlushed=!0,o.forceClientRender)return e.responseState.generateStaticMarkup||st(t,"<!--$!-->"),qm(e,t,r),e=e.responseState.generateStaticMarkup?!0:st(t,"<!--/$-->"),e;if(0<o.pendingTasks){o.rootSegmentID=e.nextSegmentId++,0<o.completedSegments.length&&e.partialBoundaries.push(o);var l=e.responseState,h=l.nextSuspenseID++;return l=l.boundaryPrefix+h.toString(16),o=o.id=l,tT(t,e.responseState,o),qm(e,t,r),st(t,"<!--/$-->")}if(o.byteSize>e.progressiveChunkSize)return o.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(o),tT(t,e.responseState,o.id),qm(e,t,r),st(t,"<!--/$-->");if(e.responseState.generateStaticMarkup||st(t,"<!--$-->"),r=o.completedSegments,r.length!==1)throw Error(Ht(391));return r0(e,t,r[0]),e=e.responseState.generateStaticMarkup?!0:st(t,"<!--/$-->"),e}function pT(e,t,r){return gV(t,e.responseState,r.formatContext,r.id),r0(e,t,r),yV(t,r.formatContext)}function mT(e,t,r){for(var o=r.completedSegments,l=0;l<o.length;l++)O3(e,t,r,o[l]);if(o.length=0,e=e.responseState,o=r.id,r=r.rootSegmentID,st(t,e.startInlineScript),e.sentCompleteBoundaryFunction?st(t,'$RC("'):(e.sentCompleteBoundaryFunction=!0,st(t,'function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),o===null)throw Error(Ht(395));return r=r.toString(16),st(t,o),st(t,'","'),st(t,e.segmentPrefix),st(t,r),st(t,'")<\/script>')}function O3(e,t,r,o){if(o.status===2)return!0;var l=o.id;if(l===-1){if((o.id=r.rootSegmentID)===-1)throw Error(Ht(392));return pT(e,t,o)}return pT(e,t,o),e=e.responseState,st(t,e.startInlineScript),e.sentCompleteSegmentFunction?st(t,'$RS("'):(e.sentCompleteSegmentFunction=!0,st(t,'function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),st(t,e.segmentPrefix),l=l.toString(16),st(t,l),st(t,'","'),st(t,e.placeholderPrefix),st(t,l),st(t,'")<\/script>')}function ib(e,t){try{var r=e.completedRootSegment;if(r!==null&&e.pendingRootTasks===0){r0(e,t,r),e.completedRootSegment=null;var o=e.responseState.bootstrapChunks;for(r=0;r<o.length-1;r++)st(t,o[r]);r<o.length&&st(t,o[r])}var l=e.clientRenderedBoundaries,h;for(h=0;h<l.length;h++){o=t;var g=e.responseState,u=l[h].id;if(st(o,g.startInlineScript),g.sentClientRenderFunction?st(o,'$RX("'):(g.sentClientRenderFunction=!0,st(o,'function $RX(a){if(a=document.getElementById(a))a=a.previousSibling,a.data="$!",a._reactRetry&&a._reactRetry()};$RX("')),u===null)throw Error(Ht(395));if(st(o,u),!st(o,'")<\/script>')){e.destination=null,h++,l.splice(0,h);return}}l.splice(0,h);var b=e.completedBoundaries;for(h=0;h<b.length;h++)if(!mT(e,t,b[h])){e.destination=null,h++,b.splice(0,h);return}b.splice(0,h);var w=e.partialBoundaries;for(h=0;h<w.length;h++){var T=w[h];e:{l=e,g=t;var I=T.completedSegments;for(u=0;u<I.length;u++)if(!O3(l,g,T,I[u])){u++,I.splice(0,u);var z=!1;break e}I.splice(0,u),z=!0}if(!z){e.destination=null,h++,w.splice(0,h);return}}w.splice(0,h);var j=e.completedBoundaries;for(h=0;h<j.length;h++)if(!mT(e,t,j[h])){e.destination=null,h++,j.splice(0,h);return}j.splice(0,h)}finally{e.allPendingTasks===0&&e.pingedTasks.length===0&&e.clientRenderedBoundaries.length===0&&e.completedBoundaries.length===0&&t.push(null)}}function LV(e){try{var t=e.abortableTasks;t.forEach(R3,e),t.clear(),e.destination!==null&&ib(e,e.destination)}catch(r){Nf(e,r),wy(e,r)}}function FV(){}function $3(e,t,r){var o=!1,l=null,h="",g={push:function(b){return b!==null&&(h+=b),!0},destroy:function(b){o=!0,l=b}},u=!1;if(e=DV(e,_V(r,t?t.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,FV,void 0,function(){u=!0},void 0,void 0),F3(e),LV(e),e.status===1)e.status=2,g.destroy(e.fatalError);else if(e.status!==2&&e.destination===null){e.destination=g;try{ib(e,g)}catch(b){Nf(e,b),wy(e,b)}}if(o)throw l;if(!u)throw Error(Ht(426));return h}Eh.renderToNodeStream=function(){throw Error(Ht(207))};Eh.renderToStaticMarkup=function(e,t){return $3(e,t,!0)};Eh.renderToStaticNodeStream=function(){throw Error(Ht(208))};Eh.renderToString=function(e,t){return $3(e,t,!1)};Eh.version="18.1.0";var ob={};/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B3=W.exports;function Qt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vo=null,xo=0;function Vt(e,t){if(t.length!==0)if(512<t.length)0<xo&&(e.enqueue(new Uint8Array(vo.buffer,0,xo)),vo=new Uint8Array(512),xo=0),e.enqueue(t);else{var r=vo.length-xo;r<t.length&&(r===0?e.enqueue(vo):(vo.set(t.subarray(0,r),xo),e.enqueue(vo),t=t.subarray(r)),vo=new Uint8Array(512),xo=0),vo.set(t,xo),xo+=t.length}}function Yr(e,t){return Vt(e,t),!0}function gT(e){vo&&0<xo&&(e.enqueue(new Uint8Array(vo.buffer,0,xo)),vo=null,xo=0)}var V3=new TextEncoder;function ur(e){return V3.encode(e)}function gt(e){return V3.encode(e)}function N3(e,t){typeof e.error=="function"?e.error(t):e.close()}var wo=Object.prototype.hasOwnProperty,OV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yT={},_T={};function U3(e){return wo.call(_T,e)?!0:wo.call(yT,e)?!1:OV.test(e)?_T[e]=!0:(yT[e]=!0,!1)}function Wi(e,t,r,o,l,h,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=l,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=g}var li={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){li[e]=new Wi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];li[t]=new Wi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){li[e]=new Wi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){li[e]=new Wi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){li[e]=new Wi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){li[e]=new Wi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){li[e]=new Wi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){li[e]=new Wi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){li[e]=new Wi(e,5,!1,e.toLowerCase(),null,!1,!1)});var ab=/[\-:]([a-z])/g;function sb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ab,sb);li[t]=new Wi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ab,sb);li[t]=new Wi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ab,sb);li[t]=new Wi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){li[e]=new Wi(e,1,!1,e.toLowerCase(),null,!1,!1)});li.xlinkHref=new Wi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){li[e]=new Wi(e,1,!1,e.toLowerCase(),null,!0,!0)});var bg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$V=["Webkit","ms","Moz","O"];Object.keys(bg).forEach(function(e){$V.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),bg[t]=bg[e]})});var BV=/["'&<>]/;function ii(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var t=BV.exec(e);if(t){var r="",o,l=0;for(o=t.index;o<e.length;o++){switch(e.charCodeAt(o)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}l!==o&&(r+=e.substring(l,o)),l=o+1,r+=t}e=l!==o?r+e.substring(l,o):r}return e}var VV=/([A-Z])/g,NV=/^ms-/,Tx=Array.isArray,UV=gt("<script>"),jV=gt("<\/script>"),GV=gt('<script src="'),WV=gt('<script type="module" src="'),vT=gt('" async=""><\/script>'),qV=/(<\/|<)(s)(cript)/gi;function ZV(e,t,r,o){return""+t+(r==="s"?"\\u0073":"\\u0053")+o}function HV(e,t,r,o,l){e=e===void 0?"":e,t=t===void 0?UV:gt('<script nonce="'+ii(t)+'">');var h=[];if(r!==void 0&&h.push(t,ur((""+r).replace(qV,ZV)),jV),o!==void 0)for(r=0;r<o.length;r++)h.push(GV,ur(ii(o[r])),vT);if(l!==void 0)for(o=0;o<l.length;o++)h.push(WV,ur(ii(l[o])),vT);return{bootstrapChunks:h,startInlineScript:t,placeholderPrefix:gt(e+"P:"),segmentPrefix:gt(e+"S:"),boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function Ia(e,t){return{insertionMode:e,selectedValue:t}}function XV(e){return Ia(e==="http://www.w3.org/2000/svg"?2:e==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function KV(e,t,r){switch(t){case"select":return Ia(1,r.value!=null?r.value:r.defaultValue);case"svg":return Ia(2,null);case"math":return Ia(3,null);case"foreignObject":return Ia(1,null);case"table":return Ia(4,null);case"thead":case"tbody":case"tfoot":return Ia(5,null);case"colgroup":return Ia(7,null);case"tr":return Ia(6,null)}return 4<=e.insertionMode||e.insertionMode===0?Ia(1,null):e}var xT=gt("<!-- -->"),wT=new Map,YV=gt(' style="'),bT=gt(":"),JV=gt(";");function j3(e,t,r){if(typeof r!="object")throw Error(Qt(62));t=!0;for(var o in r)if(wo.call(r,o)){var l=r[o];if(l!=null&&typeof l!="boolean"&&l!==""){if(o.indexOf("--")===0){var h=ur(ii(o));l=ur(ii((""+l).trim()))}else{h=o;var g=wT.get(h);g!==void 0||(g=gt(ii(h.replace(VV,"-$1").toLowerCase().replace(NV,"-ms-"))),wT.set(h,g)),h=g,l=typeof l=="number"?l===0||wo.call(bg,o)?ur(""+l):ur(l+"px"):ur(ii((""+l).trim()))}t?(t=!1,e.push(YV,h,bT,l)):e.push(JV,h,bT,l)}}t||e.push(Jl)}var Us=gt(" "),Pc=gt('="'),Jl=gt('"'),ST=gt('=""');function qo(e,t,r,o){switch(r){case"style":j3(e,t,o);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N"){if(t=li.hasOwnProperty(r)?li[r]:null,t!==null){switch(typeof o){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(r=ur(t.attributeName),t.type){case 3:o&&e.push(Us,r,ST);break;case 4:o===!0?e.push(Us,r,ST):o!==!1&&e.push(Us,r,Pc,ur(ii(o)),Jl);break;case 5:isNaN(o)||e.push(Us,r,Pc,ur(ii(o)),Jl);break;case 6:!isNaN(o)&&1<=o&&e.push(Us,r,Pc,ur(ii(o)),Jl);break;default:t.sanitizeURL&&(o=""+o),e.push(Us,r,Pc,ur(ii(o)),Jl)}}else if(U3(r)){switch(typeof o){case"function":case"symbol":return;case"boolean":if(t=r.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-")return}e.push(Us,ur(r),Pc,ur(ii(o)),Jl)}}}var Xl=gt(">"),ET=gt("/>");function Sg(e,t,r){if(t!=null){if(r!=null)throw Error(Qt(60));if(typeof t!="object"||!("__html"in t))throw Error(Qt(61));t=t.__html,t!=null&&e.push(ur(""+t))}}function QV(e){var t="";return B3.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}var Pv=gt(' selected=""');function Iv(e,t,r,o){e.push(os(r));var l=r=null,h;for(h in t)if(wo.call(t,h)){var g=t[h];if(g!=null)switch(h){case"children":r=g;break;case"dangerouslySetInnerHTML":l=g;break;default:qo(e,o,h,g)}}return e.push(Xl),Sg(e,l,r),typeof r=="string"?(e.push(ur(ii(r))),null):r}var Mv=gt(`
`),eN=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,kT=new Map;function os(e){var t=kT.get(e);if(t===void 0){if(!eN.test(e))throw Error(Qt(65,e));t=gt("<"+e),kT.set(e,t)}return t}var tN=gt("<!DOCTYPE html>");function rN(e,t,r,o,l){switch(t){case"select":e.push(os("select"));var h=null,g=null;for(T in r)if(wo.call(r,T)){var u=r[T];if(u!=null)switch(T){case"children":h=u;break;case"dangerouslySetInnerHTML":g=u;break;case"defaultValue":case"value":break;default:qo(e,o,T,u)}}return e.push(Xl),Sg(e,g,h),h;case"option":g=l.selectedValue,e.push(os("option"));var b=u=null,w=null,T=null;for(h in r)if(wo.call(r,h)&&(t=r[h],t!=null))switch(h){case"children":u=t;break;case"selected":w=t;break;case"dangerouslySetInnerHTML":T=t;break;case"value":b=t;default:qo(e,o,h,t)}if(g!=null)if(r=b!==null?""+b:QV(u),Tx(g)){for(o=0;o<g.length;o++)if(""+g[o]===r){e.push(Pv);break}}else""+g===r&&e.push(Pv);else w&&e.push(Pv);return e.push(Xl),Sg(e,T,u),u;case"textarea":e.push(os("textarea")),T=g=h=null;for(u in r)if(wo.call(r,u)&&(b=r[u],b!=null))switch(u){case"children":T=b;break;case"value":h=b;break;case"defaultValue":g=b;break;case"dangerouslySetInnerHTML":throw Error(Qt(91));default:qo(e,o,u,b)}if(h===null&&g!==null&&(h=g),e.push(Xl),T!=null){if(h!=null)throw Error(Qt(92));if(Tx(T)&&1<T.length)throw Error(Qt(93));h=""+T}return typeof h=="string"&&h[0]===`
`&&e.push(Mv),h!==null&&e.push(ur(ii(""+h))),null;case"input":e.push(os("input")),b=T=u=h=null;for(g in r)if(wo.call(r,g)&&(w=r[g],w!=null))switch(g){case"children":case"dangerouslySetInnerHTML":throw Error(Qt(399,"input"));case"defaultChecked":b=w;break;case"defaultValue":u=w;break;case"checked":T=w;break;case"value":h=w;break;default:qo(e,o,g,w)}return T!==null?qo(e,o,"checked",T):b!==null&&qo(e,o,"checked",b),h!==null?qo(e,o,"value",h):u!==null&&qo(e,o,"value",u),e.push(ET),null;case"menuitem":e.push(os("menuitem"));for(var I in r)if(wo.call(r,I)&&(h=r[I],h!=null))switch(I){case"children":case"dangerouslySetInnerHTML":throw Error(Qt(400));default:qo(e,o,I,h)}return e.push(Xl),null;case"listing":case"pre":e.push(os(t)),g=h=null;for(b in r)if(wo.call(r,b)&&(u=r[b],u!=null))switch(b){case"children":h=u;break;case"dangerouslySetInnerHTML":g=u;break;default:qo(e,o,b,u)}if(e.push(Xl),g!=null){if(h!=null)throw Error(Qt(60));if(typeof g!="object"||!("__html"in g))throw Error(Qt(61));r=g.__html,r!=null&&(typeof r=="string"&&0<r.length&&r[0]===`
`?e.push(Mv,ur(r)):e.push(ur(""+r)))}return typeof h=="string"&&h[0]===`
`&&e.push(Mv),h;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push(os(t));for(var z in r)if(wo.call(r,z)&&(h=r[z],h!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(Qt(399,t));default:qo(e,o,z,h)}return e.push(ET),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Iv(e,r,t,o);case"html":return l.insertionMode===0&&e.push(tN),Iv(e,r,t,o);default:if(t.indexOf("-")===-1&&typeof r.is!="string")return Iv(e,r,t,o);e.push(os(t)),g=h=null;for(w in r)if(wo.call(r,w)&&(u=r[w],u!=null))switch(w){case"children":h=u;break;case"dangerouslySetInnerHTML":g=u;break;case"style":j3(e,o,u);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:U3(w)&&typeof u!="function"&&typeof u!="symbol"&&e.push(Us,ur(w),Pc,ur(ii(u)),Jl)}return e.push(Xl),Sg(e,g,h),h}}var nN=gt("</"),iN=gt(">"),oN=gt('<template id="'),aN=gt('"></template>'),sN=gt("<!--$-->"),lN=gt('<!--$?--><template id="'),uN=gt('"></template>'),cN=gt("<!--$!-->"),hN=gt("<!--/$-->");function TT(e,t,r){if(Vt(e,lN),r===null)throw Error(Qt(395));return Vt(e,r),Yr(e,uN)}var dN=gt('<div hidden id="'),fN=gt('">'),pN=gt("</div>"),mN=gt('<svg aria-hidden="true" style="display:none" id="'),gN=gt('">'),yN=gt("</svg>"),_N=gt('<math aria-hidden="true" style="display:none" id="'),vN=gt('">'),xN=gt("</math>"),wN=gt('<table hidden id="'),bN=gt('">'),SN=gt("</table>"),EN=gt('<table hidden><tbody id="'),kN=gt('">'),TN=gt("</tbody></table>"),CN=gt('<table hidden><tr id="'),PN=gt('">'),IN=gt("</tr></table>"),MN=gt('<table hidden><colgroup id="'),AN=gt('">'),zN=gt("</colgroup></table>");function DN(e,t,r,o){switch(r.insertionMode){case 0:case 1:return Vt(e,dN),Vt(e,t.segmentPrefix),Vt(e,ur(o.toString(16))),Yr(e,fN);case 2:return Vt(e,mN),Vt(e,t.segmentPrefix),Vt(e,ur(o.toString(16))),Yr(e,gN);case 3:return Vt(e,_N),Vt(e,t.segmentPrefix),Vt(e,ur(o.toString(16))),Yr(e,vN);case 4:return Vt(e,wN),Vt(e,t.segmentPrefix),Vt(e,ur(o.toString(16))),Yr(e,bN);case 5:return Vt(e,EN),Vt(e,t.segmentPrefix),Vt(e,ur(o.toString(16))),Yr(e,kN);case 6:return Vt(e,CN),Vt(e,t.segmentPrefix),Vt(e,ur(o.toString(16))),Yr(e,PN);case 7:return Vt(e,MN),Vt(e,t.segmentPrefix),Vt(e,ur(o.toString(16))),Yr(e,AN);default:throw Error(Qt(397))}}function RN(e,t){switch(t.insertionMode){case 0:case 1:return Yr(e,pN);case 2:return Yr(e,yN);case 3:return Yr(e,xN);case 4:return Yr(e,SN);case 5:return Yr(e,TN);case 6:return Yr(e,IN);case 7:return Yr(e,zN);default:throw Error(Qt(397))}}var LN=gt('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),FN=gt('$RS("'),ON=gt('","'),$N=gt('")<\/script>'),BN=gt('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),VN=gt('$RC("'),NN=gt('","'),UN=gt('")<\/script>'),jN=gt('function $RX(a){if(a=document.getElementById(a))a=a.previousSibling,a.data="$!",a._reactRetry&&a._reactRetry()};$RX("'),GN=gt('$RX("'),WN=gt('")<\/script>'),yf=Object.assign,qN=Symbol.for("react.element"),G3=Symbol.for("react.portal"),W3=Symbol.for("react.fragment"),q3=Symbol.for("react.strict_mode"),Z3=Symbol.for("react.profiler"),H3=Symbol.for("react.provider"),X3=Symbol.for("react.context"),K3=Symbol.for("react.forward_ref"),Y3=Symbol.for("react.suspense"),J3=Symbol.for("react.suspense_list"),Q3=Symbol.for("react.memo"),lb=Symbol.for("react.lazy"),ZN=Symbol.for("react.scope"),HN=Symbol.for("react.debug_trace_mode"),XN=Symbol.for("react.legacy_hidden"),KN=Symbol.for("react.default_value"),CT=Symbol.iterator;function Cx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W3:return"Fragment";case G3:return"Portal";case Z3:return"Profiler";case q3:return"StrictMode";case Y3:return"Suspense";case J3:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case X3:return(e.displayName||"Context")+".Consumer";case H3:return(e._context.displayName||"Context")+".Provider";case K3:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Q3:return t=e.displayName||null,t!==null?t:Cx(e.type)||"Memo";case lb:t=e._payload,e=e._init;try{return Cx(e(t))}catch{}}return null}var eA={};function PT(e,t){if(e=e.contextTypes,!e)return eA;var r={},o;for(o in e)r[o]=t[o];return r}var nu=null;function n0(e,t){if(e!==t){e.context._currentValue=e.parentValue,e=e.parent;var r=t.parent;if(e===null){if(r!==null)throw Error(Qt(401))}else{if(r===null)throw Error(Qt(401));n0(e,r)}t.context._currentValue=t.value}}function tA(e){e.context._currentValue=e.parentValue,e=e.parent,e!==null&&tA(e)}function rA(e){var t=e.parent;t!==null&&rA(t),e.context._currentValue=e.value}function nA(e,t){if(e.context._currentValue=e.parentValue,e=e.parent,e===null)throw Error(Qt(402));e.depth===t.depth?n0(e,t):nA(e,t)}function iA(e,t){var r=t.parent;if(r===null)throw Error(Qt(402));e.depth===r.depth?n0(e,r):iA(e,r),t.context._currentValue=t.value}function Sy(e){var t=nu;t!==e&&(t===null?rA(e):e===null?tA(t):t.depth===e.depth?n0(t,e):t.depth>e.depth?nA(t,e):iA(t,e),nu=e)}var IT={isMounted:function(){return!1},enqueueSetState:function(e,t){e=e._reactInternals,e.queue!==null&&e.queue.push(t)},enqueueReplaceState:function(e,t){e=e._reactInternals,e.replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function MT(e,t,r,o){var l=e.state!==void 0?e.state:null;e.updater=IT,e.props=r,e.state=l;var h={queue:[],replace:!1};e._reactInternals=h;var g=t.contextType;if(e.context=typeof g=="object"&&g!==null?g._currentValue:o,g=t.getDerivedStateFromProps,typeof g=="function"&&(g=g(r,l),l=g==null?l:yf({},l,g),e.state=l),typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function"&&(typeof e.UNSAFE_componentWillMount=="function"||typeof e.componentWillMount=="function"))if(t=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),t!==e.state&&IT.enqueueReplaceState(e,e.state,null),h.queue!==null&&0<h.queue.length)if(t=h.queue,g=h.replace,h.queue=null,h.replace=!1,g&&t.length===1)e.state=t[0];else{for(h=g?t[0]:e.state,l=!0,g=g?1:0;g<t.length;g++){var u=t[g];u=typeof u=="function"?u.call(e,h,r,o):u,u!=null&&(l?(l=!1,h=yf({},h,u)):yf(h,u))}e.state=h}else h.queue=null}var YN={id:1,overflow:""};function Px(e,t,r){var o=e.id;e=e.overflow;var l=32-Eg(o)-1;o&=~(1<<l),r+=1;var h=32-Eg(t)+l;if(30<h){var g=l-l%5;return h=(o&(1<<g)-1).toString(32),o>>=g,l-=g,{id:1<<32-Eg(t)+l|r<<l|o,overflow:h+e}}return{id:1<<h|r<<l|o,overflow:e}}var Eg=Math.clz32?Math.clz32:eU,JN=Math.log,QN=Math.LN2;function eU(e){return e>>>=0,e===0?32:31-(JN(e)/QN|0)|0}function tU(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rU=typeof Object.is=="function"?Object.is:tU,ws=null,ub=null,kg=null,Br=null,Qd=!1,Ey=!1,Uf=0,Js=null,i0=0;function Ql(){if(ws===null)throw Error(Qt(321));return ws}function AT(){if(0<i0)throw Error(Qt(312));return{memoizedState:null,queue:null,next:null}}function cb(){return Br===null?kg===null?(Qd=!1,kg=Br=AT()):(Qd=!0,Br=kg):Br.next===null?(Qd=!1,Br=Br.next=AT()):(Qd=!0,Br=Br.next),Br}function hb(){ub=ws=null,Ey=!1,kg=null,i0=0,Br=Js=null}function oA(e,t){return typeof t=="function"?t(e):t}function zT(e,t,r){if(ws=Ql(),Br=cb(),Qd){var o=Br.queue;if(t=o.dispatch,Js!==null&&(r=Js.get(o),r!==void 0)){Js.delete(o),o=Br.memoizedState;do o=e(o,r.action),r=r.next;while(r!==null);return Br.memoizedState=o,[o,t]}return[Br.memoizedState,t]}return e=e===oA?typeof t=="function"?t():t:r!==void 0?r(t):t,Br.memoizedState=e,e=Br.queue={last:null,dispatch:null},e=e.dispatch=nU.bind(null,ws,e),[Br.memoizedState,e]}function DT(e,t){if(ws=Ql(),Br=cb(),t=t===void 0?null:t,Br!==null){var r=Br.memoizedState;if(r!==null&&t!==null){var o=r[1];e:if(o===null)o=!1;else{for(var l=0;l<o.length&&l<t.length;l++)if(!rU(t[l],o[l])){o=!1;break e}o=!0}if(o)return r[0]}}return e=e(),Br.memoizedState=[e,t],e}function nU(e,t,r){if(25<=i0)throw Error(Qt(301));if(e===ws)if(Ey=!0,e={action:r,next:null},Js===null&&(Js=new Map),r=Js.get(t),r===void 0)Js.set(t,e);else{for(t=r;t.next!==null;)t=t.next;t.next=e}}function iU(){throw Error(Qt(394))}function Zm(){}var RT={readContext:function(e){return e._currentValue},useContext:function(e){return Ql(),e._currentValue},useMemo:DT,useReducer:zT,useRef:function(e){ws=Ql(),Br=cb();var t=Br.memoizedState;return t===null?(e={current:e},Br.memoizedState=e):t},useState:function(e){return zT(oA,e)},useInsertionEffect:Zm,useLayoutEffect:function(){},useCallback:function(e,t){return DT(function(){return e},t)},useImperativeHandle:Zm,useEffect:Zm,useDebugValue:Zm,useDeferredValue:function(e){return Ql(),e},useTransition:function(){return Ql(),[!1,iU]},useId:function(){var e=ub.treeContext,t=e.overflow;e=e.id,e=(e&~(1<<32-Eg(e)-1)).toString(32)+t;var r=Tg;if(r===null)throw Error(Qt(404));return t=Uf++,e=":"+r.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return Ql(),t(e._source)},useSyncExternalStore:function(e,t,r){if(r===void 0)throw Error(Qt(407));return r()}},Tg=null,Av=B3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function oU(e){console.error(e)}function ef(){}function aU(e,t,r,o,l,h,g,u,b){var w=[],T=new Set;return t={destination:null,responseState:t,progressiveChunkSize:o===void 0?12800:o,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:T,pingedTasks:w,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:l===void 0?oU:l,onAllReady:h===void 0?ef:h,onShellReady:g===void 0?ef:g,onShellError:u===void 0?ef:u,onFatalError:b===void 0?ef:b},r=ky(t,0,null,r),r.parentFlushed=!0,e=db(t,e,null,r,T,eA,null,YN),w.push(e),t}function db(e,t,r,o,l,h,g,u){e.allPendingTasks++,r===null?e.pendingRootTasks++:r.pendingTasks++;var b={node:t,ping:function(){var w=e.pingedTasks;w.push(b),w.length===1&&lA(e)},blockedBoundary:r,blockedSegment:o,abortSet:l,legacyContext:h,context:g,treeContext:u};return l.add(b),b}function ky(e,t,r,o){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:o,boundary:r}}function jf(e,t){e=e.onError,e(t)}function Ty(e,t){var r=e.onShellError;r(t),r=e.onFatalError,r(t),e.destination!==null?(e.status=2,N3(e.destination,t)):(e.status=1,e.fatalError=t)}function LT(e,t,r,o,l){for(ws={},ub=t,Uf=0,e=r(o,l);Ey;)Ey=!1,Uf=0,i0+=1,Br=null,e=r(o,l);return hb(),e}function FT(e,t,r,o){var l=r.render(),h=o.childContextTypes;if(h!=null){var g=t.legacyContext;if(typeof r.getChildContext!="function")o=g;else{r=r.getChildContext();for(var u in r)if(!(u in h))throw Error(Qt(108,Cx(o)||"Unknown",u));o=yf({},g,r)}t.legacyContext=o,bo(e,t,l),t.legacyContext=g}else bo(e,t,l)}function OT(e,t){if(e&&e.defaultProps){t=yf({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ix(e,t,r,o,l){if(typeof r=="function")if(r.prototype&&r.prototype.isReactComponent){l=PT(r,t.legacyContext);var h=r.contextType;h=new r(o,typeof h=="object"&&h!==null?h._currentValue:l),MT(h,r,o,l),FT(e,t,h,r)}else{h=PT(r,t.legacyContext),l=LT(e,t,r,o,h);var g=Uf!==0;if(typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0)MT(l,r,o,h),FT(e,t,l,r);else if(g){o=t.treeContext,t.treeContext=Px(o,1,0);try{bo(e,t,l)}finally{t.treeContext=o}}else bo(e,t,l)}else if(typeof r=="string")switch(l=t.blockedSegment,h=rN(l.chunks,r,o,e.responseState,l.formatContext),g=l.formatContext,l.formatContext=KV(g,r,o),Mx(e,t,h),l.formatContext=g,r){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:l.chunks.push(nN,ur(r),iN)}else{switch(r){case XN:case HN:case q3:case Z3:case W3:bo(e,t,o.children);return;case J3:bo(e,t,o.children);return;case ZN:throw Error(Qt(343));case Y3:e:{r=t.blockedBoundary,l=t.blockedSegment,h=o.fallback,o=o.children,g=new Set;var u={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:g},b=ky(e,l.chunks.length,u,l.formatContext);l.children.push(b);var w=ky(e,0,null,l.formatContext);w.parentFlushed=!0,t.blockedBoundary=u,t.blockedSegment=w;try{if(Mx(e,t,o),w.status=1,Cy(u,w),u.pendingTasks===0)break e}catch(T){w.status=4,jf(e,T),u.forceClientRender=!0}finally{t.blockedBoundary=r,t.blockedSegment=l}t=db(e,h,r,b,g,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if(typeof r=="object"&&r!==null)switch(r.$$typeof){case K3:if(o=LT(e,t,r.render,o,l),Uf!==0){r=t.treeContext,t.treeContext=Px(r,1,0);try{bo(e,t,o)}finally{t.treeContext=r}}else bo(e,t,o);return;case Q3:r=r.type,o=OT(r,o),Ix(e,t,r,o,l);return;case H3:if(l=o.children,r=r._context,o=o.value,h=r._currentValue,r._currentValue=o,g=nu,nu=o={parent:g,depth:g===null?0:g.depth+1,context:r,parentValue:h,value:o},t.context=o,bo(e,t,l),e=nu,e===null)throw Error(Qt(403));o=e.parentValue,e.context._currentValue=o===KN?e.context._defaultValue:o,e=nu=e.parent,t.context=e;return;case X3:o=o.children,o=o(r._currentValue),bo(e,t,o);return;case lb:l=r._init,r=l(r._payload),o=OT(r,o),Ix(e,t,r,o,void 0);return}throw Error(Qt(130,r==null?r:typeof r,""))}}function bo(e,t,r){if(t.node=r,typeof r=="object"&&r!==null){switch(r.$$typeof){case qN:Ix(e,t,r.type,r.props,r.ref);return;case G3:throw Error(Qt(257));case lb:var o=r._init;r=o(r._payload),bo(e,t,r);return}if(Tx(r)){$T(e,t,r);return}if(r===null||typeof r!="object"?o=null:(o=CT&&r[CT]||r["@@iterator"],o=typeof o=="function"?o:null),o&&(o=o.call(r))){if(r=o.next(),!r.done){var l=[];do l.push(r.value),r=o.next();while(!r.done);$T(e,t,l)}return}throw t=Object.prototype.toString.call(r),Error(Qt(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}typeof r=="string"?r!==""&&t.blockedSegment.chunks.push(ur(ii(r)),xT):typeof r=="number"&&(e=""+r,e!==""&&t.blockedSegment.chunks.push(ur(ii(e)),xT))}function $T(e,t,r){for(var o=r.length,l=0;l<o;l++){var h=t.treeContext;t.treeContext=Px(h,o,l);try{Mx(e,t,r[l])}finally{t.treeContext=h}}}function Mx(e,t,r){var o=t.blockedSegment.formatContext,l=t.legacyContext,h=t.context;try{return bo(e,t,r)}catch(b){if(hb(),typeof b=="object"&&b!==null&&typeof b.then=="function"){r=b;var g=t.blockedSegment,u=ky(e,g.chunks.length,null,g.formatContext);g.children.push(u),e=db(e,t.node,t.blockedBoundary,u,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,r.then(e,e),t.blockedSegment.formatContext=o,t.legacyContext=l,t.context=h,Sy(h)}else throw t.blockedSegment.formatContext=o,t.legacyContext=l,t.context=h,Sy(h),b}}function sU(e){var t=e.blockedBoundary;e=e.blockedSegment,e.status=3,sA(this,t,e)}function aA(e){var t=e.blockedBoundary;e.blockedSegment.status=3,t===null?(this.allPendingTasks--,this.status!==2&&(this.status=2,this.destination!==null&&this.destination.close())):(t.pendingTasks--,t.forceClientRender||(t.forceClientRender=!0,t.parentFlushed&&this.clientRenderedBoundaries.push(t)),t.fallbackAbortableTasks.forEach(aA,this),t.fallbackAbortableTasks.clear(),this.allPendingTasks--,this.allPendingTasks===0&&(e=this.onAllReady,e()))}function Cy(e,t){if(t.chunks.length===0&&t.children.length===1&&t.children[0].boundary===null){var r=t.children[0];r.id=t.id,r.parentFlushed=!0,r.status===1&&Cy(e,r)}else e.completedSegments.push(t)}function sA(e,t,r){if(t===null){if(r.parentFlushed){if(e.completedRootSegment!==null)throw Error(Qt(389));e.completedRootSegment=r}e.pendingRootTasks--,e.pendingRootTasks===0&&(e.onShellError=ef,t=e.onShellReady,t())}else t.pendingTasks--,t.forceClientRender||(t.pendingTasks===0?(r.parentFlushed&&r.status===1&&Cy(t,r),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(sU,e),t.fallbackAbortableTasks.clear()):r.parentFlushed&&r.status===1&&(Cy(t,r),t.completedSegments.length===1&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,e.allPendingTasks===0&&(e=e.onAllReady,e())}function lA(e){if(e.status!==2){var t=nu,r=Av.current;Av.current=RT;var o=Tg;Tg=e.responseState;try{var l=e.pingedTasks,h;for(h=0;h<l.length;h++){var g=l[h],u=e,b=g.blockedSegment;if(b.status===0){Sy(g.context);try{bo(u,g,g.node),g.abortSet.delete(g),b.status=1,sA(u,g.blockedBoundary,b)}catch(j){if(hb(),typeof j=="object"&&j!==null&&typeof j.then=="function"){var w=g.ping;j.then(w,w)}else{g.abortSet.delete(g),b.status=4;var T=g.blockedBoundary,I=j;if(jf(u,I),T===null?Ty(u,I):(T.pendingTasks--,T.forceClientRender||(T.forceClientRender=!0,T.parentFlushed&&u.clientRenderedBoundaries.push(T))),u.allPendingTasks--,u.allPendingTasks===0){var z=u.onAllReady;z()}}}finally{}}}l.splice(0,h),e.destination!==null&&fb(e,e.destination)}catch(j){jf(e,j),Ty(e,j)}finally{Tg=o,Av.current=r,r===RT&&Sy(t)}}}function Hm(e,t,r){switch(r.parentFlushed=!0,r.status){case 0:var o=r.id=e.nextSegmentId++;return e=e.responseState,Vt(t,oN),Vt(t,e.placeholderPrefix),e=ur(o.toString(16)),Vt(t,e),Yr(t,aN);case 1:r.status=2;var l=!0;o=r.chunks;var h=0;r=r.children;for(var g=0;g<r.length;g++){for(l=r[g];h<l.index;h++)Vt(t,o[h]);l=o0(e,t,l)}for(;h<o.length-1;h++)Vt(t,o[h]);return h<o.length&&(l=Yr(t,o[h])),l;default:throw Error(Qt(390))}}function o0(e,t,r){var o=r.boundary;if(o===null)return Hm(e,t,r);if(o.parentFlushed=!0,o.forceClientRender)Yr(t,cN),Hm(e,t,r);else if(0<o.pendingTasks){o.rootSegmentID=e.nextSegmentId++,0<o.completedSegments.length&&e.partialBoundaries.push(o);var l=e.responseState,h=l.nextSuspenseID++;l=gt(l.boundaryPrefix+h.toString(16)),o=o.id=l,TT(t,e.responseState,o),Hm(e,t,r)}else if(o.byteSize>e.progressiveChunkSize)o.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(o),TT(t,e.responseState,o.id),Hm(e,t,r);else{if(Yr(t,sN),r=o.completedSegments,r.length!==1)throw Error(Qt(391));o0(e,t,r[0])}return Yr(t,hN)}function BT(e,t,r){return DN(t,e.responseState,r.formatContext,r.id),o0(e,t,r),RN(t,r.formatContext)}function VT(e,t,r){for(var o=r.completedSegments,l=0;l<o.length;l++)uA(e,t,r,o[l]);if(o.length=0,e=e.responseState,o=r.id,r=r.rootSegmentID,Vt(t,e.startInlineScript),e.sentCompleteBoundaryFunction?Vt(t,VN):(e.sentCompleteBoundaryFunction=!0,Vt(t,BN)),o===null)throw Error(Qt(395));return r=ur(r.toString(16)),Vt(t,o),Vt(t,NN),Vt(t,e.segmentPrefix),Vt(t,r),Yr(t,UN)}function uA(e,t,r,o){if(o.status===2)return!0;var l=o.id;if(l===-1){if((o.id=r.rootSegmentID)===-1)throw Error(Qt(392));return BT(e,t,o)}return BT(e,t,o),e=e.responseState,Vt(t,e.startInlineScript),e.sentCompleteSegmentFunction?Vt(t,FN):(e.sentCompleteSegmentFunction=!0,Vt(t,LN)),Vt(t,e.segmentPrefix),l=ur(l.toString(16)),Vt(t,l),Vt(t,ON),Vt(t,e.placeholderPrefix),Vt(t,l),Yr(t,$N)}function fb(e,t){vo=new Uint8Array(512),xo=0;try{var r=e.completedRootSegment;if(r!==null&&e.pendingRootTasks===0){o0(e,t,r),e.completedRootSegment=null;var o=e.responseState.bootstrapChunks;for(r=0;r<o.length-1;r++)Vt(t,o[r]);r<o.length&&Yr(t,o[r])}var l=e.clientRenderedBoundaries,h;for(h=0;h<l.length;h++){o=t;var g=e.responseState,u=l[h].id;if(Vt(o,g.startInlineScript),g.sentClientRenderFunction?Vt(o,GN):(g.sentClientRenderFunction=!0,Vt(o,jN)),u===null)throw Error(Qt(395));Vt(o,u),Yr(o,WN)}l.splice(0,h);var b=e.completedBoundaries;for(h=0;h<b.length;h++)VT(e,t,b[h]);b.splice(0,h),gT(t),vo=new Uint8Array(512),xo=0;var w=e.partialBoundaries;for(h=0;h<w.length;h++){var T=w[h];e:{l=e,g=t;var I=T.completedSegments;for(u=0;u<I.length;u++)if(!uA(l,g,T,I[u])){u++,I.splice(0,u);var z=!1;break e}I.splice(0,u),z=!0}if(!z){e.destination=null,h++,w.splice(0,h);return}}w.splice(0,h);var j=e.completedBoundaries;for(h=0;h<j.length;h++)VT(e,t,j[h]);j.splice(0,h)}finally{gT(t),e.allPendingTasks===0&&e.pingedTasks.length===0&&e.clientRenderedBoundaries.length===0&&e.completedBoundaries.length===0&&t.close()}}function NT(e){try{var t=e.abortableTasks;t.forEach(aA,e),t.clear(),e.destination!==null&&fb(e,e.destination)}catch(r){jf(e,r),Ty(e,r)}}ob.renderToReadableStream=function(e,t){return new Promise(function(r,o){var l,h,g=new Promise(function(T,I){h=T,l=I}),u=aU(e,HV(t?t.identifierPrefix:void 0,t?t.nonce:void 0,t?t.bootstrapScriptContent:void 0,t?t.bootstrapScripts:void 0,t?t.bootstrapModules:void 0),XV(t?t.namespaceURI:void 0),t?t.progressiveChunkSize:void 0,t?t.onError:void 0,h,function(){var T=new ReadableStream({type:"bytes",pull:function(I){if(u.status===1)u.status=2,N3(I,u.fatalError);else if(u.status!==2&&u.destination===null){u.destination=I;try{fb(u,I)}catch(z){jf(u,z),Ty(u,z)}}},cancel:function(){NT(u)}});T.allReady=g,r(T)},function(T){g.catch(function(){}),o(T)},l);if(t&&t.signal){var b=t.signal,w=function(){NT(u),b.removeEventListener("abort",w)};b.addEventListener("abort",w)}lA(u)})};ob.version="18.1.0";var kh,cA;kh=Eh,cA=ob;kh.version;var lU=kh.renderToString;kh.renderToStaticMarkup;kh.renderToNodeStream;kh.renderToStaticNodeStream;cA.renderToReadableStream;var hA={exports:{}};(function(e,t){(function(r,o){e.exports=o()})(vf,function(){var r,o,l;function h(u,b){if(!r)r=b;else if(!o)o=b;else{var w="var sharedChunk = {}; ("+r+")(sharedChunk); ("+o+")(sharedChunk);",T={};r(T),l=b(T),typeof window!="undefined"&&(l.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}h(["exports"],function(u){function b(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var w=T;function T(a,n){this.x=a,this.y=n}T.prototype={clone:function(){return new T(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,n){return this.clone()._rotateAround(a,n)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var n=a.x-this.x,s=a.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,n){return Math.atan2(this.x*n-this.y*a,this.x*a+this.y*n)},_matMult:function(a){var n=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=n,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var n=Math.cos(a),s=Math.sin(a),d=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=d,this},_rotateAround:function(a,n){var s=Math.cos(a),d=Math.sin(a),m=n.y+d*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-d*(this.y-n.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},T.convert=function(a){return a instanceof T?a:Array.isArray(a)?new T(a[0],a[1]):a};var I=b(w),z=j;function j(a,n,s,d){this.cx=3*a,this.bx=3*(s-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(d-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=n,this.p2x=s,this.p2y=d}j.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,n){if(n===void 0&&(n=1e-6),a<0)return 0;if(a>1)return 1;for(var s=a,d=0;d<8;d++){var m=this.sampleCurveX(s)-a;if(Math.abs(m)<n)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=m/_}var v=0,S=1;for(s=a,d=0;d<20&&(m=this.sampleCurveX(s),!(Math.abs(m-a)<n));d++)a>m?v=s:S=s,s=.5*(S-v)+v;return s},solve:function(a,n){return this.sampleCurveY(this.solveCurveX(a,n))}};var Z=b(z);function H(a,n,s,d){const m=new Z(a,n,s,d);return function(_){return m.solve(_)}}const le=H(.25,.1,.25,1);function $(a,n,s){return Math.min(s,Math.max(n,a))}function B(a,n,s){const d=s-n,m=((a-n)%d+d)%d+n;return m===n?s:m}function X(a,...n){for(const s of n)for(const d in s)a[d]=s[d];return a}let ue=1;function ce(a,n){a.forEach(s=>{n[s]&&(n[s]=n[s].bind(n))})}function me(a,n,s){const d={};for(const m in a)d[m]=n.call(s||this,a[m],m,a);return d}function ge(a,n,s){const d={};for(const m in a)n.call(s||this,a[m],m,a)&&(d[m]=a[m]);return d}function xe(a){return Array.isArray(a)?a.map(xe):typeof a=="object"&&a?me(a,xe):a}const je={};function ke(a){je[a]||(typeof console!="undefined"&&console.warn(a),je[a]=!0)}function Be(a,n,s){return(s.y-a.y)*(n.x-a.x)>(n.y-a.y)*(s.x-a.x)}function zt(a){let n=0;for(let s,d,m=0,_=a.length,v=_-1;m<_;v=m++)s=a[m],d=a[v],n+=(d.x-s.x)*(s.y+d.y);return n}function vt(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}let Et=null;function Ot(a){if(Et==null){const n=a.navigator?a.navigator.userAgent:null;Et=!!a.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Et}function Xt(a){return typeof ImageBitmap!="undefined"&&a instanceof ImageBitmap}const or="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ne,rt;const ht={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(a){const n=requestAnimationFrame(a);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(a,n=0){return this.getImageCanvasContext(a).getImageData(-n,-n,a.width+2*n,a.height+2*n)},getImageCanvasContext(a){const n=window.document.createElement("canvas"),s=n.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return n.width=a.width,n.height=a.height,s.drawImage(a,0,0,a.width,a.height),s},resolveURL:a=>(Ne||(Ne=document.createElement("a")),Ne.href=a,Ne.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(rt==null&&(rt=matchMedia("(prefers-reduced-motion: reduce)")),rt.matches)}},Dt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class it extends Error{constructor(n,s,d,m){super(`AJAXError: ${s} (${n}): ${d}`),this.status=n,this.statusText=s,this.url=d,this.body=m}}const xr=vt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,qt=a=>Dt.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))];function Dr(a,n){const s=new AbortController,d=new Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,referrer:xr(),signal:s.signal});let m=!1,_=!1;return a.type==="json"&&d.headers.set("Accept","application/json"),_||fetch(d).then(v=>v.ok?(S=>{(a.type==="arrayBuffer"||a.type==="image"?S.arrayBuffer():a.type==="json"?S.json():S.text()).then(k=>{_||(m=!0,n(null,k,S.headers.get("Cache-Control"),S.headers.get("Expires")))}).catch(k=>{_||n(new Error(k.message))})})(v):v.blob().then(S=>n(new it(v.status,v.statusText,a.url,S)))).catch(v=>{v.code!==20&&n(new Error(v.message))}),{cancel:()=>{_=!0,m||s.abort()}}}const At=function(a,n){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){if(vt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n);if(!vt())return(qt(a.url)||Dr)(a,n)}if(!(/^file:/.test(s=a.url)||/^file:/.test(xr())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Dr(a,n);if(vt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n,void 0,!0)}var s;return function(d,m){const _=new XMLHttpRequest;_.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(_.responseType="arraybuffer");for(const v in d.headers)_.setRequestHeader(v,d.headers[v]);return d.type==="json"&&(_.responseType="text",_.setRequestHeader("Accept","application/json")),_.withCredentials=d.credentials==="include",_.onerror=()=>{m(new Error(_.statusText))},_.onload=()=>{if((_.status>=200&&_.status<300||_.status===0)&&_.response!==null){let v=_.response;if(d.type==="json")try{v=JSON.parse(_.response)}catch(S){return m(S)}m(null,v,_.getResponseHeader("Cache-Control"),_.getResponseHeader("Expires"))}else{const v=new Blob([_.response],{type:_.getResponseHeader("Content-Type")});m(new it(_.status,_.statusText,d.url,v))}},_.send(d.body),{cancel:()=>_.abort()}}(a,n)},Pr=function(a,n){return At(X(a,{type:"arrayBuffer"}),n)};function On(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;const n=new URL(a),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function Mn(a,n,s){s[a]&&s[a].indexOf(n)!==-1||(s[a]=s[a]||[],s[a].push(n))}function bn(a,n,s){if(s&&s[a]){const d=s[a].indexOf(n);d!==-1&&s[a].splice(d,1)}}class Gt{constructor(n,s={}){X(this,s),this.type=n}}class ar extends Gt{constructor(n,s={}){super("error",X({error:n},s))}}class mn{on(n,s){return this._listeners=this._listeners||{},Mn(n,s,this._listeners),this}off(n,s){return bn(n,s,this._listeners),bn(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Mn(n,s,this._oneTimeListeners),this):new Promise(d=>this.once(n,d))}fire(n,s){typeof n=="string"&&(n=new Gt(n,s||{}));const d=n.type;if(this.listens(d)){n.target=this;const m=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const S of m)S.call(this,n);const _=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const S of _)bn(d,S,this._oneTimeListeners),S.call(this,n);const v=this._eventedParent;v&&(X(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),v.fire(n))}else n instanceof ar&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var Ce={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const $n=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function qi(a,n){const s={};for(const d in a)d!=="ref"&&(s[d]=a[d]);return $n.forEach(d=>{d in n&&(s[d]=n[d])}),s}function Kt(a,n){if(Array.isArray(a)){if(!Array.isArray(n)||a.length!==n.length)return!1;for(let s=0;s<a.length;s++)if(!Kt(a[s],n[s]))return!1;return!0}if(typeof a=="object"&&a!==null&&n!==null){if(typeof n!="object"||Object.keys(a).length!==Object.keys(n).length)return!1;for(const s in a)if(!Kt(a[s],n[s]))return!1;return!0}return a===n}const Zt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function un(a,n,s){s.push({command:Zt.addSource,args:[a,n[a]]})}function ui(a,n,s){n.push({command:Zt.removeSource,args:[a]}),s[a]=!0}function Bn(a,n,s,d){ui(a,s,d),un(a,n,s)}function xa(a,n,s){let d;for(d in a[s])if(Object.prototype.hasOwnProperty.call(a[s],d)&&d!=="data"&&!Kt(a[s][d],n[s][d]))return!1;for(d in n[s])if(Object.prototype.hasOwnProperty.call(n[s],d)&&d!=="data"&&!Kt(a[s][d],n[s][d]))return!1;return!0}function Rr(a,n,s,d,m,_){let v;for(v in n=n||{},a=a||{})Object.prototype.hasOwnProperty.call(a,v)&&(Kt(a[v],n[v])||s.push({command:_,args:[d,v,n[v],m]}));for(v in n)Object.prototype.hasOwnProperty.call(n,v)&&!Object.prototype.hasOwnProperty.call(a,v)&&(Kt(a[v],n[v])||s.push({command:_,args:[d,v,n[v],m]}))}function Qe(a){return a.id}function kt(a,n){return a[n.id]=n,a}class Le{constructor(n,s,d,m){this.message=(n?`${n}: `:"")+d,m&&(this.identifier=m),s!=null&&s.__line__&&(this.line=s.__line__)}}function Jt(a,...n){for(const s of n)for(const d in s)a[d]=s[d];return a}class Mt extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class gn{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[d,m]of s)this.bindings[d]=m}concat(n){return new gn(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const yn={kind:"null"},We={kind:"number"},Rt={kind:"string"},It={kind:"boolean"},Ur={kind:"color"},Kn={kind:"object"},pt={kind:"value"},ki={kind:"collator"},Zi={kind:"formatted"},wa={kind:"padding"},ba={kind:"resolvedImage"};function An(a,n){return{kind:"array",itemType:a,N:n}}function J(a){if(a.kind==="array"){const n=J(a.itemType);return typeof a.N=="number"?`array<${n}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${n}>`}return a.kind}const O=[yn,We,Rt,It,Ur,Zi,Kn,An(pt),wa,ba];function N(a,n){if(n.kind==="error")return null;if(a.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!N(a.itemType,n.itemType))&&(typeof a.N!="number"||a.N===n.N))return null}else{if(a.kind===n.kind)return null;if(a.kind==="value"){for(const s of O)if(!N(s,n))return null}}return`Expected ${J(a)} but found ${J(n)} instead.`}function K(a,n){return n.some(s=>s.kind===a.kind)}function ie(a,n){return n.some(s=>s==="null"?a===null:s==="array"?Array.isArray(a):s==="object"?a&&!Array.isArray(a)&&typeof a=="object":s===typeof a)}function se(a,n){return a.kind==="array"&&n.kind==="array"?a.itemType.kind===n.itemType.kind&&typeof a.N=="number":a.kind===n.kind}const ye=.96422,pe=.82521,ae=4/29,_e=6/29,Ae=3*_e*_e,Ie=Math.PI/180,ze=180/Math.PI;function _t(a){return(a%=360)<0&&(a+=360),a}function Lt([a,n,s,d]){let m,_;const v=xt((.2225045*(a=ut(a))+.7168786*(n=ut(n))+.0606169*(s=ut(s)))/1);a===n&&n===s?m=_=v:(m=xt((.4360747*a+.3850649*n+.1430804*s)/ye),_=xt((.0139322*a+.0971045*n+.7141733*s)/pe));const S=116*v-16;return[S<0?0:S,500*(m-v),200*(v-_),d]}function ut(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function xt(a){return a>.008856451679035631?Math.pow(a,1/3):a/Ae+ae}function $t([a,n,s,d]){let m=(a+16)/116,_=isNaN(n)?m:m+n/500,v=isNaN(s)?m:m-s/200;return m=1*Nt(m),_=ye*Nt(_),v=pe*Nt(v),[Yt(3.1338561*_-1.6168667*m-.4906146*v),Yt(-.9787684*_+1.9161415*m+.033454*v),Yt(.0719453*_-.2289914*m+1.4052427*v),d]}function Yt(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function Nt(a){return a>_e?a*a*a:Ae*(a-ae)}function cr(a){return parseInt(a.padEnd(2,a),16)/255}function fr(a,n){return Ir(n?a/100:a,0,1)}function Ir(a,n,s){return Math.min(Math.max(n,a),s)}function Lr(a){return!a.some(Number.isNaN)}const Qr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class er{constructor(n,s,d,m=1,_=!0){this.r=n,this.g=s,this.b=d,this.a=m,_||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[n,s,d,m]))}static parse(n){if(n instanceof er)return n;if(typeof n!="string")return;const s=function(d){if((d=d.toLowerCase())==="transparent")return[0,0,0,0];const m=Qr[d];if(m){const[S,k,M]=m;return[S/255,k/255,M/255,1]}if(/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const S=d.length<6?1:2;let k=1;return[cr(d.slice(k,k+=S)),cr(d.slice(k,k+=S)),cr(d.slice(k,k+=S)),cr(d.slice(k,k+S)||"ff")]}const _=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[S,k,M,D,F,V,U,q,re,Q,fe,ve]=_,he=[D||" ",U||" ",Q].join("");if(he==="  "||he==="  /"||he===",,"||he===",,,"){const we=[M,V,re].join(""),Ee=we==="%%%"?100:we===""?255:0;if(Ee){const Me=[Ir(+k/Ee,0,1),Ir(+F/Ee,0,1),Ir(+q/Ee,0,1),fe?fr(+fe,ve):1];if(Lr(Me))return Me}}return}const v=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[S,k,M,D,F,V,U,q,re]=v,Q=[M||" ",F||" ",U].join("");if(Q==="  "||Q==="  /"||Q===",,"||Q===",,,"){const fe=[+k,Ir(+D,0,100),Ir(+V,0,100),q?fr(+q,re):1];if(Lr(fe))return function([ve,he,we,Ee]){function Me(ot){const lt=(ot+ve/30)%12,Je=he*Math.min(we,1-we);return we-Je*Math.max(-1,Math.min(lt-3,9-lt,1))}return ve=_t(ve),he/=100,we/=100,[Me(0),Me(8),Me(4),Ee]}(fe)}}}(n);return s?new er(...s,!1):void 0}get rgb(){const{r:n,g:s,b:d,a:m}=this,_=m||1/0;return this.overwriteGetter("rgb",[n/_,s/_,d/_,m])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,d,m,_]=Lt(n),v=Math.sqrt(d*d+m*m);return[Math.round(1e4*v)?_t(Math.atan2(m,d)*ze):NaN,v,s,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Lt(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,d,m]=this.rgb;return`rgba(${[n,s,d].map(_=>Math.round(255*_)).join(",")},${m})`}}er.black=new er(0,0,0,1),er.white=new er(1,1,1,1),er.transparent=new er(0,0,0,0),er.red=new er(1,0,0,1);class Ih{constructor(n,s,d){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Mh{constructor(n,s,d,m,_){this.text=n,this.image=s,this.scale=d,this.fontStack=m,this.textColor=_}}class Ti{constructor(n){this.sections=n}static fromString(n){return new Ti([new Mh(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Ti?n:Ti.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class ci{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof ci)return n;if(typeof n=="number")return new ci([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new ci(n)}}toString(){return JSON.stringify(this.values)}}class Vn{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Vn({name:n,available:!1}):null}}function hp(a,n,s,d){return typeof a=="number"&&a>=0&&a<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[a,n,s,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[a,n,s,d]:[a,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function xu(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof er||a instanceof Ih||a instanceof Ti||a instanceof ci||a instanceof Vn)return!0;if(Array.isArray(a)){for(const n of a)if(!xu(n))return!1;return!0}if(typeof a=="object"){for(const n in a)if(!xu(a[n]))return!1;return!0}return!1}function Fr(a){if(a===null)return yn;if(typeof a=="string")return Rt;if(typeof a=="boolean")return It;if(typeof a=="number")return We;if(a instanceof er)return Ur;if(a instanceof Ih)return ki;if(a instanceof Ti)return Zi;if(a instanceof ci)return wa;if(a instanceof Vn)return ba;if(Array.isArray(a)){const n=a.length;let s;for(const d of a){const m=Fr(d);if(s){if(s===m)continue;s=pt;break}s=m}return An(s||pt,n)}return Kn}function vl(a){const n=typeof a;return a===null?"":n==="string"||n==="number"||n==="boolean"?String(a):a instanceof er||a instanceof Ti||a instanceof ci||a instanceof Vn?a.toString():JSON.stringify(a)}class Ua{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!xu(n[1]))return s.error("invalid value");const d=n[1];let m=Fr(d);const _=s.expectedType;return m.kind!=="array"||m.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(m=_),new Ua(m,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Sn{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const xl={string:Rt,number:We,boolean:It,object:Kn};class hi{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let d,m=1;const _=n[0];if(_==="array"){let S,k;if(n.length>2){const M=n[1];if(typeof M!="string"||!(M in xl)||M==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);S=xl[M],m++}else S=pt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);k=n[2],m++}d=An(S,k)}else{if(!xl[_])throw new Error(`Types doesn't contain name = ${_}`);d=xl[_]}const v=[];for(;m<n.length;m++){const S=s.parse(n[m],m,pt);if(!S)return null;v.push(S)}return new hi(d,v)}evaluate(n){for(let s=0;s<this.args.length;s++){const d=this.args[s].evaluate(n);if(!N(this.type,Fr(d)))return d;if(s===this.args.length-1)throw new Sn(`Expected value to be of type ${J(this.type)}, but found ${J(Fr(d))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const dp={"to-boolean":It,"to-color":Ur,"to-number":We,"to-string":Rt};class Sa{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const d=n[0];if(!dp[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&n.length!==2)return s.error("Expected one argument.");const m=dp[d],_=[];for(let v=1;v<n.length;v++){const S=s.parse(n[v],v,pt);if(!S)return null;_.push(S)}return new Sa(m,_)}evaluate(n){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(n));if(this.type.kind==="color"){let s,d;for(const m of this.args){if(s=m.evaluate(n),d=null,s instanceof er)return s;if(typeof s=="string"){const _=n.parseColor(s);if(_)return _}else if(Array.isArray(s)&&(d=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:hp(s[0],s[1],s[2],s[3]),!d))return new er(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Sn(d||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}if(this.type.kind==="padding"){let s;for(const d of this.args){s=d.evaluate(n);const m=ci.parse(s);if(m)return m}throw new Sn(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}if(this.type.kind==="number"){let s=null;for(const d of this.args){if(s=d.evaluate(n),s===null)return 0;const m=Number(s);if(!isNaN(m))return m}throw new Sn(`Could not convert ${JSON.stringify(s)} to number.`)}return this.type.kind==="formatted"?Ti.fromString(vl(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?Vn.fromString(vl(this.args[0].evaluate(n))):vl(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const L0=["Unknown","Point","LineString","Polygon"];class so{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?L0[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=er.parse(n)),s}}class Ss{constructor(n,s,d=[],m,_=new gn,v=[]){this.registry=n,this.path=d,this.key=d.map(S=>`[${S}]`).join(""),this.scope=_,this.errors=v,this.expectedType=m,this._isConstant=s}parse(n,s,d,m,_={}){return s?this.concat(s,d,m)._parse(n,_):this._parse(n,_)}_parse(n,s){function d(m,_,v){return v==="assert"?new hi(_,[m]):v==="coerce"?new Sa(_,[m]):m}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=n[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[m];if(_){let v=_.parse(n,this);if(!v)return null;if(this.expectedType){const S=this.expectedType,k=v.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||k.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||k.kind!=="value"&&k.kind!=="string")if(S.kind!=="padding"||k.kind!=="value"&&k.kind!=="number"&&k.kind!=="array"){if(this.checkSubtype(S,k))return null}else v=d(v,S,s.typeAnnotation||"coerce");else v=d(v,S,s.typeAnnotation||"coerce");else v=d(v,S,s.typeAnnotation||"assert")}if(!(v instanceof Ua)&&v.type.kind!=="resolvedImage"&&this._isConstant(v)){const S=new so;try{v=new Ua(v.type,v.evaluate(S))}catch(k){return this.error(k.message),null}}return v}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,d){const m=typeof n=="number"?this.path.concat(n):this.path,_=d?this.scope.concat(d):this.scope;return new Ss(this.registry,this._isConstant,m,s||null,_,this.errors)}error(n,...s){const d=`${this.key}${s.map(m=>`[${m}]`).join("")}`;this.errors.push(new Mt(d,n))}checkSubtype(n,s){const d=N(n,s);return d&&this.error(d),d}}class Es{constructor(n,s,d){this.type=ki,this.locale=d,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const d=n[1];if(typeof d!="object"||Array.isArray(d))return s.error("Collator options argument must be an object.");const m=s.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,It);if(!m)return null;const _=s.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,It);if(!_)return null;let v=null;return d.locale&&(v=s.parse(d.locale,1,Rt),!v)?null:new Es(m,_,v)}evaluate(n){return new Ih(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const Hi=8192;function pr(a,n){a[0]=Math.min(a[0],n[0]),a[1]=Math.min(a[1],n[1]),a[2]=Math.max(a[2],n[0]),a[3]=Math.max(a[3],n[1])}function wu(a,n){return!(a[0]<=n[0]||a[2]>=n[2]||a[1]<=n[1]||a[3]>=n[3])}function Ah(a,n){const s=(180+a[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,m=Math.pow(2,n.z);return[Math.round(s*m*Hi),Math.round(d*m*Hi)]}function F0(a,n,s){const d=a[0]-n[0],m=a[1]-n[1],_=a[0]-s[0],v=a[1]-s[1];return d*v-_*m==0&&d*_<=0&&m*v<=0}function bu(a,n){let s=!1;for(let v=0,S=n.length;v<S;v++){const k=n[v];for(let M=0,D=k.length;M<D-1;M++){if(F0(a,k[M],k[M+1]))return!1;(m=k[M])[1]>(d=a)[1]!=(_=k[M+1])[1]>d[1]&&d[0]<(_[0]-m[0])*(d[1]-m[1])/(_[1]-m[1])+m[0]&&(s=!s)}}var d,m,_;return s}function fp(a,n){for(let s=0;s<n.length;s++)if(bu(a,n[s]))return!0;return!1}function pp(a,n,s,d){const m=d[0]-s[0],_=d[1]-s[1],v=(a[0]-s[0])*_-m*(a[1]-s[1]),S=(n[0]-s[0])*_-m*(n[1]-s[1]);return v>0&&S<0||v<0&&S>0}function mp(a,n,s){for(const M of s)for(let D=0;D<M.length-1;++D)if((S=[(v=M[D+1])[0]-(_=M[D])[0],v[1]-_[1]])[0]*(k=[(m=n)[0]-(d=a)[0],m[1]-d[1]])[1]-S[1]*k[0]!=0&&pp(d,m,_,v)&&pp(_,v,d,m))return!0;var d,m,_,v,S,k;return!1}function zh(a,n){for(let s=0;s<a.length;++s)if(!bu(a[s],n))return!1;for(let s=0;s<a.length-1;++s)if(mp(a[s],a[s+1],n))return!1;return!0}function O0(a,n){for(let s=0;s<n.length;s++)if(zh(a,n[s]))return!0;return!1}function Dh(a,n,s){const d=[];for(let m=0;m<a.length;m++){const _=[];for(let v=0;v<a[m].length;v++){const S=Ah(a[m][v],s);pr(n,S),_.push(S)}d.push(_)}return d}function gp(a,n,s){const d=[];for(let m=0;m<a.length;m++){const _=Dh(a[m],n,s);d.push(_)}return d}function yp(a,n,s,d){if(a[0]<s[0]||a[0]>s[2]){const m=.5*d;let _=a[0]-s[0]>m?-d:s[0]-a[0]>m?d:0;_===0&&(_=a[0]-s[2]>m?-d:s[2]-a[0]>m?d:0),a[0]+=_}pr(n,a)}function Rh(a,n,s,d){const m=Math.pow(2,d.z)*Hi,_=[d.x*Hi,d.y*Hi],v=[];for(const S of a)for(const k of S){const M=[k.x+_[0],k.y+_[1]];yp(M,n,s,m),v.push(M)}return v}function Lh(a,n,s,d){const m=Math.pow(2,d.z)*Hi,_=[d.x*Hi,d.y*Hi],v=[];for(const k of a){const M=[];for(const D of k){const F=[D.x+_[0],D.y+_[1]];pr(n,F),M.push(F)}v.push(M)}if(n[2]-n[0]<=m/2){(S=n)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const k of v)for(const M of k)yp(M,n,s,m)}var S;return v}class ja{constructor(n,s){this.type=It,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(xu(n[1])){const d=n[1];if(d.type==="FeatureCollection")for(let m=0;m<d.features.length;++m){const _=d.features[m].geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new ja(d,d.features[m].geometry)}else if(d.type==="Feature"){const m=d.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new ja(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new ja(d,d)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,d){const m=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],v=s.canonicalID();if(d.type==="Polygon"){const S=Dh(d.coordinates,_,v),k=Rh(s.geometry(),m,_,v);if(!wu(m,_))return!1;for(const M of k)if(!bu(M,S))return!1}if(d.type==="MultiPolygon"){const S=gp(d.coordinates,_,v),k=Rh(s.geometry(),m,_,v);if(!wu(m,_))return!1;for(const M of k)if(!fp(M,S))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,d){const m=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],v=s.canonicalID();if(d.type==="Polygon"){const S=Dh(d.coordinates,_,v),k=Lh(s.geometry(),m,_,v);if(!wu(m,_))return!1;for(const M of k)if(!zh(M,S))return!1}if(d.type==="MultiPolygon"){const S=gp(d.coordinates,_,v),k=Lh(s.geometry(),m,_,v);if(!wu(m,_))return!1;for(const M of k)if(!O0(M,S))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Su{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const d=n[1];return s.scope.has(d)?new Su(d,s.scope.get(d)):s.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class di{constructor(n,s,d,m){this.name=n,this.type=s,this._evaluate=d,this.args=m}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const d=n[0],m=di.definitions[d];if(!m)return s.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(m)?m[0]:m.type,v=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=v.filter(([M])=>!Array.isArray(M)||M.length===n.length-1);let k=null;for(const[M,D]of S){k=new Ss(s.registry,Eu,s.path,null,s.scope);const F=[];let V=!1;for(let U=1;U<n.length;U++){const q=n[U],re=Array.isArray(M)?M[U-1]:M.type,Q=k.parse(q,1+F.length,re);if(!Q){V=!0;break}F.push(Q)}if(!V)if(Array.isArray(M)&&M.length!==F.length)k.error(`Expected ${M.length} arguments, but found ${F.length} instead.`);else{for(let U=0;U<F.length;U++){const q=Array.isArray(M)?M[U]:M.type,re=F[U];k.concat(U+1).checkSubtype(q,re.type)}if(k.errors.length===0)return new di(d,_,D,F)}}if(S.length===1)s.errors.push(...k.errors);else{const M=(S.length?S:v).map(([F])=>{return V=F,Array.isArray(V)?`(${V.map(J).join(", ")})`:`(${J(V.type)}...)`;var V}).join(" | "),D=[];for(let F=1;F<n.length;F++){const V=s.parse(n[F],1+D.length);if(!V)return null;D.push(J(V.type))}s.error(`Expected arguments of type ${M}, but found (${D.join(", ")}) instead.`)}return null}static register(n,s){di.definitions=s;for(const d in s)n[d]=di}}function Eu(a){if(a instanceof Su)return Eu(a.boundExpression);if(a instanceof di&&a.name==="error"||a instanceof Es||a instanceof ja)return!1;const n=a instanceof Sa||a instanceof hi;let s=!0;return a.eachChild(d=>{s=n?s&&Eu(d):s&&d instanceof Ua}),!!s&&ku(a)&&bl(a,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ku(a){if(a instanceof di&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof ja)return!1;let n=!0;return a.eachChild(s=>{n&&!ku(s)&&(n=!1)}),n}function wl(a){if(a instanceof di&&a.name==="feature-state")return!1;let n=!0;return a.eachChild(s=>{n&&!wl(s)&&(n=!1)}),n}function bl(a,n){if(a instanceof di&&n.indexOf(a.name)>=0)return!1;let s=!0;return a.eachChild(d=>{s&&!bl(d,n)&&(s=!1)}),s}function Sl(a,n){const s=a.length-1;let d,m,_=0,v=s,S=0;for(;_<=v;)if(S=Math.floor((_+v)/2),d=a[S],m=a[S+1],d<=n){if(S===s||n<m)return S;_=S+1}else{if(!(d>n))throw new Sn("Input is not a number.");v=S-1}return 0}class El{constructor(n,s,d){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[m,_]of d)this.labels.push(m),this.outputs.push(_)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const d=s.parse(n[1],1,We);if(!d)return null;const m=[];let _=null;s.expectedType&&s.expectedType.kind!=="value"&&(_=s.expectedType);for(let v=1;v<n.length;v+=2){const S=v===1?-1/0:n[v],k=n[v+1],M=v,D=v+1;if(typeof S!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(m.length&&m[m.length-1][0]>=S)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',M);const F=s.parse(k,D,_);if(!F)return null;_=_||F.type,m.push([S,F])}return new El(_,d,m)}evaluate(n){const s=this.labels,d=this.outputs;if(s.length===1)return d[0].evaluate(n);const m=this.input.evaluate(n);if(m<=s[0])return d[0].evaluate(n);const _=s.length;return m>=s[_-1]?d[_-1].evaluate(n):d[Sl(s,m)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function kl(a,n,s){return a+s*(n-a)}function Tl(a,n,s){return a.map((d,m)=>kl(d,n[m],s))}const fi={number:kl,color:function(a,n,s,d="rgb"){switch(d){case"rgb":{const[m,_,v,S]=Tl(a.rgb,n.rgb,s);return new er(m,_,v,S,!1)}case"hcl":{const[m,_,v,S]=a.hcl,[k,M,D,F]=n.hcl;let V,U;if(isNaN(m)||isNaN(k))isNaN(m)?isNaN(k)?V=NaN:(V=k,v!==1&&v!==0||(U=M)):(V=m,D!==1&&D!==0||(U=_));else{let ve=k-m;k>m&&ve>180?ve-=360:k<m&&m-k>180&&(ve+=360),V=m+s*ve}const[q,re,Q,fe]=function([ve,he,we,Ee]){return ve=isNaN(ve)?0:ve*Ie,$t([we,Math.cos(ve)*he,Math.sin(ve)*he,Ee])}([V,U!=null?U:kl(_,M,s),kl(v,D,s),kl(S,F,s)]);return new er(q,re,Q,fe,!1)}case"lab":{const[m,_,v,S]=$t(Tl(a.lab,n.lab,s));return new er(m,_,v,S,!1)}}},array:Tl,padding:function(a,n,s){return new ci(Tl(a.values,n.values,s))}};class Ci{constructor(n,s,d,m,_){this.type=n,this.operator=s,this.interpolation=d,this.input=m,this.labels=[],this.outputs=[];for(const[v,S]of _)this.labels.push(v),this.outputs.push(S)}static interpolationFactor(n,s,d,m){let _=0;if(n.name==="exponential")_=Fh(s,n.base,d,m);else if(n.name==="linear")_=Fh(s,1,d,m);else if(n.name==="cubic-bezier"){const v=n.controlPoints;_=new Z(v[0],v[1],v[2],v[3]).solve(Fh(s,1,d,m))}return _}static parse(n,s){let[d,m,_,...v]=n;if(!Array.isArray(m)||m.length===0)return s.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const M=m[1];if(typeof M!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:M}}else{if(m[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const M=m.slice(1);if(M.length!==4||M.some(D=>typeof D!="number"||D<0||D>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:M}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(_=s.parse(_,2,We),!_)return null;const S=[];let k=null;d==="interpolate-hcl"||d==="interpolate-lab"?k=Ur:s.expectedType&&s.expectedType.kind!=="value"&&(k=s.expectedType);for(let M=0;M<v.length;M+=2){const D=v[M],F=v[M+1],V=M+3,U=M+4;if(typeof D!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(S.length&&S[S.length-1][0]>=D)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',V);const q=s.parse(F,U,k);if(!q)return null;k=k||q.type,S.push([D,q])}return se(k,We)||se(k,Ur)||se(k,wa)||se(k,An(We))?new Ci(k,d,m,_,S):s.error(`Type ${J(k)} is not interpolatable.`)}evaluate(n){const s=this.labels,d=this.outputs;if(s.length===1)return d[0].evaluate(n);const m=this.input.evaluate(n);if(m<=s[0])return d[0].evaluate(n);const _=s.length;if(m>=s[_-1])return d[_-1].evaluate(n);const v=Sl(s,m),S=Ci.interpolationFactor(this.interpolation,m,s[v],s[v+1]),k=d[v].evaluate(n),M=d[v+1].evaluate(n);switch(this.operator){case"interpolate":return fi[this.type.kind](k,M,S);case"interpolate-hcl":return fi.color(k,M,S,"hcl");case"interpolate-lab":return fi.color(k,M,S,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Fh(a,n,s,d){const m=d-s,_=a-s;return m===0?0:n===1?_/m:(Math.pow(n,_)-1)/(Math.pow(n,m)-1)}class Tu{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let d=null;const m=s.expectedType;m&&m.kind!=="value"&&(d=m);const _=[];for(const S of n.slice(1)){const k=s.parse(S,1+_.length,d,void 0,{typeAnnotation:"omit"});if(!k)return null;d=d||k.type,_.push(k)}if(!d)throw new Error("No output type");const v=m&&_.some(S=>N(m,S.type));return new Tu(v?pt:d,_)}evaluate(n){let s,d=null,m=0;for(const _ of this.args)if(m++,d=_.evaluate(n),d&&d instanceof Vn&&!d.available&&(s||(s=d.name),d=null,m===this.args.length&&(d=s)),d!==null)break;return d}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class Cu{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const d=[];for(let _=1;_<n.length-1;_+=2){const v=n[_];if(typeof v!="string")return s.error(`Expected string, but found ${typeof v} instead.`,_);if(/[^a-zA-Z0-9_]/.test(v))return s.error("Variable names must contain only alphanumeric characters or '_'.",_);const S=s.parse(n[_+1],_+1);if(!S)return null;d.push([v,S])}const m=s.parse(n[n.length-1],n.length-1,s.expectedType,d);return m?new Cu(d,m):null}outputDefined(){return this.result.outputDefined()}}class Oh{constructor(n,s,d){this.type=n,this.index=s,this.input=d}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const d=s.parse(n[1],1,We),m=s.parse(n[2],2,An(s.expectedType||pt));return d&&m?new Oh(m.type.itemType,d,m):null}evaluate(n){const s=this.index.evaluate(n),d=this.input.evaluate(n);if(s<0)throw new Sn(`Array index out of bounds: ${s} < 0.`);if(s>=d.length)throw new Sn(`Array index out of bounds: ${s} > ${d.length-1}.`);if(s!==Math.floor(s))throw new Sn(`Array index must be an integer, but found ${s} instead.`);return d[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class $h{constructor(n,s){this.type=It,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const d=s.parse(n[1],1,pt),m=s.parse(n[2],2,pt);return d&&m?K(d.type,[It,Rt,We,yn,pt])?new $h(d,m):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${J(d.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!d)return!1;if(!ie(s,["boolean","string","number","null"]))throw new Sn(`Expected first argument to be of type boolean, string, number or null, but found ${J(Fr(s))} instead.`);if(!ie(d,["string","array"]))throw new Sn(`Expected second argument to be of type array or string, but found ${J(Fr(d))} instead.`);return d.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Pu{constructor(n,s,d){this.type=We,this.needle=n,this.haystack=s,this.fromIndex=d}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const d=s.parse(n[1],1,pt),m=s.parse(n[2],2,pt);if(!d||!m)return null;if(!K(d.type,[It,Rt,We,yn,pt]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${J(d.type)} instead`);if(n.length===4){const _=s.parse(n[3],3,We);return _?new Pu(d,m,_):null}return new Pu(d,m)}evaluate(n){const s=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!ie(s,["boolean","string","number","null"]))throw new Sn(`Expected first argument to be of type boolean, string, number or null, but found ${J(Fr(s))} instead.`);if(!ie(d,["string","array"]))throw new Sn(`Expected second argument to be of type array or string, but found ${J(Fr(d))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(n);return d.indexOf(s,m)}return d.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class tr{constructor(n,s,d,m,_,v){this.inputType=n,this.type=s,this.input=d,this.cases=m,this.outputs=_,this.otherwise=v}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let d,m;s.expectedType&&s.expectedType.kind!=="value"&&(m=s.expectedType);const _={},v=[];for(let M=2;M<n.length-1;M+=2){let D=n[M];const F=n[M+1];Array.isArray(D)||(D=[D]);const V=s.concat(M);if(D.length===0)return V.error("Expected at least one branch label.");for(const q of D){if(typeof q!="number"&&typeof q!="string")return V.error("Branch labels must be numbers or strings.");if(typeof q=="number"&&Math.abs(q)>Number.MAX_SAFE_INTEGER)return V.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof q=="number"&&Math.floor(q)!==q)return V.error("Numeric branch labels must be integer values.");if(d){if(V.checkSubtype(d,Fr(q)))return null}else d=Fr(q);if(_[String(q)]!==void 0)return V.error("Branch labels must be unique.");_[String(q)]=v.length}const U=s.parse(F,M,m);if(!U)return null;m=m||U.type,v.push(U)}const S=s.parse(n[1],1,pt);if(!S)return null;const k=s.parse(n[n.length-1],n.length-1,m);return k?S.type.kind!=="value"&&s.concat(1).checkSubtype(d,S.type)?null:new tr(d,m,S,_,v,k):null}evaluate(n){const s=this.input.evaluate(n);return(Fr(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class Bh{constructor(n,s,d){this.type=n,this.branches=s,this.otherwise=d}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let d;s.expectedType&&s.expectedType.kind!=="value"&&(d=s.expectedType);const m=[];for(let v=1;v<n.length-1;v+=2){const S=s.parse(n[v],v,It);if(!S)return null;const k=s.parse(n[v+1],v+1,d);if(!k)return null;m.push([S,k]),d=d||k.type}const _=s.parse(n[n.length-1],n.length-1,d);if(!_)return null;if(!d)throw new Error("Can't infer output type");return new Bh(d,m,_)}evaluate(n){for(const[s,d]of this.branches)if(s.evaluate(n))return d.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,d]of this.branches)n(s),n(d);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class Iu{constructor(n,s,d,m){this.type=n,this.input=s,this.beginIndex=d,this.endIndex=m}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const d=s.parse(n[1],1,pt),m=s.parse(n[2],2,We);if(!d||!m)return null;if(!K(d.type,[An(pt),Rt,pt]))return s.error(`Expected first argument to be of type array or string, but found ${J(d.type)} instead`);if(n.length===4){const _=s.parse(n[3],3,We);return _?new Iu(d.type,d,m,_):null}return new Iu(d.type,d,m)}evaluate(n){const s=this.input.evaluate(n),d=this.beginIndex.evaluate(n);if(!ie(s,["string","array"]))throw new Sn(`Expected first argument to be of type array or string, but found ${J(Fr(s))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(n);return s.slice(d,m)}return s.slice(d)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function _p(a,n){return a==="=="||a==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function vp(a,n,s,d){return d.compare(n,s)===0}function ks(a,n,s){const d=a!=="=="&&a!=="!=";return class dA{constructor(_,v,S){this.type=It,this.lhs=_,this.rhs=v,this.collator=S,this.hasUntypedArgument=_.type.kind==="value"||v.type.kind==="value"}static parse(_,v){if(_.length!==3&&_.length!==4)return v.error("Expected two or three arguments.");const S=_[0];let k=v.parse(_[1],1,pt);if(!k)return null;if(!_p(S,k.type))return v.concat(1).error(`"${S}" comparisons are not supported for type '${J(k.type)}'.`);let M=v.parse(_[2],2,pt);if(!M)return null;if(!_p(S,M.type))return v.concat(2).error(`"${S}" comparisons are not supported for type '${J(M.type)}'.`);if(k.type.kind!==M.type.kind&&k.type.kind!=="value"&&M.type.kind!=="value")return v.error(`Cannot compare types '${J(k.type)}' and '${J(M.type)}'.`);d&&(k.type.kind==="value"&&M.type.kind!=="value"?k=new hi(M.type,[k]):k.type.kind!=="value"&&M.type.kind==="value"&&(M=new hi(k.type,[M])));let D=null;if(_.length===4){if(k.type.kind!=="string"&&M.type.kind!=="string"&&k.type.kind!=="value"&&M.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(D=v.parse(_[3],3,ki),!D)return null}return new dA(k,M,D)}evaluate(_){const v=this.lhs.evaluate(_),S=this.rhs.evaluate(_);if(d&&this.hasUntypedArgument){const k=Fr(v),M=Fr(S);if(k.kind!==M.kind||k.kind!=="string"&&k.kind!=="number")throw new Sn(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${k.kind}, ${M.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const k=Fr(v),M=Fr(S);if(k.kind!=="string"||M.kind!=="string")return n(_,v,S)}return this.collator?s(_,v,S,this.collator.evaluate(_)):n(_,v,S)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const $0=ks("==",function(a,n,s){return n===s},vp),B0=ks("!=",function(a,n,s){return n!==s},function(a,n,s,d){return!vp(0,n,s,d)}),V0=ks("<",function(a,n,s){return n<s},function(a,n,s,d){return d.compare(n,s)<0}),N0=ks(">",function(a,n,s){return n>s},function(a,n,s,d){return d.compare(n,s)>0}),U0=ks("<=",function(a,n,s){return n<=s},function(a,n,s,d){return d.compare(n,s)<=0}),j0=ks(">=",function(a,n,s){return n>=s},function(a,n,s,d){return d.compare(n,s)>=0});class Vh{constructor(n,s,d,m,_){this.type=Rt,this.number=n,this.locale=s,this.currency=d,this.minFractionDigits=m,this.maxFractionDigits=_}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const d=s.parse(n[1],1,We);if(!d)return null;const m=n[2];if(typeof m!="object"||Array.isArray(m))return s.error("NumberFormat options argument must be an object.");let _=null;if(m.locale&&(_=s.parse(m.locale,1,Rt),!_))return null;let v=null;if(m.currency&&(v=s.parse(m.currency,1,Rt),!v))return null;let S=null;if(m["min-fraction-digits"]&&(S=s.parse(m["min-fraction-digits"],1,We),!S))return null;let k=null;return m["max-fraction-digits"]&&(k=s.parse(m["max-fraction-digits"],1,We),!k)?null:new Vh(d,_,v,S,k)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class Mu{constructor(n){this.type=Zi,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const d=n[1];if(!Array.isArray(d)&&typeof d=="object")return s.error("First argument must be an image or text section.");const m=[];let _=!1;for(let v=1;v<=n.length-1;++v){const S=n[v];if(_&&typeof S=="object"&&!Array.isArray(S)){_=!1;let k=null;if(S["font-scale"]&&(k=s.parse(S["font-scale"],1,We),!k))return null;let M=null;if(S["text-font"]&&(M=s.parse(S["text-font"],1,An(Rt)),!M))return null;let D=null;if(S["text-color"]&&(D=s.parse(S["text-color"],1,Ur),!D))return null;const F=m[m.length-1];F.scale=k,F.font=M,F.textColor=D}else{const k=s.parse(n[v],1,pt);if(!k)return null;const M=k.type.kind;if(M!=="string"&&M!=="value"&&M!=="null"&&M!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,m.push({content:k,scale:null,font:null,textColor:null})}}return new Mu(m)}evaluate(n){return new Ti(this.sections.map(s=>{const d=s.content.evaluate(n);return Fr(d)===ba?new Mh("",d,null,null,null):new Mh(vl(d),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class Nh{constructor(n){this.type=ba,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const d=s.parse(n[1],1,Rt);return d?new Nh(d):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),d=Vn.fromString(s);return d&&n.availableImages&&(d.available=n.availableImages.indexOf(s)>-1),d}eachChild(n){n(this.input)}outputDefined(){return!1}}class Uh{constructor(n){this.type=We,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const d=s.parse(n[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${J(d.type)} instead.`):new Uh(d):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new Sn(`Expected value to be of type string or array, but found ${J(Fr(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Ts={"==":$0,"!=":B0,">":N0,"<":V0,">=":j0,"<=":U0,array:hi,at:Oh,boolean:hi,case:Bh,coalesce:Tu,collator:Es,format:Mu,image:Nh,in:$h,"index-of":Pu,interpolate:Ci,"interpolate-hcl":Ci,"interpolate-lab":Ci,length:Uh,let:Cu,literal:Ua,match:tr,number:hi,"number-format":Vh,object:hi,slice:Iu,step:El,string:hi,"to-boolean":Sa,"to-color":Sa,"to-number":Sa,"to-string":Sa,var:Su,within:ja};function xp(a,[n,s,d,m]){n=n.evaluate(a),s=s.evaluate(a),d=d.evaluate(a);const _=m?m.evaluate(a):1,v=hp(n,s,d,_);if(v)throw new Sn(v);return new er(n/255,s/255,d/255,_,!1)}function wp(a,n){return a in n}function jh(a,n){const s=n[a];return s===void 0?null:s}function Ga(a){return{type:a}}function bp(a){return{result:"success",value:a}}function Cs(a){return{result:"error",value:a}}function Ps(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function Sp(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function Gh(a){return!!a.expression&&a.expression.interpolated}function mr(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function Au(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function G0(a){return a}function Ep(a,n){const s=n.type==="color",d=a.stops&&typeof a.stops[0][0]=="object",m=d||!(d||a.property!==void 0),_=a.type||(Gh(n)?"exponential":"interval");if(s||n.type==="padding"){const D=s?er.parse:ci.parse;(a=Jt({},a)).stops&&(a.stops=a.stops.map(F=>[F[0],D(F[1])])),a.default=D(a.default?a.default:n.default)}if(a.colorSpace&&(v=a.colorSpace)!=="rgb"&&v!=="hcl"&&v!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var v;let S,k,M;if(_==="exponential")S=kp;else if(_==="interval")S=Wh;else if(_==="categorical"){S=W0,k=Object.create(null);for(const D of a.stops)k[D[0]]=D[1];M=typeof a.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);S=q0}if(d){const D={},F=[];for(let q=0;q<a.stops.length;q++){const re=a.stops[q],Q=re[0].zoom;D[Q]===void 0&&(D[Q]={zoom:Q,type:a.type,property:a.property,default:a.default,stops:[]},F.push(Q)),D[Q].stops.push([re[0].value,re[1]])}const V=[];for(const q of F)V.push([D[q].zoom,Ep(D[q],n)]);const U={name:"linear"};return{kind:"composite",interpolationType:U,interpolationFactor:Ci.interpolationFactor.bind(void 0,U),zoomStops:V.map(q=>q[0]),evaluate:({zoom:q},re)=>kp({stops:V,base:a.base},n,q).evaluate(q,re)}}if(m){const D=_==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:Ci.interpolationFactor.bind(void 0,D),zoomStops:a.stops.map(F=>F[0]),evaluate:({zoom:F})=>S(a,n,F,k,M)}}return{kind:"source",evaluate(D,F){const V=F&&F.properties?F.properties[a.property]:void 0;return V===void 0?Cl(a.default,n.default):S(a,n,V,k,M)}}}function Cl(a,n,s){return a!==void 0?a:n!==void 0?n:s!==void 0?s:void 0}function W0(a,n,s,d,m){return Cl(typeof s===m?d[s]:void 0,a.default,n.default)}function Wh(a,n,s){if(mr(s)!=="number")return Cl(a.default,n.default);const d=a.stops.length;if(d===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[d-1][0])return a.stops[d-1][1];const m=Sl(a.stops.map(_=>_[0]),s);return a.stops[m][1]}function kp(a,n,s){const d=a.base!==void 0?a.base:1;if(mr(s)!=="number")return Cl(a.default,n.default);const m=a.stops.length;if(m===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[m-1][0])return a.stops[m-1][1];const _=Sl(a.stops.map(D=>D[0]),s),v=function(D,F,V,U){const q=U-V,re=D-V;return q===0?0:F===1?re/q:(Math.pow(F,re)-1)/(Math.pow(F,q)-1)}(s,d,a.stops[_][0],a.stops[_+1][0]),S=a.stops[_][1],k=a.stops[_+1][1],M=fi[n.type]||G0;return typeof S.evaluate=="function"?{evaluate(...D){const F=S.evaluate.apply(void 0,D),V=k.evaluate.apply(void 0,D);if(F!==void 0&&V!==void 0)return M(F,V,v,a.colorSpace)}}:M(S,k,v,a.colorSpace)}function q0(a,n,s){switch(n.type){case"color":s=er.parse(s);break;case"formatted":s=Ti.fromString(s.toString());break;case"resolvedImage":s=Vn.fromString(s.toString());break;case"padding":s=ci.parse(s);break;default:mr(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return Cl(s,a.default,n.default)}di.register(Ts,{error:[{kind:"error"},[Rt],(a,[n])=>{throw new Sn(n.evaluate(a))}],typeof:[Rt,[pt],(a,[n])=>J(Fr(n.evaluate(a)))],"to-rgba":[An(We,4),[Ur],(a,[n])=>{const[s,d,m,_]=n.evaluate(a).rgb;return[255*s,255*d,255*m,_]}],rgb:[Ur,[We,We,We],xp],rgba:[Ur,[We,We,We,We],xp],has:{type:It,overloads:[[[Rt],(a,[n])=>wp(n.evaluate(a),a.properties())],[[Rt,Kn],(a,[n,s])=>wp(n.evaluate(a),s.evaluate(a))]]},get:{type:pt,overloads:[[[Rt],(a,[n])=>jh(n.evaluate(a),a.properties())],[[Rt,Kn],(a,[n,s])=>jh(n.evaluate(a),s.evaluate(a))]]},"feature-state":[pt,[Rt],(a,[n])=>jh(n.evaluate(a),a.featureState||{})],properties:[Kn,[],a=>a.properties()],"geometry-type":[Rt,[],a=>a.geometryType()],id:[pt,[],a=>a.id()],zoom:[We,[],a=>a.globals.zoom],"heatmap-density":[We,[],a=>a.globals.heatmapDensity||0],"line-progress":[We,[],a=>a.globals.lineProgress||0],accumulated:[pt,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[We,Ga(We),(a,n)=>{let s=0;for(const d of n)s+=d.evaluate(a);return s}],"*":[We,Ga(We),(a,n)=>{let s=1;for(const d of n)s*=d.evaluate(a);return s}],"-":{type:We,overloads:[[[We,We],(a,[n,s])=>n.evaluate(a)-s.evaluate(a)],[[We],(a,[n])=>-n.evaluate(a)]]},"/":[We,[We,We],(a,[n,s])=>n.evaluate(a)/s.evaluate(a)],"%":[We,[We,We],(a,[n,s])=>n.evaluate(a)%s.evaluate(a)],ln2:[We,[],()=>Math.LN2],pi:[We,[],()=>Math.PI],e:[We,[],()=>Math.E],"^":[We,[We,We],(a,[n,s])=>Math.pow(n.evaluate(a),s.evaluate(a))],sqrt:[We,[We],(a,[n])=>Math.sqrt(n.evaluate(a))],log10:[We,[We],(a,[n])=>Math.log(n.evaluate(a))/Math.LN10],ln:[We,[We],(a,[n])=>Math.log(n.evaluate(a))],log2:[We,[We],(a,[n])=>Math.log(n.evaluate(a))/Math.LN2],sin:[We,[We],(a,[n])=>Math.sin(n.evaluate(a))],cos:[We,[We],(a,[n])=>Math.cos(n.evaluate(a))],tan:[We,[We],(a,[n])=>Math.tan(n.evaluate(a))],asin:[We,[We],(a,[n])=>Math.asin(n.evaluate(a))],acos:[We,[We],(a,[n])=>Math.acos(n.evaluate(a))],atan:[We,[We],(a,[n])=>Math.atan(n.evaluate(a))],min:[We,Ga(We),(a,n)=>Math.min(...n.map(s=>s.evaluate(a)))],max:[We,Ga(We),(a,n)=>Math.max(...n.map(s=>s.evaluate(a)))],abs:[We,[We],(a,[n])=>Math.abs(n.evaluate(a))],round:[We,[We],(a,[n])=>{const s=n.evaluate(a);return s<0?-Math.round(-s):Math.round(s)}],floor:[We,[We],(a,[n])=>Math.floor(n.evaluate(a))],ceil:[We,[We],(a,[n])=>Math.ceil(n.evaluate(a))],"filter-==":[It,[Rt,pt],(a,[n,s])=>a.properties()[n.value]===s.value],"filter-id-==":[It,[pt],(a,[n])=>a.id()===n.value],"filter-type-==":[It,[Rt],(a,[n])=>a.geometryType()===n.value],"filter-<":[It,[Rt,pt],(a,[n,s])=>{const d=a.properties()[n.value],m=s.value;return typeof d==typeof m&&d<m}],"filter-id-<":[It,[pt],(a,[n])=>{const s=a.id(),d=n.value;return typeof s==typeof d&&s<d}],"filter->":[It,[Rt,pt],(a,[n,s])=>{const d=a.properties()[n.value],m=s.value;return typeof d==typeof m&&d>m}],"filter-id->":[It,[pt],(a,[n])=>{const s=a.id(),d=n.value;return typeof s==typeof d&&s>d}],"filter-<=":[It,[Rt,pt],(a,[n,s])=>{const d=a.properties()[n.value],m=s.value;return typeof d==typeof m&&d<=m}],"filter-id-<=":[It,[pt],(a,[n])=>{const s=a.id(),d=n.value;return typeof s==typeof d&&s<=d}],"filter->=":[It,[Rt,pt],(a,[n,s])=>{const d=a.properties()[n.value],m=s.value;return typeof d==typeof m&&d>=m}],"filter-id->=":[It,[pt],(a,[n])=>{const s=a.id(),d=n.value;return typeof s==typeof d&&s>=d}],"filter-has":[It,[pt],(a,[n])=>n.value in a.properties()],"filter-has-id":[It,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[It,[An(Rt)],(a,[n])=>n.value.indexOf(a.geometryType())>=0],"filter-id-in":[It,[An(pt)],(a,[n])=>n.value.indexOf(a.id())>=0],"filter-in-small":[It,[Rt,An(pt)],(a,[n,s])=>s.value.indexOf(a.properties()[n.value])>=0],"filter-in-large":[It,[Rt,An(pt)],(a,[n,s])=>function(d,m,_,v){for(;_<=v;){const S=_+v>>1;if(m[S]===d)return!0;m[S]>d?v=S-1:_=S+1}return!1}(a.properties()[n.value],s.value,0,s.value.length-1)],all:{type:It,overloads:[[[It,It],(a,[n,s])=>n.evaluate(a)&&s.evaluate(a)],[Ga(It),(a,n)=>{for(const s of n)if(!s.evaluate(a))return!1;return!0}]]},any:{type:It,overloads:[[[It,It],(a,[n,s])=>n.evaluate(a)||s.evaluate(a)],[Ga(It),(a,n)=>{for(const s of n)if(s.evaluate(a))return!0;return!1}]]},"!":[It,[It],(a,[n])=>!n.evaluate(a)],"is-supported-script":[It,[Rt],(a,[n])=>{const s=a.globals&&a.globals.isSupportedScript;return!s||s(n.evaluate(a))}],upcase:[Rt,[Rt],(a,[n])=>n.evaluate(a).toUpperCase()],downcase:[Rt,[Rt],(a,[n])=>n.evaluate(a).toLowerCase()],concat:[Rt,Ga(pt),(a,n)=>n.map(s=>vl(s.evaluate(a))).join("")],"resolved-locale":[Rt,[ki],(a,[n])=>n.evaluate(a).resolvedLocale()]});class qh{constructor(n,s){var d;this.expression=n,this._warningHistory={},this._evaluator=new so,this._defaultValue=s?(d=s).type==="color"&&Au(d.default)?new er(0,0,0,0):d.type==="color"?er.parse(d.default)||null:d.type==="padding"?ci.parse(d.default)||null:d.default===void 0?null:d.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,d,m,_,v){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=d,this._evaluator.canonical=m,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=v,this.expression.evaluate(this._evaluator)}evaluate(n,s,d,m,_,v){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=d||null,this._evaluator.canonical=m,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=v||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new Sn(`Expected value to be one of ${Object.keys(this._enumValues).map(k=>JSON.stringify(k)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console!="undefined"&&console.warn(S.message)),this._defaultValue}}}function zu(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in Ts}function Or(a,n){const s=new Ss(Ts,Eu,[],n?function(m){const _={color:Ur,string:Rt,number:We,enum:Rt,boolean:It,formatted:Zi,padding:wa,resolvedImage:ba};return m.type==="array"?An(_[m.value]||pt,m.length):_[m.type]}(n):void 0),d=s.parse(a,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?bp(new qh(d,n)):Cs(s.errors)}class Zh{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!wl(s.expression)}evaluateWithoutErrorHandling(n,s,d,m,_,v){return this._styleExpression.evaluateWithoutErrorHandling(n,s,d,m,_,v)}evaluate(n,s,d,m,_,v){return this._styleExpression.evaluate(n,s,d,m,_,v)}}class Wt{constructor(n,s,d,m){this.kind=n,this.zoomStops=d,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!wl(s.expression),this.interpolationType=m}evaluateWithoutErrorHandling(n,s,d,m,_,v){return this._styleExpression.evaluateWithoutErrorHandling(n,s,d,m,_,v)}evaluate(n,s,d,m,_,v){return this._styleExpression.evaluate(n,s,d,m,_,v)}interpolationFactor(n,s,d){return this.interpolationType?Ci.interpolationFactor(this.interpolationType,n,s,d):0}}function Du(a,n){const s=Or(a,n);if(s.result==="error")return s;const d=s.value.expression,m=ku(d);if(!m&&!Ps(n))return Cs([new Mt("","data expressions not supported")]);const _=bl(d,["zoom"]);if(!_&&!Sp(n))return Cs([new Mt("","zoom expressions not supported")]);const v=wr(d);return v||_?v instanceof Mt?Cs([v]):v instanceof Ci&&!Gh(n)?Cs([new Mt("",'"interpolate" expressions cannot be used with this property')]):bp(v?new Wt(m?"camera":"composite",s.value,v.labels,v instanceof Ci?v.interpolation:void 0):new Zh(m?"constant":"source",s.value)):Cs([new Mt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Sr{constructor(n,s){this._parameters=n,this._specification=s,Jt(this,Ep(this._parameters,this._specification))}static deserialize(n){return new Sr(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function wr(a){let n=null;if(a instanceof Cu)n=wr(a.result);else if(a instanceof Tu){for(const s of a.args)if(n=wr(s),n)break}else(a instanceof El||a instanceof Ci)&&a.input instanceof di&&a.input.name==="zoom"&&(n=a);return n instanceof Mt||a.eachChild(s=>{const d=wr(s);d instanceof Mt?n=d:!n&&d?n=new Mt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&d&&n!==d&&(n=new Mt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Is(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const n of a.slice(1))if(!Is(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Tp={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Hh(a){if(a==null)return{filter:()=>!0,needGeometry:!1};Is(a)||(a=Ru(a));const n=Or(a,Tp);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,d,m)=>n.value.evaluate(s,d,{},m),needGeometry:Cp(a)}}function Z0(a,n){return a<n?-1:a>n?1:0}function Cp(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let n=1;n<a.length;n++)if(Cp(a[n]))return!0;return!1}function Ru(a){if(!a)return!0;const n=a[0];return a.length<=1?n!=="any":n==="=="?Lu(a[1],a[2],"=="):n==="!="?Pl(Lu(a[1],a[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Lu(a[1],a[2],n):n==="any"?(s=a.slice(1),["any"].concat(s.map(Ru))):n==="all"?["all"].concat(a.slice(1).map(Ru)):n==="none"?["all"].concat(a.slice(1).map(Ru).map(Pl)):n==="in"?Xh(a[1],a.slice(2)):n==="!in"?Pl(Xh(a[1],a.slice(2))):n==="has"?Kh(a[1]):n==="!has"?Pl(Kh(a[1])):n!=="within"||a;var s}function Lu(a,n,s){switch(a){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,a,n]}}function Xh(a,n){if(n.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",a,["literal",n.sort(Z0)]]:["filter-in-small",a,["literal",n]]}}function Kh(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Pl(a){return["!",a]}function Il(a){const n=typeof a;if(n==="number"||n==="boolean"||n==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let m="[";for(const _ of a)m+=`${Il(_)},`;return`${m}]`}const s=Object.keys(a).sort();let d="{";for(let m=0;m<s.length;m++)d+=`${JSON.stringify(s[m])}:${Il(a[s[m]])},`;return`${d}}`}function H0(a){let n="";for(const s of $n)n+=`/${Il(a[s])}`;return n}function Pp(a){const n=a.value;return n?[new Le(a.key,n,"constants have been deprecated as of v8")]:[]}function en(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function Wa(a){if(Array.isArray(a))return a.map(Wa);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const n={};for(const s in a)n[s]=Wa(a[s]);return n}return en(a)}function Xi(a){const n=a.key,s=a.value,d=a.valueSpec||{},m=a.objectElementValidators||{},_=a.style,v=a.styleSpec,S=a.validateSpec;let k=[];const M=mr(s);if(M!=="object")return[new Le(n,s,`object expected, ${M} found`)];for(const D in s){const F=D.split(".")[0],V=d[F]||d["*"];let U;if(m[F])U=m[F];else if(d[F])U=S;else if(m["*"])U=m["*"];else{if(!d["*"]){k.push(new Le(n,s[D],`unknown property "${D}"`));continue}U=S}k=k.concat(U({key:(n&&`${n}.`)+D,value:s[D],valueSpec:V,style:_,styleSpec:v,object:s,objectKey:D,validateSpec:S},s))}for(const D in d)m[D]||d[D].required&&d[D].default===void 0&&s[D]===void 0&&k.push(new Le(n,s,`missing required property "${D}"`));return k}function Ip(a){const n=a.value,s=a.valueSpec,d=a.style,m=a.styleSpec,_=a.key,v=a.arrayElementValidator||a.validateSpec;if(mr(n)!=="array")return[new Le(_,n,`array expected, ${mr(n)} found`)];if(s.length&&n.length!==s.length)return[new Le(_,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new Le(_,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let S={type:s.value,values:s.values};m.$version<7&&(S.function=s.function),mr(s.value)==="object"&&(S=s.value);let k=[];for(let M=0;M<n.length;M++)k=k.concat(v({array:n,arrayIndex:M,value:n[M],valueSpec:S,validateSpec:a.validateSpec,style:d,styleSpec:m,key:`${_}[${M}]`}));return k}function Yh(a){const n=a.key,s=a.value,d=a.valueSpec;let m=mr(s);return m==="number"&&s!=s&&(m="NaN"),m!=="number"?[new Le(n,s,`number expected, ${m} found`)]:"minimum"in d&&s<d.minimum?[new Le(n,s,`${s} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&s>d.maximum?[new Le(n,s,`${s} is greater than the maximum value ${d.maximum}`)]:[]}function Mp(a){const n=a.valueSpec,s=en(a.value.type);let d,m,_,v={};const S=s!=="categorical"&&a.value.property===void 0,k=!S,M=mr(a.value.stops)==="array"&&mr(a.value.stops[0])==="array"&&mr(a.value.stops[0][0])==="object",D=Xi({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(U){if(s==="identity")return[new Le(U.key,U.value,'identity function may not have a "stops" property')];let q=[];const re=U.value;return q=q.concat(Ip({key:U.key,value:re,valueSpec:U.valueSpec,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:F})),mr(re)==="array"&&re.length===0&&q.push(new Le(U.key,re,"array must have at least one stop")),q},default:function(U){return U.validateSpec({key:U.key,value:U.value,valueSpec:n,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec})}}});return s==="identity"&&S&&D.push(new Le(a.key,a.value,'missing required property "property"')),s==="identity"||a.value.stops||D.push(new Le(a.key,a.value,'missing required property "stops"')),s==="exponential"&&a.valueSpec.expression&&!Gh(a.valueSpec)&&D.push(new Le(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(k&&!Ps(a.valueSpec)?D.push(new Le(a.key,a.value,"property functions not supported")):S&&!Sp(a.valueSpec)&&D.push(new Le(a.key,a.value,"zoom functions not supported"))),s!=="categorical"&&!M||a.value.property!==void 0||D.push(new Le(a.key,a.value,'"property" property is required')),D;function F(U){let q=[];const re=U.value,Q=U.key;if(mr(re)!=="array")return[new Le(Q,re,`array expected, ${mr(re)} found`)];if(re.length!==2)return[new Le(Q,re,`array length 2 expected, length ${re.length} found`)];if(M){if(mr(re[0])!=="object")return[new Le(Q,re,`object expected, ${mr(re[0])} found`)];if(re[0].zoom===void 0)return[new Le(Q,re,"object stop key must have zoom")];if(re[0].value===void 0)return[new Le(Q,re,"object stop key must have value")];if(_&&_>en(re[0].zoom))return[new Le(Q,re[0].zoom,"stop zoom values must appear in ascending order")];en(re[0].zoom)!==_&&(_=en(re[0].zoom),m=void 0,v={}),q=q.concat(Xi({key:`${Q}[0]`,value:re[0],valueSpec:{zoom:{}},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:Yh,value:V}}))}else q=q.concat(V({key:`${Q}[0]`,value:re[0],valueSpec:{},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec},re));return zu(Wa(re[1]))?q.concat([new Le(`${Q}[1]`,re[1],"expressions are not allowed in function stops.")]):q.concat(U.validateSpec({key:`${Q}[1]`,value:re[1],valueSpec:n,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec}))}function V(U,q){const re=mr(U.value),Q=en(U.value),fe=U.value!==null?U.value:q;if(d){if(re!==d)return[new Le(U.key,fe,`${re} stop domain type must match previous stop domain type ${d}`)]}else d=re;if(re!=="number"&&re!=="string"&&re!=="boolean")return[new Le(U.key,fe,"stop domain value must be a number, string, or boolean")];if(re!=="number"&&s!=="categorical"){let ve=`number expected, ${re} found`;return Ps(n)&&s===void 0&&(ve+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Le(U.key,fe,ve)]}return s!=="categorical"||re!=="number"||isFinite(Q)&&Math.floor(Q)===Q?s!=="categorical"&&re==="number"&&m!==void 0&&Q<m?[new Le(U.key,fe,"stop domain values must appear in ascending order")]:(m=Q,s==="categorical"&&Q in v?[new Le(U.key,fe,"stop domain values must be unique")]:(v[Q]=!0,[])):[new Le(U.key,fe,`integer expected, found ${Q}`)]}}function qa(a){const n=(a.expressionContext==="property"?Du:Or)(Wa(a.value),a.valueSpec);if(n.result==="error")return n.value.map(d=>new Le(`${a.key}${d.key}`,a.value,d.message));const s=n.value.expression||n.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!s.outputDefined())return[new Le(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!wl(s))return[new Le(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!wl(s))return[new Le(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!bl(s,["zoom","feature-state"]))return[new Le(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!ku(s))return[new Le(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ml(a){const n=a.key,s=a.value,d=a.valueSpec,m=[];return Array.isArray(d.values)?d.values.indexOf(en(s))===-1&&m.push(new Le(n,s,`expected one of [${d.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(d.values).indexOf(en(s))===-1&&m.push(new Le(n,s,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(s)} found`)),m}function Ms(a){return Is(Wa(a.value))?qa(Jt({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ap(a)}function Ap(a){const n=a.value,s=a.key;if(mr(n)!=="array")return[new Le(s,n,`array expected, ${mr(n)} found`)];const d=a.styleSpec;let m,_=[];if(n.length<1)return[new Le(s,n,"filter array must have at least 1 element")];switch(_=_.concat(Ml({key:`${s}[0]`,value:n[0],valueSpec:d.filter_operator,style:a.style,styleSpec:a.styleSpec})),en(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&en(n[1])==="$type"&&_.push(new Le(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&_.push(new Le(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(m=mr(n[1]),m!=="string"&&_.push(new Le(`${s}[1]`,n[1],`string expected, ${m} found`)));for(let v=2;v<n.length;v++)m=mr(n[v]),en(n[1])==="$type"?_=_.concat(Ml({key:`${s}[${v}]`,value:n[v],valueSpec:d.geometry_type,style:a.style,styleSpec:a.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&_.push(new Le(`${s}[${v}]`,n[v],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let v=1;v<n.length;v++)_=_.concat(Ap({key:`${s}[${v}]`,value:n[v],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":m=mr(n[1]),n.length!==2?_.push(new Le(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="string"&&_.push(new Le(`${s}[1]`,n[1],`string expected, ${m} found`));break;case"within":m=mr(n[1]),n.length!==2?_.push(new Le(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="object"&&_.push(new Le(`${s}[1]`,n[1],`object expected, ${m} found`))}return _}function Jh(a,n){const s=a.key,d=a.validateSpec,m=a.style,_=a.styleSpec,v=a.value,S=a.objectKey,k=_[`${n}_${a.layerType}`];if(!k)return[];const M=S.match(/^(.*)-transition$/);if(n==="paint"&&M&&k[M[1]]&&k[M[1]].transition)return d({key:s,value:v,valueSpec:_.transition,style:m,styleSpec:_});const D=a.valueSpec||k[S];if(!D)return[new Le(s,v,`unknown property "${S}"`)];let F;if(mr(v)==="string"&&Ps(D)&&!D.tokens&&(F=/^{([^}]+)}$/.exec(v)))return[new Le(s,v,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(F[1])} }\`.`)];const V=[];return a.layerType==="symbol"&&(S==="text-field"&&m&&!m.glyphs&&V.push(new Le(s,v,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&Au(Wa(v))&&en(v.type)==="identity"&&V.push(new Le(s,v,'"text-font" does not support identity functions'))),V.concat(d({key:a.key,value:v,valueSpec:D,style:m,styleSpec:_,expressionContext:"property",propertyType:n,propertyKey:S}))}function Qh(a){return Jh(a,"paint")}function zp(a){return Jh(a,"layout")}function Fu(a){let n=[];const s=a.value,d=a.key,m=a.style,_=a.styleSpec;s.type||s.ref||n.push(new Le(d,s,'either "type" or "ref" is required'));let v=en(s.type);const S=en(s.ref);if(s.id){const k=en(s.id);for(let M=0;M<a.arrayIndex;M++){const D=m.layers[M];en(D.id)===k&&n.push(new Le(d,s.id,`duplicate layer id "${s.id}", previously used at line ${D.id.__line__}`))}}if("ref"in s){let k;["type","source","source-layer","filter","layout"].forEach(M=>{M in s&&n.push(new Le(d,s[M],`"${M}" is prohibited for ref layers`))}),m.layers.forEach(M=>{en(M.id)===S&&(k=M)}),k?k.ref?n.push(new Le(d,s.ref,"ref cannot reference another ref layer")):v=en(k.type):n.push(new Le(d,s.ref,`ref layer "${S}" not found`))}else if(v!=="background")if(s.source){const k=m.sources&&m.sources[s.source],M=k&&en(k.type);k?M==="vector"&&v==="raster"?n.push(new Le(d,s.source,`layer "${s.id}" requires a raster source`)):M==="raster"&&v!=="raster"?n.push(new Le(d,s.source,`layer "${s.id}" requires a vector source`)):M!=="vector"||s["source-layer"]?M==="raster-dem"&&v!=="hillshade"?n.push(new Le(d,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):v!=="line"||!s.paint||!s.paint["line-gradient"]||M==="geojson"&&k.lineMetrics||n.push(new Le(d,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Le(d,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new Le(d,s.source,`source "${s.source}" not found`))}else n.push(new Le(d,s,'missing required property "source"'));return n=n.concat(Xi({key:d,value:s,valueSpec:_.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${d}.type`,value:s.type,valueSpec:_.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:s,objectKey:"type"}),filter:Ms,layout:k=>Xi({layer:s,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":M=>zp(Jt({layerType:v},M))}}),paint:k=>Xi({layer:s,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":M=>Qh(Jt({layerType:v},M))}})}})),n}function Ro(a){const n=a.value,s=a.key,d=mr(n);return d!=="string"?[new Le(s,n,`string expected, ${d} found`)]:[]}const Ou={promoteId:function({key:a,value:n}){if(mr(n)==="string")return Ro({key:a,value:n});{const s=[];for(const d in n)s.push(...Ro({key:`${a}.${d}`,value:n[d]}));return s}}};function $u(a){const n=a.value,s=a.key,d=a.styleSpec,m=a.style,_=a.validateSpec;if(!n.type)return[new Le(s,n,'"type" is required')];const v=en(n.type);let S;switch(v){case"vector":case"raster":case"raster-dem":return S=Xi({key:s,value:n,valueSpec:d[`source_${v.replace("-","_")}`],style:a.style,styleSpec:d,objectElementValidators:Ou,validateSpec:_}),S;case"geojson":if(S=Xi({key:s,value:n,valueSpec:d.source_geojson,style:m,styleSpec:d,validateSpec:_,objectElementValidators:Ou}),n.cluster)for(const k in n.clusterProperties){const[M,D]=n.clusterProperties[k],F=typeof M=="string"?[M,["accumulated"],["get",k]]:M;S.push(...qa({key:`${s}.${k}.map`,value:D,validateSpec:_,expressionContext:"cluster-map"})),S.push(...qa({key:`${s}.${k}.reduce`,value:F,validateSpec:_,expressionContext:"cluster-reduce"}))}return S;case"video":return Xi({key:s,value:n,valueSpec:d.source_video,style:m,validateSpec:_,styleSpec:d});case"image":return Xi({key:s,value:n,valueSpec:d.source_image,style:m,validateSpec:_,styleSpec:d});case"canvas":return[new Le(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ml({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:_,styleSpec:d})}}function Dp(a){const n=a.value,s=a.styleSpec,d=s.light,m=a.style;let _=[];const v=mr(n);if(n===void 0)return _;if(v!=="object")return _=_.concat([new Le("light",n,`object expected, ${v} found`)]),_;for(const S in n){const k=S.match(/^(.*)-transition$/);_=_.concat(k&&d[k[1]]&&d[k[1]].transition?a.validateSpec({key:S,value:n[S],valueSpec:s.transition,validateSpec:a.validateSpec,style:m,styleSpec:s}):d[S]?a.validateSpec({key:S,value:n[S],valueSpec:d[S],validateSpec:a.validateSpec,style:m,styleSpec:s}):[new Le(S,n[S],`unknown property "${S}"`)])}return _}function Al(a){const n=a.value,s=a.styleSpec,d=s.terrain,m=a.style;let _=[];const v=mr(n);if(n===void 0)return _;if(v!=="object")return _=_.concat([new Le("terrain",n,`object expected, ${v} found`)]),_;for(const S in n)_=_.concat(d[S]?a.validateSpec({key:S,value:n[S],valueSpec:d[S],validateSpec:a.validateSpec,style:m,styleSpec:s}):[new Le(S,n[S],`unknown property "${S}"`)]);return _}function Rp(a){let n=[];const s=a.value,d=a.key;if(Array.isArray(s)){const m=[],_=[];for(const v in s)s[v].id&&m.includes(s[v].id)&&n.push(new Le(d,s,`all the sprites' ids must be unique, but ${s[v].id} is duplicated`)),m.push(s[v].id),s[v].url&&_.includes(s[v].url)&&n.push(new Le(d,s,`all the sprites' URLs must be unique, but ${s[v].url} is duplicated`)),_.push(s[v].url),n=n.concat(Xi({key:`${d}[${v}]`,value:s[v],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return n}return Ro({key:d,value:s})}const Lp={"*":()=>[],array:Ip,boolean:function(a){const n=a.value,s=a.key,d=mr(n);return d!=="boolean"?[new Le(s,n,`boolean expected, ${d} found`)]:[]},number:Yh,color:function(a){const n=a.key,s=a.value,d=mr(s);return d!=="string"?[new Le(n,s,`color expected, ${d} found`)]:er.parse(String(s))?[]:[new Le(n,s,`color expected, "${s}" found`)]},constants:Pp,enum:Ml,filter:Ms,function:Mp,layer:Fu,object:Xi,source:$u,light:Dp,terrain:Al,string:Ro,formatted:function(a){return Ro(a).length===0?[]:qa(a)},resolvedImage:function(a){return Ro(a).length===0?[]:qa(a)},padding:function(a){const n=a.key,s=a.value;if(mr(s)==="array"){if(s.length<1||s.length>4)return[new Le(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const d={type:"number"};let m=[];for(let _=0;_<s.length;_++)m=m.concat(a.validateSpec({key:`${n}[${_}]`,value:s[_],validateSpec:a.validateSpec,valueSpec:d}));return m}return Yh({key:n,value:s,valueSpec:{}})},sprite:Rp};function zl(a){const n=a.value,s=a.valueSpec,d=a.styleSpec;return a.validateSpec=zl,s.expression&&Au(en(n))?Mp(a):s.expression&&zu(Wa(n))?qa(a):s.type&&Lp[s.type]?Lp[s.type](a):Xi(Jt({},a,{valueSpec:s.type?d[s.type]:s}))}function Fp(a){const n=a.value,s=a.key,d=Ro(a);return d.length||(n.indexOf("{fontstack}")===-1&&d.push(new Le(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&d.push(new Le(s,n,'"glyphs" url must include a "{range}" token'))),d}function Lo(a,n=Ce){let s=[];return s=s.concat(zl({key:"",value:a,valueSpec:n.$root,styleSpec:n,style:a,validateSpec:zl,objectElementValidators:{glyphs:Fp,"*":()=>[]}})),a.constants&&(s=s.concat(Pp({key:"constants",value:a.constants,style:a,styleSpec:n,validateSpec:zl}))),Dl(s)}function Ki(a){return function(n){return a({...n,validateSpec:zl})}}function Dl(a){return[].concat(a).sort((n,s)=>n.line-s.line)}function cn(a){return function(...n){return Dl(a.apply(this,n))}}Lo.source=cn(Ki($u)),Lo.sprite=cn(Ki(Rp)),Lo.glyphs=cn(Ki(Fp)),Lo.light=cn(Ki(Dp)),Lo.terrain=cn(Ki(Al)),Lo.layer=cn(Ki(Fu)),Lo.filter=cn(Ki(Ms)),Lo.paintProperty=cn(Ki(Qh)),Lo.layoutProperty=cn(Ki(zp));const Ea=Lo,X0=Ea.light,K0=Ea.paintProperty,Y0=Ea.layoutProperty;function As(a,n){let s=!1;if(n&&n.length)for(const d of n)a.fire(new ar(new Error(d.message))),s=!0;return s}class Rl{constructor(n,s,d){const m=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const v=new Int32Array(this.arrayBuffer);n=v[0],this.d=(s=v[1])+2*(d=v[2]);for(let k=0;k<this.d*this.d;k++){const M=v[3+k],D=v[3+k+1];m.push(M===D?null:v.subarray(M,D))}const S=v[3+m.length+1];this.keys=v.subarray(v[3+m.length],S),this.bboxes=v.subarray(S),this.insert=this._insertReadonly}else{this.d=s+2*d;for(let v=0;v<this.d*this.d;v++)m.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=d,this.scale=s/n,this.uid=0;const _=d/s*n;this.min=-_,this.max=n+_}insert(n,s,d,m,_){this._forEachCell(s,d,m,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,d,m,_,v){this.cells[_].push(v)}query(n,s,d,m,_){const v=this.min,S=this.max;if(n<=v&&s<=v&&S<=d&&S<=m&&!_)return Array.prototype.slice.call(this.keys);{const k=[];return this._forEachCell(n,s,d,m,this._queryCell,k,{},_),k}}_queryCell(n,s,d,m,_,v,S,k){const M=this.cells[_];if(M!==null){const D=this.keys,F=this.bboxes;for(let V=0;V<M.length;V++){const U=M[V];if(S[U]===void 0){const q=4*U;(k?k(F[q+0],F[q+1],F[q+2],F[q+3]):n<=F[q+2]&&s<=F[q+3]&&d>=F[q+0]&&m>=F[q+1])?(S[U]=!0,v.push(D[U])):S[U]=!1}}}}_forEachCell(n,s,d,m,_,v,S,k){const M=this._convertToCellCoord(n),D=this._convertToCellCoord(s),F=this._convertToCellCoord(d),V=this._convertToCellCoord(m);for(let U=M;U<=F;U++)for(let q=D;q<=V;q++){const re=this.d*q+U;if((!k||k(this._convertFromCellCoord(U),this._convertFromCellCoord(q),this._convertFromCellCoord(U+1),this._convertFromCellCoord(q+1)))&&_.call(this,n,s,d,m,re,v,S,k))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let d=0;for(let v=0;v<this.cells.length;v++)d+=this.cells[v].length;const m=new Int32Array(s+d+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let _=s;for(let v=0;v<n.length;v++){const S=n[v];m[3+v]=_,m.set(S,_),_+=S.length}return m[3+n.length]=_,m.set(this.keys,_),_+=this.keys.length,m[3+n.length+1]=_,m.set(this.bboxes,_),_+=this.bboxes.length,m.buffer}static serialize(n,s){const d=n.toArrayBuffer();return s&&s.push(d),{buffer:d}}static deserialize(n){return new Rl(n.buffer)}}const Fo={};function at(a,n,s={}){if(Fo[a])throw new Error(`${a} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:a,writeable:!1}),Fo[a]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}at("Object",Object),at("TransferableGridIndex",Rl),at("Color",er),at("Error",Error),at("AJAXError",it),at("ResolvedImage",Vn),at("StylePropertyFunction",Sr),at("StyleExpression",qh,{omit:["_evaluator"]}),at("ZoomDependentExpression",Wt),at("ZoomConstantExpression",Zh),at("CompoundExpression",di,{omit:["_evaluate"]});for(const a in Ts)Ts[a]._classRegistryKey||at(`Expression_${a}`,Ts[a]);function Bu(a){return a&&typeof ArrayBuffer!="undefined"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function Ll(a,n){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob)return a;if(Bu(a)||Xt(a))return n&&n.push(a),a;if(ArrayBuffer.isView(a)){const s=a;return n&&n.push(s.buffer),s}if(a instanceof ImageData)return n&&n.push(a.data.buffer),a;if(Array.isArray(a)){const s=[];for(const d of a)s.push(Ll(d,n));return s}if(typeof a=="object"){const s=a.constructor,d=s._classRegistryKey;if(!d)throw new Error("can't serialize object of unregistered class");if(!Fo[d])throw new Error(`${d} is not registered.`);const m=s.serialize?s.serialize(a,n):{};if(s.serialize){if(n&&m===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in a){if(!a.hasOwnProperty(_)||Fo[d].omit.indexOf(_)>=0)continue;const v=a[_];m[_]=Fo[d].shallow.indexOf(_)>=0?v:Ll(v,n)}a instanceof Error&&(m.message=a.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(m.$name=d),m}throw new Error("can't serialize object of type "+typeof a)}function ta(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||Bu(a)||Xt(a)||ArrayBuffer.isView(a)||a instanceof ImageData)return a;if(Array.isArray(a))return a.map(ta);if(typeof a=="object"){const n=a.$name||"Object";if(!Fo[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=Fo[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(a);const d=Object.create(s.prototype);for(const m of Object.keys(a)){if(m==="$name")continue;const _=a[m];d[m]=Fo[n].shallow.indexOf(m)>=0?_:ta(_)}return d}throw new Error("can't deserialize object of type "+typeof a)}class Op{constructor(){this.first=!0}update(n,s){const d=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=d,!0))}}const Ye={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function Vu(a){for(const n of a)if(Nu(n.charCodeAt(0)))return!0;return!1}function ed(a){for(const n of a)if(!$p(n.charCodeAt(0)))return!1;return!0}function $p(a){return!(Ye.Arabic(a)||Ye["Arabic Supplement"](a)||Ye["Arabic Extended-A"](a)||Ye["Arabic Presentation Forms-A"](a)||Ye["Arabic Presentation Forms-B"](a))}function Nu(a){return!(a!==746&&a!==747&&(a<4352||!(Ye["Bopomofo Extended"](a)||Ye.Bopomofo(a)||Ye["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||Ye["CJK Compatibility Ideographs"](a)||Ye["CJK Compatibility"](a)||Ye["CJK Radicals Supplement"](a)||Ye["CJK Strokes"](a)||!(!Ye["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||Ye["CJK Unified Ideographs Extension A"](a)||Ye["CJK Unified Ideographs"](a)||Ye["Enclosed CJK Letters and Months"](a)||Ye["Hangul Compatibility Jamo"](a)||Ye["Hangul Jamo Extended-A"](a)||Ye["Hangul Jamo Extended-B"](a)||Ye["Hangul Jamo"](a)||Ye["Hangul Syllables"](a)||Ye.Hiragana(a)||Ye["Ideographic Description Characters"](a)||Ye.Kanbun(a)||Ye["Kangxi Radicals"](a)||Ye["Katakana Phonetic Extensions"](a)||Ye.Katakana(a)&&a!==12540||!(!Ye["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!Ye["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||Ye["Unified Canadian Aboriginal Syllabics"](a)||Ye["Unified Canadian Aboriginal Syllabics Extended"](a)||Ye["Vertical Forms"](a)||Ye["Yijing Hexagram Symbols"](a)||Ye["Yi Syllables"](a)||Ye["Yi Radicals"](a))))}function Bp(a){return!(Nu(a)||function(n){return!!(Ye["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Ye["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Ye["Letterlike Symbols"](n)||Ye["Number Forms"](n)||Ye["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Ye["Control Pictures"](n)&&n!==9251||Ye["Optical Character Recognition"](n)||Ye["Enclosed Alphanumerics"](n)||Ye["Geometric Shapes"](n)||Ye["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Ye["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Ye["CJK Symbols and Punctuation"](n)||Ye.Katakana(n)||Ye["Private Use Area"](n)||Ye["CJK Compatibility Forms"](n)||Ye["Small Form Variants"](n)||Ye["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(a))}function Uu(a){return a>=1424&&a<=2303||Ye["Arabic Presentation Forms-A"](a)||Ye["Arabic Presentation Forms-B"](a)}function ju(a,n){return!(!n&&Uu(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||Ye.Khmer(a))}function Vp(a){for(const n of a)if(Uu(n.charCodeAt(0)))return!0;return!1}const td="deferred",Gu="loading",rd="loaded";let Fl=null,pi="unavailable",ka=null;const Np=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(pi="error"),Fl&&Fl(a)};function nd(){Wu.fire(new Gt("pluginStateChange",{pluginStatus:pi,pluginURL:ka}))}const Wu=new mn,id=function(){return pi},Up=function(){if(pi!==td||!ka)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");pi=Gu,nd(),ka&&Pr({url:ka},a=>{a?Np(a):(pi=rd,nd())})},Yi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>pi===rd||Yi.applyArabicShaping!=null,isLoading:()=>pi===Gu,setState(a){if(!vt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");pi=a.pluginStatus,ka=a.pluginURL},isParsed(){if(!vt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Yi.applyArabicShaping!=null&&Yi.processBidirectionalText!=null&&Yi.processStyledBidirectionalText!=null},getPluginURL(){if(!vt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return ka}};class Mr{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Op,this.transition={})}isSupportedScript(n){return function(s,d){for(const m of s)if(!ju(m.charCodeAt(0),d))return!1;return!0}(n,Yi.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),d=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*s}}}class qu{constructor(n,s){this.property=n,this.value=s,this.expression=function(d,m){if(Au(d))return new Sr(d,m);if(zu(d)){const _=Du(d,m);if(_.result==="error")throw new Error(_.value.map(v=>`${v.key}: ${v.message}`).join(", "));return _.value}{let _=d;return m.type==="color"&&typeof d=="string"?_=er.parse(d):m.type!=="padding"||typeof d!="number"&&!Array.isArray(d)||(_=ci.parse(d)),{kind:"constant",evaluate:()=>_}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,d){return this.property.possiblyEvaluate(this,n,s,d)}}class od{constructor(n){this.property=n,this.value=new qu(n,void 0)}transitioned(n,s){return new Ol(this.property,this.value,s,X({},n.transition,this.transition),n.now)}untransitioned(){return new Ol(this.property,this.value,null,{},0)}}class jp{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return xe(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new od(this._values[n].property)),this._values[n].value=new qu(this._values[n].property,s===null?void 0:xe(s))}getTransition(n){return xe(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new od(this._values[n].property)),this._values[n].transition=xe(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const d=this.getValue(s);d!==void 0&&(n[s]=d);const m=this.getTransition(s);m!==void 0&&(n[`${s}-transition`]=m)}return n}transitioned(n,s){const d=new Gp(this._properties);for(const m of Object.keys(this._values))d._values[m]=this._values[m].transitioned(n,s._values[m]);return d}untransitioned(){const n=new Gp(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class Ol{constructor(n,s,d,m,_){this.property=n,this.value=s,this.begin=_+m.delay||0,this.end=this.begin+m.duration||0,n.specification.transition&&(m.delay||m.duration)&&(this.prior=d)}possiblyEvaluate(n,s,d){const m=n.now||0,_=this.value.possiblyEvaluate(n,s,d),v=this.prior;if(v){if(m>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(m<this.begin)return v.possiblyEvaluate(n,s,d);{const S=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(n,s,d),_,function(k){if(k<=0)return 0;if(k>=1)return 1;const M=k*k,D=M*k;return 4*(k<.5?D:3*(k-M)+D-.75)}(S))}}return _}}class Gp{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,d){const m=new Zu(this._properties);for(const _ of Object.keys(this._values))m._values[_]=this._values[_].possiblyEvaluate(n,s,d);return m}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class ad{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return xe(this._values[n].value)}setValue(n,s){this._values[n]=new qu(this._values[n].property,s===null?void 0:xe(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const d=this.getValue(s);d!==void 0&&(n[s]=d)}return n}possiblyEvaluate(n,s,d){const m=new Zu(this._properties);for(const _ of Object.keys(this._values))m._values[_]=this._values[_].possiblyEvaluate(n,s,d);return m}}class Oo{constructor(n,s,d){this.property=n,this.value=s,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,d,m){return this.property.evaluate(this.value,this.parameters,n,s,d,m)}}class Zu{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class dt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,d){const m=fi[this.specification.type];return m?m(n,s,d):n}}class Tt{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,d,m){return new Oo(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},d,m)}:n.expression,s)}interpolate(n,s,d){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new Oo(this,{kind:"constant",value:void 0},n.parameters);const m=fi[this.specification.type];if(m){const _=m(n.value.value,s.value.value,d);return new Oo(this,{kind:"constant",value:_},n.parameters)}return n}evaluate(n,s,d,m,_,v){return n.kind==="constant"?n.value:n.evaluate(s,d,m,_,v)}}class $l extends Tt{possiblyEvaluate(n,s,d,m){if(n.value===void 0)return new Oo(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const _=n.expression.evaluate(s,null,{},d,m),v=n.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,S=this._calculate(v,v,v,s);return new Oo(this,{kind:"constant",value:S},s)}if(n.expression.kind==="camera"){const _=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new Oo(this,{kind:"constant",value:_},s)}return new Oo(this,n.expression,s)}evaluate(n,s,d,m,_,v){if(n.kind==="source"){const S=n.evaluate(s,d,m,_,v);return this._calculate(S,S,S,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},d,m),n.evaluate({zoom:Math.floor(s.zoom)},d,m),n.evaluate({zoom:Math.floor(s.zoom)+1},d,m),s):n.value}_calculate(n,s,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:d,to:s}}interpolate(n){return n}}class sd{constructor(n){this.specification=n}possiblyEvaluate(n,s,d,m){if(n.value!==void 0){if(n.expression.kind==="constant"){const _=n.expression.evaluate(s,null,{},d,m);return this._calculate(_,_,_,s)}return this._calculate(n.expression.evaluate(new Mr(Math.floor(s.zoom-1),s)),n.expression.evaluate(new Mr(Math.floor(s.zoom),s)),n.expression.evaluate(new Mr(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:d,to:s}}interpolate(n){return n}}class ld{constructor(n){this.specification=n}possiblyEvaluate(n,s,d,m){return!!n.expression.evaluate(s,null,{},d,m)}interpolate(){return!1}}class mi{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const d=n[s];d.specification.overridable&&this.overridableProperties.push(s);const m=this.defaultPropertyValues[s]=new qu(d,void 0),_=this.defaultTransitionablePropertyValues[s]=new od(d);this.defaultTransitioningPropertyValues[s]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=m.possiblyEvaluate({})}}}at("DataDrivenProperty",Tt),at("DataConstantProperty",dt),at("CrossFadedDataDrivenProperty",$l),at("CrossFadedProperty",sd),at("ColorRampProperty",ld);const Hu="-transition";class $o extends mn{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new ad(s.layout)),s.paint)){this._transitionablePaint=new jp(s.paint);for(const d in n.paint)this.setPaintProperty(d,n.paint[d],{validate:!1});for(const d in n.layout)this.setLayoutProperty(d,n.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Zu(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,d={}){s!=null&&this._validate(Y0,`layers.${this.id}.layout.${n}`,n,s,d)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(Hu)?this._transitionablePaint.getTransition(n.slice(0,-Hu.length)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,d={}){if(s!=null&&this._validate(K0,`layers.${this.id}.paint.${n}`,n,s,d))return!1;if(n.endsWith(Hu))return this._transitionablePaint.setTransition(n.slice(0,-Hu.length),s||void 0),!1;{const m=this._transitionablePaint._values[n],_=m.property.specification["property-type"]==="cross-faded-data-driven",v=m.value.isDataDriven(),S=m.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const k=this._transitionablePaint._values[n].value;return k.isDataDriven()||v||_||this._handleOverridablePaintPropertyUpdate(n,S,k)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,d){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),ge(n,(s,d)=>!(s===void 0||d==="layout"&&!Object.keys(s).length||d==="paint"&&!Object.keys(s).length))}_validate(n,s,d,m,_={}){return(!_||_.validate!==!1)&&As(this,n.call(Ea,{key:s,layerType:this.type,objectKey:d,value:m,styleSpec:Ce,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof Oo&&Ps(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const J0={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ra{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Zr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function hn(a,n=1){let s=0,d=0;return{members:a.map(m=>{const _=J0[m.type].BYTES_PER_ELEMENT,v=s=Wp(s,Math.max(n,_)),S=m.components||1;return d=Math.max(d,_),s+=_*S,{name:m.name,type:m.type,components:S,offset:v}}),size:Wp(s,Math.max(d,n)),alignment:n}}function Wp(a,n){return Math.ceil(a/n)*n}class zs extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const d=this.length;return this.resize(d+1),this.emplace(d,n,s)}emplace(n,s,d){const m=2*n;return this.int16[m+0]=s,this.int16[m+1]=d,n}}zs.prototype.bytesPerElement=4,at("StructArrayLayout2i4",zs);class Xu extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,d)}emplace(n,s,d,m){const _=3*n;return this.int16[_+0]=s,this.int16[_+1]=d,this.int16[_+2]=m,n}}Xu.prototype.bytesPerElement=6,at("StructArrayLayout3i6",Xu);class ud extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d,m){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,d,m)}emplace(n,s,d,m,_){const v=4*n;return this.int16[v+0]=s,this.int16[v+1]=d,this.int16[v+2]=m,this.int16[v+3]=_,n}}ud.prototype.bytesPerElement=8,at("StructArrayLayout4i8",ud);class Bo extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d,m,_,v){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,d,m,_,v)}emplace(n,s,d,m,_,v,S){const k=6*n;return this.int16[k+0]=s,this.int16[k+1]=d,this.int16[k+2]=m,this.int16[k+3]=_,this.int16[k+4]=v,this.int16[k+5]=S,n}}Bo.prototype.bytesPerElement=12,at("StructArrayLayout2i4i12",Bo);class Ku extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d,m,_,v){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,d,m,_,v)}emplace(n,s,d,m,_,v,S){const k=4*n,M=8*n;return this.int16[k+0]=s,this.int16[k+1]=d,this.uint8[M+4]=m,this.uint8[M+5]=_,this.uint8[M+6]=v,this.uint8[M+7]=S,n}}Ku.prototype.bytesPerElement=8,at("StructArrayLayout2i4ub8",Ku);class Za extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const d=this.length;return this.resize(d+1),this.emplace(d,n,s)}emplace(n,s,d){const m=2*n;return this.float32[m+0]=s,this.float32[m+1]=d,n}}Za.prototype.bytesPerElement=8,at("StructArrayLayout2f8",Za);class Yu extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,d,m,_,v,S,k,M,D){const F=this.length;return this.resize(F+1),this.emplace(F,n,s,d,m,_,v,S,k,M,D)}emplace(n,s,d,m,_,v,S,k,M,D,F){const V=10*n;return this.uint16[V+0]=s,this.uint16[V+1]=d,this.uint16[V+2]=m,this.uint16[V+3]=_,this.uint16[V+4]=v,this.uint16[V+5]=S,this.uint16[V+6]=k,this.uint16[V+7]=M,this.uint16[V+8]=D,this.uint16[V+9]=F,n}}Yu.prototype.bytesPerElement=20,at("StructArrayLayout10ui20",Yu);class Bl extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,d,m,_,v,S,k,M,D,F,V){const U=this.length;return this.resize(U+1),this.emplace(U,n,s,d,m,_,v,S,k,M,D,F,V)}emplace(n,s,d,m,_,v,S,k,M,D,F,V,U){const q=12*n;return this.int16[q+0]=s,this.int16[q+1]=d,this.int16[q+2]=m,this.int16[q+3]=_,this.uint16[q+4]=v,this.uint16[q+5]=S,this.uint16[q+6]=k,this.uint16[q+7]=M,this.int16[q+8]=D,this.int16[q+9]=F,this.int16[q+10]=V,this.int16[q+11]=U,n}}Bl.prototype.bytesPerElement=24,at("StructArrayLayout4i4ui4i24",Bl);class cd extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,d)}emplace(n,s,d,m){const _=3*n;return this.float32[_+0]=s,this.float32[_+1]=d,this.float32[_+2]=m,n}}cd.prototype.bytesPerElement=12,at("StructArrayLayout3f12",cd);class Ds extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}Ds.prototype.bytesPerElement=4,at("StructArrayLayout1ul4",Ds);class Ha extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,d,m,_,v,S,k,M){const D=this.length;return this.resize(D+1),this.emplace(D,n,s,d,m,_,v,S,k,M)}emplace(n,s,d,m,_,v,S,k,M,D){const F=10*n,V=5*n;return this.int16[F+0]=s,this.int16[F+1]=d,this.int16[F+2]=m,this.int16[F+3]=_,this.int16[F+4]=v,this.int16[F+5]=S,this.uint32[V+3]=k,this.uint16[F+8]=M,this.uint16[F+9]=D,n}}Ha.prototype.bytesPerElement=20,at("StructArrayLayout6i1ul2ui20",Ha);class hd extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d,m,_,v){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,d,m,_,v)}emplace(n,s,d,m,_,v,S){const k=6*n;return this.int16[k+0]=s,this.int16[k+1]=d,this.int16[k+2]=m,this.int16[k+3]=_,this.int16[k+4]=v,this.int16[k+5]=S,n}}hd.prototype.bytesPerElement=12,at("StructArrayLayout2i2i2i12",hd);class Ju extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d,m,_){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,d,m,_)}emplace(n,s,d,m,_,v){const S=4*n,k=8*n;return this.float32[S+0]=s,this.float32[S+1]=d,this.float32[S+2]=m,this.int16[k+6]=_,this.int16[k+7]=v,n}}Ju.prototype.bytesPerElement=16,at("StructArrayLayout2f1f2i16",Ju);class Xa extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,d,m){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,d,m)}emplace(n,s,d,m,_){const v=12*n,S=3*n;return this.uint8[v+0]=s,this.uint8[v+1]=d,this.float32[S+1]=m,this.float32[S+2]=_,n}}Xa.prototype.bytesPerElement=12,at("StructArrayLayout2ub2f12",Xa);class Qu extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,d)}emplace(n,s,d,m){const _=3*n;return this.uint16[_+0]=s,this.uint16[_+1]=d,this.uint16[_+2]=m,n}}Qu.prototype.bytesPerElement=6,at("StructArrayLayout3ui6",Qu);class dd extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,d,m,_,v,S,k,M,D,F,V,U,q,re,Q,fe){const ve=this.length;return this.resize(ve+1),this.emplace(ve,n,s,d,m,_,v,S,k,M,D,F,V,U,q,re,Q,fe)}emplace(n,s,d,m,_,v,S,k,M,D,F,V,U,q,re,Q,fe,ve){const he=24*n,we=12*n,Ee=48*n;return this.int16[he+0]=s,this.int16[he+1]=d,this.uint16[he+2]=m,this.uint16[he+3]=_,this.uint32[we+2]=v,this.uint32[we+3]=S,this.uint32[we+4]=k,this.uint16[he+10]=M,this.uint16[he+11]=D,this.uint16[he+12]=F,this.float32[we+7]=V,this.float32[we+8]=U,this.uint8[Ee+36]=q,this.uint8[Ee+37]=re,this.uint8[Ee+38]=Q,this.uint32[we+10]=fe,this.int16[he+22]=ve,n}}dd.prototype.bytesPerElement=48,at("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",dd);class ec extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,d,m,_,v,S,k,M,D,F,V,U,q,re,Q,fe,ve,he,we,Ee,Me,ot,lt,Je,Xe,qe,et){const Ke=this.length;return this.resize(Ke+1),this.emplace(Ke,n,s,d,m,_,v,S,k,M,D,F,V,U,q,re,Q,fe,ve,he,we,Ee,Me,ot,lt,Je,Xe,qe,et)}emplace(n,s,d,m,_,v,S,k,M,D,F,V,U,q,re,Q,fe,ve,he,we,Ee,Me,ot,lt,Je,Xe,qe,et,Ke){const Ve=34*n,bt=17*n;return this.int16[Ve+0]=s,this.int16[Ve+1]=d,this.int16[Ve+2]=m,this.int16[Ve+3]=_,this.int16[Ve+4]=v,this.int16[Ve+5]=S,this.int16[Ve+6]=k,this.int16[Ve+7]=M,this.uint16[Ve+8]=D,this.uint16[Ve+9]=F,this.uint16[Ve+10]=V,this.uint16[Ve+11]=U,this.uint16[Ve+12]=q,this.uint16[Ve+13]=re,this.uint16[Ve+14]=Q,this.uint16[Ve+15]=fe,this.uint16[Ve+16]=ve,this.uint16[Ve+17]=he,this.uint16[Ve+18]=we,this.uint16[Ve+19]=Ee,this.uint16[Ve+20]=Me,this.uint16[Ve+21]=ot,this.uint16[Ve+22]=lt,this.uint32[bt+12]=Je,this.float32[bt+13]=Xe,this.float32[bt+14]=qe,this.float32[bt+15]=et,this.float32[bt+16]=Ke,n}}ec.prototype.bytesPerElement=68,at("StructArrayLayout8i15ui1ul4f68",ec);class tc extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}tc.prototype.bytesPerElement=4,at("StructArrayLayout1f4",tc);class rc extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,d)}emplace(n,s,d,m){const _=4*n;return this.uint32[2*n+0]=s,this.uint16[_+2]=d,this.uint16[_+3]=m,n}}rc.prototype.bytesPerElement=8,at("StructArrayLayout1ul2ui8",rc);class p extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const d=this.length;return this.resize(d+1),this.emplace(d,n,s)}emplace(n,s,d){const m=2*n;return this.uint16[m+0]=s,this.uint16[m+1]=d,n}}p.prototype.bytesPerElement=4,at("StructArrayLayout2ui4",p);class i extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}i.prototype.bytesPerElement=2,at("StructArrayLayout1ui2",i);class c extends Zr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,d,m){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,d,m)}emplace(n,s,d,m,_){const v=4*n;return this.float32[v+0]=s,this.float32[v+1]=d,this.float32[v+2]=m,this.float32[v+3]=_,n}}c.prototype.bytesPerElement=16,at("StructArrayLayout4f16",c);class f extends ra{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new I(this.anchorPointX,this.anchorPointY)}}f.prototype.size=20;class y extends Ha{get(n){return new f(this,n)}}at("CollisionBoxArray",y);class x extends ra{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}x.prototype.size=48;class E extends dd{get(n){return new x(this,n)}}at("PlacedSymbolArray",E);class P extends ra{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}P.prototype.size=68;class C extends ec{get(n){return new P(this,n)}}at("SymbolInstanceArray",C);class A extends tc{getoffsetX(n){return this.float32[1*n+0]}}at("GlyphOffsetArray",A);class L extends Xu{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}at("SymbolLineVertexArray",L);class R extends ra{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}R.prototype.size=8;class G extends rc{get(n){return new R(this,n)}}at("FeatureIndexArray",G);class te extends zs{}class Y extends zs{}class ee extends zs{}class oe extends Bo{}class de extends Ku{}class Se extends Za{}class ne extends Yu{}class be extends Bl{}class Te extends cd{}class De extends Ds{}class $e extends hd{}class Ue extends Xa{}class Fe extends Qu{}class tt extends p{}const wt=hn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ft}=wt;class He{constructor(n=[]){this.segments=n}prepareSegment(n,s,d,m){let _=this.segments[this.segments.length-1];return n>He.MAX_VERTEX_ARRAY_LENGTH&&ke(`Max vertices per segment is ${He.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!_||_.vertexLength+n>He.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==m)&&(_={vertexOffset:s.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},m!==void 0&&(_.sortKey=m),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,d,m){return new He([{vertexOffset:n,primitiveOffset:s,vertexLength:d,primitiveLength:m,vaos:{},sortKey:0}])}}function Ct(a,n){return 256*(a=$(Math.floor(a),0,255))+$(Math.floor(n),0,255)}He.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,at("SegmentVector",He);const nt=hn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var rr={exports:{}},tn={exports:{}};tn.exports=function(a,n){var s,d,m,_,v,S,k,M;for(d=a.length-(s=3&a.length),m=n,v=3432918353,S=461845907,M=0;M<d;)k=255&a.charCodeAt(M)|(255&a.charCodeAt(++M))<<8|(255&a.charCodeAt(++M))<<16|(255&a.charCodeAt(++M))<<24,++M,m=27492+(65535&(_=5*(65535&(m=(m^=k=(65535&(k=(k=(65535&k)*v+(((k>>>16)*v&65535)<<16)&4294967295)<<15|k>>>17))*S+(((k>>>16)*S&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(k=0,s){case 3:k^=(255&a.charCodeAt(M+2))<<16;case 2:k^=(255&a.charCodeAt(M+1))<<8;case 1:m^=k=(65535&(k=(k=(65535&(k^=255&a.charCodeAt(M)))*v+(((k>>>16)*v&65535)<<16)&4294967295)<<15|k>>>17))*S+(((k>>>16)*S&65535)<<16)&4294967295}return m^=a.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var nr=tn.exports,Bt={exports:{}};Bt.exports=function(a,n){for(var s,d=a.length,m=n^d,_=0;d>=4;)s=1540483477*(65535&(s=255&a.charCodeAt(_)|(255&a.charCodeAt(++_))<<8|(255&a.charCodeAt(++_))<<16|(255&a.charCodeAt(++_))<<24))+((1540483477*(s>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),d-=4,++_;switch(d){case 3:m^=(255&a.charCodeAt(_+2))<<16;case 2:m^=(255&a.charCodeAt(_+1))<<8;case 1:m=1540483477*(65535&(m^=255&a.charCodeAt(_)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var Hr=nr,Yn=Bt.exports;rr.exports=Hr,rr.exports.murmur3=Hr,rr.exports.murmur2=Yn;var rn=b(rr.exports);class En{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,d,m){this.ids.push(Pi(n)),this.positions.push(s,d,m)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Pi(n);let d=0,m=this.ids.length-1;for(;d<m;){const v=d+m>>1;this.ids[v]>=s?m=v:d=v+1}const _=[];for(;this.ids[d]===s;)_.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return _}static serialize(n,s){const d=new Float64Array(n.ids),m=new Uint32Array(n.positions);return lo(d,m,0,d.length-1),s&&s.push(d.buffer,m.buffer),{ids:d,positions:m}}static deserialize(n){const s=new En;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Pi(a){const n=+a;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:rn(String(a))}function lo(a,n,s,d){for(;s<d;){const m=a[s+d>>1];let _=s-1,v=d+1;for(;;){do _++;while(a[_]<m);do v--;while(a[v]>m);if(_>=v)break;uo(a,_,v),uo(n,3*_,3*v),uo(n,3*_+1,3*v+1),uo(n,3*_+2,3*v+2)}v-s<d-v?(lo(a,n,s,v),s=v+1):(lo(a,n,v+1,d),d=v)}}function uo(a,n,s){const d=a[n];a[n]=a[s],a[s]=d}at("FeaturePositionMap",En);class Jn{constructor(n,s){this.gl=n.gl,this.location=s}}class Vo extends Jn{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Vl extends Jn{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Nn extends Jn{constructor(n,s){super(n,s),this.current=er.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const kn=new Float32Array(16);function sr(a){return[Ct(255*a.r,255*a.g),Ct(255*a.b,255*a.a)]}class _n{constructor(n,s,d){this.value=n,this.uniformNames=s.map(m=>`u_${m}`),this.type=d}setUniform(n,s,d){n.set(d.constantOr(this.value))}getBinding(n,s,d){return this.type==="color"?new Nn(n,s):new Vo(n,s)}}class Tn{constructor(n,s){this.uniformNames=s.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,d,m){const _=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&n.set(_)}getBinding(n,s,d){return d.substr(0,9)==="u_pattern"?new Vl(n,s):new Vo(n,s)}}class hr{constructor(n,s,d,m){this.expression=n,this.type=d,this.maxValue=0,this.paintVertexAttributes=s.map(_=>({name:`a_${_}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(n,s,d,m,_){const v=this.paintVertexArray.length,S=this.expression.evaluate(new Mr(0),s,{},m,[],_);this.paintVertexArray.resize(n),this._setPaintValue(v,n,S)}updatePaintArray(n,s,d,m){const _=this.expression.evaluate({zoom:0},d,m);this._setPaintValue(n,s,_)}_setPaintValue(n,s,d){if(this.type==="color"){const m=sr(d);for(let _=n;_<s;_++)this.paintVertexArray.emplace(_,m[0],m[1])}else{for(let m=n;m<s;m++)this.paintVertexArray.emplace(m,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class vn{constructor(n,s,d,m,_,v){this.expression=n,this.uniformNames=s.map(S=>`u_${S}_t`),this.type=d,this.useIntegerZoom=m,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=s.map(S=>({name:`a_${S}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new v}populatePaintArray(n,s,d,m,_){const v=this.expression.evaluate(new Mr(this.zoom),s,{},m,[],_),S=this.expression.evaluate(new Mr(this.zoom+1),s,{},m,[],_),k=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(k,n,v,S)}updatePaintArray(n,s,d,m){const _=this.expression.evaluate({zoom:this.zoom},d,m),v=this.expression.evaluate({zoom:this.zoom+1},d,m);this._setPaintValue(n,s,_,v)}_setPaintValue(n,s,d,m){if(this.type==="color"){const _=sr(d),v=sr(m);for(let S=n;S<s;S++)this.paintVertexArray.emplace(S,_[0],_[1],v[0],v[1])}else{for(let _=n;_<s;_++)this.paintVertexArray.emplace(_,d,m);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(m))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const d=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,m=$(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);n.set(m)}getBinding(n,s,d){return new Vo(n,s)}}class Ii{constructor(n,s,d,m,_,v){this.expression=n,this.type=s,this.useIntegerZoom=d,this.zoom=m,this.layerId=v,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(n,s,d){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(m,n,s.patterns&&s.patterns[this.layerId],d)}updatePaintArray(n,s,d,m,_){this._setPaintValues(n,s,d.patterns&&d.patterns[this.layerId],_)}_setPaintValues(n,s,d,m){if(!m||!d)return;const{min:_,mid:v,max:S}=d,k=m[_],M=m[v],D=m[S];if(k&&M&&D)for(let F=n;F<s;F++)this.zoomInPaintVertexArray.emplace(F,M.tl[0],M.tl[1],M.br[0],M.br[1],k.tl[0],k.tl[1],k.br[0],k.br[1],M.pixelRatio,k.pixelRatio),this.zoomOutPaintVertexArray.emplace(F,M.tl[0],M.tl[1],M.br[0],M.br[1],D.tl[0],D.tl[1],D.br[0],D.br[1],M.pixelRatio,D.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,nt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,nt.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class nc{constructor(n,s,d){this.binders={},this._buffers=[];const m=[];for(const _ in n.paint._values){if(!d(_))continue;const v=n.paint.get(_);if(!(v instanceof Oo&&Ps(v.property.specification)))continue;const S=Q0(_,n.type),k=v.value,M=v.property.specification.type,D=v.property.useIntegerZoom,F=v.property.specification["property-type"],V=F==="cross-faded"||F==="cross-faded-data-driven";if(k.kind==="constant")this.binders[_]=V?new Tn(k.value,S):new _n(k.value,S,M),m.push(`/u_${_}`);else if(k.kind==="source"||V){const U=qp(_,M,"source");this.binders[_]=V?new Ii(k,M,D,s,U,n.id):new hr(k,S,M,U),m.push(`/a_${_}`)}else{const U=qp(_,M,"composite");this.binders[_]=new vn(k,S,M,D,s,U),m.push(`/z_${_}`)}}this.cacheKey=m.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof hr||s instanceof vn?s.maxValue:0}populatePaintArrays(n,s,d,m,_){for(const v in this.binders){const S=this.binders[v];(S instanceof hr||S instanceof vn||S instanceof Ii)&&S.populatePaintArray(n,s,d,m,_)}}setConstantPatternPositions(n,s){for(const d in this.binders){const m=this.binders[d];m instanceof Tn&&m.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,d,m,_){let v=!1;for(const S in n){const k=s.getPositions(S);for(const M of k){const D=d.feature(M.index);for(const F in this.binders){const V=this.binders[F];if((V instanceof hr||V instanceof vn||V instanceof Ii)&&V.expression.isStateDependent===!0){const U=m.paint.get(F);V.expression=U.value,V.updatePaintArray(M.start,M.end,D,n[S],_),v=!0}}}}return v}defines(){const n=[];for(const s in this.binders){const d=this.binders[s];(d instanceof _n||d instanceof Tn)&&n.push(...d.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const d=this.binders[s];if(d instanceof hr||d instanceof vn)for(let m=0;m<d.paintVertexAttributes.length;m++)n.push(d.paintVertexAttributes[m].name);else if(d instanceof Ii)for(let m=0;m<nt.members.length;m++)n.push(nt.members[m].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const d=this.binders[s];if(d instanceof _n||d instanceof Tn||d instanceof vn)for(const m of d.uniformNames)n.push(m)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const d=[];for(const m in this.binders){const _=this.binders[m];if(_ instanceof _n||_ instanceof Tn||_ instanceof vn){for(const v of _.uniformNames)if(s[v]){const S=_.getBinding(n,s[v],v);d.push({name:v,property:m,binding:S})}}}return d}setUniforms(n,s,d,m){for(const{name:_,property:v,binding:S}of s)this.binders[v].setUniform(S,m,d.get(v),_)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const d=this.binders[s];if(n&&d instanceof Ii){const m=n.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(d instanceof hr||d instanceof vn)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(n){for(const s in this.binders){const d=this.binders[s];(d instanceof hr||d instanceof vn||d instanceof Ii)&&d.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof hr||s instanceof vn||s instanceof Ii)&&s.destroy()}}}class na{constructor(n,s,d=()=>!0){this.programConfigurations={};for(const m of n)this.programConfigurations[m.id]=new nc(m,s,d);this.needsUpload=!1,this._featureMap=new En,this._bufferOffset=0}populatePaintArrays(n,s,d,m,_,v){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(n,s,m,_,v);s.id!==void 0&&this._featureMap.add(s.id,d,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,d,m){for(const _ of d)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(n,this._featureMap,s,_,m)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function Q0(a,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${n}-`,"").replace(/-/g,"_")]}function qp(a,n,s){const d={color:{source:Za,composite:c},number:{source:tc,composite:Za}},m=function(_){return{"line-pattern":{source:ne,composite:ne},"fill-pattern":{source:ne,composite:ne},"fill-extrusion-pattern":{source:ne,composite:ne}}[_]}(a);return m&&m[s]||d[n][s]}at("ConstantBinder",_n),at("CrossFadedConstantBinder",Tn),at("SourceExpressionBinder",hr),at("CrossFadedCompositeBinder",Ii),at("CompositeExpressionBinder",vn),at("ProgramConfiguration",nc,{omit:["_buffers"]}),at("ProgramConfigurationSet",na);var Ar=8192;const fd=Math.pow(2,14)-1,Nl=-fd-1;function ia(a){const n=Ar/a.extent,s=a.loadGeometry();for(let d=0;d<s.length;d++){const m=s[d];for(let _=0;_<m.length;_++){const v=m[_],S=Math.round(v.x*n),k=Math.round(v.y*n);v.x=$(S,Nl,fd),v.y=$(k,Nl,fd),(S<v.x||S>v.x+1||k<v.y||k>v.y+1)&&ke("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Ul(a,n){return{type:a.type,id:a.id,properties:a.properties,geometry:n?ia(a):[]}}function Zp(a,n,s,d,m){a.emplaceBack(2*n+(d+1)/2,2*s+(m+1)/2)}class e_{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Y,this.indexArray=new Fe,this.segments=new He,this.programConfigurations=new na(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,d){const m=this.layers[0],_=[];let v=null,S=!1;m.type==="circle"&&(v=m.layout.get("circle-sort-key"),S=!v.isConstant());for(const{feature:k,id:M,index:D,sourceLayerIndex:F}of n){const V=this.layers[0]._featureFilter.needGeometry,U=Ul(k,V);if(!this.layers[0]._featureFilter.filter(new Mr(this.zoom),U,d))continue;const q=S?v.evaluate(U,{},d):void 0,re={id:M,properties:k.properties,type:k.type,sourceLayerIndex:F,index:D,geometry:V?U.geometry:ia(k),patterns:{},sortKey:q};_.push(re)}S&&_.sort((k,M)=>k.sortKey-M.sortKey);for(const k of _){const{geometry:M,index:D,sourceLayerIndex:F}=k,V=n[D].feature;this.addFeature(k,M,D,d),s.featureIndex.insert(V,M,D,F,this.index)}}update(n,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ft),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,d,m){for(const _ of s)for(const v of _){const S=v.x,k=v.y;if(S<0||S>=Ar||k<0||k>=Ar)continue;const M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),D=M.vertexLength;Zp(this.layoutVertexArray,S,k,-1,-1),Zp(this.layoutVertexArray,S,k,1,-1),Zp(this.layoutVertexArray,S,k,1,1),Zp(this.layoutVertexArray,S,k,-1,1),this.indexArray.emplaceBack(D,D+1,D+2),this.indexArray.emplaceBack(D,D+3,D+2),M.vertexLength+=4,M.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,{},m)}}function Hb(a,n){for(let s=0;s<a.length;s++)if(ic(n,a[s]))return!0;for(let s=0;s<n.length;s++)if(ic(a,n[s]))return!0;return!!t_(a,n)}function Dz(a,n,s){return!!ic(a,n)||!!r_(n,a,s)}function Xb(a,n){if(a.length===1)return Yb(n,a[0]);for(let s=0;s<n.length;s++){const d=n[s];for(let m=0;m<d.length;m++)if(ic(a,d[m]))return!0}for(let s=0;s<a.length;s++)if(Yb(n,a[s]))return!0;for(let s=0;s<n.length;s++)if(t_(a,n[s]))return!0;return!1}function Rz(a,n,s){if(a.length>1){if(t_(a,n))return!0;for(let d=0;d<n.length;d++)if(r_(n[d],a,s))return!0}for(let d=0;d<a.length;d++)if(r_(a[d],n,s))return!0;return!1}function t_(a,n){if(a.length===0||n.length===0)return!1;for(let s=0;s<a.length-1;s++){const d=a[s],m=a[s+1];for(let _=0;_<n.length-1;_++)if(Lz(d,m,n[_],n[_+1]))return!0}return!1}function Lz(a,n,s,d){return Be(a,s,d)!==Be(n,s,d)&&Be(a,n,s)!==Be(a,n,d)}function r_(a,n,s){const d=s*s;if(n.length===1)return a.distSqr(n[0])<d;for(let m=1;m<n.length;m++)if(Kb(a,n[m-1],n[m])<d)return!0;return!1}function Kb(a,n,s){const d=n.distSqr(s);if(d===0)return a.distSqr(n);const m=((a.x-n.x)*(s.x-n.x)+(a.y-n.y)*(s.y-n.y))/d;return a.distSqr(m<0?n:m>1?s:s.sub(n)._mult(m)._add(n))}function Yb(a,n){let s,d,m,_=!1;for(let v=0;v<a.length;v++){s=a[v];for(let S=0,k=s.length-1;S<s.length;k=S++)d=s[S],m=s[k],d.y>n.y!=m.y>n.y&&n.x<(m.x-d.x)*(n.y-d.y)/(m.y-d.y)+d.x&&(_=!_)}return _}function ic(a,n){let s=!1;for(let d=0,m=a.length-1;d<a.length;m=d++){const _=a[d],v=a[m];_.y>n.y!=v.y>n.y&&n.x<(v.x-_.x)*(n.y-_.y)/(v.y-_.y)+_.x&&(s=!s)}return s}function Fz(a,n,s){const d=s[0],m=s[2];if(a.x<d.x&&n.x<d.x||a.x>m.x&&n.x>m.x||a.y<d.y&&n.y<d.y||a.y>m.y&&n.y>m.y)return!1;const _=Be(a,n,s[0]);return _!==Be(a,n,s[1])||_!==Be(a,n,s[2])||_!==Be(a,n,s[3])}function pd(a,n,s){const d=n.paint.get(a).value;return d.kind==="constant"?d.value:s.programConfigurations.get(n.id).getMaxValue(a)}function Hp(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Xp(a,n,s,d,m){if(!n[0]&&!n[1])return a;const _=I.convert(n)._mult(m);s==="viewport"&&_._rotate(-d);const v=[];for(let S=0;S<a.length;S++)v.push(a[S].sub(_));return v}let Jb,Qb;at("CircleBucket",e_,{omit:["layers"]});var Oz={get paint(){return Qb=Qb||new mi({"circle-radius":new Tt(Ce.paint_circle["circle-radius"]),"circle-color":new Tt(Ce.paint_circle["circle-color"]),"circle-blur":new Tt(Ce.paint_circle["circle-blur"]),"circle-opacity":new Tt(Ce.paint_circle["circle-opacity"]),"circle-translate":new dt(Ce.paint_circle["circle-translate"]),"circle-translate-anchor":new dt(Ce.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new dt(Ce.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new dt(Ce.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Tt(Ce.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Tt(Ce.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Tt(Ce.paint_circle["circle-stroke-opacity"])})},get layout(){return Jb=Jb||new mi({"circle-sort-key":new Tt(Ce.layout_circle["circle-sort-key"])})}},gi=1e-6,oc=typeof Float32Array!="undefined"?Float32Array:Array;function n_(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function e2(a,n,s){var d=n[0],m=n[1],_=n[2],v=n[3],S=n[4],k=n[5],M=n[6],D=n[7],F=n[8],V=n[9],U=n[10],q=n[11],re=n[12],Q=n[13],fe=n[14],ve=n[15],he=s[0],we=s[1],Ee=s[2],Me=s[3];return a[0]=he*d+we*S+Ee*F+Me*re,a[1]=he*m+we*k+Ee*V+Me*Q,a[2]=he*_+we*M+Ee*U+Me*fe,a[3]=he*v+we*D+Ee*q+Me*ve,a[4]=(he=s[4])*d+(we=s[5])*S+(Ee=s[6])*F+(Me=s[7])*re,a[5]=he*m+we*k+Ee*V+Me*Q,a[6]=he*_+we*M+Ee*U+Me*fe,a[7]=he*v+we*D+Ee*q+Me*ve,a[8]=(he=s[8])*d+(we=s[9])*S+(Ee=s[10])*F+(Me=s[11])*re,a[9]=he*m+we*k+Ee*V+Me*Q,a[10]=he*_+we*M+Ee*U+Me*fe,a[11]=he*v+we*D+Ee*q+Me*ve,a[12]=(he=s[12])*d+(we=s[13])*S+(Ee=s[14])*F+(Me=s[15])*re,a[13]=he*m+we*k+Ee*V+Me*Q,a[14]=he*_+we*M+Ee*U+Me*fe,a[15]=he*v+we*D+Ee*q+Me*ve,a}Math.hypot||(Math.hypot=function(){for(var a=0,n=arguments.length;n--;)a+=arguments[n]*arguments[n];return Math.sqrt(a)});var md,$z=e2;function Kp(a,n,s){var d=n[0],m=n[1],_=n[2],v=n[3];return a[0]=s[0]*d+s[4]*m+s[8]*_+s[12]*v,a[1]=s[1]*d+s[5]*m+s[9]*_+s[13]*v,a[2]=s[2]*d+s[6]*m+s[10]*_+s[14]*v,a[3]=s[3]*d+s[7]*m+s[11]*_+s[15]*v,a}function t2(a,n){const s=Kp([],[a.x,a.y,0,1],n);return new I(s[0]/s[3],s[1]/s[3])}md=new oc(4),oc!=Float32Array&&(md[0]=0,md[1]=0,md[2]=0,md[3]=0);class r2 extends e_{}let n2;at("HeatmapBucket",r2,{omit:["layers"]});var Bz={get paint(){return n2=n2||new mi({"heatmap-radius":new Tt(Ce.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Tt(Ce.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new dt(Ce.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ld(Ce.paint_heatmap["heatmap-color"]),"heatmap-opacity":new dt(Ce.paint_heatmap["heatmap-opacity"])})}};function i_(a,{width:n,height:s},d,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==n*s*d)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${n*s*d}`)}else m=new Uint8Array(n*s*d);return a.width=n,a.height=s,a.data=m,a}function i2(a,{width:n,height:s},d){if(n===a.width&&s===a.height)return;const m=i_({},{width:n,height:s},d);o_(a,m,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,n),height:Math.min(a.height,s)},d),a.width=n,a.height=s,a.data=m.data}function o_(a,n,s,d,m,_){if(m.width===0||m.height===0)return n;if(m.width>a.width||m.height>a.height||s.x>a.width-m.width||s.y>a.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>n.width||m.height>n.height||d.x>n.width-m.width||d.y>n.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const v=a.data,S=n.data;if(v===S)throw new Error("srcData equals dstData, so image is already copied");for(let k=0;k<m.height;k++){const M=((s.y+k)*a.width+s.x)*_,D=((d.y+k)*n.width+d.x)*_;for(let F=0;F<m.width*_;F++)S[D+F]=v[M+F]}return n}class gd{constructor(n,s){i_(this,n,1,s)}resize(n){i2(this,n,1)}clone(){return new gd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,d,m,_){o_(n,s,d,m,_,1)}}class co{constructor(n,s){i_(this,n,4,s)}resize(n){i2(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new co({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,d,m,_){o_(n,s,d,m,_,4)}}function o2(a){const n={},s=a.resolution||256,d=a.clips?a.clips.length:1,m=a.image||new co({width:s,height:d});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const _=(v,S,k)=>{n[a.evaluationKey]=k;const M=a.expression.evaluate(n);m.data[v+S+0]=Math.floor(255*M.r/M.a),m.data[v+S+1]=Math.floor(255*M.g/M.a),m.data[v+S+2]=Math.floor(255*M.b/M.a),m.data[v+S+3]=Math.floor(255*M.a)};if(a.clips)for(let v=0,S=0;v<d;++v,S+=4*s)for(let k=0,M=0;k<s;k++,M+=4){const D=k/(s-1),{start:F,end:V}=a.clips[v];_(S,M,F*(1-D)+V*D)}else for(let v=0,S=0;v<s;v++,S+=4)_(0,S,v/(s-1));return m}let a2;at("AlphaImage",gd),at("RGBAImage",co);var Vz={get paint(){return a2=a2||new mi({"hillshade-illumination-direction":new dt(Ce.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new dt(Ce.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new dt(Ce.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new dt(Ce.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new dt(Ce.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new dt(Ce.paint_hillshade["hillshade-accent-color"])})}};const Nz=hn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Uz}=Nz;var a_={exports:{}};function Yp(a,n,s){s=s||2;var d,m,_,v,S,k,M,D=n&&n.length,F=D?n[0]*s:a.length,V=s2(a,0,F,s,!0),U=[];if(!V||V.next===V.prev)return U;if(D&&(V=function(re,Q,fe,ve){var he,we,Ee,Me=[];for(he=0,we=Q.length;he<we;he++)(Ee=s2(re,Q[he]*ve,he<we-1?Q[he+1]*ve:re.length,ve,!1))===Ee.next&&(Ee.steiner=!0),Me.push(Kz(Ee));for(Me.sort(Zz),he=0;he<Me.length;he++)fe=Hz(Me[he],fe);return fe}(a,n,V,s)),a.length>80*s){d=_=a[0],m=v=a[1];for(var q=s;q<F;q+=s)(S=a[q])<d&&(d=S),(k=a[q+1])<m&&(m=k),S>_&&(_=S),k>v&&(v=k);M=(M=Math.max(_-d,v-m))!==0?32767/M:0}return yd(V,U,s,d,m,M,0),U}function s2(a,n,s,d,m){var _,v;if(m===u_(a,n,s,d)>0)for(_=n;_<s;_+=d)v=c2(_,a[_],a[_+1],v);else for(_=s-d;_>=n;_-=d)v=c2(_,a[_],a[_+1],v);return v&&Jp(v,v.next)&&(vd(v),v=v.next),v}function jl(a,n){if(!a)return a;n||(n=a);var s,d=a;do if(s=!1,d.steiner||!Jp(d,d.next)&&nn(d.prev,d,d.next)!==0)d=d.next;else{if(vd(d),(d=n=d.prev)===d.next)break;s=!0}while(s||d!==n);return n}function yd(a,n,s,d,m,_,v){if(a){!v&&_&&function(D,F,V,U){var q=D;do q.z===0&&(q.z=s_(q.x,q.y,F,V,U)),q.prevZ=q.prev,q.nextZ=q.next,q=q.next;while(q!==D);q.prevZ.nextZ=null,q.prevZ=null,function(re){var Q,fe,ve,he,we,Ee,Me,ot,lt=1;do{for(fe=re,re=null,we=null,Ee=0;fe;){for(Ee++,ve=fe,Me=0,Q=0;Q<lt&&(Me++,ve=ve.nextZ);Q++);for(ot=lt;Me>0||ot>0&&ve;)Me!==0&&(ot===0||!ve||fe.z<=ve.z)?(he=fe,fe=fe.nextZ,Me--):(he=ve,ve=ve.nextZ,ot--),we?we.nextZ=he:re=he,he.prevZ=we,we=he;fe=ve}we.nextZ=null,lt*=2}while(Ee>1)}(q)}(a,d,m,_);for(var S,k,M=a;a.prev!==a.next;)if(S=a.prev,k=a.next,_?Gz(a,d,m,_):jz(a))n.push(S.i/s|0),n.push(a.i/s|0),n.push(k.i/s|0),vd(a),a=k.next,M=k.next;else if((a=k)===M){v?v===1?yd(a=Wz(jl(a),n,s),n,s,d,m,_,2):v===2&&qz(a,n,s,d,m,_):yd(jl(a),n,s,d,m,_,1);break}}}function jz(a){var n=a.prev,s=a,d=a.next;if(nn(n,s,d)>=0)return!1;for(var m=n.x,_=s.x,v=d.x,S=n.y,k=s.y,M=d.y,D=m<_?m<v?m:v:_<v?_:v,F=S<k?S<M?S:M:k<M?k:M,V=m>_?m>v?m:v:_>v?_:v,U=S>k?S>M?S:M:k>M?k:M,q=d.next;q!==n;){if(q.x>=D&&q.x<=V&&q.y>=F&&q.y<=U&&ac(m,S,_,k,v,M,q.x,q.y)&&nn(q.prev,q,q.next)>=0)return!1;q=q.next}return!0}function Gz(a,n,s,d){var m=a.prev,_=a,v=a.next;if(nn(m,_,v)>=0)return!1;for(var S=m.x,k=_.x,M=v.x,D=m.y,F=_.y,V=v.y,U=S<k?S<M?S:M:k<M?k:M,q=D<F?D<V?D:V:F<V?F:V,re=S>k?S>M?S:M:k>M?k:M,Q=D>F?D>V?D:V:F>V?F:V,fe=s_(U,q,n,s,d),ve=s_(re,Q,n,s,d),he=a.prevZ,we=a.nextZ;he&&he.z>=fe&&we&&we.z<=ve;){if(he.x>=U&&he.x<=re&&he.y>=q&&he.y<=Q&&he!==m&&he!==v&&ac(S,D,k,F,M,V,he.x,he.y)&&nn(he.prev,he,he.next)>=0||(he=he.prevZ,we.x>=U&&we.x<=re&&we.y>=q&&we.y<=Q&&we!==m&&we!==v&&ac(S,D,k,F,M,V,we.x,we.y)&&nn(we.prev,we,we.next)>=0))return!1;we=we.nextZ}for(;he&&he.z>=fe;){if(he.x>=U&&he.x<=re&&he.y>=q&&he.y<=Q&&he!==m&&he!==v&&ac(S,D,k,F,M,V,he.x,he.y)&&nn(he.prev,he,he.next)>=0)return!1;he=he.prevZ}for(;we&&we.z<=ve;){if(we.x>=U&&we.x<=re&&we.y>=q&&we.y<=Q&&we!==m&&we!==v&&ac(S,D,k,F,M,V,we.x,we.y)&&nn(we.prev,we,we.next)>=0)return!1;we=we.nextZ}return!0}function Wz(a,n,s){var d=a;do{var m=d.prev,_=d.next.next;!Jp(m,_)&&l2(m,d,d.next,_)&&_d(m,_)&&_d(_,m)&&(n.push(m.i/s|0),n.push(d.i/s|0),n.push(_.i/s|0),vd(d),vd(d.next),d=a=_),d=d.next}while(d!==a);return jl(d)}function qz(a,n,s,d,m,_){var v=a;do{for(var S=v.next.next;S!==v.prev;){if(v.i!==S.i&&Yz(v,S)){var k=u2(v,S);return v=jl(v,v.next),k=jl(k,k.next),yd(v,n,s,d,m,_,0),void yd(k,n,s,d,m,_,0)}S=S.next}v=v.next}while(v!==a)}function Zz(a,n){return a.x-n.x}function Hz(a,n){var s=function(m,_){var v,S=_,k=m.x,M=m.y,D=-1/0;do{if(M<=S.y&&M>=S.next.y&&S.next.y!==S.y){var F=S.x+(M-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(F<=k&&F>D&&(D=F,v=S.x<S.next.x?S:S.next,F===k))return v}S=S.next}while(S!==_);if(!v)return null;var V,U=v,q=v.x,re=v.y,Q=1/0;S=v;do k>=S.x&&S.x>=q&&k!==S.x&&ac(M<re?k:D,M,q,re,M<re?D:k,M,S.x,S.y)&&(V=Math.abs(M-S.y)/(k-S.x),_d(S,m)&&(V<Q||V===Q&&(S.x>v.x||S.x===v.x&&Xz(v,S)))&&(v=S,Q=V)),S=S.next;while(S!==U);return v}(a,n);if(!s)return n;var d=u2(s,a);return jl(d,d.next),jl(s,s.next)}function Xz(a,n){return nn(a.prev,a,n.prev)<0&&nn(n.next,a,a.next)<0}function s_(a,n,s,d,m){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-s)*m|0)|a<<8))|a<<4))|a<<2))|a<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-d)*m|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function Kz(a){var n=a,s=a;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==a);return s}function ac(a,n,s,d,m,_,v,S){return(m-v)*(n-S)>=(a-v)*(_-S)&&(a-v)*(d-S)>=(s-v)*(n-S)&&(s-v)*(_-S)>=(m-v)*(d-S)}function Yz(a,n){return a.next.i!==n.i&&a.prev.i!==n.i&&!function(s,d){var m=s;do{if(m.i!==s.i&&m.next.i!==s.i&&m.i!==d.i&&m.next.i!==d.i&&l2(m,m.next,s,d))return!0;m=m.next}while(m!==s);return!1}(a,n)&&(_d(a,n)&&_d(n,a)&&function(s,d){var m=s,_=!1,v=(s.x+d.x)/2,S=(s.y+d.y)/2;do m.y>S!=m.next.y>S&&m.next.y!==m.y&&v<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(_=!_),m=m.next;while(m!==s);return _}(a,n)&&(nn(a.prev,a,n.prev)||nn(a,n.prev,n))||Jp(a,n)&&nn(a.prev,a,a.next)>0&&nn(n.prev,n,n.next)>0)}function nn(a,n,s){return(n.y-a.y)*(s.x-n.x)-(n.x-a.x)*(s.y-n.y)}function Jp(a,n){return a.x===n.x&&a.y===n.y}function l2(a,n,s,d){var m=em(nn(a,n,s)),_=em(nn(a,n,d)),v=em(nn(s,d,a)),S=em(nn(s,d,n));return m!==_&&v!==S||!(m!==0||!Qp(a,s,n))||!(_!==0||!Qp(a,d,n))||!(v!==0||!Qp(s,a,d))||!(S!==0||!Qp(s,n,d))}function Qp(a,n,s){return n.x<=Math.max(a.x,s.x)&&n.x>=Math.min(a.x,s.x)&&n.y<=Math.max(a.y,s.y)&&n.y>=Math.min(a.y,s.y)}function em(a){return a>0?1:a<0?-1:0}function _d(a,n){return nn(a.prev,a,a.next)<0?nn(a,n,a.next)>=0&&nn(a,a.prev,n)>=0:nn(a,n,a.prev)<0||nn(a,a.next,n)<0}function u2(a,n){var s=new l_(a.i,a.x,a.y),d=new l_(n.i,n.x,n.y),m=a.next,_=n.prev;return a.next=n,n.prev=a,s.next=m,m.prev=s,d.next=s,s.prev=d,_.next=d,d.prev=_,d}function c2(a,n,s,d){var m=new l_(a,n,s);return d?(m.next=d.next,m.prev=d,d.next.prev=m,d.next=m):(m.prev=m,m.next=m),m}function vd(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function l_(a,n,s){this.i=a,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function u_(a,n,s,d){for(var m=0,_=n,v=s-d;_<s;_+=d)m+=(a[v]-a[_])*(a[_+1]+a[v+1]),v=_;return m}a_.exports=Yp,a_.exports.default=Yp,Yp.deviation=function(a,n,s,d){var m=n&&n.length,_=Math.abs(u_(a,0,m?n[0]*s:a.length,s));if(m)for(var v=0,S=n.length;v<S;v++)_-=Math.abs(u_(a,n[v]*s,v<S-1?n[v+1]*s:a.length,s));var k=0;for(v=0;v<d.length;v+=3){var M=d[v]*s,D=d[v+1]*s,F=d[v+2]*s;k+=Math.abs((a[M]-a[F])*(a[D+1]-a[M+1])-(a[M]-a[D])*(a[F+1]-a[M+1]))}return _===0&&k===0?0:Math.abs((k-_)/_)},Yp.flatten=function(a){for(var n=a[0][0].length,s={vertices:[],holes:[],dimensions:n},d=0,m=0;m<a.length;m++){for(var _=0;_<a[m].length;_++)for(var v=0;v<n;v++)s.vertices.push(a[m][_][v]);m>0&&s.holes.push(d+=a[m-1].length)}return s};var h2=b(a_.exports);function Jz(a,n,s,d,m){d2(a,n,s||0,d||a.length-1,m||Qz)}function d2(a,n,s,d,m){for(;d>s;){if(d-s>600){var _=d-s+1,v=n-s+1,S=Math.log(_),k=.5*Math.exp(2*S/3),M=.5*Math.sqrt(S*k*(_-k)/_)*(v-_/2<0?-1:1);d2(a,n,Math.max(s,Math.floor(n-v*k/_+M)),Math.min(d,Math.floor(n+(_-v)*k/_+M)),m)}var D=a[n],F=s,V=d;for(xd(a,s,n),m(a[d],D)>0&&xd(a,s,d);F<V;){for(xd(a,F,V),F++,V--;m(a[F],D)<0;)F++;for(;m(a[V],D)>0;)V--}m(a[s],D)===0?xd(a,s,V):xd(a,++V,d),V<=n&&(s=V+1),n<=V&&(d=V-1)}}function xd(a,n,s){var d=a[n];a[n]=a[s],a[s]=d}function Qz(a,n){return a<n?-1:a>n?1:0}function c_(a,n){const s=a.length;if(s<=1)return[a];const d=[];let m,_;for(let v=0;v<s;v++){const S=zt(a[v]);S!==0&&(a[v].area=Math.abs(S),_===void 0&&(_=S<0),_===S<0?(m&&d.push(m),m=[a[v]]):m.push(a[v]))}if(m&&d.push(m),n>1)for(let v=0;v<d.length;v++)d[v].length<=n||(Jz(d[v],n,1,d[v].length-1,e5),d[v]=d[v].slice(0,n));return d}function e5(a,n){return n.area-a.area}function h_(a,n,s){const d=s.patternDependencies;let m=!1;for(const _ of n){const v=_.paint.get(`${a}-pattern`);v.isConstant()||(m=!0);const S=v.constantOr(null);S&&(m=!0,d[S.to]=!0,d[S.from]=!0)}return m}function d_(a,n,s,d,m){const _=m.patternDependencies;for(const v of n){const S=v.paint.get(`${a}-pattern`).value;if(S.kind!=="constant"){let k=S.evaluate({zoom:d-1},s,{},m.availableImages),M=S.evaluate({zoom:d},s,{},m.availableImages),D=S.evaluate({zoom:d+1},s,{},m.availableImages);k=k&&k.name?k.name:k,M=M&&M.name?M.name:M,D=D&&D.name?D.name:D,_[k]=!0,_[M]=!0,_[D]=!0,s.patterns[v.id]={min:k,mid:M,max:D}}}return s}class f_{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ee,this.indexArray=new Fe,this.indexArray2=new tt,this.programConfigurations=new na(n.layers,n.zoom),this.segments=new He,this.segments2=new He,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,d){this.hasPattern=h_("fill",this.layers,s);const m=this.layers[0].layout.get("fill-sort-key"),_=!m.isConstant(),v=[];for(const{feature:S,id:k,index:M,sourceLayerIndex:D}of n){const F=this.layers[0]._featureFilter.needGeometry,V=Ul(S,F);if(!this.layers[0]._featureFilter.filter(new Mr(this.zoom),V,d))continue;const U=_?m.evaluate(V,{},d,s.availableImages):void 0,q={id:k,properties:S.properties,type:S.type,sourceLayerIndex:D,index:M,geometry:F?V.geometry:ia(S),patterns:{},sortKey:U};v.push(q)}_&&v.sort((S,k)=>S.sortKey-k.sortKey);for(const S of v){const{geometry:k,index:M,sourceLayerIndex:D}=S;if(this.hasPattern){const F=d_("fill",this.layers,S,this.zoom,s);this.patternFeatures.push(F)}else this.addFeature(S,k,M,d,{});s.featureIndex.insert(n[M].feature,k,M,D,this.index)}}update(n,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,d)}addFeatures(n,s,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Uz),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,d,m,_){for(const v of c_(s,500)){let S=0;for(const U of v)S+=U.length;const k=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),M=k.vertexLength,D=[],F=[];for(const U of v){if(U.length===0)continue;U!==v[0]&&F.push(D.length/2);const q=this.segments2.prepareSegment(U.length,this.layoutVertexArray,this.indexArray2),re=q.vertexLength;this.layoutVertexArray.emplaceBack(U[0].x,U[0].y),this.indexArray2.emplaceBack(re+U.length-1,re),D.push(U[0].x),D.push(U[0].y);for(let Q=1;Q<U.length;Q++)this.layoutVertexArray.emplaceBack(U[Q].x,U[Q].y),this.indexArray2.emplaceBack(re+Q-1,re+Q),D.push(U[Q].x),D.push(U[Q].y);q.vertexLength+=U.length,q.primitiveLength+=U.length}const V=h2(D,F);for(let U=0;U<V.length;U+=3)this.indexArray.emplaceBack(M+V[U],M+V[U+1],M+V[U+2]);k.vertexLength+=S,k.primitiveLength+=V.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,_,m)}}let f2,p2;at("FillBucket",f_,{omit:["layers","patternFeatures"]});var t5={get paint(){return p2=p2||new mi({"fill-antialias":new dt(Ce.paint_fill["fill-antialias"]),"fill-opacity":new Tt(Ce.paint_fill["fill-opacity"]),"fill-color":new Tt(Ce.paint_fill["fill-color"]),"fill-outline-color":new Tt(Ce.paint_fill["fill-outline-color"]),"fill-translate":new dt(Ce.paint_fill["fill-translate"]),"fill-translate-anchor":new dt(Ce.paint_fill["fill-translate-anchor"]),"fill-pattern":new $l(Ce.paint_fill["fill-pattern"])})},get layout(){return f2=f2||new mi({"fill-sort-key":new Tt(Ce.layout_fill["fill-sort-key"])})}};const r5=hn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),n5=hn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:i5}=r5;var Rs={},o5=w,m2=sc;function sc(a,n,s,d,m){this.properties={},this.extent=s,this.type=0,this._pbf=a,this._geometry=-1,this._keys=d,this._values=m,a.readFields(a5,this,n)}function a5(a,n,s){a==1?n.id=s.readVarint():a==2?function(d,m){for(var _=d.readVarint()+d.pos;d.pos<_;){var v=m._keys[d.readVarint()],S=m._values[d.readVarint()];m.properties[v]=S}}(s,n):a==3?n.type=s.readVarint():a==4&&(n._geometry=s.pos)}function s5(a){for(var n,s,d=0,m=0,_=a.length,v=_-1;m<_;v=m++)d+=((s=a[v]).x-(n=a[m]).x)*(n.y+s.y);return d}sc.types=["Unknown","Point","LineString","Polygon"],sc.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var n,s=a.readVarint()+a.pos,d=1,m=0,_=0,v=0,S=[];a.pos<s;){if(m<=0){var k=a.readVarint();d=7&k,m=k>>3}if(m--,d===1||d===2)_+=a.readSVarint(),v+=a.readSVarint(),d===1&&(n&&S.push(n),n=[]),n.push(new o5(_,v));else{if(d!==7)throw new Error("unknown command "+d);n&&n.push(n[0].clone())}}return n&&S.push(n),S},sc.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var n=a.readVarint()+a.pos,s=1,d=0,m=0,_=0,v=1/0,S=-1/0,k=1/0,M=-1/0;a.pos<n;){if(d<=0){var D=a.readVarint();s=7&D,d=D>>3}if(d--,s===1||s===2)(m+=a.readSVarint())<v&&(v=m),m>S&&(S=m),(_+=a.readSVarint())<k&&(k=_),_>M&&(M=_);else if(s!==7)throw new Error("unknown command "+s)}return[v,k,S,M]},sc.prototype.toGeoJSON=function(a,n,s){var d,m,_=this.extent*Math.pow(2,s),v=this.extent*a,S=this.extent*n,k=this.loadGeometry(),M=sc.types[this.type];function D(U){for(var q=0;q<U.length;q++){var re=U[q];U[q]=[360*(re.x+v)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(re.y+S)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var F=[];for(d=0;d<k.length;d++)F[d]=k[d][0];D(k=F);break;case 2:for(d=0;d<k.length;d++)D(k[d]);break;case 3:for(k=function(U){var q=U.length;if(q<=1)return[U];for(var re,Q,fe=[],ve=0;ve<q;ve++){var he=s5(U[ve]);he!==0&&(Q===void 0&&(Q=he<0),Q===he<0?(re&&fe.push(re),re=[U[ve]]):re.push(U[ve]))}return re&&fe.push(re),fe}(k),d=0;d<k.length;d++)for(m=0;m<k[d].length;m++)D(k[d][m])}k.length===1?k=k[0]:M="Multi"+M;var V={type:"Feature",geometry:{type:M,coordinates:k},properties:this.properties};return"id"in this&&(V.id=this.id),V};var l5=m2,g2=y2;function y2(a,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(u5,this,n),this.length=this._features.length}function u5(a,n,s){a===15?n.version=s.readVarint():a===1?n.name=s.readString():a===5?n.extent=s.readVarint():a===2?n._features.push(s.pos):a===3?n._keys.push(s.readString()):a===4&&n._values.push(function(d){for(var m=null,_=d.readVarint()+d.pos;d.pos<_;){var v=d.readVarint()>>3;m=v===1?d.readString():v===2?d.readFloat():v===3?d.readDouble():v===4?d.readVarint64():v===5?d.readVarint():v===6?d.readSVarint():v===7?d.readBoolean():null}return m}(s))}y2.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var n=this._pbf.readVarint()+this._pbf.pos;return new l5(this._pbf,n,this.extent,this._keys,this._values)};var c5=g2;function h5(a,n,s){if(a===3){var d=new c5(s,s.readVarint()+s.pos);d.length&&(n[d.name]=d)}}Rs.VectorTile=function(a,n){this.layers=a.readFields(h5,{},n)},Rs.VectorTileFeature=m2,Rs.VectorTileLayer=g2;const d5=Rs.VectorTileFeature.types,p_=Math.pow(2,13);function wd(a,n,s,d,m,_,v,S){a.emplaceBack(n,s,2*Math.floor(d*p_)+v,m*p_*2,_*p_*2,Math.round(S))}class m_{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new oe,this.centroidVertexArray=new te,this.indexArray=new Fe,this.programConfigurations=new na(n.layers,n.zoom),this.segments=new He,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,d){this.features=[],this.hasPattern=h_("fill-extrusion",this.layers,s);for(const{feature:m,id:_,index:v,sourceLayerIndex:S}of n){const k=this.layers[0]._featureFilter.needGeometry,M=Ul(m,k);if(!this.layers[0]._featureFilter.filter(new Mr(this.zoom),M,d))continue;const D={id:_,sourceLayerIndex:S,index:v,geometry:k?M.geometry:ia(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(d_("fill-extrusion",this.layers,D,this.zoom,s)):this.addFeature(D,D.geometry,v,d,{}),s.featureIndex.insert(m,D.geometry,v,S,this.index,!0)}}addFeatures(n,s,d){for(const m of this.features){const{geometry:_}=m;this.addFeature(m,_,m.index,s,d)}}update(n,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,i5),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,n5.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,d,m,_){const v={x:0,y:0,vertexCount:0};for(const S of c_(s,500)){let k=0;for(const q of S)k+=q.length;let M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const q of S){if(q.length===0||p5(q))continue;let re=0;for(let Q=0;Q<q.length;Q++){const fe=q[Q];if(Q>=1){const ve=q[Q-1];if(!f5(fe,ve)){M.vertexLength+4>He.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const he=fe.sub(ve)._perp()._unit(),we=ve.dist(fe);re+we>32768&&(re=0),wd(this.layoutVertexArray,fe.x,fe.y,he.x,he.y,0,0,re),wd(this.layoutVertexArray,fe.x,fe.y,he.x,he.y,0,1,re),v.x+=2*fe.x,v.y+=2*fe.y,v.vertexCount+=2,re+=we,wd(this.layoutVertexArray,ve.x,ve.y,he.x,he.y,0,0,re),wd(this.layoutVertexArray,ve.x,ve.y,he.x,he.y,0,1,re),v.x+=2*ve.x,v.y+=2*ve.y,v.vertexCount+=2;const Ee=M.vertexLength;this.indexArray.emplaceBack(Ee,Ee+2,Ee+1),this.indexArray.emplaceBack(Ee+1,Ee+2,Ee+3),M.vertexLength+=4,M.primitiveLength+=2}}}}if(M.vertexLength+k>He.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray)),d5[n.type]!=="Polygon")continue;const D=[],F=[],V=M.vertexLength;for(const q of S)if(q.length!==0){q!==S[0]&&F.push(D.length/2);for(let re=0;re<q.length;re++){const Q=q[re];wd(this.layoutVertexArray,Q.x,Q.y,0,0,1,1,0),v.x+=Q.x,v.y+=Q.y,v.vertexCount+=1,D.push(Q.x),D.push(Q.y)}}const U=h2(D,F);for(let q=0;q<U.length;q+=3)this.indexArray.emplaceBack(V+U[q],V+U[q+2],V+U[q+1]);M.primitiveLength+=U.length/3,M.vertexLength+=k}for(let S=0;S<v.vertexCount;S++)this.centroidVertexArray.emplaceBack(Math.floor(v.x/v.vertexCount),Math.floor(v.y/v.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,_,m)}}function f5(a,n){return a.x===n.x&&(a.x<0||a.x>Ar)||a.y===n.y&&(a.y<0||a.y>Ar)}function p5(a){return a.every(n=>n.x<0)||a.every(n=>n.x>Ar)||a.every(n=>n.y<0)||a.every(n=>n.y>Ar)}let _2;at("FillExtrusionBucket",m_,{omit:["layers","features"]});var m5={get paint(){return _2=_2||new mi({"fill-extrusion-opacity":new dt(Ce["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Tt(Ce["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new dt(Ce["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new dt(Ce["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new $l(Ce["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Tt(Ce["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Tt(Ce["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new dt(Ce["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};function bd(a,n){return a.x*n.x+a.y*n.y}function v2(a,n){if(a.length===1){let s=0;const d=n[s++];let m;for(;!m||d.equals(m);)if(m=n[s++],!m)return 1/0;for(;s<n.length;s++){const _=n[s],v=a[0],S=m.sub(d),k=_.sub(d),M=v.sub(d),D=bd(S,S),F=bd(S,k),V=bd(k,k),U=bd(M,S),q=bd(M,k),re=D*V-F*F,Q=(V*U-F*q)/re,fe=(D*q-F*U)/re,ve=d.z*(1-Q-fe)+m.z*Q+_.z*fe;if(isFinite(ve))return ve}return 1/0}{let s=1/0;for(const d of n)s=Math.min(s,d.z);return s}}const g5=hn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:y5}=g5,_5=hn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:v5}=_5,x5=Rs.VectorTileFeature.types,w5=Math.cos(Math.PI/180*37.5),x2=Math.pow(2,14)/.5;class g_{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new de,this.layoutVertexArray2=new Se,this.indexArray=new Fe,this.programConfigurations=new na(n.layers,n.zoom),this.segments=new He,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,d){this.hasPattern=h_("line",this.layers,s);const m=this.layers[0].layout.get("line-sort-key"),_=!m.isConstant(),v=[];for(const{feature:S,id:k,index:M,sourceLayerIndex:D}of n){const F=this.layers[0]._featureFilter.needGeometry,V=Ul(S,F);if(!this.layers[0]._featureFilter.filter(new Mr(this.zoom),V,d))continue;const U=_?m.evaluate(V,{},d):void 0,q={id:k,properties:S.properties,type:S.type,sourceLayerIndex:D,index:M,geometry:F?V.geometry:ia(S),patterns:{},sortKey:U};v.push(q)}_&&v.sort((S,k)=>S.sortKey-k.sortKey);for(const S of v){const{geometry:k,index:M,sourceLayerIndex:D}=S;if(this.hasPattern){const F=d_("line",this.layers,S,this.zoom,s);this.patternFeatures.push(F)}else this.addFeature(S,k,M,d,{});s.featureIndex.insert(n[M].feature,k,M,D,this.index)}}update(n,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,d)}addFeatures(n,s,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,v5)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,y5),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,d,m,_){const v=this.layers[0].layout,S=v.get("line-join").evaluate(n,{}),k=v.get("line-cap"),M=v.get("line-miter-limit"),D=v.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const F of s)this.addLine(F,n,S,k,M,D);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,_,m)}addLine(n,s,d,m,_,v){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let fe=0;fe<n.length-1;fe++)this.totalDistance+=n[fe].dist(n[fe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=x5[s.type]==="Polygon";let k=n.length;for(;k>=2&&n[k-1].equals(n[k-2]);)k--;let M=0;for(;M<k-1&&n[M].equals(n[M+1]);)M++;if(k<(S?3:2))return;d==="bevel"&&(_=1.05);const D=this.overscaling<=16?122880/(512*this.overscaling):0,F=this.segments.prepareSegment(10*k,this.layoutVertexArray,this.indexArray);let V,U,q,re,Q;this.e1=this.e2=-1,S&&(V=n[k-2],Q=n[M].sub(V)._unit()._perp());for(let fe=M;fe<k;fe++){if(q=fe===k-1?S?n[M+1]:void 0:n[fe+1],q&&n[fe].equals(q))continue;Q&&(re=Q),V&&(U=V),V=n[fe],Q=q?q.sub(V)._unit()._perp():re,re=re||Q;let ve=re.add(Q);ve.x===0&&ve.y===0||ve._unit();const he=re.x*Q.x+re.y*Q.y,we=ve.x*Q.x+ve.y*Q.y,Ee=we!==0?1/we:1/0,Me=2*Math.sqrt(2-2*we),ot=we<w5&&U&&q,lt=re.x*Q.y-re.y*Q.x>0;if(ot&&fe>M){const qe=V.dist(U);if(qe>2*D){const et=V.sub(V.sub(U)._mult(D/qe)._round());this.updateDistance(U,et),this.addCurrentVertex(et,re,0,0,F),U=et}}const Je=U&&q;let Xe=Je?d:S?"butt":m;if(Je&&Xe==="round"&&(Ee<v?Xe="miter":Ee<=2&&(Xe="fakeround")),Xe==="miter"&&Ee>_&&(Xe="bevel"),Xe==="bevel"&&(Ee>2&&(Xe="flipbevel"),Ee<_&&(Xe="miter")),U&&this.updateDistance(U,V),Xe==="miter")ve._mult(Ee),this.addCurrentVertex(V,ve,0,0,F);else if(Xe==="flipbevel"){if(Ee>100)ve=Q.mult(-1);else{const qe=Ee*re.add(Q).mag()/re.sub(Q).mag();ve._perp()._mult(qe*(lt?-1:1))}this.addCurrentVertex(V,ve,0,0,F),this.addCurrentVertex(V,ve.mult(-1),0,0,F)}else if(Xe==="bevel"||Xe==="fakeround"){const qe=-Math.sqrt(Ee*Ee-1),et=lt?qe:0,Ke=lt?0:qe;if(U&&this.addCurrentVertex(V,re,et,Ke,F),Xe==="fakeround"){const Ve=Math.round(180*Me/Math.PI/20);for(let bt=1;bt<Ve;bt++){let ct=bt/Ve;if(ct!==.5){const Tr=ct-.5;ct+=ct*Tr*(ct-1)*((1.0904+he*(he*(3.55645-1.43519*he)-3.2452))*Tr*Tr+(.848013+he*(.215638*he-1.06021)))}const Ut=Q.sub(re)._mult(ct)._add(re)._unit()._mult(lt?-1:1);this.addHalfVertex(V,Ut.x,Ut.y,!1,lt,0,F)}}q&&this.addCurrentVertex(V,Q,-et,-Ke,F)}else if(Xe==="butt")this.addCurrentVertex(V,ve,0,0,F);else if(Xe==="square"){const qe=U?1:-1;this.addCurrentVertex(V,ve,qe,qe,F)}else Xe==="round"&&(U&&(this.addCurrentVertex(V,re,0,0,F),this.addCurrentVertex(V,re,1,1,F,!0)),q&&(this.addCurrentVertex(V,Q,-1,-1,F,!0),this.addCurrentVertex(V,Q,0,0,F)));if(ot&&fe<k-1){const qe=V.dist(q);if(qe>2*D){const et=V.add(q.sub(V)._mult(D/qe)._round());this.updateDistance(V,et),this.addCurrentVertex(et,Q,0,0,F),V=et}}}}addCurrentVertex(n,s,d,m,_,v=!1){const S=s.y*m-s.x,k=-s.y-s.x*m;this.addHalfVertex(n,s.x+s.y*d,s.y-s.x*d,v,!1,d,_),this.addHalfVertex(n,S,k,v,!0,-m,_),this.distance>x2/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,d,m,_,v))}addHalfVertex({x:n,y:s},d,m,_,v,S,k){const M=.5*(this.lineClips?this.scaledDistance*(x2-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(_?1:0),(s<<1)+(v?1:0),Math.round(63*d)+128,Math.round(63*m)+128,1+(S===0?0:S<0?-1:1)|(63&M)<<2,M>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const D=k.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,D),k.primitiveLength++),v?this.e2=D:this.e1=D}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let w2,b2;at("LineBucket",g_,{omit:["layers","patternFeatures"]});var S2={get paint(){return b2=b2||new mi({"line-opacity":new Tt(Ce.paint_line["line-opacity"]),"line-color":new Tt(Ce.paint_line["line-color"]),"line-translate":new dt(Ce.paint_line["line-translate"]),"line-translate-anchor":new dt(Ce.paint_line["line-translate-anchor"]),"line-width":new Tt(Ce.paint_line["line-width"]),"line-gap-width":new Tt(Ce.paint_line["line-gap-width"]),"line-offset":new Tt(Ce.paint_line["line-offset"]),"line-blur":new Tt(Ce.paint_line["line-blur"]),"line-dasharray":new sd(Ce.paint_line["line-dasharray"]),"line-pattern":new $l(Ce.paint_line["line-pattern"]),"line-gradient":new ld(Ce.paint_line["line-gradient"])})},get layout(){return w2=w2||new mi({"line-cap":new dt(Ce.layout_line["line-cap"]),"line-join":new Tt(Ce.layout_line["line-join"]),"line-miter-limit":new dt(Ce.layout_line["line-miter-limit"]),"line-round-limit":new dt(Ce.layout_line["line-round-limit"]),"line-sort-key":new Tt(Ce.layout_line["line-sort-key"])})}};class b5 extends Tt{possiblyEvaluate(n,s){return s=new Mr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,d,m){return s=X({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,d,m)}}let tm;function E2(a,n){return n>0?n+2*a:a}const S5=hn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),E5=hn([{name:"a_projected_pos",components:3,type:"Float32"}],4);hn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const k5=hn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);hn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const k2=hn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),T5=hn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function C5(a,n,s){return a.sections.forEach(d=>{d.text=function(m,_,v){const S=_.layout.get("text-transform").evaluate(v,{});return S==="uppercase"?m=m.toLocaleUpperCase():S==="lowercase"&&(m=m.toLocaleLowerCase()),Yi.applyArabicShaping&&(m=Yi.applyArabicShaping(m)),m}(d.text,n,s)}),a}hn([{name:"triangle",components:3,type:"Uint16"}]),hn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),hn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),hn([{type:"Float32",name:"offsetX"}]),hn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Sd={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var zn=24,T2=yr,C2=function(a,n,s,d,m){var _,v,S=8*m-d-1,k=(1<<S)-1,M=k>>1,D=-7,F=s?m-1:0,V=s?-1:1,U=a[n+F];for(F+=V,_=U&(1<<-D)-1,U>>=-D,D+=S;D>0;_=256*_+a[n+F],F+=V,D-=8);for(v=_&(1<<-D)-1,_>>=-D,D+=d;D>0;v=256*v+a[n+F],F+=V,D-=8);if(_===0)_=1-M;else{if(_===k)return v?NaN:1/0*(U?-1:1);v+=Math.pow(2,d),_-=M}return(U?-1:1)*v*Math.pow(2,_-d)},P2=function(a,n,s,d,m,_){var v,S,k,M=8*_-m-1,D=(1<<M)-1,F=D>>1,V=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,U=d?0:_-1,q=d?1:-1,re=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(S=isNaN(n)?1:0,v=D):(v=Math.floor(Math.log(n)/Math.LN2),n*(k=Math.pow(2,-v))<1&&(v--,k*=2),(n+=v+F>=1?V/k:V*Math.pow(2,1-F))*k>=2&&(v++,k/=2),v+F>=D?(S=0,v=D):v+F>=1?(S=(n*k-1)*Math.pow(2,m),v+=F):(S=n*Math.pow(2,F-1)*Math.pow(2,m),v=0));m>=8;a[s+U]=255&S,U+=q,S/=256,m-=8);for(v=v<<m|S,M+=m;M>0;a[s+U]=255&v,U+=q,v/=256,M-=8);a[s+U-q]|=128*re};function yr(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}yr.Varint=0,yr.Fixed64=1,yr.Bytes=2,yr.Fixed32=5;var y_=4294967296,I2=1/y_,M2=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Ka(a){return a.type===yr.Bytes?a.readVarint()+a.pos:a.pos+1}function lc(a,n,s){return s?4294967296*n+(a>>>0):4294967296*(n>>>0)+(a>>>0)}function A2(a,n,s){var d=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(d);for(var m=s.pos-1;m>=a;m--)s.buf[m+d]=s.buf[m]}function P5(a,n){for(var s=0;s<a.length;s++)n.writeVarint(a[s])}function I5(a,n){for(var s=0;s<a.length;s++)n.writeSVarint(a[s])}function M5(a,n){for(var s=0;s<a.length;s++)n.writeFloat(a[s])}function A5(a,n){for(var s=0;s<a.length;s++)n.writeDouble(a[s])}function z5(a,n){for(var s=0;s<a.length;s++)n.writeBoolean(a[s])}function D5(a,n){for(var s=0;s<a.length;s++)n.writeFixed32(a[s])}function R5(a,n){for(var s=0;s<a.length;s++)n.writeSFixed32(a[s])}function L5(a,n){for(var s=0;s<a.length;s++)n.writeFixed64(a[s])}function F5(a,n){for(var s=0;s<a.length;s++)n.writeSFixed64(a[s])}function rm(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+16777216*a[n+3]}function uc(a,n,s){a[s]=n,a[s+1]=n>>>8,a[s+2]=n>>>16,a[s+3]=n>>>24}function z2(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+(a[n+3]<<24)}yr.prototype={destroy:function(){this.buf=null},readFields:function(a,n,s){for(s=s||this.length;this.pos<s;){var d=this.readVarint(),m=d>>3,_=this.pos;this.type=7&d,a(m,n,this),this.pos===_&&this.skip(d)}return n},readMessage:function(a,n){return this.readFields(a,n,this.readVarint()+this.pos)},readFixed32:function(){var a=rm(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=z2(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=rm(this.buf,this.pos)+rm(this.buf,this.pos+4)*y_;return this.pos+=8,a},readSFixed64:function(){var a=rm(this.buf,this.pos)+z2(this.buf,this.pos+4)*y_;return this.pos+=8,a},readFloat:function(){var a=C2(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=C2(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var n,s,d=this.buf;return n=127&(s=d[this.pos++]),s<128?n:(n|=(127&(s=d[this.pos++]))<<7,s<128?n:(n|=(127&(s=d[this.pos++]))<<14,s<128?n:(n|=(127&(s=d[this.pos++]))<<21,s<128?n:function(m,_,v){var S,k,M=v.buf;if(S=(112&(k=M[v.pos++]))>>4,k<128||(S|=(127&(k=M[v.pos++]))<<3,k<128)||(S|=(127&(k=M[v.pos++]))<<10,k<128)||(S|=(127&(k=M[v.pos++]))<<17,k<128)||(S|=(127&(k=M[v.pos++]))<<24,k<128)||(S|=(1&(k=M[v.pos++]))<<31,k<128))return lc(m,S,_);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=d[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var a=this.readVarint()+this.pos,n=this.pos;return this.pos=a,a-n>=12&&M2?function(s,d,m){return M2.decode(s.subarray(d,m))}(this.buf,n,a):function(s,d,m){for(var _="",v=d;v<m;){var S,k,M,D=s[v],F=null,V=D>239?4:D>223?3:D>191?2:1;if(v+V>m)break;V===1?D<128&&(F=D):V===2?(192&(S=s[v+1]))==128&&(F=(31&D)<<6|63&S)<=127&&(F=null):V===3?(k=s[v+2],(192&(S=s[v+1]))==128&&(192&k)==128&&((F=(15&D)<<12|(63&S)<<6|63&k)<=2047||F>=55296&&F<=57343)&&(F=null)):V===4&&(k=s[v+2],M=s[v+3],(192&(S=s[v+1]))==128&&(192&k)==128&&(192&M)==128&&((F=(15&D)<<18|(63&S)<<12|(63&k)<<6|63&M)<=65535||F>=1114112)&&(F=null)),F===null?(F=65533,V=1):F>65535&&(F-=65536,_+=String.fromCharCode(F>>>10&1023|55296),F=56320|1023&F),_+=String.fromCharCode(F),v+=V}return _}(this.buf,n,a)},readBytes:function(){var a=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,a);return this.pos=a,n},readPackedVarint:function(a,n){if(this.type!==yr.Bytes)return a.push(this.readVarint(n));var s=Ka(this);for(a=a||[];this.pos<s;)a.push(this.readVarint(n));return a},readPackedSVarint:function(a){if(this.type!==yr.Bytes)return a.push(this.readSVarint());var n=Ka(this);for(a=a||[];this.pos<n;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==yr.Bytes)return a.push(this.readBoolean());var n=Ka(this);for(a=a||[];this.pos<n;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==yr.Bytes)return a.push(this.readFloat());var n=Ka(this);for(a=a||[];this.pos<n;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==yr.Bytes)return a.push(this.readDouble());var n=Ka(this);for(a=a||[];this.pos<n;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==yr.Bytes)return a.push(this.readFixed32());var n=Ka(this);for(a=a||[];this.pos<n;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==yr.Bytes)return a.push(this.readSFixed32());var n=Ka(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==yr.Bytes)return a.push(this.readFixed64());var n=Ka(this);for(a=a||[];this.pos<n;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==yr.Bytes)return a.push(this.readSFixed64());var n=Ka(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed64());return a},skip:function(a){var n=7&a;if(n===yr.Varint)for(;this.buf[this.pos++]>127;);else if(n===yr.Bytes)this.pos=this.readVarint()+this.pos;else if(n===yr.Fixed32)this.pos+=4;else{if(n!==yr.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(a,n){this.writeVarint(a<<3|n)},realloc:function(a){for(var n=this.length||16;n<this.pos+a;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),uc(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),uc(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),uc(this.buf,-1&a,this.pos),uc(this.buf,Math.floor(a*I2),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),uc(this.buf,-1&a,this.pos),uc(this.buf,Math.floor(a*I2),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(n,s){var d,m;if(n>=0?(d=n%4294967296|0,m=n/4294967296|0):(m=~(-n/4294967296),4294967295^(d=~(-n%4294967296))?d=d+1|0:(d=0,m=m+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(_,v,S){S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,S.buf[S.pos]=127&(_>>>=7)}(d,0,s),function(_,v){var S=(7&_)<<4;v.buf[v.pos++]|=S|((_>>>=3)?128:0),_&&(v.buf[v.pos++]=127&_|((_>>>=7)?128:0),_&&(v.buf[v.pos++]=127&_|((_>>>=7)?128:0),_&&(v.buf[v.pos++]=127&_|((_>>>=7)?128:0),_&&(v.buf[v.pos++]=127&_|((_>>>=7)?128:0),_&&(v.buf[v.pos++]=127&_)))))}(m,s)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(Boolean(a))},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var n=this.pos;this.pos=function(d,m,_){for(var v,S,k=0;k<m.length;k++){if((v=m.charCodeAt(k))>55295&&v<57344){if(!S){v>56319||k+1===m.length?(d[_++]=239,d[_++]=191,d[_++]=189):S=v;continue}if(v<56320){d[_++]=239,d[_++]=191,d[_++]=189,S=v;continue}v=S-55296<<10|v-56320|65536,S=null}else S&&(d[_++]=239,d[_++]=191,d[_++]=189,S=null);v<128?d[_++]=v:(v<2048?d[_++]=v>>6|192:(v<65536?d[_++]=v>>12|224:(d[_++]=v>>18|240,d[_++]=v>>12&63|128),d[_++]=v>>6&63|128),d[_++]=63&v|128)}return _}(this.buf,a,this.pos);var s=this.pos-n;s>=128&&A2(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(a){this.realloc(4),P2(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),P2(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var n=a.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=a[s]},writeRawMessage:function(a,n){this.pos++;var s=this.pos;a(n,this);var d=this.pos-s;d>=128&&A2(s,d,this),this.pos=s-1,this.writeVarint(d),this.pos+=d},writeMessage:function(a,n,s){this.writeTag(a,yr.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(a,n){n.length&&this.writeMessage(a,P5,n)},writePackedSVarint:function(a,n){n.length&&this.writeMessage(a,I5,n)},writePackedBoolean:function(a,n){n.length&&this.writeMessage(a,z5,n)},writePackedFloat:function(a,n){n.length&&this.writeMessage(a,M5,n)},writePackedDouble:function(a,n){n.length&&this.writeMessage(a,A5,n)},writePackedFixed32:function(a,n){n.length&&this.writeMessage(a,D5,n)},writePackedSFixed32:function(a,n){n.length&&this.writeMessage(a,R5,n)},writePackedFixed64:function(a,n){n.length&&this.writeMessage(a,L5,n)},writePackedSFixed64:function(a,n){n.length&&this.writeMessage(a,F5,n)},writeBytesField:function(a,n){this.writeTag(a,yr.Bytes),this.writeBytes(n)},writeFixed32Field:function(a,n){this.writeTag(a,yr.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(a,n){this.writeTag(a,yr.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(a,n){this.writeTag(a,yr.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(a,n){this.writeTag(a,yr.Fixed64),this.writeSFixed64(n)},writeVarintField:function(a,n){this.writeTag(a,yr.Varint),this.writeVarint(n)},writeSVarintField:function(a,n){this.writeTag(a,yr.Varint),this.writeSVarint(n)},writeStringField:function(a,n){this.writeTag(a,yr.Bytes),this.writeString(n)},writeFloatField:function(a,n){this.writeTag(a,yr.Fixed32),this.writeFloat(n)},writeDoubleField:function(a,n){this.writeTag(a,yr.Fixed64),this.writeDouble(n)},writeBooleanField:function(a,n){this.writeVarintField(a,Boolean(n))}};var Ls,__=b(T2);function O5(a,n,s){a===1&&s.readMessage($5,n)}function $5(a,n,s){if(a===3){const{id:d,bitmap:m,width:_,height:v,left:S,top:k,advance:M}=s.readMessage(B5,{});n.push({id:d,bitmap:new gd({width:_+6,height:v+6},m),metrics:{width:_,height:v,left:S,top:k,advance:M}})}}function B5(a,n,s){a===1?n.id=s.readVarint():a===2?n.bitmap=s.readBytes():a===3?n.width=s.readVarint():a===4?n.height=s.readVarint():a===5?n.left=s.readSVarint():a===6?n.top=s.readSVarint():a===7&&(n.advance=s.readVarint())}function D2(a){let n=0,s=0;for(const v of a)n+=v.w*v.h,s=Math.max(s,v.w);a.sort((v,S)=>S.h-v.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let m=0,_=0;for(const v of a)for(let S=d.length-1;S>=0;S--){const k=d[S];if(!(v.w>k.w||v.h>k.h)){if(v.x=k.x,v.y=k.y,_=Math.max(_,v.y+v.h),m=Math.max(m,v.x+v.w),v.w===k.w&&v.h===k.h){const M=d.pop();S<d.length&&(d[S]=M)}else v.h===k.h?(k.x+=v.w,k.w-=v.w):v.w===k.w?(k.y+=v.h,k.h-=v.h):(d.push({x:k.x+v.w,y:k.y,w:k.w-v.w,h:v.h}),k.y+=v.h,k.h-=v.h);break}}return{w:m,h:_,fill:n/(m*_)||0}}class v_{constructor(n,{pixelRatio:s,version:d,stretchX:m,stretchY:_,content:v}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=m,this.stretchY=_,this.content=v,this.version=d}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class R2{constructor(n,s){const d={},m={};this.haveRenderCallbacks=[];const _=[];this.addImages(n,d,_),this.addImages(s,m,_);const{w:v,h:S}=D2(_),k=new co({width:v||1,height:S||1});for(const M in n){const D=n[M],F=d[M].paddedRect;co.copy(D.data,k,{x:0,y:0},{x:F.x+1,y:F.y+1},D.data)}for(const M in s){const D=s[M],F=m[M].paddedRect,V=F.x+1,U=F.y+1,q=D.data.width,re=D.data.height;co.copy(D.data,k,{x:0,y:0},{x:V,y:U},D.data),co.copy(D.data,k,{x:0,y:re-1},{x:V,y:U-1},{width:q,height:1}),co.copy(D.data,k,{x:0,y:0},{x:V,y:U+re},{width:q,height:1}),co.copy(D.data,k,{x:q-1,y:0},{x:V-1,y:U},{width:1,height:re}),co.copy(D.data,k,{x:0,y:0},{x:V+q,y:U},{width:1,height:re})}this.image=k,this.iconPositions=d,this.patternPositions=m}addImages(n,s,d){for(const m in n){const _=n[m],v={x:0,y:0,w:_.data.width+2,h:_.data.height+2};d.push(v),s[m]=new v_(v,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in n.updatedImages)this.patchUpdatedImage(this.iconPositions[d],n.getImage(d),s),this.patchUpdatedImage(this.patternPositions[d],n.getImage(d),s)}patchUpdatedImage(n,s,d){if(!n||!s||n.version===s.version)return;n.version=s.version;const[m,_]=n.tl;d.update(s.data,void 0,{x:m,y:_})}}at("ImagePosition",v_),at("ImageAtlas",R2),u.WritingMode=void 0,(Ls=u.WritingMode||(u.WritingMode={}))[Ls.none=0]="none",Ls[Ls.horizontal=1]="horizontal",Ls[Ls.vertical=2]="vertical",Ls[Ls.horizontalOnly=3]="horizontalOnly";const nm=-17;class Ed{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const d=new Ed;return d.scale=n||1,d.fontStack=s,d}static forImage(n){const s=new Ed;return s.imageName=n,s}}class cc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const d=new cc;for(let m=0;m<n.sections.length;m++){const _=n.sections[m];_.image?d.addImageSection(_):d.addTextSection(_,s)}return d}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let d=0;d<n.length;d++){const m=n.charCodeAt(d+1)||null,_=n.charCodeAt(d-1)||null;s+=m&&Bp(m)&&!Sd[n[d+1]]||_&&Bp(_)&&!Sd[n[d-1]]||!Sd[n[d]]?n[d]:Sd[n[d]]}return s}(this.text)}trim(){let n=0;for(let d=0;d<this.text.length&&om[this.text.charCodeAt(d)];d++)n++;let s=this.text.length;for(let d=this.text.length-1;d>=0&&d>=n&&om[this.text.charCodeAt(d)];d--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const d=new cc;return d.text=this.text.substring(n,s),d.sectionIndex=this.sectionIndex.slice(n,s),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(Ed.forText(n.scale,n.fontStack||s));const d=this.sections.length-1;for(let m=0;m<n.text.length;++m)this.sectionIndex.push(d)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void ke("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Ed.forImage(s)),this.sectionIndex.push(this.sections.length-1)):ke("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function im(a,n,s,d,m,_,v,S,k,M,D,F,V,U,q,re){const Q=cc.fromFeature(a,m);let fe;F===u.WritingMode.vertical&&Q.verticalizePunctuation();const{processBidirectionalText:ve,processStyledBidirectionalText:he}=Yi;if(ve&&Q.sections.length===1){fe=[];const Me=ve(Q.toString(),x_(Q,M,_,n,d,U,q));for(const ot of Me){const lt=new cc;lt.text=ot,lt.sections=Q.sections;for(let Je=0;Je<ot.length;Je++)lt.sectionIndex.push(0);fe.push(lt)}}else if(he){fe=[];const Me=he(Q.text,Q.sectionIndex,x_(Q,M,_,n,d,U,q));for(const ot of Me){const lt=new cc;lt.text=ot[0],lt.sectionIndex=ot[1],lt.sections=Q.sections,fe.push(lt)}}else fe=function(Me,ot){const lt=[],Je=Me.text;let Xe=0;for(const qe of ot)lt.push(Me.substring(Xe,qe)),Xe=qe;return Xe<Je.length&&lt.push(Me.substring(Xe,Je.length)),lt}(Q,x_(Q,M,_,n,d,U,q));const we=[],Ee={positionedLines:we,text:Q.toString(),top:D[1],bottom:D[1],left:D[0],right:D[0],writingMode:F,iconsInText:!1,verticalizable:!1};return function(Me,ot,lt,Je,Xe,qe,et,Ke,Ve,bt,ct,Ut){let Tr=0,zr=nm,xn=0,fo=0;const Un=Ke==="right"?1:Ke==="left"?0:.5;let dn=0;for(const fn of Xe){fn.trim();const Gn=fn.getMaxScale(),ei=(Gn-1)*zn,yi={positionedGlyphs:[],lineOffset:0};Me.positionedLines[dn]=yi;const Ai=yi.positionedGlyphs;let zi=0;if(!fn.length()){zr+=qe,++dn;continue}for(let Wn=0;Wn<fn.length();Wn++){const jt=fn.getSection(Wn),Ji=fn.getSectionIndex(Wn),qn=fn.getCharCode(Wn);let ti=0,No=null,oa=null,aa=null,Ja=zn;const Uo=!(Ve===u.WritingMode.horizontal||!ct&&!Nu(qn)||ct&&(om[qn]||(Cn=qn,Ye.Arabic(Cn)||Ye["Arabic Supplement"](Cn)||Ye["Arabic Extended-A"](Cn)||Ye["Arabic Presentation Forms-A"](Cn)||Ye["Arabic Presentation Forms-B"](Cn))));if(jt.imageName){const po=Je[jt.imageName];if(!po)continue;aa=jt.imageName,Me.iconsInText=Me.iconsInText||!0,oa=po.paddedRect;const Di=po.displaySize;jt.scale=jt.scale*zn/Ut,No={width:Di[0],height:Di[1],left:1,top:-3,advance:Uo?Di[1]:Di[0]},ti=ei+(zn-Di[1]*jt.scale),Ja=No.advance;const Qa=Uo?Di[0]*jt.scale-zn*Gn:Di[1]*jt.scale-zn*Gn;Qa>0&&Qa>zi&&(zi=Qa)}else{const po=lt[jt.fontStack],Di=po&&po[qn];if(Di&&Di.rect)oa=Di.rect,No=Di.metrics;else{const Qa=ot[jt.fontStack],Pd=Qa&&Qa[qn];if(!Pd)continue;No=Pd.metrics}ti=(Gn-jt.scale)*zn}Uo?(Me.verticalizable=!0,Ai.push({glyph:qn,imageName:aa,x:Tr,y:zr+ti,vertical:Uo,scale:jt.scale,fontStack:jt.fontStack,sectionIndex:Ji,metrics:No,rect:oa}),Tr+=Ja*jt.scale+bt):(Ai.push({glyph:qn,imageName:aa,x:Tr,y:zr+ti,vertical:Uo,scale:jt.scale,fontStack:jt.fontStack,sectionIndex:Ji,metrics:No,rect:oa}),Tr+=No.advance*jt.scale+bt)}Ai.length!==0&&(xn=Math.max(Tr-bt,xn),U5(Ai,0,Ai.length-1,Un,zi)),Tr=0;const Xr=qe*Gn+zi;yi.lineOffset=Math.max(zi,ei),zr+=Xr,fo=Math.max(Xr,fo),++dn}var Cn;const jn=zr-nm,{horizontalAlign:Qn,verticalAlign:Mi}=w_(et);(function(fn,Gn,ei,yi,Ai,zi,Xr,Wn,jt){const Ji=(Gn-ei)*Ai;let qn=0;qn=zi!==Xr?-Wn*yi-nm:(-yi*jt+.5)*Xr;for(const ti of fn)for(const No of ti.positionedGlyphs)No.x+=Ji,No.y+=qn})(Me.positionedLines,Un,Qn,Mi,xn,fo,qe,jn,Xe.length),Me.top+=-Mi*jn,Me.bottom=Me.top+jn,Me.left+=-Qn*xn,Me.right=Me.left+xn}(Ee,n,s,d,fe,v,S,k,F,M,V,re),!function(Me){for(const ot of Me)if(ot.positionedGlyphs.length!==0)return!1;return!0}(we)&&Ee}const om={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},V5={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function L2(a,n,s,d,m,_){if(n.imageName){const v=d[n.imageName];return v?v.displaySize[0]*n.scale*zn/_+m:0}{const v=s[n.fontStack],S=v&&v[a];return S?S.metrics.advance*n.scale+m:0}}function F2(a,n,s,d){const m=Math.pow(a-n,2);return d?a<n?m/2:2*m:m+Math.abs(s)*s}function N5(a,n,s){let d=0;return a===10&&(d-=1e4),s&&(d+=150),a!==40&&a!==65288||(d+=50),n!==41&&n!==65289||(d+=50),d}function O2(a,n,s,d,m,_){let v=null,S=F2(n,s,m,_);for(const k of d){const M=F2(n-k.x,s,m,_)+k.badness;M<=S&&(v=k,S=M)}return{index:a,x:n,priorBreak:v,badness:S}}function $2(a){return a?$2(a.priorBreak).concat(a.index):[]}function x_(a,n,s,d,m,_,v){if(_!=="point")return[];if(!a)return[];const S=[],k=function(V,U,q,re,Q,fe){let ve=0;for(let he=0;he<V.length();he++){const we=V.getSection(he);ve+=L2(V.getCharCode(he),we,re,Q,U,fe)}return ve/Math.max(1,Math.ceil(ve/q))}(a,n,s,d,m,v),M=a.text.indexOf("\u200B")>=0;let D=0;for(let V=0;V<a.length();V++){const U=a.getSection(V),q=a.getCharCode(V);if(om[q]||(D+=L2(q,U,d,m,n,v)),V<a.length()-1){const re=!((F=q)<11904||!(Ye["Bopomofo Extended"](F)||Ye.Bopomofo(F)||Ye["CJK Compatibility Forms"](F)||Ye["CJK Compatibility Ideographs"](F)||Ye["CJK Compatibility"](F)||Ye["CJK Radicals Supplement"](F)||Ye["CJK Strokes"](F)||Ye["CJK Symbols and Punctuation"](F)||Ye["CJK Unified Ideographs Extension A"](F)||Ye["CJK Unified Ideographs"](F)||Ye["Enclosed CJK Letters and Months"](F)||Ye["Halfwidth and Fullwidth Forms"](F)||Ye.Hiragana(F)||Ye["Ideographic Description Characters"](F)||Ye["Kangxi Radicals"](F)||Ye["Katakana Phonetic Extensions"](F)||Ye.Katakana(F)||Ye["Vertical Forms"](F)||Ye["Yi Radicals"](F)||Ye["Yi Syllables"](F)));(V5[q]||re||U.imageName)&&S.push(O2(V+1,D,k,S,N5(q,a.getCharCode(V+1),re&&M),!1))}}var F;return $2(O2(a.length(),D,k,S,0,!0))}function w_(a){let n=.5,s=.5;switch(a){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function U5(a,n,s,d,m){if(!d&&!m)return;const _=a[s],v=(a[s].x+_.metrics.advance*_.scale)*d;for(let S=n;S<=s;S++)a[S].x-=v,a[S].y+=m}function j5(a,n,s){const{horizontalAlign:d,verticalAlign:m}=w_(s),_=n[0]-a.displaySize[0]*d,v=n[1]-a.displaySize[1]*m;return{image:a,top:v,bottom:v+a.displaySize[1],left:_,right:_+a.displaySize[0]}}function B2(a,n,s,d,m,_){const v=a.image;let S;if(v.content){const Q=v.content,fe=v.pixelRatio||1;S=[Q[0]/fe,Q[1]/fe,v.displaySize[0]-Q[2]/fe,v.displaySize[1]-Q[3]/fe]}const k=n.left*_,M=n.right*_;let D,F,V,U;s==="width"||s==="both"?(U=m[0]+k-d[3],F=m[0]+M+d[1]):(U=m[0]+(k+M-v.displaySize[0])/2,F=U+v.displaySize[0]);const q=n.top*_,re=n.bottom*_;return s==="height"||s==="both"?(D=m[1]+q-d[0],V=m[1]+re+d[2]):(D=m[1]+(q+re-v.displaySize[1])/2,V=D+v.displaySize[1]),{image:v,top:D,right:F,bottom:V,left:U,collisionPadding:S}}const Ya=128,Fs=32640;function V2(a,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Mr(a+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:m}=s;let _=0;for(;_<d.length&&d[_]<=a;)_++;_=Math.max(0,_-1);let v=_;for(;v<d.length&&d[v]<a+1;)v++;v=Math.min(d.length-1,v);const S=d[_],k=d[v];return s.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:k,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:k,minSize:s.evaluate(new Mr(S)),maxSize:s.evaluate(new Mr(k)),interpolationType:m}}}function b_(a,n,s){let d="never";const m=a.get(n);return m?d=m:a.get(s)&&(d="always"),d}const G5=Rs.VectorTileFeature.types,W5=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function am(a,n,s,d,m,_,v,S,k,M,D,F,V){const U=S?Math.min(Fs,Math.round(S[0])):0,q=S?Math.min(Fs,Math.round(S[1])):0;a.emplaceBack(n,s,Math.round(32*d),Math.round(32*m),_,v,(U<<1)+(k?1:0),q,16*M,16*D,256*F,256*V)}function S_(a,n,s){a.emplaceBack(n.x,n.y,s),a.emplaceBack(n.x,n.y,s),a.emplaceBack(n.x,n.y,s),a.emplaceBack(n.x,n.y,s)}function q5(a){for(const n of a.sections)if(Vp(n.text))return!0;return!1}class E_{constructor(n){this.layoutVertexArray=new be,this.indexArray=new Fe,this.programConfigurations=n,this.segments=new He,this.dynamicLayoutVertexArray=new Te,this.opacityVertexArray=new De,this.hasVisibleVertices=!1,this.placedSymbolArray=new E}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,d,m){this.isEmpty()||(d&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,S5.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,E5.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,W5,!0),this.opacityVertexBuffer.itemSize=1),(d||m)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}at("SymbolBuffers",E_);class k_{constructor(n,s,d){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new d,this.segments=new He,this.collisionVertexArray=new Ue}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,k5.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}at("CollisionBuffers",k_);class hc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(v=>v.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=n_([]),this.placementViewportMatrix=n_([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=V2(this.zoom,s["text-size"]),this.iconSizeData=V2(this.zoom,s["icon-size"]);const d=this.layers[0].layout,m=d.get("symbol-sort-key"),_=d.get("symbol-z-order");this.canOverlap=b_(d,"text-overlap","text-allow-overlap")!=="never"||b_(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(v=>u.WritingMode[v])),this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id),this.sourceID=n.sourceID}createArrays(){this.text=new E_(new na(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new E_(new na(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new A,this.lineVertexArray=new L,this.symbolInstances=new C}calculateGlyphDependencies(n,s,d,m,_){for(let v=0;v<n.length;v++)if(s[n.charCodeAt(v)]=!0,(d||m)&&_){const S=Sd[n.charAt(v)];S&&(s[S.charCodeAt(0)]=!0)}}populate(n,s,d){const m=this.layers[0],_=m.layout,v=_.get("text-font"),S=_.get("text-field"),k=_.get("icon-image"),M=(S.value.kind!=="constant"||S.value.value instanceof Ti&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(v.value.kind!=="constant"||v.value.value.length>0),D=k.value.kind!=="constant"||!!k.value.value||Object.keys(k.parameters).length>0,F=_.get("symbol-sort-key");if(this.features=[],!M&&!D)return;const V=s.iconDependencies,U=s.glyphDependencies,q=s.availableImages,re=new Mr(this.zoom);for(const{feature:Q,id:fe,index:ve,sourceLayerIndex:he}of n){const we=m._featureFilter.needGeometry,Ee=Ul(Q,we);if(!m._featureFilter.filter(re,Ee,d))continue;let Me,ot;if(we||(Ee.geometry=ia(Q)),M){const Je=m.getValueAndResolveTokens("text-field",Ee,d,q),Xe=Ti.factory(Je);q5(Xe)&&(this.hasRTLText=!0),(!this.hasRTLText||id()==="unavailable"||this.hasRTLText&&Yi.isParsed())&&(Me=C5(Xe,m,Ee))}if(D){const Je=m.getValueAndResolveTokens("icon-image",Ee,d,q);ot=Je instanceof Vn?Je:Vn.fromString(Je)}if(!Me&&!ot)continue;const lt=this.sortFeaturesByKey?F.evaluate(Ee,{},d):void 0;if(this.features.push({id:fe,text:Me,icon:ot,index:ve,sourceLayerIndex:he,geometry:Ee.geometry,properties:Q.properties,type:G5[Q.type],sortKey:lt}),ot&&(V[ot.name]=!0),Me){const Je=v.evaluate(Ee,{},d).join(","),Xe=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(u.WritingMode.vertical)>=0;for(const qe of Me.sections)if(qe.image)V[qe.image.name]=!0;else{const et=Vu(Me.toString()),Ke=qe.fontStack||Je,Ve=U[Ke]=U[Ke]||{};this.calculateGlyphDependencies(qe.text,Ve,Xe,this.allowVerticalPlacement,et)}}}_.get("symbol-placement")==="line"&&(this.features=function(Q){const fe={},ve={},he=[];let we=0;function Ee(Je){he.push(Q[Je]),we++}function Me(Je,Xe,qe){const et=ve[Je];return delete ve[Je],ve[Xe]=et,he[et].geometry[0].pop(),he[et].geometry[0]=he[et].geometry[0].concat(qe[0]),et}function ot(Je,Xe,qe){const et=fe[Xe];return delete fe[Xe],fe[Je]=et,he[et].geometry[0].shift(),he[et].geometry[0]=qe[0].concat(he[et].geometry[0]),et}function lt(Je,Xe,qe){const et=qe?Xe[0][Xe[0].length-1]:Xe[0][0];return`${Je}:${et.x}:${et.y}`}for(let Je=0;Je<Q.length;Je++){const Xe=Q[Je],qe=Xe.geometry,et=Xe.text?Xe.text.toString():null;if(!et){Ee(Je);continue}const Ke=lt(et,qe),Ve=lt(et,qe,!0);if(Ke in ve&&Ve in fe&&ve[Ke]!==fe[Ve]){const bt=ot(Ke,Ve,qe),ct=Me(Ke,Ve,he[bt].geometry);delete fe[Ke],delete ve[Ve],ve[lt(et,he[ct].geometry,!0)]=ct,he[bt].geometry=null}else Ke in ve?Me(Ke,Ve,qe):Ve in fe?ot(Ke,Ve,qe):(Ee(Je),fe[Ke]=we-1,ve[Ve]=we-1)}return he.filter(Je=>Je.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Q,fe)=>Q.sortKey-fe.sortKey)}update(n,s,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,d),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const d=this.lineVertexArray.length;if(n.segment!==void 0){let m=n.dist(s[n.segment+1]),_=n.dist(s[n.segment]);const v={};for(let S=n.segment+1;S<s.length;S++)v[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:m},S<s.length-1&&(m+=s[S+1].dist(s[S]));for(let S=n.segment||0;S>=0;S--)v[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:_},S>0&&(_+=s[S-1].dist(s[S]));for(let S=0;S<s.length;S++){const k=v[S];this.lineVertexArray.emplaceBack(k.x,k.y,k.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(n,s,d,m,_,v,S,k,M,D,F,V){const U=n.indexArray,q=n.layoutVertexArray,re=n.segments.prepareSegment(4*s.length,q,U,this.canOverlap?v.sortKey:void 0),Q=this.glyphOffsetArray.length,fe=re.vertexLength,ve=this.allowVerticalPlacement&&S===u.WritingMode.vertical?Math.PI/2:0,he=v.text&&v.text.sections;for(let we=0;we<s.length;we++){const{tl:Ee,tr:Me,bl:ot,br:lt,tex:Je,pixelOffsetTL:Xe,pixelOffsetBR:qe,minFontScaleX:et,minFontScaleY:Ke,glyphOffset:Ve,isSDF:bt,sectionIndex:ct}=s[we],Ut=re.vertexLength,Tr=Ve[1];am(q,k.x,k.y,Ee.x,Tr+Ee.y,Je.x,Je.y,d,bt,Xe.x,Xe.y,et,Ke),am(q,k.x,k.y,Me.x,Tr+Me.y,Je.x+Je.w,Je.y,d,bt,qe.x,Xe.y,et,Ke),am(q,k.x,k.y,ot.x,Tr+ot.y,Je.x,Je.y+Je.h,d,bt,Xe.x,qe.y,et,Ke),am(q,k.x,k.y,lt.x,Tr+lt.y,Je.x+Je.w,Je.y+Je.h,d,bt,qe.x,qe.y,et,Ke),S_(n.dynamicLayoutVertexArray,k,ve),U.emplaceBack(Ut,Ut+1,Ut+2),U.emplaceBack(Ut+1,Ut+2,Ut+3),re.vertexLength+=4,re.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ve[0]),we!==s.length-1&&ct===s[we+1].sectionIndex||n.programConfigurations.populatePaintArrays(q.length,v,v.index,{},V,he&&he[ct])}n.placedSymbolArray.emplaceBack(k.x,k.y,Q,this.glyphOffsetArray.length-Q,fe,M,D,k.segment,d?d[0]:0,d?d[1]:0,m[0],m[1],S,0,!1,0,F)}_addCollisionDebugVertex(n,s,d,m,_,v){return s.emplaceBack(0,0),n.emplaceBack(d.x,d.y,m,_,Math.round(v.x),Math.round(v.y))}addCollisionDebugVertices(n,s,d,m,_,v,S){const k=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),M=k.vertexLength,D=_.layoutVertexArray,F=_.collisionVertexArray,V=S.anchorX,U=S.anchorY;this._addCollisionDebugVertex(D,F,v,V,U,new I(n,s)),this._addCollisionDebugVertex(D,F,v,V,U,new I(d,s)),this._addCollisionDebugVertex(D,F,v,V,U,new I(d,m)),this._addCollisionDebugVertex(D,F,v,V,U,new I(n,m)),k.vertexLength+=4;const q=_.indexArray;q.emplaceBack(M,M+1),q.emplaceBack(M+1,M+2),q.emplaceBack(M+2,M+3),q.emplaceBack(M+3,M),k.primitiveLength+=4}addDebugCollisionBoxes(n,s,d,m){for(let _=n;_<s;_++){const v=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(v.x1,v.y1,v.x2,v.y2,m?this.textCollisionBox:this.iconCollisionBox,v.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new k_($e,k2.members,tt),this.iconCollisionBox=new k_($e,k2.members,tt);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,d,m,_,v,S,k,M){const D={};for(let F=s;F<d;F++){const V=n.get(F);D.textBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},D.textFeatureIndex=V.featureIndex;break}for(let F=m;F<_;F++){const V=n.get(F);D.verticalTextBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},D.verticalTextFeatureIndex=V.featureIndex;break}for(let F=v;F<S;F++){const V=n.get(F);D.iconBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},D.iconFeatureIndex=V.featureIndex;break}for(let F=k;F<M;F++){const V=n.get(F);D.verticalIconBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},D.verticalIconFeatureIndex=V.featureIndex;break}return D}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const d=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const d=n.placedSymbolArray.get(s),m=d.vertexStartIndex+4*d.numGlyphs;for(let _=d.vertexStartIndex;_<m;_+=4)n.indexArray.emplaceBack(_,_+1,_+2),n.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),d=Math.cos(n),m=[],_=[],v=[];for(let S=0;S<this.symbolInstances.length;++S){v.push(S);const k=this.symbolInstances.get(S);m.push(0|Math.round(s*k.anchorX+d*k.anchorY)),_.push(k.featureIndex)}return v.sort((S,k)=>m[S]-m[k]||_[k]-_[S]),v}addToSortKeyRanges(n,s){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===s?d.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const d=this.symbolInstances.get(s);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((m,_,v)=>{m>=0&&v.indexOf(m)===_&&this.addIndicesForPlacedSymbol(this.text,m)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let N2,U2;at("SymbolBucket",hc,{omit:["layers","collisionBoxArray","features","compareText"]}),hc.MAX_GLYPHS=65535,hc.addDynamicAttributes=S_;var T_={get paint(){return U2=U2||new mi({"icon-opacity":new Tt(Ce.paint_symbol["icon-opacity"]),"icon-color":new Tt(Ce.paint_symbol["icon-color"]),"icon-halo-color":new Tt(Ce.paint_symbol["icon-halo-color"]),"icon-halo-width":new Tt(Ce.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Tt(Ce.paint_symbol["icon-halo-blur"]),"icon-translate":new dt(Ce.paint_symbol["icon-translate"]),"icon-translate-anchor":new dt(Ce.paint_symbol["icon-translate-anchor"]),"text-opacity":new Tt(Ce.paint_symbol["text-opacity"]),"text-color":new Tt(Ce.paint_symbol["text-color"],{runtimeType:Ur,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new Tt(Ce.paint_symbol["text-halo-color"]),"text-halo-width":new Tt(Ce.paint_symbol["text-halo-width"]),"text-halo-blur":new Tt(Ce.paint_symbol["text-halo-blur"]),"text-translate":new dt(Ce.paint_symbol["text-translate"]),"text-translate-anchor":new dt(Ce.paint_symbol["text-translate-anchor"])})},get layout(){return N2=N2||new mi({"symbol-placement":new dt(Ce.layout_symbol["symbol-placement"]),"symbol-spacing":new dt(Ce.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new dt(Ce.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Tt(Ce.layout_symbol["symbol-sort-key"]),"symbol-z-order":new dt(Ce.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new dt(Ce.layout_symbol["icon-allow-overlap"]),"icon-overlap":new dt(Ce.layout_symbol["icon-overlap"]),"icon-ignore-placement":new dt(Ce.layout_symbol["icon-ignore-placement"]),"icon-optional":new dt(Ce.layout_symbol["icon-optional"]),"icon-rotation-alignment":new dt(Ce.layout_symbol["icon-rotation-alignment"]),"icon-size":new Tt(Ce.layout_symbol["icon-size"]),"icon-text-fit":new dt(Ce.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new dt(Ce.layout_symbol["icon-text-fit-padding"]),"icon-image":new Tt(Ce.layout_symbol["icon-image"]),"icon-rotate":new Tt(Ce.layout_symbol["icon-rotate"]),"icon-padding":new Tt(Ce.layout_symbol["icon-padding"]),"icon-keep-upright":new dt(Ce.layout_symbol["icon-keep-upright"]),"icon-offset":new Tt(Ce.layout_symbol["icon-offset"]),"icon-anchor":new Tt(Ce.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new dt(Ce.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new dt(Ce.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new dt(Ce.layout_symbol["text-rotation-alignment"]),"text-field":new Tt(Ce.layout_symbol["text-field"]),"text-font":new Tt(Ce.layout_symbol["text-font"]),"text-size":new Tt(Ce.layout_symbol["text-size"]),"text-max-width":new Tt(Ce.layout_symbol["text-max-width"]),"text-line-height":new dt(Ce.layout_symbol["text-line-height"]),"text-letter-spacing":new Tt(Ce.layout_symbol["text-letter-spacing"]),"text-justify":new Tt(Ce.layout_symbol["text-justify"]),"text-radial-offset":new Tt(Ce.layout_symbol["text-radial-offset"]),"text-variable-anchor":new dt(Ce.layout_symbol["text-variable-anchor"]),"text-anchor":new Tt(Ce.layout_symbol["text-anchor"]),"text-max-angle":new dt(Ce.layout_symbol["text-max-angle"]),"text-writing-mode":new dt(Ce.layout_symbol["text-writing-mode"]),"text-rotate":new Tt(Ce.layout_symbol["text-rotate"]),"text-padding":new dt(Ce.layout_symbol["text-padding"]),"text-keep-upright":new dt(Ce.layout_symbol["text-keep-upright"]),"text-transform":new Tt(Ce.layout_symbol["text-transform"]),"text-offset":new Tt(Ce.layout_symbol["text-offset"]),"text-allow-overlap":new dt(Ce.layout_symbol["text-allow-overlap"]),"text-overlap":new dt(Ce.layout_symbol["text-overlap"]),"text-ignore-placement":new dt(Ce.layout_symbol["text-ignore-placement"]),"text-optional":new dt(Ce.layout_symbol["text-optional"])})}};class j2{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:yn,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}at("FormatSectionOverride",j2,{omit:["defaultValue"]});class sm extends $o{constructor(n){super(n,T_)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const m=[];for(const _ of d)m.indexOf(_)<0&&m.push(_);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,d,m){const _=this.layout.get(n).evaluate(s,{},d,m),v=this._unevaluatedLayout._values[n];return v.isDataDriven()||zu(v.value)||!_?_:function(S,k){return k.replace(/{([^{}]+)}/g,(M,D)=>D in S?String(S[D]):"")}(s.properties,_)}createBucket(n){return new hc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of T_.paint.overridableProperties){if(!sm.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),d=new j2(s),m=new qh(d,s.property.specification);let _=null;_=s.value.kind==="constant"||s.value.kind==="source"?new Zh("source",m):new Wt("composite",m,s.value.zoomStops),this.paint._values[n]=new Oo(s.property,_,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,d){return!(!this.layout||s.isDataDriven()||d.isDataDriven())&&sm.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const d=n.get("text-field"),m=T_.paint.properties[s];let _=!1;const v=S=>{for(const k of S)if(m.overrides&&m.overrides.hasOverride(k))return void(_=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Ti)v(d.value.value.sections);else if(d.value.kind==="source"){const S=M=>{_||(M instanceof Ua&&Fr(M.value)===Zi?v(M.value.sections):M instanceof Mu?v(M.sections):M.eachChild(S))},k=d.value;k._styleExpression&&S(k._styleExpression.expression)}return _}}let G2;var Z5={get paint(){return G2=G2||new mi({"background-color":new dt(Ce.paint_background["background-color"]),"background-pattern":new sd(Ce.paint_background["background-pattern"]),"background-opacity":new dt(Ce.paint_background["background-opacity"])})}};let W2;var H5={get paint(){return W2=W2||new mi({"raster-opacity":new dt(Ce.paint_raster["raster-opacity"]),"raster-hue-rotate":new dt(Ce.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new dt(Ce.paint_raster["raster-brightness-min"]),"raster-brightness-max":new dt(Ce.paint_raster["raster-brightness-max"]),"raster-saturation":new dt(Ce.paint_raster["raster-saturation"]),"raster-contrast":new dt(Ce.paint_raster["raster-contrast"]),"raster-resampling":new dt(Ce.paint_raster["raster-resampling"]),"raster-fade-duration":new dt(Ce.paint_raster["raster-fade-duration"])})}};class X5 extends $o{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const K5={circle:class extends $o{constructor(a){super(a,Oz)}createBucket(a){return new e_(a)}queryRadius(a){const n=a;return pd("circle-radius",this,n)+pd("circle-stroke-width",this,n)+Hp(this.paint.get("circle-translate"))}queryIntersectsFeature(a,n,s,d,m,_,v,S){const k=Xp(a,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),_.angle,v),M=this.paint.get("circle-radius").evaluate(n,s)+this.paint.get("circle-stroke-width").evaluate(n,s),D=this.paint.get("circle-pitch-alignment")==="map",F=D?k:function(U,q){return U.map(re=>t2(re,q))}(k,S),V=D?M*v:M;for(const U of d)for(const q of U){const re=D?q:t2(q,S);let Q=V;const fe=Kp([],[q.x,q.y,0,1],S);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Q*=fe[3]/_.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Q*=_.cameraToCenterDistance/fe[3]),Dz(F,re,Q))return!0}return!1}},heatmap:class extends $o{createBucket(a){return new r2(a)}constructor(a){super(a,Bz),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=o2({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends $o{constructor(a){super(a,Vz)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends $o{constructor(a){super(a,t5)}recalculate(a,n){super.recalculate(a,n);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new f_(a)}queryRadius(){return Hp(this.paint.get("fill-translate"))}queryIntersectsFeature(a,n,s,d,m,_,v){return Xb(Xp(a,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),_.angle,v),d)}isTileClipped(){return!0}},"fill-extrusion":class extends $o{constructor(a){super(a,m5)}createBucket(a){return new m_(a)}queryRadius(){return Hp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(a,n,s,d,m,_,v,S){const k=Xp(a,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),_.angle,v),M=this.paint.get("fill-extrusion-height").evaluate(n,s),D=this.paint.get("fill-extrusion-base").evaluate(n,s),F=function(U,q,re,Q){const fe=[];for(const ve of U){const he=[ve.x,ve.y,0,1];Kp(he,he,q),fe.push(new I(he[0]/he[3],he[1]/he[3]))}return fe}(k,S),V=function(U,q,re,Q){const fe=[],ve=[],he=Q[8]*q,we=Q[9]*q,Ee=Q[10]*q,Me=Q[11]*q,ot=Q[8]*re,lt=Q[9]*re,Je=Q[10]*re,Xe=Q[11]*re;for(const qe of U){const et=[],Ke=[];for(const Ve of qe){const bt=Ve.x,ct=Ve.y,Ut=Q[0]*bt+Q[4]*ct+Q[12],Tr=Q[1]*bt+Q[5]*ct+Q[13],zr=Q[2]*bt+Q[6]*ct+Q[14],xn=Q[3]*bt+Q[7]*ct+Q[15],fo=zr+Ee,Un=xn+Me,dn=Ut+ot,Cn=Tr+lt,jn=zr+Je,Qn=xn+Xe,Mi=new I((Ut+he)/Un,(Tr+we)/Un);Mi.z=fo/Un,et.push(Mi);const fn=new I(dn/Qn,Cn/Qn);fn.z=jn/Qn,Ke.push(fn)}fe.push(et),ve.push(Ke)}return[fe,ve]}(d,D,M,S);return function(U,q,re){let Q=1/0;Xb(re,q)&&(Q=v2(re,q[0]));for(let fe=0;fe<q.length;fe++){const ve=q[fe],he=U[fe];for(let we=0;we<ve.length-1;we++){const Ee=ve[we],Me=[Ee,ve[we+1],he[we+1],he[we],Ee];Hb(re,Me)&&(Q=Math.min(Q,v2(re,Me)))}}return Q!==1/0&&Q}(V[0],V[1],F)}},line:class extends $o{constructor(a){super(a,S2),this.gradientVersion=0,tm||(tm=new b5(S2.paint.properties["line-width"].specification),tm.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(a){a==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof El,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(a,n){super.recalculate(a,n),this.paint._values["line-floorwidth"]=tm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new g_(a)}queryRadius(a){const n=a,s=E2(pd("line-width",this,n),pd("line-gap-width",this,n)),d=pd("line-offset",this,n);return s/2+Math.abs(d)+Hp(this.paint.get("line-translate"))}queryIntersectsFeature(a,n,s,d,m,_,v){const S=Xp(a,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),_.angle,v),k=v/2*E2(this.paint.get("line-width").evaluate(n,s),this.paint.get("line-gap-width").evaluate(n,s)),M=this.paint.get("line-offset").evaluate(n,s);return M&&(d=function(D,F){const V=[];for(let U=0;U<D.length;U++){const q=D[U],re=[];for(let Q=0;Q<q.length;Q++){const fe=q[Q-1],ve=q[Q],he=q[Q+1],we=Q===0?new I(0,0):ve.sub(fe)._unit()._perp(),Ee=Q===q.length-1?new I(0,0):he.sub(ve)._unit()._perp(),Me=we._add(Ee)._unit(),ot=Me.x*Ee.x+Me.y*Ee.y;ot!==0&&Me._mult(1/ot),re.push(Me._mult(F)._add(ve))}V.push(re)}return V}(d,M*v)),function(D,F,V){for(let U=0;U<F.length;U++){const q=F[U];if(D.length>=3){for(let re=0;re<q.length;re++)if(ic(D,q[re]))return!0}if(Rz(D,q,V))return!0}return!1}(S,d,k)}isTileClipped(){return!0}},symbol:sm,background:class extends $o{constructor(a){super(a,Z5)}},raster:class extends $o{constructor(a){super(a,H5)}}};class Y5{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const C_=63710088e-1;class Os{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Os(B(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,d=this.lat*s,m=n.lat*s,_=Math.sin(d)*Math.sin(m)+Math.cos(d)*Math.cos(m)*Math.cos((n.lng-this.lng)*s);return C_*Math.acos(Math.min(_,1))}static convert(n){if(n instanceof Os)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Os(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Os(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const q2=2*Math.PI*C_;function Z2(a){return q2*Math.cos(a*Math.PI/180)}function H2(a){return(180+a)/360}function X2(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function K2(a,n){return a/Z2(n)}function P_(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}class lm{constructor(n,s,d=0){this.x=+n,this.y=+s,this.z=+d}static fromLngLat(n,s=0){const d=Os.convert(n);return new lm(H2(d.lng),X2(d.lat),K2(s,d.lat))}toLngLat(){return new Os(360*this.x-180,P_(this.y))}toAltitude(){return this.z*Z2(P_(this.y))}meterInMercatorCoordinateUnits(){return 1/q2*(n=P_(this.y),1/Math.cos(n*Math.PI/180));var n}}function Y2(a,n,s){var d=2*Math.PI*6378137/256/Math.pow(2,s);return[a*d-2*Math.PI*6378137/2,n*d-2*Math.PI*6378137/2]}class I_{constructor(n,s,d){if(n<0||n>25||d<0||d>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${d}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=d,this.key=kd(0,n,n,s,d)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,d){const m=(v=this.y,S=this.z,k=Y2(256*(_=this.x),256*(v=Math.pow(2,S)-v-1),S),M=Y2(256*(_+1),256*(v+1),S),k[0]+","+k[1]+","+M[0]+","+M[1]);var _,v,S,k,M;const D=function(F,V,U){let q,re="";for(let Q=F;Q>0;Q--)q=1<<Q-1,re+=(V&q?1:0)+(U&q?2:0);return re}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,D).replace(/{bbox-epsg-3857}/g,m)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new I((n.x*s-this.x)*Ar,(n.y*s-this.y)*Ar)}toString(){return`${this.z}/${this.x}/${this.y}`}}class J2{constructor(n,s){this.wrap=n,this.canonical=s,this.key=kd(n,s.z,s.z,s.x,s.y)}}class ho{constructor(n,s,d,m,_){if(n<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${d}`);this.overscaledZ=n,this.wrap=s,this.canonical=new I_(d,+m,+_),this.key=kd(s,n,d,m,_)}clone(){return new ho(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new ho(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ho(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-n;return n>this.canonical.z?kd(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):kd(this.wrap*+s,n,n,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new ho(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,d=2*this.canonical.x,m=2*this.canonical.y;return[new ho(s,this.wrap,s,d,m),new ho(s,this.wrap,s,d+1,m),new ho(s,this.wrap,s,d,m+1),new ho(s,this.wrap,s,d+1,m+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new ho(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new ho(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new J2(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new lm(n.x-this.wrap,n.y))}}function kd(a,n,s,d,m){(a*=2)<0&&(a=-1*a-1);const _=1<<s;return(_*_*a+_*m+d).toString(36)+s.toString(36)+n.toString(36)}at("CanonicalTileID",I_),at("OverscaledTileID",ho,{omit:["posMatrix"]});class Q2{constructor(n,s,d){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(d&&d!=="mapbox"&&d!=="terrarium")return void ke(`"${d}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const m=this.dim=s.height-2;this.data=new Uint32Array(s.data.buffer),this.encoding=d||"mapbox";for(let _=0;_<m;_++)this.data[this._idx(-1,_)]=this.data[this._idx(0,_)],this.data[this._idx(m,_)]=this.data[this._idx(m-1,_)],this.data[this._idx(_,-1)]=this.data[this._idx(_,0)],this.data[this._idx(_,m)]=this.data[this._idx(_,m-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(m,-1)]=this.data[this._idx(m-1,0)],this.data[this._idx(-1,m)]=this.data[this._idx(0,m-1)],this.data[this._idx(m,m)]=this.data[this._idx(m-1,m-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let _=0;_<m;_++)for(let v=0;v<m;v++){const S=this.get(_,v);S>this.max&&(this.max=S),S<this.min&&(this.min=S)}}get(n,s){const d=new Uint8Array(this.data.buffer),m=4*this._idx(n,s);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(d[m],d[m+1],d[m+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}_unpackMapbox(n,s,d){return(256*n*256+256*s+d)/10-1e4}_unpackTerrarium(n,s,d){return 256*n+s+d/256-32768}getPixels(){return new co({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,d){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let m=s*this.dim,_=s*this.dim+this.dim,v=d*this.dim,S=d*this.dim+this.dim;switch(s){case-1:m=_-1;break;case 1:_=m+1}switch(d){case-1:v=S-1;break;case 1:S=v+1}const k=-s*this.dim,M=-d*this.dim;for(let D=v;D<S;D++)for(let F=m;F<_;F++)this.data[this._idx(F,D)]=n.data[this._idx(F+k,D+M)]}}at("DEMData",Q2);class eS{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const d=n[s];this._stringToNumber[d]=s,this._numberToString[s]=d}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class tS{constructor(n,s,d,m,_){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=d,n._y=m,this.properties=n.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class rS{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Rl(Ar,16,0),this.grid3D=new Rl(Ar,16,0),this.featureIndexArray=new G,this.promoteId=s}insert(n,s,d,m,_,v){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,m,_);const k=v?this.grid3D:this.grid;for(let M=0;M<s.length;M++){const D=s[M],F=[1/0,1/0,-1/0,-1/0];for(let V=0;V<D.length;V++){const U=D[V];F[0]=Math.min(F[0],U.x),F[1]=Math.min(F[1],U.y),F[2]=Math.max(F[2],U.x),F[3]=Math.max(F[3],U.y)}F[0]<Ar&&F[1]<Ar&&F[2]>=0&&F[3]>=0&&k.insert(S,F[0],F[1],F[2],F[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Rs.VectorTile(new __(this.rawTileData)).layers,this.sourceLayerCoder=new eS(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,d,m){this.loadVTLayers();const _=n.params||{},v=Ar/n.tileSize/n.scale,S=Hh(_.filter),k=n.queryGeometry,M=n.queryPadding*v,D=iS(k),F=this.grid.query(D.minX-M,D.minY-M,D.maxX+M,D.maxY+M),V=iS(n.cameraQueryGeometry),U=this.grid3D.query(V.minX-M,V.minY-M,V.maxX+M,V.maxY+M,(Q,fe,ve,he)=>function(we,Ee,Me,ot,lt){for(const Xe of we)if(Ee<=Xe.x&&Me<=Xe.y&&ot>=Xe.x&&lt>=Xe.y)return!0;const Je=[new I(Ee,Me),new I(Ee,lt),new I(ot,lt),new I(ot,Me)];if(we.length>2){for(const Xe of Je)if(ic(we,Xe))return!0}for(let Xe=0;Xe<we.length-1;Xe++)if(Fz(we[Xe],we[Xe+1],Je))return!0;return!1}(n.cameraQueryGeometry,Q-M,fe-M,ve+M,he+M));for(const Q of U)F.push(Q);F.sort(J5);const q={};let re;for(let Q=0;Q<F.length;Q++){const fe=F[Q];if(fe===re)continue;re=fe;const ve=this.featureIndexArray.get(fe);let he=null;this.loadMatchingFeature(q,ve.bucketIndex,ve.sourceLayerIndex,ve.featureIndex,S,_.layers,_.availableImages,s,d,m,(we,Ee,Me)=>(he||(he=ia(we)),Ee.queryIntersectsFeature(k,we,Me,he,this.z,n.transform,v,n.pixelPosMatrix)))}return q}loadMatchingFeature(n,s,d,m,_,v,S,k,M,D,F){const V=this.bucketLayerIDs[s];if(v&&!function(Q,fe){for(let ve=0;ve<Q.length;ve++)if(fe.indexOf(Q[ve])>=0)return!0;return!1}(v,V))return;const U=this.sourceLayerCoder.decode(d),q=this.vtLayers[U].feature(m);if(_.needGeometry){const Q=Ul(q,!0);if(!_.filter(new Mr(this.tileID.overscaledZ),Q,this.tileID.canonical))return}else if(!_.filter(new Mr(this.tileID.overscaledZ),q))return;const re=this.getId(q,U);for(let Q=0;Q<V.length;Q++){const fe=V[Q];if(v&&v.indexOf(fe)<0)continue;const ve=k[fe];if(!ve)continue;let he={};re&&D&&(he=D.getState(ve.sourceLayer||"_geojsonTileLayer",re));const we=X({},M[fe]);we.paint=nS(we.paint,ve.paint,q,he,S),we.layout=nS(we.layout,ve.layout,q,he,S);const Ee=!F||F(q,ve,he);if(!Ee)continue;const Me=new tS(q,this.z,this.x,this.y,re);Me.layer=we;let ot=n[fe];ot===void 0&&(ot=n[fe]=[]),ot.push({featureIndex:m,feature:Me,intersectionZ:Ee})}}lookupSymbolFeatures(n,s,d,m,_,v,S,k){const M={};this.loadVTLayers();const D=Hh(_);for(const F of n)this.loadMatchingFeature(M,d,m,F,D,v,S,k,s);return M}hasLayer(n){for(const s of this.bucketLayerIDs)for(const d of s)if(n===d)return!0;return!1}getId(n,s){let d=n.id;return this.promoteId&&(d=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof d=="boolean"&&(d=Number(d))),d}}function nS(a,n,s,d,m){return me(a,(_,v)=>{const S=n instanceof Zu?n.get(v):null;return S&&S.evaluate?S.evaluate(s,d,m):S})}function iS(a){let n=1/0,s=1/0,d=-1/0,m=-1/0;for(const _ of a)n=Math.min(n,_.x),s=Math.min(s,_.y),d=Math.max(d,_.x),m=Math.max(m,_.y);return{minX:n,minY:s,maxX:d,maxY:m}}function J5(a,n){return n-a}function oS(a,n,s,d,m){const _=[];for(let v=0;v<a.length;v++){const S=a[v];let k;for(let M=0;M<S.length-1;M++){let D=S[M],F=S[M+1];D.x<n&&F.x<n||(D.x<n?D=new I(n,D.y+(n-D.x)/(F.x-D.x)*(F.y-D.y))._round():F.x<n&&(F=new I(n,D.y+(n-D.x)/(F.x-D.x)*(F.y-D.y))._round()),D.y<s&&F.y<s||(D.y<s?D=new I(D.x+(s-D.y)/(F.y-D.y)*(F.x-D.x),s)._round():F.y<s&&(F=new I(D.x+(s-D.y)/(F.y-D.y)*(F.x-D.x),s)._round()),D.x>=d&&F.x>=d||(D.x>=d?D=new I(d,D.y+(d-D.x)/(F.x-D.x)*(F.y-D.y))._round():F.x>=d&&(F=new I(d,D.y+(d-D.x)/(F.x-D.x)*(F.y-D.y))._round()),D.y>=m&&F.y>=m||(D.y>=m?D=new I(D.x+(m-D.y)/(F.y-D.y)*(F.x-D.x),m)._round():F.y>=m&&(F=new I(D.x+(m-D.y)/(F.y-D.y)*(F.x-D.x),m)._round()),k&&D.equals(k[k.length-1])||(k=[D],_.push(k)),k.push(F)))))}}return _}at("FeatureIndex",rS,{omit:["rawTileData","sourceLayerCoder"]});class $s extends I{constructor(n,s,d,m){super(n,s),this.angle=d,m!==void 0&&(this.segment=m)}clone(){return new $s(this.x,this.y,this.angle,this.segment)}}function aS(a,n,s,d,m){if(n.segment===void 0)return!0;let _=n,v=n.segment+1,S=0;for(;S>-s/2;){if(v--,v<0)return!1;S-=a[v].dist(_),_=a[v]}S+=a[v].dist(a[v+1]),v++;const k=[];let M=0;for(;S<s/2;){const D=a[v],F=a[v+1];if(!F)return!1;let V=a[v-1].angleTo(D)-D.angleTo(F);for(V=Math.abs((V+3*Math.PI)%(2*Math.PI)-Math.PI),k.push({distance:S,angleDelta:V}),M+=V;S-k[0].distance>d;)M-=k.shift().angleDelta;if(M>m)return!1;v++,S+=D.dist(F)}return!0}function sS(a){let n=0;for(let s=0;s<a.length-1;s++)n+=a[s].dist(a[s+1]);return n}function lS(a,n,s){return a?.6*n*s:0}function uS(a,n){return Math.max(a?a.right-a.left:0,n?n.right-n.left:0)}function Q5(a,n,s,d,m,_){const v=lS(s,m,_),S=uS(s,d)*_;let k=0;const M=sS(a)/2;for(let D=0;D<a.length-1;D++){const F=a[D],V=a[D+1],U=F.dist(V);if(k+U>M){const q=(M-k)/U,re=fi.number(F.x,V.x,q),Q=fi.number(F.y,V.y,q),fe=new $s(re,Q,V.angleTo(F),D);return fe._round(),!v||aS(a,fe,S,v,n)?fe:void 0}k+=U}}function eD(a,n,s,d,m,_,v,S,k){const M=lS(d,_,v),D=uS(d,m),F=D*v,V=a[0].x===0||a[0].x===k||a[0].y===0||a[0].y===k;return n-F<n/4&&(n=F+n/4),cS(a,V?n/2*S%n:(D/2+2*_)*v*S%n,n,M,s,F,V,!1,k)}function cS(a,n,s,d,m,_,v,S,k){const M=_/2,D=sS(a);let F=0,V=n-s,U=[];for(let q=0;q<a.length-1;q++){const re=a[q],Q=a[q+1],fe=re.dist(Q),ve=Q.angleTo(re);for(;V+s<F+fe;){V+=s;const he=(V-F)/fe,we=fi.number(re.x,Q.x,he),Ee=fi.number(re.y,Q.y,he);if(we>=0&&we<k&&Ee>=0&&Ee<k&&V-M>=0&&V+M<=D){const Me=new $s(we,Ee,ve,q);Me._round(),d&&!aS(a,Me,_,d,m)||U.push(Me)}}F+=fe}return S||U.length||v||(U=cS(a,F/2,s,d,m,_,v,!0,k)),U}function hS(a,n,s,d){const m=[],_=a.image,v=_.pixelRatio,S=_.paddedRect.w-2,k=_.paddedRect.h-2,M=a.right-a.left,D=a.bottom-a.top,F=_.stretchX||[[0,S]],V=_.stretchY||[[0,k]],U=(qe,et)=>qe+et[1]-et[0],q=F.reduce(U,0),re=V.reduce(U,0),Q=S-q,fe=k-re;let ve=0,he=q,we=0,Ee=re,Me=0,ot=Q,lt=0,Je=fe;if(_.content&&d){const qe=_.content;ve=um(F,0,qe[0]),we=um(V,0,qe[1]),he=um(F,qe[0],qe[2]),Ee=um(V,qe[1],qe[3]),Me=qe[0]-ve,lt=qe[1]-we,ot=qe[2]-qe[0]-he,Je=qe[3]-qe[1]-Ee}const Xe=(qe,et,Ke,Ve)=>{const bt=cm(qe.stretch-ve,he,M,a.left),ct=hm(qe.fixed-Me,ot,qe.stretch,q),Ut=cm(et.stretch-we,Ee,D,a.top),Tr=hm(et.fixed-lt,Je,et.stretch,re),zr=cm(Ke.stretch-ve,he,M,a.left),xn=hm(Ke.fixed-Me,ot,Ke.stretch,q),fo=cm(Ve.stretch-we,Ee,D,a.top),Un=hm(Ve.fixed-lt,Je,Ve.stretch,re),dn=new I(bt,Ut),Cn=new I(zr,Ut),jn=new I(zr,fo),Qn=new I(bt,fo),Mi=new I(ct/v,Tr/v),fn=new I(xn/v,Un/v),Gn=n*Math.PI/180;if(Gn){const Ai=Math.sin(Gn),zi=Math.cos(Gn),Xr=[zi,-Ai,Ai,zi];dn._matMult(Xr),Cn._matMult(Xr),Qn._matMult(Xr),jn._matMult(Xr)}const ei=qe.stretch+qe.fixed,yi=et.stretch+et.fixed;return{tl:dn,tr:Cn,bl:Qn,br:jn,tex:{x:_.paddedRect.x+1+ei,y:_.paddedRect.y+1+yi,w:Ke.stretch+Ke.fixed-ei,h:Ve.stretch+Ve.fixed-yi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Mi,pixelOffsetBR:fn,minFontScaleX:ot/v/M,minFontScaleY:Je/v/D,isSDF:s}};if(d&&(_.stretchX||_.stretchY)){const qe=dS(F,Q,q),et=dS(V,fe,re);for(let Ke=0;Ke<qe.length-1;Ke++){const Ve=qe[Ke],bt=qe[Ke+1];for(let ct=0;ct<et.length-1;ct++)m.push(Xe(Ve,et[ct],bt,et[ct+1]))}}else m.push(Xe({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:k+1}));return m}function um(a,n,s){let d=0;for(const m of a)d+=Math.max(n,Math.min(s,m[1]))-Math.max(n,Math.min(s,m[0]));return d}function dS(a,n,s){const d=[{fixed:-1,stretch:0}];for(const[m,_]of a){const v=d[d.length-1];d.push({fixed:m-v.stretch,stretch:v.stretch}),d.push({fixed:m-v.stretch,stretch:v.stretch+(_-m)})}return d.push({fixed:n+1,stretch:s}),d}function cm(a,n,s,d){return a/n*s+d}function hm(a,n,s,d){return a-n*s/d}at("Anchor",$s);class dm{constructor(n,s,d,m,_,v,S,k,M,D){if(this.boxStartIndex=n.length,M){let F=v.top,V=v.bottom;const U=v.collisionPadding;U&&(F-=U[1],V+=U[3]);let q=V-F;q>0&&(q=Math.max(10,q),this.circleDiameter=q)}else{let F=v.top*S-k[0],V=v.bottom*S+k[2],U=v.left*S-k[3],q=v.right*S+k[1];const re=v.collisionPadding;if(re&&(U-=re[0]*S,F-=re[1]*S,q+=re[2]*S,V+=re[3]*S),D){const Q=new I(U,F),fe=new I(q,F),ve=new I(U,V),he=new I(q,V),we=D*Math.PI/180;Q._rotate(we),fe._rotate(we),ve._rotate(we),he._rotate(we),U=Math.min(Q.x,fe.x,ve.x,he.x),q=Math.max(Q.x,fe.x,ve.x,he.x),F=Math.min(Q.y,fe.y,ve.y,he.y),V=Math.max(Q.y,fe.y,ve.y,he.y)}n.emplaceBack(s.x,s.y,U,F,q,V,d,m,_)}this.boxEndIndex=n.length}}class tD{constructor(n=[],s=rD){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:d}=this,m=s[n];for(;n>0;){const _=n-1>>1,v=s[_];if(d(m,v)>=0)break;s[n]=v,n=_}s[n]=m}_down(n){const{data:s,compare:d}=this,m=this.length>>1,_=s[n];for(;n<m;){let v=1+(n<<1),S=s[v];const k=v+1;if(k<this.length&&d(s[k],S)<0&&(v=k,S=s[k]),d(S,_)>=0)break;s[n]=S,n=v}s[n]=_}}function rD(a,n){return a<n?-1:a>n?1:0}function nD(a,n=1,s=!1){let d=1/0,m=1/0,_=-1/0,v=-1/0;const S=a[0];for(let U=0;U<S.length;U++){const q=S[U];(!U||q.x<d)&&(d=q.x),(!U||q.y<m)&&(m=q.y),(!U||q.x>_)&&(_=q.x),(!U||q.y>v)&&(v=q.y)}const k=Math.min(_-d,v-m);let M=k/2;const D=new tD([],iD);if(k===0)return new I(d,m);for(let U=d;U<_;U+=k)for(let q=m;q<v;q+=k)D.push(new dc(U+M,q+M,M,a));let F=function(U){let q=0,re=0,Q=0;const fe=U[0];for(let ve=0,he=fe.length,we=he-1;ve<he;we=ve++){const Ee=fe[ve],Me=fe[we],ot=Ee.x*Me.y-Me.x*Ee.y;re+=(Ee.x+Me.x)*ot,Q+=(Ee.y+Me.y)*ot,q+=3*ot}return new dc(re/q,Q/q,0,U)}(a),V=D.length;for(;D.length;){const U=D.pop();(U.d>F.d||!F.d)&&(F=U,s&&console.log("found best %d after %d probes",Math.round(1e4*U.d)/1e4,V)),U.max-F.d<=n||(M=U.h/2,D.push(new dc(U.p.x-M,U.p.y-M,M,a)),D.push(new dc(U.p.x+M,U.p.y-M,M,a)),D.push(new dc(U.p.x-M,U.p.y+M,M,a)),D.push(new dc(U.p.x+M,U.p.y+M,M,a)),V+=4)}return s&&(console.log(`num probes: ${V}`),console.log(`best distance: ${F.d}`)),F.p}function iD(a,n){return n.max-a.max}function dc(a,n,s,d){this.p=new I(a,n),this.h=s,this.d=function(m,_){let v=!1,S=1/0;for(let k=0;k<_.length;k++){const M=_[k];for(let D=0,F=M.length,V=F-1;D<F;V=D++){const U=M[D],q=M[V];U.y>m.y!=q.y>m.y&&m.x<(q.x-U.x)*(m.y-U.y)/(q.y-U.y)+U.x&&(v=!v),S=Math.min(S,Kb(m,U,q))}}return(v?1:-1)*Math.sqrt(S)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}const M_=Number.POSITIVE_INFINITY;function fS(a,n){return n[1]!==M_?function(s,d,m){let _=0,v=0;switch(d=Math.abs(d),m=Math.abs(m),s){case"top-right":case"top-left":case"top":v=m-7;break;case"bottom-right":case"bottom-left":case"bottom":v=7-m}switch(s){case"top-right":case"bottom-right":case"right":_=-d;break;case"top-left":case"bottom-left":case"left":_=d}return[_,v]}(a,n[0],n[1]):function(s,d){let m=0,_=0;d<0&&(d=0);const v=d/Math.sqrt(2);switch(s){case"top-right":case"top-left":_=v-7;break;case"bottom-right":case"bottom-left":_=7-v;break;case"bottom":_=7-d;break;case"top":_=d-7}switch(s){case"top-right":case"bottom-right":m=-v;break;case"top-left":case"bottom-left":m=v;break;case"left":m=d;break;case"right":m=-d}return[m,_]}(a,n[0])}function A_(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function oD(a,n,s,d,m,_,v,S,k,M,D){let F=_.textMaxSize.evaluate(n,{});F===void 0&&(F=v);const V=a.layers[0].layout,U=V.get("icon-offset").evaluate(n,{},D),q=mS(s.horizontal),re=v/24,Q=a.tilePixelRatio*re,fe=a.tilePixelRatio*F/24,ve=a.tilePixelRatio*S,he=a.tilePixelRatio*V.get("symbol-spacing"),we=V.get("text-padding")*a.tilePixelRatio,Ee=function(Ve,bt,ct,Ut=1){const Tr=Ve.get("icon-padding").evaluate(bt,{},ct),zr=Tr&&Tr.values;return[zr[0]*Ut,zr[1]*Ut,zr[2]*Ut,zr[3]*Ut]}(V,n,D,a.tilePixelRatio),Me=V.get("text-max-angle")/180*Math.PI,ot=V.get("text-rotation-alignment")!=="viewport"&&V.get("symbol-placement")!=="point",lt=V.get("icon-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",Je=V.get("symbol-placement"),Xe=he/2,qe=V.get("icon-text-fit");let et;d&&qe!=="none"&&(a.allowVerticalPlacement&&s.vertical&&(et=B2(d,s.vertical,qe,V.get("icon-text-fit-padding"),U,re)),q&&(d=B2(d,q,qe,V.get("icon-text-fit-padding"),U,re)));const Ke=(Ve,bt)=>{bt.x<0||bt.x>=Ar||bt.y<0||bt.y>=Ar||function(ct,Ut,Tr,zr,xn,fo,Un,dn,Cn,jn,Qn,Mi,fn,Gn,ei,yi,Ai,zi,Xr,Wn,jt,Ji,qn,ti,No){const oa=ct.addToLineVertexArray(Ut,Tr);let aa,Ja,Uo,po,Di=0,Qa=0,Pd=0,vS=0,B_=-1,V_=-1;const es={};let xS=rn(""),N_=0,U_=0;if(dn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[N_,U_]=dn.layout.get("text-offset").evaluate(jt,{},ti).map(Ri=>Ri*zn):(N_=dn.layout.get("text-radial-offset").evaluate(jt,{},ti)*zn,U_=M_),ct.allowVerticalPlacement&&zr.vertical){const Ri=dn.layout.get("text-rotate").evaluate(jt,{},ti)+90;Uo=new dm(Cn,Ut,jn,Qn,Mi,zr.vertical,fn,Gn,ei,Ri),Un&&(po=new dm(Cn,Ut,jn,Qn,Mi,Un,Ai,zi,ei,Ri))}if(xn){const Ri=dn.layout.get("icon-rotate").evaluate(jt,{}),Ta=dn.layout.get("icon-text-fit")!=="none",Id=hS(xn,Ri,qn,Ta),Md=Un?hS(Un,Ri,qn,Ta):void 0;Ja=new dm(Cn,Ut,jn,Qn,Mi,xn,Ai,zi,!1,Ri),Di=4*Id.length;const SS=ct.iconSizeData;let Gl=null;SS.kind==="source"?(Gl=[Ya*dn.layout.get("icon-size").evaluate(jt,{})],Gl[0]>Fs&&ke(`${ct.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):SS.kind==="composite"&&(Gl=[Ya*Ji.compositeIconSizes[0].evaluate(jt,{},ti),Ya*Ji.compositeIconSizes[1].evaluate(jt,{},ti)],(Gl[0]>Fs||Gl[1]>Fs)&&ke(`${ct.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),ct.addSymbols(ct.icon,Id,Gl,Wn,Xr,jt,u.WritingMode.none,Ut,oa.lineStartIndex,oa.lineLength,-1,ti),B_=ct.icon.placedSymbolArray.length-1,Md&&(Qa=4*Md.length,ct.addSymbols(ct.icon,Md,Gl,Wn,Xr,jt,u.WritingMode.vertical,Ut,oa.lineStartIndex,oa.lineLength,-1,ti),V_=ct.icon.placedSymbolArray.length-1)}const wS=Object.keys(zr.horizontal);for(const Ri of wS){const Ta=zr.horizontal[Ri];if(!aa){xS=rn(Ta.text);const Md=dn.layout.get("text-rotate").evaluate(jt,{},ti);aa=new dm(Cn,Ut,jn,Qn,Mi,Ta,fn,Gn,ei,Md)}const Id=Ta.positionedLines.length===1;if(Pd+=pS(ct,Ut,Ta,fo,dn,ei,jt,yi,oa,zr.vertical?u.WritingMode.horizontal:u.WritingMode.horizontalOnly,Id?wS:[Ri],es,B_,Ji,ti),Id)break}zr.vertical&&(vS+=pS(ct,Ut,zr.vertical,fo,dn,ei,jt,yi,oa,u.WritingMode.vertical,["vertical"],es,V_,Ji,ti));const lD=aa?aa.boxStartIndex:ct.collisionBoxArray.length,uD=aa?aa.boxEndIndex:ct.collisionBoxArray.length,cD=Uo?Uo.boxStartIndex:ct.collisionBoxArray.length,hD=Uo?Uo.boxEndIndex:ct.collisionBoxArray.length,dD=Ja?Ja.boxStartIndex:ct.collisionBoxArray.length,fD=Ja?Ja.boxEndIndex:ct.collisionBoxArray.length,pD=po?po.boxStartIndex:ct.collisionBoxArray.length,mD=po?po.boxEndIndex:ct.collisionBoxArray.length;let sa=-1;const pm=(Ri,Ta)=>Ri&&Ri.circleDiameter?Math.max(Ri.circleDiameter,Ta):Ta;sa=pm(aa,sa),sa=pm(Uo,sa),sa=pm(Ja,sa),sa=pm(po,sa);const bS=sa>-1?1:0;bS&&(sa*=No/zn),ct.glyphOffsetArray.length>=hc.MAX_GLYPHS&&ke("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),jt.sortKey!==void 0&&ct.addToSortKeyRanges(ct.symbolInstances.length,jt.sortKey),ct.symbolInstances.emplaceBack(Ut.x,Ut.y,es.right>=0?es.right:-1,es.center>=0?es.center:-1,es.left>=0?es.left:-1,es.vertical||-1,B_,V_,xS,lD,uD,cD,hD,dD,fD,pD,mD,jn,Pd,vS,Di,Qa,bS,0,fn,N_,U_,sa)}(a,bt,Ve,s,d,m,et,a.layers[0],a.collisionBoxArray,n.index,n.sourceLayerIndex,a.index,Q,[we,we,we,we],ot,k,ve,Ee,lt,U,n,_,M,D,v)};if(Je==="line")for(const Ve of oS(n.geometry,0,0,Ar,Ar)){const bt=eD(Ve,he,Me,s.vertical||q,d,24,fe,a.overscaling,Ar);for(const ct of bt)q&&aD(a,q.text,Xe,ct)||Ke(Ve,ct)}else if(Je==="line-center"){for(const Ve of n.geometry)if(Ve.length>1){const bt=Q5(Ve,Me,s.vertical||q,d,24,fe);bt&&Ke(Ve,bt)}}else if(n.type==="Polygon")for(const Ve of c_(n.geometry,0)){const bt=nD(Ve,16);Ke(Ve[0],new $s(bt.x,bt.y,0))}else if(n.type==="LineString")for(const Ve of n.geometry)Ke(Ve,new $s(Ve[0].x,Ve[0].y,0));else if(n.type==="Point")for(const Ve of n.geometry)for(const bt of Ve)Ke([bt],new $s(bt.x,bt.y,0))}function pS(a,n,s,d,m,_,v,S,k,M,D,F,V,U,q){const re=function(ve,he,we,Ee,Me,ot,lt,Je){const Xe=Ee.layout.get("text-rotate").evaluate(ot,{})*Math.PI/180,qe=[];for(const et of he.positionedLines)for(const Ke of et.positionedGlyphs){if(!Ke.rect)continue;const Ve=Ke.rect||{};let bt=4,ct=!0,Ut=1,Tr=0;const zr=(Me||Je)&&Ke.vertical,xn=Ke.metrics.advance*Ke.scale/2;if(Je&&he.verticalizable&&(Tr=et.lineOffset/2-(Ke.imageName?-(zn-Ke.metrics.width*Ke.scale)/2:(Ke.scale-1)*zn)),Ke.imageName){const Xr=lt[Ke.imageName];ct=Xr.sdf,Ut=Xr.pixelRatio,bt=1/Ut}const fo=Me?[Ke.x+xn,Ke.y]:[0,0];let Un=Me?[0,0]:[Ke.x+xn+we[0],Ke.y+we[1]-Tr],dn=[0,0];zr&&(dn=Un,Un=[0,0]);const Cn=(Ke.metrics.left-bt)*Ke.scale-xn+Un[0],jn=(-Ke.metrics.top-bt)*Ke.scale+Un[1],Qn=Cn+Ve.w*Ke.scale/Ut,Mi=jn+Ve.h*Ke.scale/Ut,fn=new I(Cn,jn),Gn=new I(Qn,jn),ei=new I(Cn,Mi),yi=new I(Qn,Mi);if(zr){const Xr=new I(-xn,xn-nm),Wn=-Math.PI/2,jt=12-xn,Ji=new I(22-jt,-(Ke.imageName?jt:0)),qn=new I(...dn);fn._rotateAround(Wn,Xr)._add(Ji)._add(qn),Gn._rotateAround(Wn,Xr)._add(Ji)._add(qn),ei._rotateAround(Wn,Xr)._add(Ji)._add(qn),yi._rotateAround(Wn,Xr)._add(Ji)._add(qn)}if(Xe){const Xr=Math.sin(Xe),Wn=Math.cos(Xe),jt=[Wn,-Xr,Xr,Wn];fn._matMult(jt),Gn._matMult(jt),ei._matMult(jt),yi._matMult(jt)}const Ai=new I(0,0),zi=new I(0,0);qe.push({tl:fn,tr:Gn,bl:ei,br:yi,tex:Ve,writingMode:he.writingMode,glyphOffset:fo,sectionIndex:Ke.sectionIndex,isSDF:ct,pixelOffsetTL:Ai,pixelOffsetBR:zi,minFontScaleX:0,minFontScaleY:0})}return qe}(0,s,S,m,_,v,d,a.allowVerticalPlacement),Q=a.textSizeData;let fe=null;Q.kind==="source"?(fe=[Ya*m.layout.get("text-size").evaluate(v,{})],fe[0]>Fs&&ke(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Q.kind==="composite"&&(fe=[Ya*U.compositeTextSizes[0].evaluate(v,{},q),Ya*U.compositeTextSizes[1].evaluate(v,{},q)],(fe[0]>Fs||fe[1]>Fs)&&ke(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),a.addSymbols(a.text,re,fe,S,_,v,M,n,k.lineStartIndex,k.lineLength,V,q);for(const ve of D)F[ve]=a.text.placedSymbolArray.length-1;return 4*re.length}function mS(a){for(const n in a)return a[n];return null}function aD(a,n,s,d){const m=a.compareText;if(n in m){const _=m[n];for(let v=_.length-1;v>=0;v--)if(d.dist(_[v])<s)return!0}else m[n]=[];return m[n].push(d),!1}const gS=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class z_{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,d]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=d>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const _=gS[15&d];if(!_)throw new Error("Unrecognized array type.");const[v]=new Uint16Array(n,2,1),[S]=new Uint32Array(n,4,1);return new z_(S,v,_,n)}constructor(n,s=64,d=Float64Array,m){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=d,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const _=gS.indexOf(this.ArrayType),v=2*n*this.ArrayType.BYTES_PER_ELEMENT,S=n*this.IndexArrayType.BYTES_PER_ELEMENT,k=(8-S%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${d}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+k,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+v+S+k),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+k,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=n,this.coords[this._pos++]=s,d}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return D_(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,d,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:v,nodeSize:S}=this,k=[0,_.length-1,0],M=[];for(;k.length;){const D=k.pop()||0,F=k.pop()||0,V=k.pop()||0;if(F-V<=S){for(let Q=V;Q<=F;Q++){const fe=v[2*Q],ve=v[2*Q+1];fe>=n&&fe<=d&&ve>=s&&ve<=m&&M.push(_[Q])}continue}const U=V+F>>1,q=v[2*U],re=v[2*U+1];q>=n&&q<=d&&re>=s&&re<=m&&M.push(_[U]),(D===0?n<=q:s<=re)&&(k.push(V),k.push(U-1),k.push(1-D)),(D===0?d>=q:m>=re)&&(k.push(U+1),k.push(F),k.push(1-D))}return M}within(n,s,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:_,nodeSize:v}=this,S=[0,m.length-1,0],k=[],M=d*d;for(;S.length;){const D=S.pop()||0,F=S.pop()||0,V=S.pop()||0;if(F-V<=v){for(let Q=V;Q<=F;Q++)_S(_[2*Q],_[2*Q+1],n,s)<=M&&k.push(m[Q]);continue}const U=V+F>>1,q=_[2*U],re=_[2*U+1];_S(q,re,n,s)<=M&&k.push(m[U]),(D===0?n-d<=q:s-d<=re)&&(S.push(V),S.push(U-1),S.push(1-D)),(D===0?n+d>=q:s+d>=re)&&(S.push(U+1),S.push(F),S.push(1-D))}return k}}function D_(a,n,s,d,m,_){if(m-d<=s)return;const v=d+m>>1;yS(a,n,v,d,m,_),D_(a,n,s,d,v-1,1-_),D_(a,n,s,v+1,m,1-_)}function yS(a,n,s,d,m,_){for(;m>d;){if(m-d>600){const M=m-d+1,D=s-d+1,F=Math.log(M),V=.5*Math.exp(2*F/3),U=.5*Math.sqrt(F*V*(M-V)/M)*(D-M/2<0?-1:1);yS(a,n,s,Math.max(d,Math.floor(s-D*V/M+U)),Math.min(m,Math.floor(s+(M-D)*V/M+U)),_)}const v=n[2*s+_];let S=d,k=m;for(Td(a,n,d,s),n[2*m+_]>v&&Td(a,n,d,m);S<k;){for(Td(a,n,S,k),S++,k--;n[2*S+_]<v;)S++;for(;n[2*k+_]>v;)k--}n[2*d+_]===v?Td(a,n,d,k):(k++,Td(a,n,k,m)),k<=s&&(d=k+1),s<=k&&(m=k-1)}}function Td(a,n,s,d){R_(a,s,d),R_(n,2*s,2*d),R_(n,2*s+1,2*d+1)}function R_(a,n,s){const d=a[n];a[n]=a[s],a[s]=d}function _S(a,n,s,d){const m=a-s,_=n-d;return m*m+_*_}var L_;u.PerformanceMarkers=void 0,(L_=u.PerformanceMarkers||(u.PerformanceMarkers={})).create="create",L_.load="load",L_.fullLoad="fullLoad";let fm=null,Cd=[];const F_=1e3/60,O_="loadTime",$_="fullLoadTime",sD={mark(a){performance.mark(a)},frame(a){const n=a;fm!=null&&Cd.push(n-fm),fm=n},clearMetrics(){fm=null,Cd=[],performance.clearMeasures(O_),performance.clearMeasures($_);for(const a in u.PerformanceMarkers)performance.clearMarks(u.PerformanceMarkers[a])},getPerformanceMetrics(){performance.measure(O_,u.PerformanceMarkers.create,u.PerformanceMarkers.load),performance.measure($_,u.PerformanceMarkers.create,u.PerformanceMarkers.fullLoad);const a=performance.getEntriesByName(O_)[0].duration,n=performance.getEntriesByName($_)[0].duration,s=Cd.length,d=1/(Cd.reduce((_,v)=>_+v,0)/s/1e3),m=Cd.filter(_=>_>F_).reduce((_,v)=>_+(v-F_)/F_,0);return{loadTime:a,fullLoadTime:n,fps:d,percentDroppedFrames:m/(s+m)*100,totalFrames:s}}};u.AJAXError=it,u.ARRAY_TYPE=oc,u.Actor=class{constructor(a,n,s){this.target=a,this.parent=n,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},ce(["receive","process"],this),this.invoker=new Y5(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=vt()?a:window}send(a,n,s,d,m=!1){const _=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[_]=s);const v=Ot(this.globalScope)?void 0:[];return this.target.postMessage({id:_,type:a,hasCallback:!!s,targetMapId:d,mustQueue:m,sourceMapId:this.mapId,data:Ll(n,v)},v),{cancel:()=>{s&&delete this.callbacks[_],this.target.postMessage({id:_,type:"<cancel>",targetMapId:d,sourceMapId:this.mapId})}}}receive(a){const n=a.data,s=n.id;if(s&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){delete this.tasks[s];const d=this.cancelCallbacks[s];delete this.cancelCallbacks[s],d&&d()}else vt()||n.mustQueue?(this.tasks[s]=n,this.taskQueue.push(s),this.invoker.trigger()):this.processTask(s,n)}process(){if(!this.taskQueue.length)return;const a=this.taskQueue.shift(),n=this.tasks[a];delete this.tasks[a],this.taskQueue.length&&this.invoker.trigger(),n&&this.processTask(a,n)}processTask(a,n){if(n.type==="<response>"){const s=this.callbacks[a];delete this.callbacks[a],s&&(n.error?s(ta(n.error)):s(null,ta(n.data)))}else{let s=!1;const d=Ot(this.globalScope)?void 0:[],m=n.hasCallback?(S,k)=>{s=!0,delete this.cancelCallbacks[a],this.target.postMessage({id:a,type:"<response>",sourceMapId:this.mapId,error:S?Ll(S):null,data:Ll(k,d)},d)}:S=>{s=!0};let _=null;const v=ta(n.data);if(this.parent[n.type])_=this.parent[n.type](n.sourceMapId,v,m);else if(this.parent.getWorkerSource){const S=n.type.split(".");_=this.parent.getWorkerSource(n.sourceMapId,S[0],v.source)[S[1]](v,m)}else m(new Error(`Could not find function ${n.type}`));!s&&_&&_.cancel&&(this.cancelCallbacks[a]=_.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},u.AlphaImage=gd,u.CanonicalTileID=I_,u.CollisionBoxArray=y,u.CollisionCircleLayoutArray=class extends Ju{},u.Color=er,u.DEMData=Q2,u.DataConstantProperty=dt,u.DictionaryCoder=eS,u.EXTENT=Ar,u.ErrorEvent=ar,u.EvaluationParameters=Mr,u.Event=Gt,u.Evented=mn,u.FeatureIndex=rS,u.FillBucket=f_,u.FillExtrusionBucket=m_,u.GeoJSONFeature=tS,u.ImageAtlas=R2,u.ImagePosition=v_,u.KDBush=z_,u.LineBucket=g_,u.LineStripIndexArray=class extends i{},u.LngLat=Os,u.MercatorCoordinate=lm,u.ONE_EM=zn,u.OverscaledTileID=ho,u.PerformanceUtils=sD,u.Point=I,u.Pos3dArray=class extends Xu{},u.PosArray=te,u.Properties=mi,u.Protobuf=__,u.QuadTriangleArray=class extends Qu{},u.RGBAImage=co,u.RasterBoundsArray=class extends ud{},u.RequestPerformance=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},u.SegmentVector=He,u.SymbolBucket=hc,u.Transitionable=jp,u.TriangleIndexArray=Fe,u.Uniform1f=Vo,u.Uniform1i=class extends Jn{constructor(a,n){super(a,n),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},u.Uniform2f=class extends Jn{constructor(a,n){super(a,n),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},u.Uniform3f=class extends Jn{constructor(a,n){super(a,n),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},u.Uniform4f=Vl,u.UniformColor=Nn,u.UniformMatrix4f=class extends Jn{constructor(a,n){super(a,n),this.current=kn}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let n=1;n<16;n++)if(a[n]!==this.current[n]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},u.UnwrappedTileID=J2,u.ValidationError=Le,u.ZoomHistory=Op,u.addDynamicAttributes=S_,u.arrayBufferToImage=function(a,n){const s=new Image;s.onload=()=>{n(null,s),URL.revokeObjectURL(s.src),s.onload=null,window.requestAnimationFrame(()=>{s.src=or})},s.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const d=new Blob([new Uint8Array(a)],{type:"image/png"});s.src=a.byteLength?URL.createObjectURL(d):or},u.arrayBufferToImageBitmap=function(a,n){const s=new Blob([new Uint8Array(a)],{type:"image/png"});createImageBitmap(s).then(d=>{n(null,d)}).catch(d=>{n(new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},u.asyncAll=function(a,n,s){if(!a.length)return s(null,[]);let d=a.length;const m=new Array(a.length);let _=null;a.forEach((v,S)=>{n(v,(k,M)=>{k&&(_=k),m[S]=M,--d==0&&s(_,m)})})},u.bezier=H,u.bindAll=ce,u.clamp=$,u.clipLine=oS,u.clone=function(a){var n=new oc(16);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8],n[9]=a[9],n[10]=a[10],n[11]=a[11],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15],n},u.clone$1=xe,u.collisionCircleLayout=T5,u.config=Dt,u.copy=function(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a},u.create=function(){var a=new oc(16);return oc!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},u.createExpression=Or,u.createFilter=Hh,u.createLayout=hn,u.createStyleLayer=function(a){return a.type==="custom"?new X5(a):new K5[a.type](a)},u.deepEqual=function a(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let d=0;d<n.length;d++)if(!a(n[d],s[d]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const d in n)if(!a(n[d],s[d]))return!1;return!0}return n===s},u.derefLayers=function(a){a=a.slice();const n=Object.create(null);for(let s=0;s<a.length;s++)n[a[s].id]=a[s];for(let s=0;s<a.length;s++)"ref"in a[s]&&(a[s]=qi(a[s],n[a[s].ref]));return a},u.diffStyles=function(a,n){if(!a)return[{command:Zt.setStyle,args:[n]}];let s=[];try{if(!Kt(a.version,n.version))return[{command:Zt.setStyle,args:[n]}];Kt(a.center,n.center)||s.push({command:Zt.setCenter,args:[n.center]}),Kt(a.zoom,n.zoom)||s.push({command:Zt.setZoom,args:[n.zoom]}),Kt(a.bearing,n.bearing)||s.push({command:Zt.setBearing,args:[n.bearing]}),Kt(a.pitch,n.pitch)||s.push({command:Zt.setPitch,args:[n.pitch]}),Kt(a.sprite,n.sprite)||s.push({command:Zt.setSprite,args:[n.sprite]}),Kt(a.glyphs,n.glyphs)||s.push({command:Zt.setGlyphs,args:[n.glyphs]}),Kt(a.transition,n.transition)||s.push({command:Zt.setTransition,args:[n.transition]}),Kt(a.light,n.light)||s.push({command:Zt.setLight,args:[n.light]});const d={},m=[];(function(v,S,k,M){let D;for(D in S=S||{},v=v||{})Object.prototype.hasOwnProperty.call(v,D)&&(Object.prototype.hasOwnProperty.call(S,D)||ui(D,k,M));for(D in S)Object.prototype.hasOwnProperty.call(S,D)&&(Object.prototype.hasOwnProperty.call(v,D)?Kt(v[D],S[D])||(v[D].type==="geojson"&&S[D].type==="geojson"&&xa(v,S,D)?k.push({command:Zt.setGeoJSONSourceData,args:[D,S[D].data]}):Bn(D,S,k,M)):un(D,S,k))})(a.sources,n.sources,m,d);const _=[];a.layers&&a.layers.forEach(v=>{d[v.source]?s.push({command:Zt.removeLayer,args:[v.id]}):_.push(v)}),s=s.concat(m),function(v,S,k){S=S||[];const M=(v=v||[]).map(Qe),D=S.map(Qe),F=v.reduce(kt,{}),V=S.reduce(kt,{}),U=M.slice(),q=Object.create(null);let re,Q,fe,ve,he,we,Ee;for(re=0,Q=0;re<M.length;re++)fe=M[re],Object.prototype.hasOwnProperty.call(V,fe)?Q++:(k.push({command:Zt.removeLayer,args:[fe]}),U.splice(U.indexOf(fe,Q),1));for(re=0,Q=0;re<D.length;re++)fe=D[D.length-1-re],U[U.length-1-re]!==fe&&(Object.prototype.hasOwnProperty.call(F,fe)?(k.push({command:Zt.removeLayer,args:[fe]}),U.splice(U.lastIndexOf(fe,U.length-Q),1)):Q++,we=U[U.length-re],k.push({command:Zt.addLayer,args:[V[fe],we]}),U.splice(U.length-re,0,fe),q[fe]=!0);for(re=0;re<D.length;re++)if(fe=D[re],ve=F[fe],he=V[fe],!q[fe]&&!Kt(ve,he))if(Kt(ve.source,he.source)&&Kt(ve["source-layer"],he["source-layer"])&&Kt(ve.type,he.type)){for(Ee in Rr(ve.layout,he.layout,k,fe,null,Zt.setLayoutProperty),Rr(ve.paint,he.paint,k,fe,null,Zt.setPaintProperty),Kt(ve.filter,he.filter)||k.push({command:Zt.setFilter,args:[fe,he.filter]}),Kt(ve.minzoom,he.minzoom)&&Kt(ve.maxzoom,he.maxzoom)||k.push({command:Zt.setLayerZoomRange,args:[fe,he.minzoom,he.maxzoom]}),ve)Object.prototype.hasOwnProperty.call(ve,Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?Rr(ve[Ee],he[Ee],k,fe,Ee.slice(6),Zt.setPaintProperty):Kt(ve[Ee],he[Ee])||k.push({command:Zt.setLayerProperty,args:[fe,Ee,he[Ee]]}));for(Ee in he)Object.prototype.hasOwnProperty.call(he,Ee)&&!Object.prototype.hasOwnProperty.call(ve,Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?Rr(ve[Ee],he[Ee],k,fe,Ee.slice(6),Zt.setPaintProperty):Kt(ve[Ee],he[Ee])||k.push({command:Zt.setLayerProperty,args:[fe,Ee,he[Ee]]}))}else k.push({command:Zt.removeLayer,args:[fe]}),we=U[U.lastIndexOf(fe)+1],k.push({command:Zt.addLayer,args:[he,we]})}(_,n.layers,s)}catch(d){console.warn("Unable to compute style diff:",d),s=[{command:Zt.setStyle,args:[n]}]}return s},u.dot=function(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]+a[3]*n[3]},u.earthRadius=C_,u.ease=le,u.emitValidationErrors=As,u.emptyStyle=function(){const a={},n=Ce.$version;for(const s in Ce.$root){const d=Ce.$root[s];if(d.required){let m=null;m=s==="version"?n:d.type==="array"?[]:{},m!=null&&(a[s]=m)}}return a},u.equals=function(a,n){var s=a[0],d=a[1],m=a[2],_=a[3],v=a[4],S=a[5],k=a[6],M=a[7],D=a[8],F=a[9],V=a[10],U=a[11],q=a[12],re=a[13],Q=a[14],fe=a[15],ve=n[0],he=n[1],we=n[2],Ee=n[3],Me=n[4],ot=n[5],lt=n[6],Je=n[7],Xe=n[8],qe=n[9],et=n[10],Ke=n[11],Ve=n[12],bt=n[13],ct=n[14],Ut=n[15];return Math.abs(s-ve)<=gi*Math.max(1,Math.abs(s),Math.abs(ve))&&Math.abs(d-he)<=gi*Math.max(1,Math.abs(d),Math.abs(he))&&Math.abs(m-we)<=gi*Math.max(1,Math.abs(m),Math.abs(we))&&Math.abs(_-Ee)<=gi*Math.max(1,Math.abs(_),Math.abs(Ee))&&Math.abs(v-Me)<=gi*Math.max(1,Math.abs(v),Math.abs(Me))&&Math.abs(S-ot)<=gi*Math.max(1,Math.abs(S),Math.abs(ot))&&Math.abs(k-lt)<=gi*Math.max(1,Math.abs(k),Math.abs(lt))&&Math.abs(M-Je)<=gi*Math.max(1,Math.abs(M),Math.abs(Je))&&Math.abs(D-Xe)<=gi*Math.max(1,Math.abs(D),Math.abs(Xe))&&Math.abs(F-qe)<=gi*Math.max(1,Math.abs(F),Math.abs(qe))&&Math.abs(V-et)<=gi*Math.max(1,Math.abs(V),Math.abs(et))&&Math.abs(U-Ke)<=gi*Math.max(1,Math.abs(U),Math.abs(Ke))&&Math.abs(q-Ve)<=gi*Math.max(1,Math.abs(q),Math.abs(Ve))&&Math.abs(re-bt)<=gi*Math.max(1,Math.abs(re),Math.abs(bt))&&Math.abs(Q-ct)<=gi*Math.max(1,Math.abs(Q),Math.abs(ct))&&Math.abs(fe-Ut)<=gi*Math.max(1,Math.abs(fe),Math.abs(Ut))},u.evaluateSizeForFeature=function(a,{uSize:n,uSizeT:s},{lowerSize:d,upperSize:m}){return a.kind==="source"?d/Ya:a.kind==="composite"?fi.number(d/Ya,m/Ya,s):n},u.evaluateSizeForZoom=function(a,n){let s=0,d=0;if(a.kind==="constant")d=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:m,minZoom:_,maxZoom:v}=a,S=m?$(Ci.interpolationFactor(m,n,_,v),0,1):0;a.kind==="camera"?d=fi.number(a.minSize,a.maxSize,S):s=S}return{uSizeT:s,uSize:d}},u.evaluateVariableOffset=fS,u.evented=Wu,u.exported=ht,u.extend=X,u.filterObject=ge,u.findLineIntersection=function(a,n,s,d){const m=n.y-a.y,_=n.x-a.x,v=d.y-s.y,S=d.x-s.x,k=v*_-S*m;if(k===0)return null;const M=(S*(a.y-s.y)-v*(a.x-s.x))/k;return new I(a.x+M*_,a.y+M*m)},u.fromScaling=function(a,n){return a[0]=n[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=n[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=n[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},u.getAnchorAlignment=w_,u.getAnchorJustification=A_,u.getArrayBuffer=Pr,u.getDefaultExportFromCjs=b,u.getJSON=function(a,n){return At(X(a,{type:"json"}),n)},u.getOverlapMode=b_,u.getProtocolAction=qt,u.getRTLTextPluginStatus=id,u.getReferrer=xr,u.getVideo=function(a,n){const s=window.document.createElement("video");s.muted=!0,s.onloadstart=function(){n(null,s)};for(let d=0;d<a.length;d++){const m=window.document.createElement("source");On(a[d])||(s.crossOrigin="Anonymous"),m.src=a[d],s.appendChild(m)}return{cancel:()=>{}}},u.groupByLayout=function(a,n){const s={};for(let m=0;m<a.length;m++){const _=n&&n[a[m].id]||H0(a[m]);n&&(n[a[m].id]=_);let v=s[_];v||(v=s[_]=[]),v.push(a[m])}const d=[];for(const m in s)d.push(s[m]);return d},u.identity=n_,u.interpolate=fi,u.invert=function(a,n){var s=n[0],d=n[1],m=n[2],_=n[3],v=n[4],S=n[5],k=n[6],M=n[7],D=n[8],F=n[9],V=n[10],U=n[11],q=n[12],re=n[13],Q=n[14],fe=n[15],ve=s*S-d*v,he=s*k-m*v,we=s*M-_*v,Ee=d*k-m*S,Me=d*M-_*S,ot=m*M-_*k,lt=D*re-F*q,Je=D*Q-V*q,Xe=D*fe-U*q,qe=F*Q-V*re,et=F*fe-U*re,Ke=V*fe-U*Q,Ve=ve*Ke-he*et+we*qe+Ee*Xe-Me*Je+ot*lt;return Ve?(a[0]=(S*Ke-k*et+M*qe)*(Ve=1/Ve),a[1]=(m*et-d*Ke-_*qe)*Ve,a[2]=(re*ot-Q*Me+fe*Ee)*Ve,a[3]=(V*Me-F*ot-U*Ee)*Ve,a[4]=(k*Xe-v*Ke-M*Je)*Ve,a[5]=(s*Ke-m*Xe+_*Je)*Ve,a[6]=(Q*we-q*ot-fe*he)*Ve,a[7]=(D*ot-V*we+U*he)*Ve,a[8]=(v*et-S*Xe+M*lt)*Ve,a[9]=(d*Xe-s*et-_*lt)*Ve,a[10]=(q*Me-re*we+fe*ve)*Ve,a[11]=(F*we-D*Me-U*ve)*Ve,a[12]=(S*Je-v*qe-k*lt)*Ve,a[13]=(s*qe-d*Je+m*lt)*Ve,a[14]=(re*he-q*Ee-Q*ve)*Ve,a[15]=(D*Ee-F*he+V*ve)*Ve,a):null},u.isImageBitmap=Xt,u.isSafari=Ot,u.isWorker=vt,u.keysDifference=function(a,n){const s=[];for(const d in a)d in n||s.push(d);return s},u.lazyLoadRTLTextPlugin=function(){Yi.isLoading()||Yi.isLoaded()||id()!=="deferred"||Up()},u.makeRequest=At,u.mapObject=me,u.mercatorXfromLng=H2,u.mercatorYfromLat=X2,u.mercatorZfromAltitude=K2,u.mul=$z,u.mul$1=function(a,n,s){return a[0]=n[0]*s[0],a[1]=n[1]*s[1],a[2]=n[2]*s[2],a[3]=n[3]*s[3],a},u.multiply=e2,u.nextPowerOfTwo=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},u.operations=Zt,u.ortho=function(a,n,s,d,m,_,v){var S=1/(n-s),k=1/(d-m),M=1/(_-v);return a[0]=-2*S,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*k,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*M,a[11]=0,a[12]=(n+s)*S,a[13]=(m+d)*k,a[14]=(v+_)*M,a[15]=1,a},u.parseCacheControl=function(a){const n={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,d,m,_)=>{const v=m||_;return n[d]=!v||v.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},u.parseGlyphPbf=function(a){return new __(a).readFields(O5,[])},u.pbf=T2,u.performSymbolLayout=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=Ar/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const n=a.bucket.layers[0].layout,s=a.bucket.layers[0]._unevaluatedLayout._values,d={layoutIconSize:s["icon-size"].possiblyEvaluate(new Mr(a.bucket.zoom+1),a.canonical),layoutTextSize:s["text-size"].possiblyEvaluate(new Mr(a.bucket.zoom+1),a.canonical),textMaxSize:s["text-size"].possiblyEvaluate(new Mr(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:k,maxZoom:M}=a.bucket.textSizeData;d.compositeTextSizes=[s["text-size"].possiblyEvaluate(new Mr(k),a.canonical),s["text-size"].possiblyEvaluate(new Mr(M),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:k,maxZoom:M}=a.bucket.iconSizeData;d.compositeIconSizes=[s["icon-size"].possiblyEvaluate(new Mr(k),a.canonical),s["icon-size"].possiblyEvaluate(new Mr(M),a.canonical)]}const m=n.get("text-line-height")*zn,_=n.get("text-rotation-alignment")!=="viewport"&&n.get("symbol-placement")!=="point",v=n.get("text-keep-upright"),S=n.get("text-size");for(const k of a.bucket.features){const M=n.get("text-font").evaluate(k,{},a.canonical).join(","),D=S.evaluate(k,{},a.canonical),F=d.layoutTextSize.evaluate(k,{},a.canonical),V=d.layoutIconSize.evaluate(k,{},a.canonical),U={horizontal:{},vertical:void 0},q=k.text;let re,Q=[0,0];if(q){const he=q.toString(),we=n.get("text-letter-spacing").evaluate(k,{},a.canonical)*zn,Ee=ed(he)?we:0,Me=n.get("text-anchor").evaluate(k,{},a.canonical),ot=n.get("text-variable-anchor");if(!ot){const et=n.get("text-radial-offset").evaluate(k,{},a.canonical);Q=et?fS(Me,[et*zn,M_]):n.get("text-offset").evaluate(k,{},a.canonical).map(Ke=>Ke*zn)}let lt=_?"center":n.get("text-justify").evaluate(k,{},a.canonical);const Je=n.get("symbol-placement"),Xe=Je==="point"?n.get("text-max-width").evaluate(k,{},a.canonical)*zn:0,qe=()=>{a.bucket.allowVerticalPlacement&&Vu(he)&&(U.vertical=im(q,a.glyphMap,a.glyphPositions,a.imagePositions,M,Xe,m,Me,"left",Ee,Q,u.WritingMode.vertical,!0,Je,F,D))};if(!_&&ot){const et=lt==="auto"?ot.map(Ve=>A_(Ve)):[lt];let Ke=!1;for(let Ve=0;Ve<et.length;Ve++){const bt=et[Ve];if(!U.horizontal[bt])if(Ke)U.horizontal[bt]=U.horizontal[0];else{const ct=im(q,a.glyphMap,a.glyphPositions,a.imagePositions,M,Xe,m,"center",bt,Ee,Q,u.WritingMode.horizontal,!1,Je,F,D);ct&&(U.horizontal[bt]=ct,Ke=ct.positionedLines.length===1)}}qe()}else{lt==="auto"&&(lt=A_(Me));const et=im(q,a.glyphMap,a.glyphPositions,a.imagePositions,M,Xe,m,Me,lt,Ee,Q,u.WritingMode.horizontal,!1,Je,F,D);et&&(U.horizontal[lt]=et),qe(),Vu(he)&&_&&v&&(U.vertical=im(q,a.glyphMap,a.glyphPositions,a.imagePositions,M,Xe,m,Me,lt,Ee,Q,u.WritingMode.vertical,!1,Je,F,D))}}let fe=!1;if(k.icon&&k.icon.name){const he=a.imageMap[k.icon.name];he&&(re=j5(a.imagePositions[k.icon.name],n.get("icon-offset").evaluate(k,{},a.canonical),n.get("icon-anchor").evaluate(k,{},a.canonical)),fe=!!he.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=fe:a.bucket.sdfIcons!==fe&&ke("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(he.pixelRatio!==a.bucket.pixelRatio||n.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const ve=mS(U.horizontal)||U.vertical;a.bucket.iconsInText=!!ve&&ve.iconsInText,(ve||re)&&oD(a.bucket,k,U,re,a.imageMap,d,F,V,Q,fe,a.canonical)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},u.perspective=function(a,n,s,d,m){var _,v=1/Math.tan(n/2);return a[0]=v/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=v,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,m!=null&&m!==1/0?(a[10]=(m+d)*(_=1/(d-m)),a[14]=2*m*d*_):(a[10]=-1,a[14]=-2*d),a},u.pick=function(a,n){const s={};for(let d=0;d<n.length;d++){const m=n[d];m in a&&(s[m]=a[m])}return s},u.plugin=Yi,u.pointGeometry=w,u.polygonIntersectsPolygon=Hb,u.potpack=D2,u.register=at,u.registerForPluginStateChange=function(a){return a({pluginStatus:pi,pluginURL:ka}),Wu.on("pluginStateChange",a),a},u.renderColorRamp=o2,u.rotateX=function(a,n,s){var d=Math.sin(s),m=Math.cos(s),_=n[4],v=n[5],S=n[6],k=n[7],M=n[8],D=n[9],F=n[10],V=n[11];return n!==a&&(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[4]=_*m+M*d,a[5]=v*m+D*d,a[6]=S*m+F*d,a[7]=k*m+V*d,a[8]=M*m-_*d,a[9]=D*m-v*d,a[10]=F*m-S*d,a[11]=V*m-k*d,a},u.rotateZ=function(a,n,s){var d=Math.sin(s),m=Math.cos(s),_=n[0],v=n[1],S=n[2],k=n[3],M=n[4],D=n[5],F=n[6],V=n[7];return n!==a&&(a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=_*m+M*d,a[1]=v*m+D*d,a[2]=S*m+F*d,a[3]=k*m+V*d,a[4]=M*m-_*d,a[5]=D*m-v*d,a[6]=F*m-S*d,a[7]=V*m-k*d,a},u.sameOrigin=On,u.scale=function(a,n,s){var d=s[0],m=s[1],_=s[2];return a[0]=n[0]*d,a[1]=n[1]*d,a[2]=n[2]*d,a[3]=n[3]*d,a[4]=n[4]*m,a[5]=n[5]*m,a[6]=n[6]*m,a[7]=n[7]*m,a[8]=n[8]*_,a[9]=n[9]*_,a[10]=n[10]*_,a[11]=n[11]*_,a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a},u.setRTLTextPlugin=function(a,n,s=!1){if(pi===td||pi===Gu||pi===rd)throw new Error("setRTLTextPlugin cannot be called multiple times.");ka=ht.resolveURL(a),pi=td,Fl=n,nd(),s||Up()},u.sphericalToCartesian=function([a,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:a*Math.cos(n)*Math.sin(s),y:a*Math.sin(n)*Math.sin(s),z:a*Math.cos(s)}},u.toEvaluationFeature=Ul,u.transformMat4=Kp,u.translate=function(a,n,s){var d,m,_,v,S,k,M,D,F,V,U,q,re=s[0],Q=s[1],fe=s[2];return n===a?(a[12]=n[0]*re+n[4]*Q+n[8]*fe+n[12],a[13]=n[1]*re+n[5]*Q+n[9]*fe+n[13],a[14]=n[2]*re+n[6]*Q+n[10]*fe+n[14],a[15]=n[3]*re+n[7]*Q+n[11]*fe+n[15]):(m=n[1],_=n[2],v=n[3],S=n[4],k=n[5],M=n[6],D=n[7],F=n[8],V=n[9],U=n[10],q=n[11],a[0]=d=n[0],a[1]=m,a[2]=_,a[3]=v,a[4]=S,a[5]=k,a[6]=M,a[7]=D,a[8]=F,a[9]=V,a[10]=U,a[11]=q,a[12]=d*re+S*Q+F*fe+n[12],a[13]=m*re+k*Q+V*fe+n[13],a[14]=_*re+M*Q+U*fe+n[14],a[15]=v*re+D*Q+q*fe+n[15]),a},u.triggerPluginCompletionEvent=Np,u.unicodeBlockLookup=Ye,u.uniqueId=function(){return ue++},u.v8Spec=Ce,u.validateCustomStyleLayer=function(a){const n=[],s=a.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),a.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},u.validateLight=X0,u.validateStyle=Ea,u.vectorTile=Rs,u.warnOnce=ke,u.wrap=B}),h(["./shared"],function(u){class b{constructor(O){this.keyCache={},O&&this.replace(O)}replace(O){this._layerConfigs={},this._layers={},this.update(O,[])}update(O,N){for(const ie of O){this._layerConfigs[ie.id]=ie;const se=this._layers[ie.id]=u.createStyleLayer(ie);se._featureFilter=u.createFilter(se.filter),this.keyCache[ie.id]&&delete this.keyCache[ie.id]}for(const ie of N)delete this.keyCache[ie],delete this._layerConfigs[ie],delete this._layers[ie];this.familiesBySource={};const K=u.groupByLayout(Object.values(this._layerConfigs),this.keyCache);for(const ie of K){const se=ie.map(Ie=>this._layers[Ie.id]),ye=se[0];if(ye.visibility==="none")continue;const pe=ye.source||"";let ae=this.familiesBySource[pe];ae||(ae=this.familiesBySource[pe]={});const _e=ye.sourceLayer||"_geojsonTileLayer";let Ae=ae[_e];Ae||(Ae=ae[_e]=[]),Ae.push(se)}}}class w{constructor(O){const N={},K=[];for(const pe in O){const ae=O[pe],_e=N[pe]={};for(const Ae in ae){const Ie=ae[+Ae];if(!Ie||Ie.bitmap.width===0||Ie.bitmap.height===0)continue;const ze={x:0,y:0,w:Ie.bitmap.width+2,h:Ie.bitmap.height+2};K.push(ze),_e[Ae]={rect:ze,metrics:Ie.metrics}}}const{w:ie,h:se}=u.potpack(K),ye=new u.AlphaImage({width:ie||1,height:se||1});for(const pe in O){const ae=O[pe];for(const _e in ae){const Ae=ae[+_e];if(!Ae||Ae.bitmap.width===0||Ae.bitmap.height===0)continue;const Ie=N[pe][_e].rect;u.AlphaImage.copy(Ae.bitmap,ye,{x:0,y:0},{x:Ie.x+1,y:Ie.y+1},Ae.bitmap)}}this.image=ye,this.positions=N}}u.register("GlyphAtlas",w);class T{constructor(O){this.tileID=new u.OverscaledTileID(O.tileID.overscaledZ,O.tileID.wrap,O.tileID.canonical.z,O.tileID.canonical.x,O.tileID.canonical.y),this.uid=O.uid,this.zoom=O.zoom,this.pixelRatio=O.pixelRatio,this.tileSize=O.tileSize,this.source=O.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=O.showCollisionBoxes,this.collectResourceTiming=!!O.collectResourceTiming,this.returnDependencies=!!O.returnDependencies,this.promoteId=O.promoteId}parse(O,N,K,ie,se){this.status="parsing",this.data=O,this.collisionBoxArray=new u.CollisionBoxArray;const ye=new u.DictionaryCoder(Object.keys(O.layers).sort()),pe=new u.FeatureIndex(this.tileID,this.promoteId);pe.bucketLayerIDs=[];const ae={},_e={featureIndex:pe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:K},Ae=N.familiesBySource[this.source];for(const Nt in Ae){const cr=O.layers[Nt];if(!cr)continue;cr.version===1&&u.warnOnce(`Vector tile source "${this.source}" layer "${Nt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const fr=ye.encode(Nt),Ir=[];for(let Lr=0;Lr<cr.length;Lr++){const Qr=cr.feature(Lr),er=pe.getId(Qr,Nt);Ir.push({feature:Qr,id:er,index:Lr,sourceLayerIndex:fr})}for(const Lr of Ae[Nt]){const Qr=Lr[0];Qr.source!==this.source&&u.warnOnce(`layer.source = ${Qr.source} does not equal this.source = ${this.source}`),Qr.minzoom&&this.zoom<Math.floor(Qr.minzoom)||Qr.maxzoom&&this.zoom>=Qr.maxzoom||Qr.visibility!=="none"&&(I(Lr,this.zoom,K),(ae[Qr.id]=Qr.createBucket({index:pe.bucketLayerIDs.length,layers:Lr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:fr,sourceID:this.source})).populate(Ir,_e,this.tileID.canonical),pe.bucketLayerIDs.push(Lr.map(er=>er.id)))}}let Ie,ze,_t,Lt;const ut=u.mapObject(_e.glyphDependencies,Nt=>Object.keys(Nt).map(Number));Object.keys(ut).length?ie.send("getGlyphs",{uid:this.uid,stacks:ut,source:this.source,tileID:this.tileID,type:"glyphs"},(Nt,cr)=>{Ie||(Ie=Nt,ze=cr,Yt.call(this))}):ze={};const xt=Object.keys(_e.iconDependencies);xt.length?ie.send("getImages",{icons:xt,source:this.source,tileID:this.tileID,type:"icons"},(Nt,cr)=>{Ie||(Ie=Nt,_t=cr,Yt.call(this))}):_t={};const $t=Object.keys(_e.patternDependencies);function Yt(){if(Ie)return se(Ie);if(ze&&_t&&Lt){const Nt=new w(ze),cr=new u.ImageAtlas(_t,Lt);for(const fr in ae){const Ir=ae[fr];Ir instanceof u.SymbolBucket?(I(Ir.layers,this.zoom,K),u.performSymbolLayout({bucket:Ir,glyphMap:ze,glyphPositions:Nt.positions,imageMap:_t,imagePositions:cr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Ir.hasPattern&&(Ir instanceof u.LineBucket||Ir instanceof u.FillBucket||Ir instanceof u.FillExtrusionBucket)&&(I(Ir.layers,this.zoom,K),Ir.addFeatures(_e,this.tileID.canonical,cr.patternPositions))}this.status="done",se(null,{buckets:Object.values(ae).filter(fr=>!fr.isEmpty()),featureIndex:pe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Nt.image,imageAtlas:cr,glyphMap:this.returnDependencies?ze:null,iconMap:this.returnDependencies?_t:null,glyphPositions:this.returnDependencies?Nt.positions:null})}}$t.length?ie.send("getImages",{icons:$t,source:this.source,tileID:this.tileID,type:"patterns"},(Nt,cr)=>{Ie||(Ie=Nt,Lt=cr,Yt.call(this))}):Lt={},Yt.call(this)}}function I(J,O,N){const K=new u.EvaluationParameters(O);for(const ie of J)ie.recalculate(K,N)}function z(J,O){const N=u.getArrayBuffer(J.request,(K,ie,se,ye)=>{K?O(K):ie&&O(null,{vectorTile:new u.vectorTile.VectorTile(new u.Protobuf(ie)),rawData:ie,cacheControl:se,expires:ye})});return()=>{N.cancel(),O()}}class j{constructor(O,N,K,ie){this.actor=O,this.layerIndex=N,this.availableImages=K,this.loadVectorData=ie||z,this.loading={},this.loaded={}}loadTile(O,N){const K=O.uid;this.loading||(this.loading={});const ie=!!(O&&O.request&&O.request.collectResourceTiming)&&new u.RequestPerformance(O.request),se=this.loading[K]=new T(O);se.abort=this.loadVectorData(O,(ye,pe)=>{if(delete this.loading[K],ye||!pe)return se.status="done",this.loaded[K]=se,N(ye);const ae=pe.rawData,_e={};pe.expires&&(_e.expires=pe.expires),pe.cacheControl&&(_e.cacheControl=pe.cacheControl);const Ae={};if(ie){const Ie=ie.finish();Ie&&(Ae.resourceTiming=JSON.parse(JSON.stringify(Ie)))}se.vectorTile=pe.vectorTile,se.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ie,ze)=>{if(Ie||!ze)return N(Ie);N(null,u.extend({rawTileData:ae.slice(0)},ze,_e,Ae))}),this.loaded=this.loaded||{},this.loaded[K]=se})}reloadTile(O,N){const K=this.loaded,ie=O.uid,se=this;if(K&&K[ie]){const ye=K[ie];ye.showCollisionBoxes=O.showCollisionBoxes;const pe=(ae,_e)=>{const Ae=ye.reloadCallback;Ae&&(delete ye.reloadCallback,ye.parse(ye.vectorTile,se.layerIndex,this.availableImages,se.actor,Ae)),N(ae,_e)};ye.status==="parsing"?ye.reloadCallback=pe:ye.status==="done"&&(ye.vectorTile?ye.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor,pe):pe())}}abortTile(O,N){const K=this.loading,ie=O.uid;K&&K[ie]&&K[ie].abort&&(K[ie].abort(),delete K[ie]),N()}removeTile(O,N){const K=this.loaded,ie=O.uid;K&&K[ie]&&delete K[ie],N()}}class Z{constructor(){this.loaded={}}loadTile(O,N){const{uid:K,encoding:ie,rawImageData:se}=O,ye=u.isImageBitmap(se)?this.getImageData(se):se,pe=new u.DEMData(K,ye,ie);this.loaded=this.loaded||{},this.loaded[K]=pe,N(null,pe)}getImageData(O){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(O.width,O.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=O.width,this.offscreenCanvas.height=O.height,this.offscreenCanvasContext.drawImage(O,0,0,O.width,O.height);const N=this.offscreenCanvasContext.getImageData(-1,-1,O.width+2,O.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new u.RGBAImage({width:N.width,height:N.height},N.data)}removeTile(O){const N=this.loaded,K=O.uid;N&&N[K]&&delete N[K]}}function H(J,O){if(J.length!==0){le(J[0],O);for(var N=1;N<J.length;N++)le(J[N],!O)}}function le(J,O){for(var N=0,K=0,ie=0,se=J.length,ye=se-1;ie<se;ye=ie++){var pe=(J[ie][0]-J[ye][0])*(J[ye][1]+J[ie][1]),ae=N+pe;K+=Math.abs(N)>=Math.abs(pe)?N-ae+pe:pe-ae+N,N=ae}N+K>=0!=!!O&&J.reverse()}var $=u.getDefaultExportFromCjs(function J(O,N){var K,ie=O&&O.type;if(ie==="FeatureCollection")for(K=0;K<O.features.length;K++)J(O.features[K],N);else if(ie==="GeometryCollection")for(K=0;K<O.geometries.length;K++)J(O.geometries[K],N);else if(ie==="Feature")J(O.geometry,N);else if(ie==="Polygon")H(O.coordinates,N);else if(ie==="MultiPolygon")for(K=0;K<O.coordinates.length;K++)H(O.coordinates[K],N);return O});const B=u.vectorTile.VectorTileFeature.prototype.toGeoJSON;var X={exports:{}},ue=u.pointGeometry,ce=u.vectorTile.VectorTileFeature,me=ge;function ge(J,O){this.options=O||{},this.features=J,this.length=J.length}function xe(J,O){this.id=typeof J.id=="number"?J.id:void 0,this.type=J.type,this.rawGeometry=J.type===1?[J.geometry]:J.geometry,this.properties=J.tags,this.extent=O||4096}ge.prototype.feature=function(J){return new xe(this.features[J],this.options.extent)},xe.prototype.loadGeometry=function(){var J=this.rawGeometry;this.geometry=[];for(var O=0;O<J.length;O++){for(var N=J[O],K=[],ie=0;ie<N.length;ie++)K.push(new ue(N[ie][0],N[ie][1]));this.geometry.push(K)}return this.geometry},xe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var J=this.geometry,O=1/0,N=-1/0,K=1/0,ie=-1/0,se=0;se<J.length;se++)for(var ye=J[se],pe=0;pe<ye.length;pe++){var ae=ye[pe];O=Math.min(O,ae.x),N=Math.max(N,ae.x),K=Math.min(K,ae.y),ie=Math.max(ie,ae.y)}return[O,K,N,ie]},xe.prototype.toGeoJSON=ce.prototype.toGeoJSON;var je=u.pbf,ke=me;function Be(J){var O=new je;return function(N,K){for(var ie in N.layers)K.writeMessage(3,zt,N.layers[ie])}(J,O),O.finish()}function zt(J,O){var N;O.writeVarintField(15,J.version||1),O.writeStringField(1,J.name||""),O.writeVarintField(5,J.extent||4096);var K={keys:[],values:[],keycache:{},valuecache:{}};for(N=0;N<J.length;N++)K.feature=J.feature(N),O.writeMessage(2,vt,K);var ie=K.keys;for(N=0;N<ie.length;N++)O.writeStringField(3,ie[N]);var se=K.values;for(N=0;N<se.length;N++)O.writeMessage(4,Ne,se[N])}function vt(J,O){var N=J.feature;N.id!==void 0&&O.writeVarintField(1,N.id),O.writeMessage(2,Et,J),O.writeVarintField(3,N.type),O.writeMessage(4,or,N)}function Et(J,O){var N=J.feature,K=J.keys,ie=J.values,se=J.keycache,ye=J.valuecache;for(var pe in N.properties){var ae=N.properties[pe],_e=se[pe];if(ae!==null){_e===void 0&&(K.push(pe),se[pe]=_e=K.length-1),O.writeVarint(_e);var Ae=typeof ae;Ae!=="string"&&Ae!=="boolean"&&Ae!=="number"&&(ae=JSON.stringify(ae));var Ie=Ae+":"+ae,ze=ye[Ie];ze===void 0&&(ie.push(ae),ye[Ie]=ze=ie.length-1),O.writeVarint(ze)}}}function Ot(J,O){return(O<<3)+(7&J)}function Xt(J){return J<<1^J>>31}function or(J,O){for(var N=J.loadGeometry(),K=J.type,ie=0,se=0,ye=N.length,pe=0;pe<ye;pe++){var ae=N[pe],_e=1;K===1&&(_e=ae.length),O.writeVarint(Ot(1,_e));for(var Ae=K===3?ae.length-1:ae.length,Ie=0;Ie<Ae;Ie++){Ie===1&&K!==1&&O.writeVarint(Ot(2,Ae-1));var ze=ae[Ie].x-ie,_t=ae[Ie].y-se;O.writeVarint(Xt(ze)),O.writeVarint(Xt(_t)),ie+=ze,se+=_t}K===3&&O.writeVarint(Ot(7,1))}}function Ne(J,O){var N=typeof J;N==="string"?O.writeStringField(1,J):N==="boolean"?O.writeBooleanField(7,J):N==="number"&&(J%1!=0?O.writeDoubleField(3,J):J<0?O.writeSVarintField(6,J):O.writeVarintField(5,J))}X.exports=Be,X.exports.fromVectorTileJs=Be,X.exports.fromGeojsonVt=function(J,O){O=O||{};var N={};for(var K in J)N[K]=new ke(J[K].features,O),N[K].name=K,N[K].version=O.version,N[K].extent=O.extent;return Be({layers:N})},X.exports.GeoJSONWrapper=ke;var rt=u.getDefaultExportFromCjs(X.exports);const ht={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:J=>J},Dt=Math.fround||(it=new Float32Array(1),J=>(it[0]=+J,it[0]));var it;class xr{constructor(O){this.options=Object.assign(Object.create(ht),O),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(O){const{log:N,minZoom:K,maxZoom:ie}=this.options;N&&console.time("total time");const se=`prepare ${O.length} points`;N&&console.time(se),this.points=O;const ye=[];for(let ae=0;ae<O.length;ae++){const _e=O[ae];if(!_e.geometry)continue;const[Ae,Ie]=_e.geometry.coordinates,ze=Dt(At(Ae)),_t=Dt(Pr(Ie));ye.push(ze,_t,1/0,ae,-1,1),this.options.reduce&&ye.push(0)}let pe=this.trees[ie+1]=this._createTree(ye);N&&console.timeEnd(se);for(let ae=ie;ae>=K;ae--){const _e=+Date.now();pe=this.trees[ae]=this._createTree(this._cluster(pe,ae)),N&&console.log("z%d: %d clusters in %dms",ae,pe.numItems,+Date.now()-_e)}return N&&console.timeEnd("total time"),this}getClusters(O,N){let K=((O[0]+180)%360+360)%360-180;const ie=Math.max(-90,Math.min(90,O[1]));let se=O[2]===180?180:((O[2]+180)%360+360)%360-180;const ye=Math.max(-90,Math.min(90,O[3]));if(O[2]-O[0]>=360)K=-180,se=180;else if(K>se){const Ie=this.getClusters([K,ie,180,ye],N),ze=this.getClusters([-180,ie,se,ye],N);return Ie.concat(ze)}const pe=this.trees[this._limitZoom(N)],ae=pe.range(At(K),Pr(ye),At(se),Pr(ie)),_e=pe.data,Ae=[];for(const Ie of ae){const ze=this.stride*Ie;Ae.push(_e[ze+5]>1?qt(_e,ze,this.clusterProps):this.points[_e[ze+3]])}return Ae}getChildren(O){const N=this._getOriginId(O),K=this._getOriginZoom(O),ie="No cluster with the specified id.",se=this.trees[K];if(!se)throw new Error(ie);const ye=se.data;if(N*this.stride>=ye.length)throw new Error(ie);const pe=this.options.radius/(this.options.extent*Math.pow(2,K-1)),ae=se.within(ye[N*this.stride],ye[N*this.stride+1],pe),_e=[];for(const Ae of ae){const Ie=Ae*this.stride;ye[Ie+4]===O&&_e.push(ye[Ie+5]>1?qt(ye,Ie,this.clusterProps):this.points[ye[Ie+3]])}if(_e.length===0)throw new Error(ie);return _e}getLeaves(O,N,K){const ie=[];return this._appendLeaves(ie,O,N=N||10,K=K||0,0),ie}getTile(O,N,K){const ie=this.trees[this._limitZoom(O)],se=Math.pow(2,O),{extent:ye,radius:pe}=this.options,ae=pe/ye,_e=(K-ae)/se,Ae=(K+1+ae)/se,Ie={features:[]};return this._addTileFeatures(ie.range((N-ae)/se,_e,(N+1+ae)/se,Ae),ie.data,N,K,se,Ie),N===0&&this._addTileFeatures(ie.range(1-ae/se,_e,1,Ae),ie.data,se,K,se,Ie),N===se-1&&this._addTileFeatures(ie.range(0,_e,ae/se,Ae),ie.data,-1,K,se,Ie),Ie.features.length?Ie:null}getClusterExpansionZoom(O){let N=this._getOriginZoom(O)-1;for(;N<=this.options.maxZoom;){const K=this.getChildren(O);if(N++,K.length!==1)break;O=K[0].properties.cluster_id}return N}_appendLeaves(O,N,K,ie,se){const ye=this.getChildren(N);for(const pe of ye){const ae=pe.properties;if(ae&&ae.cluster?se+ae.point_count<=ie?se+=ae.point_count:se=this._appendLeaves(O,ae.cluster_id,K,ie,se):se<ie?se++:O.push(pe),O.length===K)break}return se}_createTree(O){const N=new u.KDBush(O.length/this.stride|0,this.options.nodeSize,Float32Array);for(let K=0;K<O.length;K+=this.stride)N.add(O[K],O[K+1]);return N.finish(),N.data=O,N}_addTileFeatures(O,N,K,ie,se,ye){for(const pe of O){const ae=pe*this.stride,_e=N[ae+5]>1;let Ae,Ie,ze;if(_e)Ae=Dr(N,ae,this.clusterProps),Ie=N[ae],ze=N[ae+1];else{const ut=this.points[N[ae+3]];Ae=ut.properties;const[xt,$t]=ut.geometry.coordinates;Ie=At(xt),ze=Pr($t)}const _t={type:1,geometry:[[Math.round(this.options.extent*(Ie*se-K)),Math.round(this.options.extent*(ze*se-ie))]],tags:Ae};let Lt;Lt=_e||this.options.generateId?N[ae+3]:this.points[N[ae+3]].id,Lt!==void 0&&(_t.id=Lt),ye.features.push(_t)}}_limitZoom(O){return Math.max(this.options.minZoom,Math.min(Math.floor(+O),this.options.maxZoom+1))}_cluster(O,N){const{radius:K,extent:ie,reduce:se,minPoints:ye}=this.options,pe=K/(ie*Math.pow(2,N)),ae=O.data,_e=[],Ae=this.stride;for(let Ie=0;Ie<ae.length;Ie+=Ae){if(ae[Ie+2]<=N)continue;ae[Ie+2]=N;const ze=ae[Ie],_t=ae[Ie+1],Lt=O.within(ae[Ie],ae[Ie+1],pe),ut=ae[Ie+5];let xt=ut;for(const $t of Lt){const Yt=$t*Ae;ae[Yt+2]>N&&(xt+=ae[Yt+5])}if(xt>ut&&xt>=ye){let $t,Yt=ze*ut,Nt=_t*ut,cr=-1;const fr=((Ie/Ae|0)<<5)+(N+1)+this.points.length;for(const Ir of Lt){const Lr=Ir*Ae;if(ae[Lr+2]<=N)continue;ae[Lr+2]=N;const Qr=ae[Lr+5];Yt+=ae[Lr]*Qr,Nt+=ae[Lr+1]*Qr,ae[Lr+4]=fr,se&&($t||($t=this._map(ae,Ie,!0),cr=this.clusterProps.length,this.clusterProps.push($t)),se($t,this._map(ae,Lr)))}ae[Ie+4]=fr,_e.push(Yt/xt,Nt/xt,1/0,fr,-1,xt),se&&_e.push(cr)}else{for(let $t=0;$t<Ae;$t++)_e.push(ae[Ie+$t]);if(xt>1)for(const $t of Lt){const Yt=$t*Ae;if(!(ae[Yt+2]<=N)){ae[Yt+2]=N;for(let Nt=0;Nt<Ae;Nt++)_e.push(ae[Yt+Nt])}}}}return _e}_getOriginId(O){return O-this.points.length>>5}_getOriginZoom(O){return(O-this.points.length)%32}_map(O,N,K){if(O[N+5]>1){const ye=this.clusterProps[O[N+6]];return K?Object.assign({},ye):ye}const ie=this.points[O[N+3]].properties,se=this.options.map(ie);return K&&se===ie?Object.assign({},se):se}}function qt(J,O,N){return{type:"Feature",id:J[O+3],properties:Dr(J,O,N),geometry:{type:"Point",coordinates:[(K=J[O],360*(K-.5)),On(J[O+1])]}};var K}function Dr(J,O,N){const K=J[O+5],ie=K>=1e4?`${Math.round(K/1e3)}k`:K>=1e3?Math.round(K/100)/10+"k":K,se=J[O+6],ye=se===-1?{}:Object.assign({},N[se]);return Object.assign(ye,{cluster:!0,cluster_id:J[O+3],point_count:K,point_count_abbreviated:ie})}function At(J){return J/360+.5}function Pr(J){const O=Math.sin(J*Math.PI/180),N=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return N<0?0:N>1?1:N}function On(J){const O=(180-360*J)*Math.PI/180;return 360*Math.atan(Math.exp(O))/Math.PI-90}function Mn(J,O,N,K){for(var ie,se=K,ye=N-O>>1,pe=N-O,ae=J[O],_e=J[O+1],Ae=J[N],Ie=J[N+1],ze=O+3;ze<N;ze+=3){var _t=bn(J[ze],J[ze+1],ae,_e,Ae,Ie);if(_t>se)ie=ze,se=_t;else if(_t===se){var Lt=Math.abs(ze-ye);Lt<pe&&(ie=ze,pe=Lt)}}se>K&&(ie-O>3&&Mn(J,O,ie,K),J[ie+2]=se,N-ie>3&&Mn(J,ie,N,K))}function bn(J,O,N,K,ie,se){var ye=ie-N,pe=se-K;if(ye!==0||pe!==0){var ae=((J-N)*ye+(O-K)*pe)/(ye*ye+pe*pe);ae>1?(N=ie,K=se):ae>0&&(N+=ye*ae,K+=pe*ae)}return(ye=J-N)*ye+(pe=O-K)*pe}function Gt(J,O,N,K){var ie={id:J===void 0?null:J,type:O,geometry:N,tags:K,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(se){var ye=se.geometry,pe=se.type;if(pe==="Point"||pe==="MultiPoint"||pe==="LineString")ar(se,ye);else if(pe==="Polygon"||pe==="MultiLineString")for(var ae=0;ae<ye.length;ae++)ar(se,ye[ae]);else if(pe==="MultiPolygon")for(ae=0;ae<ye.length;ae++)for(var _e=0;_e<ye[ae].length;_e++)ar(se,ye[ae][_e])}(ie),ie}function ar(J,O){for(var N=0;N<O.length;N+=3)J.minX=Math.min(J.minX,O[N]),J.minY=Math.min(J.minY,O[N+1]),J.maxX=Math.max(J.maxX,O[N]),J.maxY=Math.max(J.maxY,O[N+1])}function mn(J,O,N,K){if(O.geometry){var ie=O.geometry.coordinates,se=O.geometry.type,ye=Math.pow(N.tolerance/((1<<N.maxZoom)*N.extent),2),pe=[],ae=O.id;if(N.promoteId?ae=O.properties[N.promoteId]:N.generateId&&(ae=K||0),se==="Point")Ce(ie,pe);else if(se==="MultiPoint")for(var _e=0;_e<ie.length;_e++)Ce(ie[_e],pe);else if(se==="LineString")$n(ie,pe,ye,!1);else if(se==="MultiLineString"){if(N.lineMetrics){for(_e=0;_e<ie.length;_e++)$n(ie[_e],pe=[],ye,!1),J.push(Gt(ae,"LineString",pe,O.properties));return}qi(ie,pe,ye,!1)}else if(se==="Polygon")qi(ie,pe,ye,!0);else{if(se!=="MultiPolygon"){if(se==="GeometryCollection"){for(_e=0;_e<O.geometry.geometries.length;_e++)mn(J,{id:ae,geometry:O.geometry.geometries[_e],properties:O.properties},N,K);return}throw new Error("Input data is not a valid GeoJSON object.")}for(_e=0;_e<ie.length;_e++){var Ae=[];qi(ie[_e],Ae,ye,!0),pe.push(Ae)}}J.push(Gt(ae,se,pe,O.properties))}}function Ce(J,O){O.push(Kt(J[0])),O.push(Zt(J[1])),O.push(0)}function $n(J,O,N,K){for(var ie,se,ye=0,pe=0;pe<J.length;pe++){var ae=Kt(J[pe][0]),_e=Zt(J[pe][1]);O.push(ae),O.push(_e),O.push(0),pe>0&&(ye+=K?(ie*_e-ae*se)/2:Math.sqrt(Math.pow(ae-ie,2)+Math.pow(_e-se,2))),ie=ae,se=_e}var Ae=O.length-3;O[2]=1,Mn(O,0,Ae,N),O[Ae+2]=1,O.size=Math.abs(ye),O.start=0,O.end=O.size}function qi(J,O,N,K){for(var ie=0;ie<J.length;ie++){var se=[];$n(J[ie],se,N,K),O.push(se)}}function Kt(J){return J/360+.5}function Zt(J){var O=Math.sin(J*Math.PI/180),N=.5-.25*Math.log((1+O)/(1-O))/Math.PI;return N<0?0:N>1?1:N}function un(J,O,N,K,ie,se,ye,pe){if(K/=O,se>=(N/=O)&&ye<K)return J;if(ye<N||se>=K)return null;for(var ae=[],_e=0;_e<J.length;_e++){var Ae=J[_e],Ie=Ae.geometry,ze=Ae.type,_t=ie===0?Ae.minX:Ae.minY,Lt=ie===0?Ae.maxX:Ae.maxY;if(_t>=N&&Lt<K)ae.push(Ae);else if(!(Lt<N||_t>=K)){var ut=[];if(ze==="Point"||ze==="MultiPoint")ui(Ie,ut,N,K,ie);else if(ze==="LineString")Bn(Ie,ut,N,K,ie,!1,pe.lineMetrics);else if(ze==="MultiLineString")Rr(Ie,ut,N,K,ie,!1);else if(ze==="Polygon")Rr(Ie,ut,N,K,ie,!0);else if(ze==="MultiPolygon")for(var xt=0;xt<Ie.length;xt++){var $t=[];Rr(Ie[xt],$t,N,K,ie,!0),$t.length&&ut.push($t)}if(ut.length){if(pe.lineMetrics&&ze==="LineString"){for(xt=0;xt<ut.length;xt++)ae.push(Gt(Ae.id,ze,ut[xt],Ae.tags));continue}ze!=="LineString"&&ze!=="MultiLineString"||(ut.length===1?(ze="LineString",ut=ut[0]):ze="MultiLineString"),ze!=="Point"&&ze!=="MultiPoint"||(ze=ut.length===3?"Point":"MultiPoint"),ae.push(Gt(Ae.id,ze,ut,Ae.tags))}}}return ae.length?ae:null}function ui(J,O,N,K,ie){for(var se=0;se<J.length;se+=3){var ye=J[se+ie];ye>=N&&ye<=K&&(O.push(J[se]),O.push(J[se+1]),O.push(J[se+2]))}}function Bn(J,O,N,K,ie,se,ye){for(var pe,ae,_e=xa(J),Ae=ie===0?kt:Le,Ie=J.start,ze=0;ze<J.length-3;ze+=3){var _t=J[ze],Lt=J[ze+1],ut=J[ze+2],xt=J[ze+3],$t=J[ze+4],Yt=ie===0?_t:Lt,Nt=ie===0?xt:$t,cr=!1;ye&&(pe=Math.sqrt(Math.pow(_t-xt,2)+Math.pow(Lt-$t,2))),Yt<N?Nt>N&&(ae=Ae(_e,_t,Lt,xt,$t,N),ye&&(_e.start=Ie+pe*ae)):Yt>K?Nt<K&&(ae=Ae(_e,_t,Lt,xt,$t,K),ye&&(_e.start=Ie+pe*ae)):Qe(_e,_t,Lt,ut),Nt<N&&Yt>=N&&(ae=Ae(_e,_t,Lt,xt,$t,N),cr=!0),Nt>K&&Yt<=K&&(ae=Ae(_e,_t,Lt,xt,$t,K),cr=!0),!se&&cr&&(ye&&(_e.end=Ie+pe*ae),O.push(_e),_e=xa(J)),ye&&(Ie+=pe)}var fr=J.length-3;_t=J[fr],Lt=J[fr+1],ut=J[fr+2],(Yt=ie===0?_t:Lt)>=N&&Yt<=K&&Qe(_e,_t,Lt,ut),fr=_e.length-3,se&&fr>=3&&(_e[fr]!==_e[0]||_e[fr+1]!==_e[1])&&Qe(_e,_e[0],_e[1],_e[2]),_e.length&&O.push(_e)}function xa(J){var O=[];return O.size=J.size,O.start=J.start,O.end=J.end,O}function Rr(J,O,N,K,ie,se){for(var ye=0;ye<J.length;ye++)Bn(J[ye],O,N,K,ie,se,!1)}function Qe(J,O,N,K){J.push(O),J.push(N),J.push(K)}function kt(J,O,N,K,ie,se){var ye=(se-O)/(K-O);return J.push(se),J.push(N+(ie-N)*ye),J.push(1),ye}function Le(J,O,N,K,ie,se){var ye=(se-N)/(ie-N);return J.push(O+(K-O)*ye),J.push(se),J.push(1),ye}function Jt(J,O){for(var N=[],K=0;K<J.length;K++){var ie,se=J[K],ye=se.type;if(ye==="Point"||ye==="MultiPoint"||ye==="LineString")ie=Mt(se.geometry,O);else if(ye==="MultiLineString"||ye==="Polygon"){ie=[];for(var pe=0;pe<se.geometry.length;pe++)ie.push(Mt(se.geometry[pe],O))}else if(ye==="MultiPolygon")for(ie=[],pe=0;pe<se.geometry.length;pe++){for(var ae=[],_e=0;_e<se.geometry[pe].length;_e++)ae.push(Mt(se.geometry[pe][_e],O));ie.push(ae)}N.push(Gt(se.id,ye,ie,se.tags))}return N}function Mt(J,O){var N=[];N.size=J.size,J.start!==void 0&&(N.start=J.start,N.end=J.end);for(var K=0;K<J.length;K+=3)N.push(J[K]+O,J[K+1],J[K+2]);return N}function gn(J,O){if(J.transformed)return J;var N,K,ie,se=1<<J.z,ye=J.x,pe=J.y;for(N=0;N<J.features.length;N++){var ae=J.features[N],_e=ae.geometry,Ae=ae.type;if(ae.geometry=[],Ae===1)for(K=0;K<_e.length;K+=2)ae.geometry.push(yn(_e[K],_e[K+1],O,se,ye,pe));else for(K=0;K<_e.length;K++){var Ie=[];for(ie=0;ie<_e[K].length;ie+=2)Ie.push(yn(_e[K][ie],_e[K][ie+1],O,se,ye,pe));ae.geometry.push(Ie)}}return J.transformed=!0,J}function yn(J,O,N,K,ie,se){return[Math.round(N*(J*K-ie)),Math.round(N*(O*K-se))]}function We(J,O,N,K,ie){for(var se=O===ie.maxZoom?0:ie.tolerance/((1<<O)*ie.extent),ye={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:N,y:K,z:O,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},pe=0;pe<J.length;pe++){ye.numFeatures++,Rt(ye,J[pe],se,ie);var ae=J[pe].minX,_e=J[pe].minY,Ae=J[pe].maxX,Ie=J[pe].maxY;ae<ye.minX&&(ye.minX=ae),_e<ye.minY&&(ye.minY=_e),Ae>ye.maxX&&(ye.maxX=Ae),Ie>ye.maxY&&(ye.maxY=Ie)}return ye}function Rt(J,O,N,K){var ie=O.geometry,se=O.type,ye=[];if(se==="Point"||se==="MultiPoint")for(var pe=0;pe<ie.length;pe+=3)ye.push(ie[pe]),ye.push(ie[pe+1]),J.numPoints++,J.numSimplified++;else if(se==="LineString")It(ye,ie,J,N,!1,!1);else if(se==="MultiLineString"||se==="Polygon")for(pe=0;pe<ie.length;pe++)It(ye,ie[pe],J,N,se==="Polygon",pe===0);else if(se==="MultiPolygon")for(var ae=0;ae<ie.length;ae++){var _e=ie[ae];for(pe=0;pe<_e.length;pe++)It(ye,_e[pe],J,N,!0,pe===0)}if(ye.length){var Ae=O.tags||null;if(se==="LineString"&&K.lineMetrics){for(var Ie in Ae={},O.tags)Ae[Ie]=O.tags[Ie];Ae.mapbox_clip_start=ie.start/ie.size,Ae.mapbox_clip_end=ie.end/ie.size}var ze={geometry:ye,type:se==="Polygon"||se==="MultiPolygon"?3:se==="LineString"||se==="MultiLineString"?2:1,tags:Ae};O.id!==null&&(ze.id=O.id),J.features.push(ze)}}function It(J,O,N,K,ie,se){var ye=K*K;if(K>0&&O.size<(ie?ye:K))N.numPoints+=O.length/3;else{for(var pe=[],ae=0;ae<O.length;ae+=3)(K===0||O[ae+2]>ye)&&(N.numSimplified++,pe.push(O[ae]),pe.push(O[ae+1])),N.numPoints++;ie&&function(_e,Ae){for(var Ie=0,ze=0,_t=_e.length,Lt=_t-2;ze<_t;Lt=ze,ze+=2)Ie+=(_e[ze]-_e[Lt])*(_e[ze+1]+_e[Lt+1]);if(Ie>0===Ae)for(ze=0,_t=_e.length;ze<_t/2;ze+=2){var ut=_e[ze],xt=_e[ze+1];_e[ze]=_e[_t-2-ze],_e[ze+1]=_e[_t-1-ze],_e[_t-2-ze]=ut,_e[_t-1-ze]=xt}}(pe,se),J.push(pe)}}function Ur(J,O){var N=(O=this.options=function(ie,se){for(var ye in se)ie[ye]=se[ye];return ie}(Object.create(this.options),O)).debug;if(N&&console.time("preprocess data"),O.maxZoom<0||O.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(O.promoteId&&O.generateId)throw new Error("promoteId and generateId cannot be used together.");var K=function(ie,se){var ye=[];if(ie.type==="FeatureCollection")for(var pe=0;pe<ie.features.length;pe++)mn(ye,ie.features[pe],se,pe);else mn(ye,ie.type==="Feature"?ie:{geometry:ie},se);return ye}(J,O);this.tiles={},this.tileCoords=[],N&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",O.indexMaxZoom,O.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),K=function(ie,se){var ye=se.buffer/se.extent,pe=ie,ae=un(ie,1,-1-ye,ye,0,-1,2,se),_e=un(ie,1,1-ye,2+ye,0,-1,2,se);return(ae||_e)&&(pe=un(ie,1,-ye,1+ye,0,-1,2,se)||[],ae&&(pe=Jt(ae,1).concat(pe)),_e&&(pe=pe.concat(Jt(_e,-1)))),pe}(K,O),K.length&&this.splitTile(K,0,0,0),N&&(K.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Kn(J,O,N){return 32*((1<<J)*N+O)+J}function pt(J,O){return O?J.properties[O]:J.id}function ki(J,O){if(J==null)return!0;if(J.type==="Feature")return pt(J,O)!=null;if(J.type==="FeatureCollection"){const N=new Set;for(const K of J.features){const ie=pt(K,O);if(ie==null||N.has(ie))return!1;N.add(ie)}return!0}return!1}function Zi(J,O){const N=new Map;if(J!=null)if(J.type==="Feature")N.set(pt(J,O),J);else for(const K of J.features)N.set(pt(K,O),K);return N}function wa(J,O){const N=J.tileID.canonical;if(!this._geoJSONIndex)return O(null,null);const K=this._geoJSONIndex.getTile(N.z,N.x,N.y);if(!K)return O(null,null);const ie=new class{constructor(ye){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.EXTENT,this.length=ye.length,this._features=ye}feature(ye){return new class{constructor(pe){this._feature=pe,this.extent=u.EXTENT,this.type=pe.type,this.properties=pe.tags,"id"in pe&&!isNaN(pe.id)&&(this.id=parseInt(pe.id,10))}loadGeometry(){if(this._feature.type===1){const pe=[];for(const ae of this._feature.geometry)pe.push([new u.Point(ae[0],ae[1])]);return pe}{const pe=[];for(const ae of this._feature.geometry){const _e=[];for(const Ae of ae)_e.push(new u.Point(Ae[0],Ae[1]));pe.push(_e)}return pe}}toGeoJSON(pe,ae,_e){return B.call(this,pe,ae,_e)}}(this._features[ye])}}(K.features);let se=rt(ie);se.byteOffset===0&&se.byteLength===se.buffer.byteLength||(se=new Uint8Array(se)),O(null,{vectorTile:ie,rawData:se.buffer})}Ur.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ur.prototype.splitTile=function(J,O,N,K,ie,se,ye){for(var pe=[J,O,N,K],ae=this.options,_e=ae.debug;pe.length;){K=pe.pop(),N=pe.pop(),O=pe.pop(),J=pe.pop();var Ae=1<<O,Ie=Kn(O,N,K),ze=this.tiles[Ie];if(!ze&&(_e>1&&console.time("creation"),ze=this.tiles[Ie]=We(J,O,N,K,ae),this.tileCoords.push({z:O,x:N,y:K}),_e)){_e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",O,N,K,ze.numFeatures,ze.numPoints,ze.numSimplified),console.timeEnd("creation"));var _t="z"+O;this.stats[_t]=(this.stats[_t]||0)+1,this.total++}if(ze.source=J,ie){if(O===ae.maxZoom||O===ie)continue;var Lt=1<<ie-O;if(N!==Math.floor(se/Lt)||K!==Math.floor(ye/Lt))continue}else if(O===ae.indexMaxZoom||ze.numPoints<=ae.indexMaxPoints)continue;if(ze.source=null,J.length!==0){_e>1&&console.time("clipping");var ut,xt,$t,Yt,Nt,cr,fr=.5*ae.buffer/ae.extent,Ir=.5-fr,Lr=.5+fr,Qr=1+fr;ut=xt=$t=Yt=null,Nt=un(J,Ae,N-fr,N+Lr,0,ze.minX,ze.maxX,ae),cr=un(J,Ae,N+Ir,N+Qr,0,ze.minX,ze.maxX,ae),J=null,Nt&&(ut=un(Nt,Ae,K-fr,K+Lr,1,ze.minY,ze.maxY,ae),xt=un(Nt,Ae,K+Ir,K+Qr,1,ze.minY,ze.maxY,ae),Nt=null),cr&&($t=un(cr,Ae,K-fr,K+Lr,1,ze.minY,ze.maxY,ae),Yt=un(cr,Ae,K+Ir,K+Qr,1,ze.minY,ze.maxY,ae),cr=null),_e>1&&console.timeEnd("clipping"),pe.push(ut||[],O+1,2*N,2*K),pe.push(xt||[],O+1,2*N,2*K+1),pe.push($t||[],O+1,2*N+1,2*K),pe.push(Yt||[],O+1,2*N+1,2*K+1)}}},Ur.prototype.getTile=function(J,O,N){var K=this.options,ie=K.extent,se=K.debug;if(J<0||J>24)return null;var ye=1<<J,pe=Kn(J,O=(O%ye+ye)%ye,N);if(this.tiles[pe])return gn(this.tiles[pe],ie);se>1&&console.log("drilling down to z%d-%d-%d",J,O,N);for(var ae,_e=J,Ae=O,Ie=N;!ae&&_e>0;)_e--,Ae=Math.floor(Ae/2),Ie=Math.floor(Ie/2),ae=this.tiles[Kn(_e,Ae,Ie)];return ae&&ae.source?(se>1&&console.log("found parent tile z%d-%d-%d",_e,Ae,Ie),se>1&&console.time("drilling down"),this.splitTile(ae.source,_e,Ae,Ie,J,O,N),se>1&&console.timeEnd("drilling down"),this.tiles[pe]?gn(this.tiles[pe],ie):null):null};class ba extends j{constructor(O,N,K,ie){super(O,N,K,wa),this._dataUpdateable=new Map,this.loadGeoJSON=(se,ye)=>{const{promoteId:pe}=se;if(se.request)return u.getJSON(se.request,(ae,_e,Ae,Ie)=>{this._dataUpdateable=ki(_e,pe)?Zi(_e,pe):void 0,ye(ae,_e,Ae,Ie)});if(typeof se.data=="string")try{const ae=JSON.parse(se.data);this._dataUpdateable=ki(ae,pe)?Zi(ae,pe):void 0,ye(null,ae)}catch{ye(new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`))}else se.dataDiff?this._dataUpdateable?(function(ae,_e,Ae){var Ie,ze,_t,Lt;if(_e.removeAll&&ae.clear(),_e.remove)for(const ut of _e.remove)ae.delete(ut);if(_e.add)for(const ut of _e.add){const xt=pt(ut,Ae);xt!=null&&ae.set(xt,ut)}if(_e.update)for(const ut of _e.update){let xt=ae.get(ut.id);if(xt==null)continue;const $t=!ut.removeAllProperties&&(((Ie=ut.removeProperties)===null||Ie===void 0?void 0:Ie.length)>0||((ze=ut.addOrUpdateProperties)===null||ze===void 0?void 0:ze.length)>0);if((ut.newGeometry||ut.removeAllProperties||$t)&&(xt={...xt},ae.set(ut.id,xt),$t&&(xt.properties={...xt.properties})),ut.newGeometry&&(xt.geometry=ut.newGeometry),ut.removeAllProperties)xt.properties={};else if(((_t=ut.removeProperties)===null||_t===void 0?void 0:_t.length)>0)for(const Yt of ut.removeProperties)Object.prototype.hasOwnProperty.call(xt.properties,Yt)&&delete xt.properties[Yt];if(((Lt=ut.addOrUpdateProperties)===null||Lt===void 0?void 0:Lt.length)>0)for(const{key:Yt,value:Nt}of ut.addOrUpdateProperties)xt.properties[Yt]=Nt}}(this._dataUpdateable,se.dataDiff,pe),ye(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):ye(new Error(`Cannot update existing geojson data in ${se.source}`)):ye(new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},ie&&(this.loadGeoJSON=ie)}loadData(O,N){var K;(K=this._pendingRequest)===null||K===void 0||K.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const ie=!!(O&&O.request&&O.request.collectResourceTiming)&&new u.RequestPerformance(O.request);this._pendingCallback=N,this._pendingRequest=this.loadGeoJSON(O,(se,ye)=>{if(delete this._pendingCallback,delete this._pendingRequest,se||!ye)return N(se);if(typeof ye!="object")return N(new Error(`Input data given to '${O.source}' is not a valid GeoJSON object.`));{$(ye,!0);try{if(O.filter){const ae=u.createExpression(O.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ae.result==="error")throw new Error(ae.value.map(Ae=>`${Ae.key}: ${Ae.message}`).join(", "));const _e=ye.features.filter(Ae=>ae.value.evaluate({zoom:0},Ae));ye={type:"FeatureCollection",features:_e}}this._geoJSONIndex=O.cluster?new xr(function({superclusterOptions:ae,clusterProperties:_e}){if(!_e||!ae)return ae;const Ae={},Ie={},ze={accumulated:null,zoom:0},_t={properties:null},Lt=Object.keys(_e);for(const ut of Lt){const[xt,$t]=_e[ut],Yt=u.createExpression($t),Nt=u.createExpression(typeof xt=="string"?[xt,["accumulated"],["get",ut]]:xt);Ae[ut]=Yt.value,Ie[ut]=Nt.value}return ae.map=ut=>{_t.properties=ut;const xt={};for(const $t of Lt)xt[$t]=Ae[$t].evaluate(ze,_t);return xt},ae.reduce=(ut,xt)=>{_t.properties=xt;for(const $t of Lt)ze.accumulated=ut[$t],ut[$t]=Ie[$t].evaluate(ze,_t)},ae}(O)).load(ye.features):function(ae,_e){return new Ur(ae,_e)}(ye,O.geojsonVtOptions)}catch(ae){return N(ae)}this.loaded={};const pe={};if(ie){const ae=ie.finish();ae&&(pe.resourceTiming={},pe.resourceTiming[O.source]=JSON.parse(JSON.stringify(ae)))}N(null,pe)}})}reloadTile(O,N){const K=this.loaded;return K&&K[O.uid]?super.reloadTile(O,N):this.loadTile(O,N)}removeSource(O,N){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),N()}getClusterExpansionZoom(O,N){try{N(null,this._geoJSONIndex.getClusterExpansionZoom(O.clusterId))}catch(K){N(K)}}getClusterChildren(O,N){try{N(null,this._geoJSONIndex.getChildren(O.clusterId))}catch(K){N(K)}}getClusterLeaves(O,N){try{N(null,this._geoJSONIndex.getLeaves(O.clusterId,O.limit,O.offset))}catch(K){N(K)}}}class An{constructor(O){this.self=O,this.actor=new u.Actor(O,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:j,geojson:ba},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(N,K)=>{if(this.workerSourceTypes[N])throw new Error(`Worker source with name "${N}" already registered.`);this.workerSourceTypes[N]=K},this.self.registerRTLTextPlugin=N=>{if(u.plugin.isParsed())throw new Error("RTL text plugin already registered.");u.plugin.applyArabicShaping=N.applyArabicShaping,u.plugin.processBidirectionalText=N.processBidirectionalText,u.plugin.processStyledBidirectionalText=N.processStyledBidirectionalText}}setReferrer(O,N){this.referrer=N}setImages(O,N,K){this.availableImages[O]=N;for(const ie in this.workerSources[O]){const se=this.workerSources[O][ie];for(const ye in se)se[ye].availableImages=N}K()}setLayers(O,N,K){this.getLayerIndex(O).replace(N),K()}updateLayers(O,N,K){this.getLayerIndex(O).update(N.layers,N.removedIds),K()}loadTile(O,N,K){this.getWorkerSource(O,N.type,N.source).loadTile(N,K)}loadDEMTile(O,N,K){this.getDEMWorkerSource(O,N.source).loadTile(N,K)}reloadTile(O,N,K){this.getWorkerSource(O,N.type,N.source).reloadTile(N,K)}abortTile(O,N,K){this.getWorkerSource(O,N.type,N.source).abortTile(N,K)}removeTile(O,N,K){this.getWorkerSource(O,N.type,N.source).removeTile(N,K)}removeDEMTile(O,N){this.getDEMWorkerSource(O,N.source).removeTile(N)}removeSource(O,N,K){if(!this.workerSources[O]||!this.workerSources[O][N.type]||!this.workerSources[O][N.type][N.source])return;const ie=this.workerSources[O][N.type][N.source];delete this.workerSources[O][N.type][N.source],ie.removeSource!==void 0?ie.removeSource(N,K):K()}loadWorkerSource(O,N,K){try{this.self.importScripts(N.url),K()}catch(ie){K(ie.toString())}}syncRTLPluginState(O,N,K){try{u.plugin.setState(N);const ie=u.plugin.getPluginURL();if(u.plugin.isLoaded()&&!u.plugin.isParsed()&&ie!=null){this.self.importScripts(ie);const se=u.plugin.isParsed();K(se?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ie}`),se)}}catch(ie){K(ie.toString())}}getAvailableImages(O){let N=this.availableImages[O];return N||(N=[]),N}getLayerIndex(O){let N=this.layerIndexes[O];return N||(N=this.layerIndexes[O]=new b),N}getWorkerSource(O,N,K){if(this.workerSources[O]||(this.workerSources[O]={}),this.workerSources[O][N]||(this.workerSources[O][N]={}),!this.workerSources[O][N][K]){const ie={send:(se,ye,pe)=>{this.actor.send(se,ye,pe,O)}};this.workerSources[O][N][K]=new this.workerSourceTypes[N](ie,this.getLayerIndex(O),this.getAvailableImages(O))}return this.workerSources[O][N][K]}getDEMWorkerSource(O,N){return this.demWorkerSources[O]||(this.demWorkerSources[O]={}),this.demWorkerSources[O][N]||(this.demWorkerSources[O][N]=new Z),this.demWorkerSources[O][N]}}return u.isWorker()&&(self.worker=new An(self)),An}),h(["./shared"],function(u){var b="3.0.0";class w{static testProp(i){if(!w.docStyle)return i[0];for(let c=0;c<i.length;c++)if(i[c]in w.docStyle)return i[c];return i[0]}static create(i,c,f){const y=window.document.createElement(i);return c!==void 0&&(y.className=c),f&&f.appendChild(y),y}static createNS(i,c){return window.document.createElementNS(i,c)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(i,c){i.style[w.transformProp]=c}static addEventListener(i,c,f,y={}){i.addEventListener(c,f,"passive"in y?y:y.capture)}static removeEventListener(i,c,f,y={}){i.removeEventListener(c,f,"passive"in y?y:y.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(i,c){const f=i.getBoundingClientRect();return new u.Point(c.clientX-f.left-i.clientLeft,c.clientY-f.top-i.clientTop)}static touchPos(i,c){const f=i.getBoundingClientRect(),y=[];for(let x=0;x<c.length;x++)y.push(new u.Point(c[x].clientX-f.left-i.clientLeft,c[x].clientY-f.top-i.clientTop));return y}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}w.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const T={supported:!1,testSupport:function(p){!j&&z&&(Z?H(p):I=p)}};let I,z,j=!1,Z=!1;function H(p){const i=p.createTexture();p.bindTexture(p.TEXTURE_2D,i);try{if(p.texImage2D(p.TEXTURE_2D,0,p.RGBA,p.RGBA,p.UNSIGNED_BYTE,z),p.isContextLost())return;T.supported=!0}catch{}p.deleteTexture(i),j=!0}var le;typeof document!="undefined"&&(z=document.createElement("img"),z.onload=function(){I&&H(I),I=null,Z=!0},z.onerror=function(){j=!0,I=null},z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(p){let i,c,f,y;p.resetRequestQueue=()=>{i=[],c=0,f=0,y={}},p.addThrottleControl=A=>{const L=f++;return y[L]=A,L},p.removeThrottleControl=A=>{delete y[A],P()},p.getImage=(A,L,R=!0)=>{T.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*");const G={requestParameters:A,supportImageRefresh:R,callback:L,cancelled:!1,completed:!1,cancel:()=>{G.completed||G.cancelled||(G.cancelled=!0,G.innerRequest&&(G.innerRequest.cancel(),c--),P())}};return i.push(G),P(),G};const x=A=>{const{requestParameters:L,supportImageRefresh:R,callback:G}=A;return u.extend(L,{type:"image"}),(R!==!1||u.isWorker()||u.getProtocolAction(L.url)||L.headers&&!Object.keys(L.headers).reduce((te,Y)=>te&&Y==="accept",!0)?u.makeRequest:C)(L,(te,Y,ee,oe)=>{E(A,G,te,Y,ee,oe)})},E=(A,L,R,G,te,Y)=>{R?L(R):G instanceof HTMLImageElement||G instanceof ImageBitmap?L(null,G):G&&((ee,oe)=>{typeof createImageBitmap=="function"?u.arrayBufferToImageBitmap(ee,oe):u.arrayBufferToImage(ee,oe)})(G,(ee,oe)=>{ee!=null?L(ee):oe!=null&&L(null,oe,{cacheControl:te,expires:Y})}),A.cancelled||(A.completed=!0,c--,P())},P=()=>{const A=(()=>{const L=Object.keys(y);let R=!1;if(L.length>0){for(const G of L)if(R=y[G](),R)break}return R})()?u.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.config.MAX_PARALLEL_IMAGE_REQUESTS;for(let L=c;L<A&&i.length>0;L++){const R=i.shift();if(R.cancelled){L--;continue}const G=x(R);c++,R.innerRequest=G}},C=(A,L)=>{const R=new Image,G=A.url;let te=!1;const Y=A.credentials;return Y&&Y==="include"?R.crossOrigin="use-credentials":(Y&&Y==="same-origin"||!u.sameOrigin(G))&&(R.crossOrigin="anonymous"),R.fetchPriority="high",R.onload=()=>{L(null,R),R.onerror=R.onload=null},R.onerror=()=>{te||L(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),R.onerror=R.onload=null},R.src=G,{cancel:()=>{te=!0,R.src=""}}}}(le||(le={})),le.resetRequestQueue();var $,B=le;(function(p){p.Glyphs="Glyphs",p.Image="Image",p.Source="Source",p.SpriteImage="SpriteImage",p.SpriteJSON="SpriteJSON",p.Style="Style",p.Tile="Tile",p.Unknown="Unknown"})($||($={}));class X{constructor(i){this._transformRequestFn=i}transformRequest(i,c){return this._transformRequestFn&&this._transformRequestFn(i,c)||{url:i}}normalizeSpriteURL(i,c,f){const y=function(x){const E=x.match(ue);if(!E)throw new Error(`Unable to parse URL "${x}"`);return{protocol:E[1],authority:E[2],path:E[3]||"/",params:E[4]?E[4].split("&"):[]}}(i);return y.path+=`${c}${f}`,function(x){const E=x.params.length?`?${x.params.join("&")}`:"";return`${x.protocol}://${x.authority}${x.path}${E}`}(y)}setTransformRequest(i){this._transformRequestFn=i}}const ue=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ce(p){var i=new u.ARRAY_TYPE(3);return i[0]=p[0],i[1]=p[1],i[2]=p[2],i}var me,ge=function(p,i,c){return p[0]=i[0]-c[0],p[1]=i[1]-c[1],p[2]=i[2]-c[2],p};me=new u.ARRAY_TYPE(3),u.ARRAY_TYPE!=Float32Array&&(me[0]=0,me[1]=0,me[2]=0);var xe=function(p){var i=p[0],c=p[1];return i*i+c*c};function je(p){const i=[];if(typeof p=="string")i.push({id:"default",url:p});else if(p&&p.length>0){const c=[];for(const{id:f,url:y}of p){const x=`${f}${y}`;c.indexOf(x)===-1&&(c.push(x),i.push({id:f,url:y}))}}return i}function ke(p,i,c,f,y){if(f)return void p(f);if(y!==Object.values(i).length||y!==Object.values(c).length)return;const x={};for(const E in i){x[E]={};const P=u.exported.getImageCanvasContext(c[E]),C=i[E];for(const A in C){const{width:L,height:R,x:G,y:te,sdf:Y,pixelRatio:ee,stretchX:oe,stretchY:de,content:Se}=C[A];x[E][A]={data:null,pixelRatio:ee,sdf:Y,stretchX:oe,stretchY:de,content:Se,spriteData:{width:L,height:R,x:G,y:te,context:P}}}}p(null,x)}(function(){var p=new u.ARRAY_TYPE(2);u.ARRAY_TYPE!=Float32Array&&(p[0]=0,p[1]=0)})();class Be{constructor(i,c,f,y){this.context=i,this.format=f,this.texture=i.gl.createTexture(),this.update(c,y)}update(i,c,f){const{width:y,height:x}=i,E=!(this.size&&this.size[0]===y&&this.size[1]===x||f),{context:P}=this,{gl:C}=P;if(this.useMipmap=Boolean(c&&c.useMipmap),C.bindTexture(C.TEXTURE_2D,this.texture),P.pixelStoreUnpackFlipY.set(!1),P.pixelStoreUnpack.set(1),P.pixelStoreUnpackPremultiplyAlpha.set(this.format===C.RGBA&&(!c||c.premultiply!==!1)),E)this.size=[y,x],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||u.isImageBitmap(i)?C.texImage2D(C.TEXTURE_2D,0,this.format,this.format,C.UNSIGNED_BYTE,i):C.texImage2D(C.TEXTURE_2D,0,this.format,y,x,0,this.format,C.UNSIGNED_BYTE,i.data);else{const{x:A,y:L}=f||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||u.isImageBitmap(i)?C.texSubImage2D(C.TEXTURE_2D,0,A,L,C.RGBA,C.UNSIGNED_BYTE,i):C.texSubImage2D(C.TEXTURE_2D,0,A,L,y,x,C.RGBA,C.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&C.generateMipmap(C.TEXTURE_2D)}bind(i,c,f){const{context:y}=this,{gl:x}=y;x.bindTexture(x.TEXTURE_2D,this.texture),f!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=x.LINEAR),i!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,i),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,f||i),this.filter=i),c!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,c),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function zt(p){const{userImage:i}=p;return!!(i&&i.render&&i.render())&&(p.data.replace(new Uint8Array(i.data.buffer)),!0)}class vt extends u.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,callback:f}of this.requestors)this._notify(c,f);this.requestors=[]}}getImage(i){const c=this.images[i];if(c&&!c.data&&c.spriteData){const f=c.spriteData;c.data=new u.RGBAImage({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),c.spriteData=null}return c}addImage(i,c){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let f=!0;const y=c.data||c.spriteData;return this._validateStretch(c.stretchX,y&&y.width)||(this.fire(new u.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),f=!1),this._validateStretch(c.stretchY,y&&y.height)||(this.fire(new u.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),f=!1),this._validateContent(c.content,c)||(this.fire(new u.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),f=!1),f}_validateStretch(i,c){if(!i)return!0;let f=0;for(const y of i){if(y[0]<f||y[1]<y[0]||c<y[1])return!1;f=y[1]}return!0}_validateContent(i,c){if(!i)return!0;if(i.length!==4)return!1;const f=c.spriteData,y=f&&f.width||c.data.width,x=f&&f.height||c.data.height;return!(i[0]<0||y<i[0]||i[1]<0||x<i[1]||i[2]<0||y<i[2]||i[3]<0||x<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,c,f=!0){const y=this.getImage(i);if(f&&(y.data.width!==c.data.width||y.data.height!==c.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=y.version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,c){let f=!0;if(!this.isLoaded())for(const y of i)this.images[y]||(f=!1);this.isLoaded()||f?this._notify(i,c):this.requestors.push({ids:i,callback:c})}_notify(i,c){const f={};for(const y of i){let x=this.getImage(y);x||(this.fire(new u.Event("styleimagemissing",{id:y})),x=this.getImage(y)),x?f[y]={data:x.data.clone(),pixelRatio:x.pixelRatio,sdf:x.sdf,version:x.version,stretchX:x.stretchX,stretchY:x.stretchY,content:x.content,hasRenderCallback:Boolean(x.userImage&&x.userImage.render)}:u.warnOnce(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,f)}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],f=this.getImage(i);if(!f)return null;if(c&&c.position.version===f.version)return c.position;if(c)c.position.version=f.version;else{const y={w:f.data.width+2,h:f.data.height+2,x:0,y:0},x=new u.ImagePosition(y,f);this.patterns[i]={bin:y,position:x}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Be(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const x in this.patterns)i.push(this.patterns[x].bin);const{w:c,h:f}=u.potpack(i),y=this.atlasImage;y.resize({width:c||1,height:f||1});for(const x in this.patterns){const{bin:E}=this.patterns[x],P=E.x+1,C=E.y+1,A=this.getImage(x).data,L=A.width,R=A.height;u.RGBAImage.copy(A,y,{x:0,y:0},{x:P,y:C},{width:L,height:R}),u.RGBAImage.copy(A,y,{x:0,y:R-1},{x:P,y:C-1},{width:L,height:1}),u.RGBAImage.copy(A,y,{x:0,y:0},{x:P,y:C+R},{width:L,height:1}),u.RGBAImage.copy(A,y,{x:L-1,y:0},{x:P-1,y:C},{width:1,height:R}),u.RGBAImage.copy(A,y,{x:0,y:0},{x:P+L,y:C},{width:1,height:R})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const f=this.getImage(c);f||u.warnOnce(`Image with ID: "${c}" was not found`),zt(f)&&this.updateImage(c,f)}}}const Et=1e20;function Ot(p,i,c,f,y,x,E,P,C){for(let A=i;A<i+f;A++)Xt(p,c*x+A,x,y,E,P,C);for(let A=c;A<c+y;A++)Xt(p,A*x+i,1,f,E,P,C)}function Xt(p,i,c,f,y,x,E){x[0]=0,E[0]=-Et,E[1]=Et,y[0]=p[i];for(let P=1,C=0,A=0;P<f;P++){y[P]=p[i+P*c];const L=P*P;do{const R=x[C];A=(y[P]-y[R]+L-R*R)/(P-R)/2}while(A<=E[C]&&--C>-1);C++,x[C]=P,E[C]=A,E[C+1]=Et}for(let P=0,C=0;P<f;P++){for(;E[C+1]<P;)C++;const A=x[C],L=P-A;p[i+P*c]=y[A]+L*L}}class or{constructor(i,c){this.requestManager=i,this.localIdeographFontFamily=c,this.entries={}}setURL(i){this.url=i}getGlyphs(i,c){const f=[];for(const y in i)for(const x of i[y])f.push({stack:y,id:x});u.asyncAll(f,({stack:y,id:x},E)=>{let P=this.entries[y];P||(P=this.entries[y]={glyphs:{},requests:{},ranges:{}});let C=P.glyphs[x];if(C!==void 0)return void E(null,{stack:y,id:x,glyph:C});if(C=this._tinySDF(P,y,x),C)return P.glyphs[x]=C,void E(null,{stack:y,id:x,glyph:C});const A=Math.floor(x/256);if(256*A>65535)return void E(new Error("glyphs > 65535 not supported"));if(P.ranges[A])return void E(null,{stack:y,id:x,glyph:C});if(!this.url)return void E(new Error("glyphsUrl is not set"));let L=P.requests[A];L||(L=P.requests[A]=[],or.loadGlyphRange(y,A,this.url,this.requestManager,(R,G)=>{if(G){for(const te in G)this._doesCharSupportLocalGlyph(+te)||(P.glyphs[+te]=G[+te]);P.ranges[A]=!0}for(const te of L)te(R,G);delete P.requests[A]})),L.push((R,G)=>{R?E(R):G&&E(null,{stack:y,id:x,glyph:G[x]||null})})},(y,x)=>{if(y)c(y);else if(x){const E={};for(const{stack:P,id:C,glyph:A}of x)(E[P]||(E[P]={}))[C]=A&&{id:A.id,bitmap:A.bitmap.clone(),metrics:A.metrics};c(null,E)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(u.unicodeBlockLookup["CJK Unified Ideographs"](i)||u.unicodeBlockLookup["Hangul Syllables"](i)||u.unicodeBlockLookup.Hiragana(i)||u.unicodeBlockLookup.Katakana(i))}_tinySDF(i,c,f){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(f))return;let x=i.tinySDF;if(!x){let P="400";/bold/i.test(c)?P="900":/medium/i.test(c)?P="500":/light/i.test(c)&&(P="200"),x=i.tinySDF=new or.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:y,fontWeight:P})}const E=x.draw(String.fromCharCode(f));return{id:f,bitmap:new u.AlphaImage({width:E.width||30,height:E.height||30},E.data),metrics:{width:E.glyphWidth||24,height:E.glyphHeight||24,left:E.glyphLeft||0,top:E.glyphTop-27||-8,advance:E.glyphAdvance||24}}}}or.loadGlyphRange=function(p,i,c,f,y){const x=256*i,E=x+255,P=f.transformRequest(c.replace("{fontstack}",p).replace("{range}",`${x}-${E}`),$.Glyphs);u.getArrayBuffer(P,(C,A)=>{if(C)y(C);else if(A){const L={};for(const R of u.parseGlyphPbf(A))L[R.id]=R;y(null,L)}})},or.TinySDF=class{constructor({fontSize:p=24,buffer:i=3,radius:c=8,cutoff:f=.25,fontFamily:y="sans-serif",fontWeight:x="normal",fontStyle:E="normal"}={}){this.buffer=i,this.cutoff=f,this.radius=c;const P=this.size=p+4*i,C=this._createCanvas(P),A=this.ctx=C.getContext("2d",{willReadFrequently:!0});A.font=`${E} ${x} ${p}px ${y}`,A.textBaseline="alphabetic",A.textAlign="left",A.fillStyle="black",this.gridOuter=new Float64Array(P*P),this.gridInner=new Float64Array(P*P),this.f=new Float64Array(P),this.z=new Float64Array(P+1),this.v=new Uint16Array(P)}_createCanvas(p){const i=document.createElement("canvas");return i.width=i.height=p,i}draw(p){const{width:i,actualBoundingBoxAscent:c,actualBoundingBoxDescent:f,actualBoundingBoxLeft:y,actualBoundingBoxRight:x}=this.ctx.measureText(p),E=Math.ceil(c),P=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-y))),C=Math.min(this.size-this.buffer,E+Math.ceil(f)),A=P+2*this.buffer,L=C+2*this.buffer,R=Math.max(A*L,0),G=new Uint8ClampedArray(R),te={data:G,width:A,height:L,glyphWidth:P,glyphHeight:C,glyphTop:E,glyphLeft:0,glyphAdvance:i};if(P===0||C===0)return te;const{ctx:Y,buffer:ee,gridInner:oe,gridOuter:de}=this;Y.clearRect(ee,ee,P,C),Y.fillText(p,ee,ee+E);const Se=Y.getImageData(ee,ee,P,C);de.fill(Et,0,R),oe.fill(0,0,R);for(let ne=0;ne<C;ne++)for(let be=0;be<P;be++){const Te=Se.data[4*(ne*P+be)+3]/255;if(Te===0)continue;const De=(ne+ee)*A+be+ee;if(Te===1)de[De]=0,oe[De]=Et;else{const $e=.5-Te;de[De]=$e>0?$e*$e:0,oe[De]=$e<0?$e*$e:0}}Ot(de,0,0,A,L,A,this.f,this.v,this.z),Ot(oe,ee,ee,P,C,A,this.f,this.v,this.z);for(let ne=0;ne<R;ne++){const be=Math.sqrt(de[ne])-Math.sqrt(oe[ne]);G[ne]=Math.round(255-255*(be/this.radius+this.cutoff))}return te}};class Ne{constructor(){this.specification=u.v8Spec.light.position}possiblyEvaluate(i,c){return u.sphericalToCartesian(i.expression.evaluate(c))}interpolate(i,c,f){return{x:u.interpolate.number(i.x,c.x,f),y:u.interpolate.number(i.y,c.y,f),z:u.interpolate.number(i.z,c.z,f)}}}const rt="-transition";let ht,Dt;class it extends u.Evented{constructor(i){super(),ht=ht||new u.Properties({anchor:new u.DataConstantProperty(u.v8Spec.light.anchor),position:new Ne,color:new u.DataConstantProperty(u.v8Spec.light.color),intensity:new u.DataConstantProperty(u.v8Spec.light.intensity)}),this._transitionable=new u.Transitionable(ht),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(u.validateLight,i,c))for(const f in i){const y=i[f];f.endsWith(rt)?this._transitionable.setTransition(f.slice(0,-rt.length),y):this._transitionable.setValue(f,y)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,f){return(!f||f.validate!==!1)&&u.emitValidationErrors(this,i.call(u.validateStyle,u.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:u.v8Spec})))}}class xr{constructor(i,c){this.width=i,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,c){const f=i.join(",")+String(c);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(i,c)),this.dashEntry[f]}getDashRanges(i,c,f){const y=[];let x=i.length%2==1?-i[i.length-1]*f:0,E=i[0]*f,P=!0;y.push({left:x,right:E,isDash:P,zeroLength:i[0]===0});let C=i[0];for(let A=1;A<i.length;A++){P=!P;const L=i[A];x=C*f,C+=L,E=C*f,y.push({left:x,right:E,isDash:P,zeroLength:L===0})}return y}addRoundDash(i,c,f){const y=c/2;for(let x=-f;x<=f;x++){const E=this.width*(this.nextRow+f+x);let P=0,C=i[P];for(let A=0;A<this.width;A++){A/C.right>1&&(C=i[++P]);const L=Math.abs(A-C.left),R=Math.abs(A-C.right),G=Math.min(L,R);let te;const Y=x/f*(y+1);if(C.isDash){const ee=y-Math.abs(Y);te=Math.sqrt(G*G+ee*ee)}else te=y-Math.sqrt(G*G+Y*Y);this.data[E+A]=Math.max(0,Math.min(255,te+128))}}}addRegularDash(i){for(let P=i.length-1;P>=0;--P){const C=i[P],A=i[P+1];C.zeroLength?i.splice(P,1):A&&A.isDash===C.isDash&&(A.left=C.left,i.splice(P,1))}const c=i[0],f=i[i.length-1];c.isDash===f.isDash&&(c.left=f.left-this.width,f.right=c.right+this.width);const y=this.width*this.nextRow;let x=0,E=i[x];for(let P=0;P<this.width;P++){P/E.right>1&&(E=i[++x]);const C=Math.abs(P-E.left),A=Math.abs(P-E.right),L=Math.min(C,A);this.data[y+P]=Math.max(0,Math.min(255,(E.isDash?L:-L)+128))}}addDash(i,c){const f=c?7:0,y=2*f+1;if(this.nextRow+y>this.height)return u.warnOnce("LineAtlas out of space"),null;let x=0;for(let P=0;P<i.length;P++)x+=i[P];if(x!==0){const P=this.width/x,C=this.getDashRanges(i,this.width,P);c?this.addRoundDash(C,P,f):this.addRegularDash(C)}const E={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:x};return this.nextRow+=y,this.dirty=!0,E}bind(i){const c=i.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}class qt{constructor(i,c,f){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=f;const y=this.workerPool.acquire(f);for(let x=0;x<y.length;x++){const E=new qt.Actor(y[x],c,f);E.name=`Worker ${x}`,this.actors.push(E)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,c,f){u.asyncAll(this.actors,(y,x)=>{y.send(i,c,x)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function Dr(p,i,c){const f=function(y,x){if(y)return c(y);if(x){const E=u.pick(u.extend(x,p),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);x.vector_layers&&(E.vectorLayers=x.vector_layers,E.vectorLayerIds=E.vectorLayers.map(P=>P.id)),c(null,E)}};return p.url?u.getJSON(i.transformRequest(p.url,$.Source),f):u.exported.frame(()=>f(null,p))}qt.Actor=u.Actor;class At{constructor(i,c){i&&(c?this.setSouthWest(i).setNorthEast(c):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof u.LngLat?new u.LngLat(i.lng,i.lat):u.LngLat.convert(i),this}setSouthWest(i){return this._sw=i instanceof u.LngLat?new u.LngLat(i.lng,i.lat):u.LngLat.convert(i),this}extend(i){const c=this._sw,f=this._ne;let y,x;if(i instanceof u.LngLat)y=i,x=i;else{if(!(i instanceof At))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(At.convert(i)):this.extend(u.LngLat.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(u.LngLat.convert(i)):this;if(y=i._sw,x=i._ne,!y||!x)return this}return c||f?(c.lng=Math.min(y.lng,c.lng),c.lat=Math.min(y.lat,c.lat),f.lng=Math.max(x.lng,f.lng),f.lat=Math.max(x.lat,f.lat)):(this._sw=new u.LngLat(y.lng,y.lat),this._ne=new u.LngLat(x.lng,x.lat)),this}getCenter(){return new u.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new u.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:c,lat:f}=u.LngLat.convert(i);let y=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&y}static convert(i){return i instanceof At?i:i&&new At(i)}static fromLngLat(i,c=0){const f=360*c/40075017,y=f/Math.cos(Math.PI/180*i.lat);return new At(new u.LngLat(i.lng-y,i.lat-f),new u.LngLat(i.lng+y,i.lat+f))}}class Pr{constructor(i,c,f){this.bounds=At.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=f||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),f=Math.floor(u.mercatorXfromLng(this.bounds.getWest())*c),y=Math.floor(u.mercatorYfromLat(this.bounds.getNorth())*c),x=Math.ceil(u.mercatorXfromLng(this.bounds.getEast())*c),E=Math.ceil(u.mercatorYfromLat(this.bounds.getSouth())*c);return i.x>=f&&i.x<x&&i.y>=y&&i.y<E}}class On extends u.Evented{constructor(i,c,f,y){if(super(),this.id=i,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.extend(this,u.pick(c,["url","scheme","tileSize","promoteId"])),this._options=u.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Dr(this._options,this.map._requestManager,(i,c)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i?this.fire(new u.ErrorEvent(i)):c&&(u.extend(this,c),c.bounds&&(this.tileBounds=new Pr(c.bounds,this.minzoom,this.maxzoom)),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return u.extend({},this._options)}loadTile(i,c){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(f,$.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function x(E,P){return delete i.request,i.aborted?c(null):E&&E.status!==404?c(E):(P&&P.resourceTiming&&(i.resourceTiming=P.resourceTiming),this.map._refreshExpiredTiles&&P&&i.setExpiryData(P),i.loadVectorData(P,this.map.painter),c(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}y.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=c:i.request=i.actor.send("reloadTile",y,x.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",y,x.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Mn extends u.Evented{constructor(i,c,f,y){super(),this.id=i,this.dispatcher=f,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.extend({type:"raster"},c),u.extend(this,u.pick(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Dr(this._options,this.map._requestManager,(i,c)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new u.ErrorEvent(i)):c&&(u.extend(this,c),c.bounds&&(this.tileBounds=new Pr(c.bounds,this.minzoom,this.maxzoom)),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return u.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,c){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=B.getImage(this.map._requestManager.transformRequest(f,$.Tile),(y,x,E)=>{if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(y)i.state="errored",c(y);else if(x){this.map._refreshExpiredTiles&&E&&i.setExpiryData(E);const P=this.map.painter.context,C=P.gl;i.texture=this.map.painter.getTileTexture(x.width),i.texture?i.texture.update(x,{useMipmap:!0}):(i.texture=new Be(P,x,C.RGBA,{useMipmap:!0}),i.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE,C.LINEAR_MIPMAP_NEAREST),P.extTextureFilterAnisotropic&&C.texParameterf(C.TEXTURE_2D,P.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,P.extTextureFilterAnisotropicMax)),i.state="loaded",c(null)}},this.map._refreshExpiredTiles)}abortTile(i,c){i.request&&(i.request.cancel(),delete i.request),c()}unloadTile(i,c){i.texture&&this.map.painter.saveTileTexture(i.texture),c()}hasTransition(){return!1}}class bn extends Mn{constructor(i,c,f,y){super(i,c,f,y),this.type="raster-dem",this.maxzoom=22,this._options=u.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(i,c){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function y(x,E){x&&(i.state="errored",c(x)),E&&(i.dem=E,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",c(null))}i.request=B.getImage(this.map._requestManager.transformRequest(f,$.Tile),function(x,E){if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(x)i.state="errored",c(x);else if(E){this.map._refreshExpiredTiles&&i.setExpiryData(E),delete E.cacheControl,delete E.expires;const P=u.isImageBitmap(E)&&(Dt==null&&(Dt=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Dt)?E:u.exported.getImageData(E,1),C={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:P,encoding:this.encoding};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",C,y.bind(this)))}}.bind(this),this.map._refreshExpiredTiles),i.neighboringTiles=this._getNeighboringTiles(i.tileID)}_getNeighboringTiles(i){const c=i.canonical,f=Math.pow(2,c.z),y=(c.x-1+f)%f,x=c.x===0?i.wrap-1:i.wrap,E=(c.x+1+f)%f,P=c.x+1===f?i.wrap+1:i.wrap,C={};return C[new u.OverscaledTileID(i.overscaledZ,x,c.z,y,c.y).key]={backfilled:!1},C[new u.OverscaledTileID(i.overscaledZ,P,c.z,E,c.y).key]={backfilled:!1},c.y>0&&(C[new u.OverscaledTileID(i.overscaledZ,x,c.z,y,c.y-1).key]={backfilled:!1},C[new u.OverscaledTileID(i.overscaledZ,i.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},C[new u.OverscaledTileID(i.overscaledZ,P,c.z,E,c.y-1).key]={backfilled:!1}),c.y+1<f&&(C[new u.OverscaledTileID(i.overscaledZ,x,c.z,y,c.y+1).key]={backfilled:!1},C[new u.OverscaledTileID(i.overscaledZ,i.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},C[new u.OverscaledTileID(i.overscaledZ,P,c.z,E,c.y+1).key]={backfilled:!1}),C}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class Gt extends u.Evented{constructor(i,c,f,y){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(y),this._data=c.data,this._options=u.extend({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const x=u.EXTENT/this.tileSize;this.workerOptions=u.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*x,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*x,extent:u.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:u.EXTENT,radius:(c.clusterRadius||50)*x,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){this._updateWorkerData()}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},c),this}getClusterChildren(i,c){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},c),this}getClusterLeaves(i,c,f,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:c,offset:f},y),this}_updateWorkerData(i){const c=u.extend({},this.workerOptions);i?c.dataDiff=i:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(u.exported.resolveURL(this._data),$.Source),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,c,(f,y)=>{if(this._pendingLoads--,this._removed||y&&y.abandoned)return void this.fire(new u.Event("dataabort",{dataType:"source"}));let x=null;if(y&&y.resourceTiming&&y.resourceTiming[this.id]&&(x=y.resourceTiming[this.id].slice(0)),f)return void this.fire(new u.ErrorEvent(f));const E={dataType:"source"};this._collectResourceTiming&&x&&x.length>0&&u.extend(E,{resourceTiming:x}),this.fire(new u.Event("data",{...E,sourceDataType:"metadata"})),this.fire(new u.Event("data",{...E,sourceDataType:"content"}))})}loaded(){return this._pendingLoads===0}loadTile(i,c){const f=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const y={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(f,y,(x,E)=>(delete i.request,i.unloadVectorData(),i.aborted?c(null):x?c(x):(i.loadVectorData(E,this.map.painter,f==="reloadTile"),c(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return u.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var ar=u.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class mn extends u.Evented{constructor(i,c,f,y){super(),this.id=i,this.dispatcher=f,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=c}load(i,c){this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=B.getImage(this.map._requestManager.transformRequest(this.url,$.Image),(f,y)=>{this._request=null,this._loaded=!0,f?this.fire(new u.ErrorEvent(f)):y&&(this.image=y,i&&(this.coordinates=i),c&&c(),this._finishLoading())})}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const c=i.map(u.MercatorCoordinate.fromLngLat);this.tileID=function(y){let x=1/0,E=1/0,P=-1/0,C=-1/0;for(const G of y)x=Math.min(x,G.x),E=Math.min(E,G.y),P=Math.max(P,G.x),C=Math.max(C,G.y);const A=Math.max(P-x,C-E),L=Math.max(0,Math.floor(-Math.log(A)/Math.LN2)),R=Math.pow(2,L);return new u.CanonicalTileID(L,Math.floor((x+P)/2*R),Math.floor((E+C)/2*R))}(c),this.minzoom=this.maxzoom=this.tileID.z;const f=c.map(y=>this.tileID.getTilePoint(y)._round());return this._boundsArray=new u.RasterBoundsArray,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,u.EXTENT,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,u.EXTENT),this._boundsArray.emplaceBack(f[2].x,f[2].y,u.EXTENT,u.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,ar.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Be(i,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let f=!1;for(const y in this.tiles){const x=this.tiles[y];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,f=!0)}f&&this.fire(new u.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(i,c){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},c(null)):(i.state="errored",c(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Ce extends mn{constructor(i,c,f,y){super(i,c,f,y),this.roundZoom=!0,this.type="video",this.options=c}load(){this._loaded=!1;const i=this.options;this.urls=[];for(const c of i.urls)this.urls.push(this.map._requestManager.transformRequest(c,$.Source).url);u.getVideo(this.urls,(c,f)=>{this._loaded=!0,c?this.fire(new u.ErrorEvent(c)):f&&(this.video=f,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const c=this.video.seekable;i<c.start(0)||i>c.end(0)?this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,ar.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new Be(i,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let f=!1;for(const y in this.tiles){const x=this.tiles[y];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,f=!0)}f&&this.fire(new u.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class $n extends mn{constructor(i,c,f,y){super(i,c,f,y),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(E=>typeof E!="number"))||this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,f=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,ar.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Be(c,this.canvas,f.RGBA,{premultiply:!0});let y=!1;for(const x in this.tiles){const E=this.tiles[x];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,y=!0)}y&&this.fire(new u.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const qi={vector:On,raster:Mn,"raster-dem":bn,geojson:Gt,video:Ce,image:mn,canvas:$n};function Kt(p,i){const c=u.create();return u.translate(c,c,[1,1,0]),u.scale(c,c,[.5*p.width,.5*p.height,1]),u.multiply(c,c,p.calculatePosMatrix(i.toUnwrapped()))}function Zt(p,i,c,f,y,x){const E=function(R,G,te){if(R)for(const Y of R){const ee=G[Y];if(ee&&ee.source===te&&ee.type==="fill-extrusion")return!0}else for(const Y in G){const ee=G[Y];if(ee.source===te&&ee.type==="fill-extrusion")return!0}return!1}(y&&y.layers,i,p.id),P=x.maxPitchScaleFactor(),C=p.tilesIn(f,P,E);C.sort(un);const A=[];for(const R of C)A.push({wrappedTileID:R.tileID.wrapped().key,queryResults:R.tile.queryRenderedFeatures(i,c,p._state,R.queryGeometry,R.cameraQueryGeometry,R.scale,y,x,P,Kt(p.transform,R.tileID))});const L=function(R){const G={},te={};for(const Y of R){const ee=Y.queryResults,oe=Y.wrappedTileID,de=te[oe]=te[oe]||{};for(const Se in ee){const ne=ee[Se],be=de[Se]=de[Se]||{},Te=G[Se]=G[Se]||[];for(const De of ne)be[De.featureIndex]||(be[De.featureIndex]=!0,Te.push(De))}}return G}(A);for(const R in L)L[R].forEach(G=>{const te=G.feature,Y=p.getFeatureState(te.layer["source-layer"],te.id);te.source=te.layer.source,te.layer["source-layer"]&&(te.sourceLayer=te.layer["source-layer"]),te.state=Y});return L}function un(p,i){const c=p.tileID,f=i.tileID;return c.overscaledZ-f.overscaledZ||c.canonical.y-f.canonical.y||c.wrap-f.wrap||c.canonical.x-f.canonical.x}class ui{constructor(i,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=u.uniqueId(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const c=i+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,c,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(y,x){const E={};if(!x)return E;for(const P of y){const C=P.layerIds.map(A=>x.getLayer(A)).filter(Boolean);if(C.length!==0){P.layers=C,P.stateDependentLayerIds&&(P.stateDependentLayers=P.stateDependentLayerIds.map(A=>C.filter(L=>L.id===A)[0]));for(const A of C)E[A.id]=P}}return E}(i.buckets,c.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const x=this.buckets[y];if(x instanceof u.SymbolBucket){if(this.hasSymbolBuckets=!0,!f)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const x=this.buckets[y];if(x instanceof u.SymbolBucket&&x.hasRTLText){this.hasRTLText=!0,u.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const y in this.buckets){const x=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(y).queryRadius(x))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new u.CollisionBoxArray}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const f in this.buckets){const y=this.buckets[f];y.uploadPending()&&y.upload(i)}const c=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Be(i,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Be(i,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,c,f,y,x,E,P,C,A,L){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:x,scale:E,tileSize:this.tileSize,pixelPosMatrix:L,transform:C,params:P,queryPadding:this.queryPadding*A},i,c,f):{}}querySourceFeatures(i,c){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const y=f.loadVTLayers(),x=c&&c.sourceLayer?c.sourceLayer:"",E=y._geojsonTileLayer||y[x];if(!E)return;const P=u.createFilter(c&&c.filter),{z:C,x:A,y:L}=this.tileID.canonical,R={z:C,x:A,y:L};for(let G=0;G<E.length;G++){const te=E.feature(G);if(P.needGeometry){const oe=u.toEvaluationFeature(te,!0);if(!P.filter(new u.EvaluationParameters(this.tileID.overscaledZ),oe,this.tileID.canonical))continue}else if(!P.filter(new u.EvaluationParameters(this.tileID.overscaledZ),te))continue;const Y=f.getId(te,x),ee=new u.GeoJSONFeature(te,C,A,L,Y);ee.tile=R,i.push(ee)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const c=this.expirationTime;if(i.cacheControl){const f=u.parseCacheControl(i.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const f=Date.now();let y=!1;if(this.expirationTime>f)y=!1;else if(c)if(this.expirationTime<c)y=!0;else{const x=this.expirationTime-c;x?this.expirationTime=f+Math.max(x,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!c.style.hasLayer(y))continue;const x=this.buckets[y],E=x.layers[0].sourceLayer||"_geojsonTileLayer",P=f[E],C=i[E];if(!P||!C||Object.keys(C).length===0)continue;x.update(C,P,this.imageAtlas&&this.imageAtlas.patternPositions||{});const A=c&&c.style&&c.style.getLayer(y);A&&(this.queryPadding=Math.max(this.queryPadding,A.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<u.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=u.exported.now()+i}setDependencies(i,c){const f={};for(const y of c)f[y]=!0;this.dependencies[i]=f}hasDependency(i,c){for(const f of i){const y=this.dependencies[f];if(y){for(const x of c)if(y[x])return!0}}return!1}}class Bn{constructor(i,c){this.max=i,this.onRemove=c,this.reset()}reset(){for(const i in this.data)for(const c of this.data[i])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(i,c,f){const y=i.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const x={value:c,timeout:void 0};if(f!==void 0&&(x.timeout=setTimeout(()=>{this.remove(i,x)},f)),this.data[y].push(x),this.order.push(y),this.order.length>this.max){const E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const c=this.data[i].shift();return c.timeout&&clearTimeout(c.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),c.value}getByKey(i){const c=this.data[i];return c?c[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,c){if(!this.has(i))return this;const f=i.wrapped().key,y=c===void 0?0:this.data[f].indexOf(c),x=this.data[f][y];return this.data[f].splice(y,1),x.timeout&&clearTimeout(x.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(x.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(i){const c=[];for(const f in this.data)for(const y of this.data[f])i(y.value)||c.push(y);for(const f of c)this.remove(f.value.tileID,f)}}class xa{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,c,f){const y=String(c);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][y]=this.stateChanges[i][y]||{},u.extend(this.stateChanges[i][y],f),this.deletedStates[i]===null){this.deletedStates[i]={};for(const x in this.state[i])x!==y&&(this.deletedStates[i][x]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][y]===null){this.deletedStates[i][y]={};for(const x in this.state[i][y])f[x]||(this.deletedStates[i][y][x]=null)}else for(const x in f)this.deletedStates[i]&&this.deletedStates[i][y]&&this.deletedStates[i][y][x]===null&&delete this.deletedStates[i][y][x]}removeFeatureState(i,c,f){if(this.deletedStates[i]===null)return;const y=String(c);if(this.deletedStates[i]=this.deletedStates[i]||{},f&&c!==void 0)this.deletedStates[i][y]!==null&&(this.deletedStates[i][y]=this.deletedStates[i][y]||{},this.deletedStates[i][y][f]=null);else if(c!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][y])for(f in this.deletedStates[i][y]={},this.stateChanges[i][y])this.deletedStates[i][y][f]=null;else this.deletedStates[i][y]=null;else this.deletedStates[i]=null}getState(i,c){const f=String(c),y=u.extend({},(this.state[i]||{})[f],(this.stateChanges[i]||{})[f]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const x=this.deletedStates[i][c];if(x===null)return{};for(const E in x)delete y[E]}return y}initializeTileState(i,c){i.setFeatureState(this.state,c)}coalesceChanges(i,c){const f={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const x={};for(const E in this.stateChanges[y])this.state[y][E]||(this.state[y][E]={}),u.extend(this.state[y][E],this.stateChanges[y][E]),x[E]=this.state[y][E];f[y]=x}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const x={};if(this.deletedStates[y]===null)for(const E in this.state[y])x[E]={},this.state[y][E]={};else for(const E in this.deletedStates[y]){if(this.deletedStates[y][E]===null)this.state[y][E]={};else for(const P of Object.keys(this.deletedStates[y][E]))delete this.state[y][E][P];x[E]=this.state[y][E]}f[y]=f[y]||{},u.extend(f[y],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const y in i)i[y].setFeatureState(f,c)}}class Rr extends u.Evented{constructor(i,c,f){super(),this.id=i,this.dispatcher=f,this.on("data",y=>{y.dataType==="source"&&y.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&y.dataType==="source"&&y.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(y,x,E,P){const C=new qi[x.type](y,x,E,P);if(C.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${C.id}`);return u.bindAll(["load","abort","unload","serialize","prepare"],C),C}(i,c,f,this),this._tiles={},this._cache=new Bn(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new xa,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const c=this._tiles[i];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,c){return this._source.loadTile(i,c)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new u.Event("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const f=this._tiles[c];f.upload(i),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Qe).map(i=>i.key)}getRenderableIds(i){const c=[];for(const f in this._tiles)this._isIdRenderable(f,i)&&c.push(this._tiles[f]);return i?c.sort((f,y)=>{const x=f.tileID,E=y.tileID,P=new u.Point(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),C=new u.Point(E.canonical.x,E.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-E.overscaledZ||C.y-P.y||C.x-P.x}).map(f=>f.tileID.key):c.map(f=>f.tileID).sort(Qe).map(f=>f.key)}hasRenderableParent(i){const c=this.findLoadedParent(i,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(i,c){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(c||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,c){const f=this._tiles[i];f&&(f.state!=="loading"&&(f.state=c),this._loadTile(f,this._tileLoaded.bind(this,f,i,c)))}_tileLoaded(i,c,f,y){if(y)return i.state="errored",void(y.status!==404?this._source.fire(new u.ErrorEvent(y,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=u.exported.now(),f==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(c,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new u.Event("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const c=this.getRenderableIds();for(let y=0;y<c.length;y++){const x=c[y];if(i.neighboringTiles&&i.neighboringTiles[x]){const E=this.getTileByID(x);f(i,E),f(E,i)}}function f(y,x){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let E=x.tileID.canonical.x-y.tileID.canonical.x;const P=x.tileID.canonical.y-y.tileID.canonical.y,C=Math.pow(2,y.tileID.canonical.z),A=x.tileID.key;E===0&&P===0||Math.abs(P)>1||(Math.abs(E)>1&&(Math.abs(E+C)===1?E+=C:Math.abs(E-C)===1&&(E-=C)),x.dem&&y.dem&&(y.dem.backfillBorder(x.dem,E,P),y.neighboringTiles&&y.neighboringTiles[A]&&(y.neighboringTiles[A].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,c,f,y){for(const x in this._tiles){let E=this._tiles[x];if(y[x]||!E.hasData()||E.tileID.overscaledZ<=c||E.tileID.overscaledZ>f)continue;let P=E.tileID;for(;E&&E.tileID.overscaledZ>c+1;){const A=E.tileID.scaledTo(E.tileID.overscaledZ-1);E=this._tiles[A.key],E&&E.hasData()&&(P=A)}let C=P;for(;C.overscaledZ>c;)if(C=C.scaledTo(C.overscaledZ-1),i[C.key]){y[P.key]=P;break}}}findLoadedParent(i,c){if(i.key in this._loadedParentTiles){const f=this._loadedParentTiles[i.key];return f&&f.tileID.overscaledZ>=c?f:null}for(let f=i.overscaledZ-1;f>=c;f--){const y=i.scaledTo(f),x=this._getLoadedTile(y);if(x)return x}}_getLoadedTile(i){const c=this._tiles[i.key];return c&&c.hasData()?c:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const c=Math.ceil(i.width/this._source.tileSize)+1,f=Math.ceil(i.height/this._source.tileSize)+1,y=Math.floor(c*f*5),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(x)}handleWrapJump(i){const c=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,c){const f={};for(const y in this._tiles){const x=this._tiles[y];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+c),f[x.tileID.key]=x}this._tiles=f;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}update(i,c){if(this.transform=i,this.terrain=c,!this._sourceLoaded||this._paused)return;let f;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(L=>new u.OverscaledTileID(L.canonical.z,L.wrap,L.canonical.z,L.canonical.x,L.canonical.y)):(f=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(f=f.filter(L=>this._source.hasTile(L)))):f=[];const y=i.coveringZoomLevel(this._source),x=Math.max(y-Rr.maxOverzooming,this._source.minzoom),E=Math.max(y+Rr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const L={};for(const R of f)if(R.canonical.z>this._source.minzoom){const G=R.scaledTo(R.canonical.z-1);L[G.key]=G;const te=R.scaledTo(Math.max(this._source.minzoom,Math.min(R.canonical.z,5)));L[te.key]=te}f=f.concat(Object.values(L))}const P=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,P&&this.fire(new u.Event("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const C=this._updateRetainedTiles(f,y);if(kt(this._source.type)){const L={},R={},G=Object.keys(C),te=u.exported.now();for(const Y of G){const ee=C[Y],oe=this._tiles[Y];if(!oe||oe.fadeEndTime!==0&&oe.fadeEndTime<=te)continue;const de=this.findLoadedParent(ee,x);de&&(this._addTile(de.tileID),L[de.tileID.key]=de.tileID),R[Y]=ee}this._retainLoadedChildren(R,y,E,C);for(const Y in L)C[Y]||(this._coveredTiles[Y]=!0,C[Y]=L[Y]);if(c){const Y={},ee={};for(const oe of f)this._tiles[oe.key].hasData()?Y[oe.key]=oe:ee[oe.key]=oe;for(const oe in ee){const de=ee[oe].children(this._source.maxzoom);this._tiles[de[0].key]&&this._tiles[de[1].key]&&this._tiles[de[2].key]&&this._tiles[de[3].key]&&(Y[de[0].key]=C[de[0].key]=de[0],Y[de[1].key]=C[de[1].key]=de[1],Y[de[2].key]=C[de[2].key]=de[2],Y[de[3].key]=C[de[3].key]=de[3],delete ee[oe])}for(const oe in ee){const de=this.findLoadedParent(ee[oe],this._source.minzoom);if(de){Y[de.tileID.key]=C[de.tileID.key]=de.tileID;for(const Se in Y)Y[Se].isChildOf(de.tileID)&&delete Y[Se]}}for(const oe in this._tiles)Y[oe]||(this._coveredTiles[oe]=!0)}}for(const L in C)this._tiles[L].clearFadeHold();const A=u.keysDifference(this._tiles,C);for(const L of A){const R=this._tiles[L];R.hasSymbolBuckets&&!R.holdingForFade()?R.setHoldDuration(this.map._fadeDuration):R.hasSymbolBuckets&&!R.symbolFadeFinished()||this._removeTile(L)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,c){const f={},y={},x=Math.max(c-Rr.maxOverzooming,this._source.minzoom),E=Math.max(c+Rr.maxUnderzooming,this._source.minzoom),P={};for(const C of i){const A=this._addTile(C);f[C.key]=C,A.hasData()||c<this._source.maxzoom&&(P[C.key]=C)}this._retainLoadedChildren(P,c,E,f);for(const C of i){let A=this._tiles[C.key];if(A.hasData())continue;if(c+1>this._source.maxzoom){const R=C.children(this._source.maxzoom)[0],G=this.getTile(R);if(G&&G.hasData()){f[R.key]=R;continue}}else{const R=C.children(this._source.maxzoom);if(f[R[0].key]&&f[R[1].key]&&f[R[2].key]&&f[R[3].key])continue}let L=A.wasRequested();for(let R=C.overscaledZ-1;R>=x;--R){const G=C.scaledTo(R);if(y[G.key])break;if(y[G.key]=!0,A=this.getTile(G),!A&&L&&(A=this._addTile(G)),A){const te=A.hasData();if((L||te)&&(f[G.key]=G),L=A.wasRequested(),te)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const c=[];let f,y=this._tiles[i].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){f=this._loadedParentTiles[y.key];break}c.push(y.key);const x=y.scaledTo(y.overscaledZ-1);if(f=this._getLoadedTile(x),f)break;y=x}for(const x of c)this._loadedParentTiles[x]=f}}_addTile(i){let c=this._tiles[i.key];if(c)return c;c=this._cache.getAndRemove(i),c&&(this._setTileReloadTimer(i.key,c),c.tileID=i,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,c)));const f=c;return c||(c=new ui(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,i.key,c.state))),c.uses++,this._tiles[i.key]=c,f||this._source.fire(new u.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(i,c){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const f=c.getExpiryTimeout();f&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},f))}_removeTile(i){const c=this._tiles[i];c&&(c.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,c,f){const y=[],x=this.transform;if(!x)return y;const E=f?x.getCameraQueryGeometry(i):i,P=i.map(Y=>x.pointCoordinate(Y,this.terrain)),C=E.map(Y=>x.pointCoordinate(Y,this.terrain)),A=this.getIds();let L=1/0,R=1/0,G=-1/0,te=-1/0;for(const Y of C)L=Math.min(L,Y.x),R=Math.min(R,Y.y),G=Math.max(G,Y.x),te=Math.max(te,Y.y);for(let Y=0;Y<A.length;Y++){const ee=this._tiles[A[Y]];if(ee.holdingForFade())continue;const oe=ee.tileID,de=Math.pow(2,x.zoom-ee.tileID.overscaledZ),Se=c*ee.queryPadding*u.EXTENT/ee.tileSize/de,ne=[oe.getTilePoint(new u.MercatorCoordinate(L,R)),oe.getTilePoint(new u.MercatorCoordinate(G,te))];if(ne[0].x-Se<u.EXTENT&&ne[0].y-Se<u.EXTENT&&ne[1].x+Se>=0&&ne[1].y+Se>=0){const be=P.map(De=>oe.getTilePoint(De)),Te=C.map(De=>oe.getTilePoint(De));y.push({tile:ee,tileID:oe,queryGeometry:be,cameraQueryGeometry:Te,scale:de})}}return y}getVisibleCoordinates(i){const c=this.getRenderableIds(i).map(f=>this._tiles[f].tileID);for(const f of c)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(kt(this._source.type)){const i=u.exported.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=i)return!0}return!1}setFeatureState(i,c,f){this._state.updateState(i=i||"_geojsonTileLayer",c,f)}removeFeatureState(i,c,f){this._state.removeFeatureState(i=i||"_geojsonTileLayer",c,f)}getFeatureState(i,c){return this._state.getState(i=i||"_geojsonTileLayer",c)}setDependencies(i,c,f){const y=this._tiles[i];y&&y.setDependencies(c,f)}reloadTilesForDependencies(i,c){for(const f in this._tiles)this._tiles[f].hasDependency(i,c)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(i,c))}}function Qe(p,i){const c=Math.abs(2*p.wrap)-+(p.wrap<0),f=Math.abs(2*i.wrap)-+(i.wrap<0);return p.overscaledZ-i.overscaledZ||f-c||i.canonical.y-p.canonical.y||i.canonical.x-p.canonical.x}function kt(p){return p==="raster"||p==="image"||p==="video"}Rr.maxOverzooming=10,Rr.maxUnderzooming=3;const Le="mapboxgl_preloaded_worker_pool";class Jt{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Jt.workerCount;)this.workers.push(new Worker(u.config.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Le]}numActive(){return Object.keys(this.active).length}}const Mt=Math.floor(u.exported.hardwareConcurrency/2);let gn;function yn(){return gn||(gn=new Jt),gn}Jt.workerCount=u.isSafari(globalThis)?Math.max(Math.min(Mt,3),1):1;class We{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=u.clamp(i,0,1);let c=1,f=this._distances[c];const y=i*this.paddedLength+this.padding;for(;f<y&&c<this._distances.length;)f=this._distances[++c];const x=c-1,E=this._distances[x],P=f-E,C=P>0?(y-E)/P:0;return this.points[x].mult(1-C).add(this.points[c].mult(C))}}function Rt(p,i){let c=!0;return p==="always"||p!=="never"&&i!=="never"||(c=!1),c}class It{constructor(i,c,f){const y=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(i/f),this.yCellCount=Math.ceil(c/f);for(let E=0;E<this.xCellCount*this.yCellCount;E++)y.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,f,y,x){this._forEachCell(c,f,y,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(f),this.bboxes.push(y),this.bboxes.push(x)}insertCircle(i,c,f,y){this._forEachCell(c-y,f-y,c+y,f+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(f),this.circles.push(y)}_insertBoxCell(i,c,f,y,x,E){this.boxCells[x].push(E)}_insertCircleCell(i,c,f,y,x,E){this.circleCells[x].push(E)}_query(i,c,f,y,x,E,P){if(f<0||i>this.width||y<0||c>this.height)return[];const C=[];if(i<=0&&c<=0&&this.width<=f&&this.height<=y){if(x)return[{key:null,x1:i,y1:c,x2:f,y2:y}];for(let A=0;A<this.boxKeys.length;A++)C.push({key:this.boxKeys[A],x1:this.bboxes[4*A],y1:this.bboxes[4*A+1],x2:this.bboxes[4*A+2],y2:this.bboxes[4*A+3]});for(let A=0;A<this.circleKeys.length;A++){const L=this.circles[3*A],R=this.circles[3*A+1],G=this.circles[3*A+2];C.push({key:this.circleKeys[A],x1:L-G,y1:R-G,x2:L+G,y2:R+G})}}else this._forEachCell(i,c,f,y,this._queryCell,C,{hitTest:x,overlapMode:E,seenUids:{box:{},circle:{}}},P);return C}query(i,c,f,y){return this._query(i,c,f,y,!1,null)}hitTest(i,c,f,y,x,E){return this._query(i,c,f,y,!0,x,E).length>0}hitTestCircle(i,c,f,y,x){const E=i-f,P=i+f,C=c-f,A=c+f;if(P<0||E>this.width||A<0||C>this.height)return!1;const L=[];return this._forEachCell(E,C,P,A,this._queryCellCircle,L,{hitTest:!0,overlapMode:y,circle:{x:i,y:c,radius:f},seenUids:{box:{},circle:{}}},x),L.length>0}_queryCell(i,c,f,y,x,E,P,C){const{seenUids:A,hitTest:L,overlapMode:R}=P,G=this.boxCells[x];if(G!==null){const Y=this.bboxes;for(const ee of G)if(!A.box[ee]){A.box[ee]=!0;const oe=4*ee,de=this.boxKeys[ee];if(i<=Y[oe+2]&&c<=Y[oe+3]&&f>=Y[oe+0]&&y>=Y[oe+1]&&(!C||C(de))&&(!L||!Rt(R,de.overlapMode))&&(E.push({key:de,x1:Y[oe],y1:Y[oe+1],x2:Y[oe+2],y2:Y[oe+3]}),L))return!0}}const te=this.circleCells[x];if(te!==null){const Y=this.circles;for(const ee of te)if(!A.circle[ee]){A.circle[ee]=!0;const oe=3*ee,de=this.circleKeys[ee];if(this._circleAndRectCollide(Y[oe],Y[oe+1],Y[oe+2],i,c,f,y)&&(!C||C(de))&&(!L||!Rt(R,de.overlapMode))){const Se=Y[oe],ne=Y[oe+1],be=Y[oe+2];if(E.push({key:de,x1:Se-be,y1:ne-be,x2:Se+be,y2:ne+be}),L)return!0}}}return!1}_queryCellCircle(i,c,f,y,x,E,P,C){const{circle:A,seenUids:L,overlapMode:R}=P,G=this.boxCells[x];if(G!==null){const Y=this.bboxes;for(const ee of G)if(!L.box[ee]){L.box[ee]=!0;const oe=4*ee,de=this.boxKeys[ee];if(this._circleAndRectCollide(A.x,A.y,A.radius,Y[oe+0],Y[oe+1],Y[oe+2],Y[oe+3])&&(!C||C(de))&&!Rt(R,de.overlapMode))return E.push(!0),!0}}const te=this.circleCells[x];if(te!==null){const Y=this.circles;for(const ee of te)if(!L.circle[ee]){L.circle[ee]=!0;const oe=3*ee,de=this.circleKeys[ee];if(this._circlesCollide(Y[oe],Y[oe+1],Y[oe+2],A.x,A.y,A.radius)&&(!C||C(de))&&!Rt(R,de.overlapMode))return E.push(!0),!0}}}_forEachCell(i,c,f,y,x,E,P,C){const A=this._convertToXCellCoord(i),L=this._convertToYCellCoord(c),R=this._convertToXCellCoord(f),G=this._convertToYCellCoord(y);for(let te=A;te<=R;te++)for(let Y=L;Y<=G;Y++)if(x.call(this,i,c,f,y,this.xCellCount*Y+te,E,P,C))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,f,y,x,E){const P=y-i,C=x-c,A=f+E;return A*A>P*P+C*C}_circleAndRectCollide(i,c,f,y,x,E,P){const C=(E-y)/2,A=Math.abs(i-(y+C));if(A>C+f)return!1;const L=(P-x)/2,R=Math.abs(c-(x+L));if(R>L+f)return!1;if(A<=C||R<=L)return!0;const G=A-C,te=R-L;return G*G+te*te<=f*f}}function Ur(p,i,c,f,y){const x=u.create();return i?(u.scale(x,x,[1/y,1/y,1]),c||u.rotateZ(x,x,f.angle)):u.multiply(x,f.labelPlaneMatrix,p),x}function Kn(p,i,c,f,y){if(i){const x=u.clone(p);return u.scale(x,x,[y,y,1]),c||u.rotateZ(x,x,-f.angle),x}return f.glCoordMatrix}function pt(p,i,c){let f;c?(f=[p.x,p.y,c(p.x,p.y),1],u.transformMat4(f,f,i)):(f=[p.x,p.y,0,1],ae(f,f,i));const y=f[3];return{point:new u.Point(f[0]/y,f[1]/y),signedDistanceFromCamera:y}}function ki(p,i){return .5+p/i*.5}function Zi(p,i){const c=p[0]/p[3],f=p[1]/p[3];return c>=-i[0]&&c<=i[0]&&f>=-i[1]&&f<=i[1]}function wa(p,i,c,f,y,x,E,P,C,A){const L=f?p.textSizeData:p.iconSizeData,R=u.evaluateSizeForZoom(L,c.transform.zoom),G=[256/c.width*2+1,256/c.height*2+1],te=f?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;te.clear();const Y=p.lineVertexArray,ee=f?p.text.placedSymbolArray:p.icon.placedSymbolArray,oe=c.transform.width/c.transform.height;let de=!1;for(let Se=0;Se<ee.length;Se++){const ne=ee.get(Se);if(ne.hidden||ne.writingMode===u.WritingMode.vertical&&!de){pe(ne.numGlyphs,te);continue}let be;if(de=!1,A?(be=[ne.anchorX,ne.anchorY,A(ne.anchorX,ne.anchorY),1],u.transformMat4(be,be,i)):(be=[ne.anchorX,ne.anchorY,0,1],ae(be,be,i)),!Zi(be,G)){pe(ne.numGlyphs,te);continue}const Te=ki(c.transform.cameraToCenterDistance,be[3]),De=u.evaluateSizeForFeature(L,R,ne),$e=E?De/Te:De*Te,Ue=new u.Point(ne.anchorX,ne.anchorY),Fe=pt(Ue,y,A).point,tt={projections:{},offsets:{}},wt=J(ne,$e,!1,P,i,y,x,p.glyphOffsetArray,Y,te,Fe,Ue,tt,oe,C,A);de=wt.useVertical,(wt.notEnoughRoom||de||wt.needsFlipping&&J(ne,$e,!0,P,i,y,x,p.glyphOffsetArray,Y,te,Fe,Ue,tt,oe,C,A).notEnoughRoom)&&pe(ne.numGlyphs,te)}f?p.text.dynamicLayoutVertexBuffer.updateData(te):p.icon.dynamicLayoutVertexBuffer.updateData(te)}function ba(p,i,c,f,y,x,E,P,C,A,L,R,G){const te=P.glyphStartIndex+P.numGlyphs,Y=P.lineStartIndex,ee=P.lineStartIndex+P.lineLength,oe=i.getoffsetX(P.glyphStartIndex),de=i.getoffsetX(te-1),Se=se(p*oe,c,f,y,x,E,P.segment,Y,ee,C,A,L,R,G);if(!Se)return null;const ne=se(p*de,c,f,y,x,E,P.segment,Y,ee,C,A,L,R,G);return ne?{first:Se,last:ne}:null}function An(p,i,c,f){return p===u.WritingMode.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*f?{useVertical:!0}:(p===u.WritingMode.vertical?i.y<c.y:i.x>c.x)?{needsFlipping:!0}:null}function J(p,i,c,f,y,x,E,P,C,A,L,R,G,te,Y,ee){const oe=i/24,de=p.lineOffsetX*oe,Se=p.lineOffsetY*oe;let ne;if(p.numGlyphs>1){const be=p.glyphStartIndex+p.numGlyphs,Te=p.lineStartIndex,De=p.lineStartIndex+p.lineLength,$e=ba(oe,P,de,Se,c,L,R,p,C,x,G,Y,ee);if(!$e)return{notEnoughRoom:!0};const Ue=pt($e.first.point,E,ee).point,Fe=pt($e.last.point,E,ee).point;if(f&&!c){const tt=An(p.writingMode,Ue,Fe,te);if(tt)return tt}ne=[$e.first];for(let tt=p.glyphStartIndex+1;tt<be-1;tt++)ne.push(se(oe*P.getoffsetX(tt),de,Se,c,L,R,p.segment,Te,De,C,x,G,Y,ee));ne.push($e.last)}else{if(f&&!c){const Te=pt(R,y,ee).point,De=p.lineStartIndex+p.segment+1,$e=new u.Point(C.getx(De),C.gety(De)),Ue=pt($e,y,ee),Fe=Ue.signedDistanceFromCamera>0?Ue.point:O(R,$e,Te,1,y,ee),tt=An(p.writingMode,Te,Fe,te);if(tt)return tt}const be=se(oe*P.getoffsetX(p.glyphStartIndex),de,Se,c,L,R,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,C,x,G,Y,ee);if(!be)return{notEnoughRoom:!0};ne=[be]}for(const be of ne)u.addDynamicAttributes(A,be.point,be.angle);return{}}function O(p,i,c,f,y,x){const E=pt(p.add(p.sub(i)._unit()),y,x).point,P=c.sub(E);return c.add(P._mult(f/P.mag()))}function N(p,i){const{projectionCache:c,lineVertexArray:f,labelPlaneMatrix:y,tileAnchorPoint:x,distanceFromAnchor:E,getElevation:P,previousVertex:C,direction:A,absOffsetX:L}=i;if(c.projections[p])return c.projections[p];const R=new u.Point(f.getx(p),f.gety(p)),G=pt(R,y,P);if(G.signedDistanceFromCamera>0)return c.projections[p]=G.point,G.point;const te=p-A;return O(E===0?x:new u.Point(f.getx(te),f.gety(te)),R,C,L-E+1,y,P)}function K(p,i,c){return p._unit()._perp()._mult(i*c)}function ie(p,i,c,f,y,x,E,P){const{projectionCache:C,direction:A}=P;if(C.offsets[p])return C.offsets[p];const L=c.add(i);if(p+A<f||p+A>=y)return C.offsets[p]=L,L;const R=N(p+A,P),G=K(R.sub(c),E,A),te=c.add(G),Y=R.add(G);return C.offsets[p]=u.findLineIntersection(x,L,te,Y)||L,C.offsets[p]}function se(p,i,c,f,y,x,E,P,C,A,L,R,G,te){const Y=f?p-i:p+i;let ee=Y>0?1:-1,oe=0;f&&(ee*=-1,oe=Math.PI),ee<0&&(oe+=Math.PI);let de,Se,ne=ee>0?P+E:P+E+1,be=y,Te=y,De=0,$e=0;const Ue=Math.abs(Y),Fe=[];let tt;for(;De+$e<=Ue;){if(ne+=ee,ne<P||ne>=C)return null;De+=$e,Te=be,Se=de;const He={projectionCache:R,lineVertexArray:A,labelPlaneMatrix:L,tileAnchorPoint:x,distanceFromAnchor:De,getElevation:te,previousVertex:Te,direction:ee,absOffsetX:Ue};if(be=N(ne,He),c===0)Fe.push(Te),tt=be.sub(Te);else{let Ct;const nt=be.sub(Te);Ct=nt.mag()===0?K(N(ne+ee,He).sub(be),c,ee):K(nt,c,ee),Se||(Se=Te.add(Ct)),de=ie(ne,Ct,be,P,C,Se,c,He),Fe.push(Se),tt=de.sub(Se)}$e=tt.mag()}const wt=tt._mult((Ue-De)/$e)._add(Se||Te),Ft=oe+Math.atan2(be.y-Te.y,be.x-Te.x);return Fe.push(wt),{point:wt,angle:G?Ft:0,path:Fe}}const ye=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function pe(p,i){for(let c=0;c<p;c++){const f=i.length;i.resize(f+4),i.float32.set(ye,3*f)}}function ae(p,i,c){const f=i[0],y=i[1];return p[0]=c[0]*f+c[4]*y+c[12],p[1]=c[1]*f+c[5]*y+c[13],p[3]=c[3]*f+c[7]*y+c[15],p}const _e=100;class Ae{constructor(i,c=new It(i.width+200,i.height+200,25),f=new It(i.width+200,i.height+200,25)){this.transform=i,this.grid=c,this.ignoredGrid=f,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+_e,this.screenBottomBoundary=i.height+_e,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,c,f,y,x,E){const P=this.projectAndGetPerspectiveRatio(y,i.anchorPointX,i.anchorPointY,E),C=f*P.perspectiveRatio,A=i.x1*C+P.point.x,L=i.y1*C+P.point.y,R=i.x2*C+P.point.x,G=i.y2*C+P.point.y;return!this.isInsideGrid(A,L,R,G)||c!=="always"&&this.grid.hitTest(A,L,R,G,c,x)||P.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[A,L,R,G],offscreen:this.isOffscreen(A,L,R,G)}}placeCollisionCircles(i,c,f,y,x,E,P,C,A,L,R,G,te,Y){const ee=[],oe=new u.Point(c.anchorX,c.anchorY),de=pt(oe,E,Y),Se=ki(this.transform.cameraToCenterDistance,de.signedDistanceFromCamera),ne=(L?x/Se:x*Se)/u.ONE_EM,be=pt(oe,P,Y).point,Te=ba(ne,y,c.lineOffsetX*ne,c.lineOffsetY*ne,!1,be,oe,c,f,P,{projections:{},offsets:{}},!1,Y);let De=!1,$e=!1,Ue=!0;if(Te){const Fe=.5*G*Se+te,tt=new u.Point(-100,-100),wt=new u.Point(this.screenRightBoundary,this.screenBottomBoundary),Ft=new We,He=Te.first,Ct=Te.last;let nt=[];for(let nr=He.path.length-1;nr>=1;nr--)nt.push(He.path[nr]);for(let nr=1;nr<Ct.path.length;nr++)nt.push(Ct.path[nr]);const rr=2.5*Fe;if(C){const nr=nt.map(Bt=>pt(Bt,C,Y));nt=nr.some(Bt=>Bt.signedDistanceFromCamera<=0)?[]:nr.map(Bt=>Bt.point)}let tn=[];if(nt.length>0){const nr=nt[0].clone(),Bt=nt[0].clone();for(let Hr=1;Hr<nt.length;Hr++)nr.x=Math.min(nr.x,nt[Hr].x),nr.y=Math.min(nr.y,nt[Hr].y),Bt.x=Math.max(Bt.x,nt[Hr].x),Bt.y=Math.max(Bt.y,nt[Hr].y);tn=nr.x>=tt.x&&Bt.x<=wt.x&&nr.y>=tt.y&&Bt.y<=wt.y?[nt]:Bt.x<tt.x||nr.x>wt.x||Bt.y<tt.y||nr.y>wt.y?[]:u.clipLine([nt],tt.x,tt.y,wt.x,wt.y)}for(const nr of tn){Ft.reset(nr,.25*Fe);let Bt=0;Bt=Ft.length<=.5*Fe?1:Math.ceil(Ft.paddedLength/rr)+1;for(let Hr=0;Hr<Bt;Hr++){const Yn=Hr/Math.max(Bt-1,1),rn=Ft.lerp(Yn),En=rn.x+_e,Pi=rn.y+_e;ee.push(En,Pi,Fe,0);const lo=En-Fe,uo=Pi-Fe,Jn=En+Fe,Vo=Pi+Fe;if(Ue=Ue&&this.isOffscreen(lo,uo,Jn,Vo),$e=$e||this.isInsideGrid(lo,uo,Jn,Vo),i!=="always"&&this.grid.hitTestCircle(En,Pi,Fe,i,R)&&(De=!0,!A))return{circles:[],offscreen:!1,collisionDetected:De}}}}return{circles:!A&&De||!$e||Se<this.perspectiveRatioCutoff?[]:ee,offscreen:Ue,collisionDetected:De}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let f=1/0,y=1/0,x=-1/0,E=-1/0;for(const L of i){const R=new u.Point(L.x+_e,L.y+_e);f=Math.min(f,R.x),y=Math.min(y,R.y),x=Math.max(x,R.x),E=Math.max(E,R.y),c.push(R)}const P=this.grid.query(f,y,x,E).concat(this.ignoredGrid.query(f,y,x,E)),C={},A={};for(const L of P){const R=L.key;if(C[R.bucketInstanceId]===void 0&&(C[R.bucketInstanceId]={}),C[R.bucketInstanceId][R.featureIndex])continue;const G=[new u.Point(L.x1,L.y1),new u.Point(L.x2,L.y1),new u.Point(L.x2,L.y2),new u.Point(L.x1,L.y2)];u.polygonIntersectsPolygon(c,G)&&(C[R.bucketInstanceId][R.featureIndex]=!0,A[R.bucketInstanceId]===void 0&&(A[R.bucketInstanceId]=[]),A[R.bucketInstanceId].push(R.featureIndex))}return A}insertCollisionBox(i,c,f,y,x,E){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:x,collisionGroupID:E,overlapMode:c},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,f,y,x,E){const P=f?this.ignoredGrid:this.grid,C={bucketInstanceId:y,featureIndex:x,collisionGroupID:E,overlapMode:c};for(let A=0;A<i.length;A+=4)P.insertCircle(C,i[A],i[A+1],i[A+2])}projectAndGetPerspectiveRatio(i,c,f,y){let x;return y?(x=[c,f,y(c,f),1],u.transformMat4(x,x,i)):(x=[c,f,0,1],ae(x,x,i)),{point:new u.Point((x[0]/x[3]+1)/2*this.transform.width+_e,(-x[1]/x[3]+1)/2*this.transform.height+_e),perspectiveRatio:.5+this.transform.cameraToCenterDistance/x[3]*.5}}isOffscreen(i,c,f,y){return f<_e||i>=this.screenRightBoundary||y<_e||c>this.screenBottomBoundary}isInsideGrid(i,c,f,y){return f>=0&&i<this.gridRightBoundary&&y>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=u.identity([]);return u.translate(i,i,[-100,-100,0]),i}}function Ie(p,i,c){return i*(u.EXTENT/(p.tileSize*Math.pow(2,c-p.tileID.overscaledZ)))}class ze{constructor(i,c,f,y){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):y&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class _t{constructor(i,c,f,y,x){this.text=new ze(i?i.text:null,c,f,x),this.icon=new ze(i?i.icon:null,c,y,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Lt{constructor(i,c,f){this.text=i,this.icon=c,this.skipFade=f}}class ut{constructor(){this.invProjMatrix=u.create(),this.viewportMatrix=u.create(),this.circles=[]}}class xt{constructor(i,c,f,y,x){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=f,this.bucketIndex=y,this.tileID=x}}class $t{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:f=>f.collisionGroupID===c}}return this.collisionGroups[i]}}function Yt(p,i,c,f,y){const{horizontalAlign:x,verticalAlign:E}=u.getAnchorAlignment(p),P=-(x-.5)*i,C=-(E-.5)*c,A=u.evaluateVariableOffset(p,f);return new u.Point(P+A[0]*y,C+A[1]*y)}function Nt(p,i,c,f,y,x){const{x1:E,x2:P,y1:C,y2:A,anchorPointX:L,anchorPointY:R}=p,G=new u.Point(i,c);return f&&G._rotate(y?x:-x),{x1:E+G.x,y1:C+G.y,x2:P+G.x,y2:A+G.y,anchorPointX:L,anchorPointY:R}}class cr{constructor(i,c,f,y,x){this.transform=i.clone(),this.terrain=c,this.collisionIndex=new Ae(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new $t(y),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,c,f,y){const x=f.getBucket(c),E=f.latestFeatureIndex;if(!x||!E||c.id!==x.layerIds[0])return;const P=f.collisionBoxArray,C=x.layers[0].layout,A=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),L=f.tileSize/u.EXTENT,R=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),G=C.get("text-pitch-alignment")==="map",te=C.get("text-rotation-alignment")==="map",Y=Ie(f,1,this.transform.zoom),ee=Ur(R,G,te,this.transform,Y);let oe=null;if(G){const Se=Kn(R,G,te,this.transform,Y);oe=u.multiply([],this.transform.labelPlaneMatrix,Se)}this.retainedQueryData[x.bucketInstanceId]=new xt(x.bucketInstanceId,E,x.sourceLayerIndex,x.index,f.tileID);const de={bucket:x,layout:C,posMatrix:R,textLabelPlaneMatrix:ee,labelToScreenMatrix:oe,scale:A,textPixelRatio:L,holdingForFade:f.holdingForFade(),collisionBoxArray:P,partiallyEvaluatedTextSize:u.evaluateSizeForZoom(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(y)for(const Se of x.sortKeyRanges){const{sortKey:ne,symbolInstanceStart:be,symbolInstanceEnd:Te}=Se;i.push({sortKey:ne,symbolInstanceStart:be,symbolInstanceEnd:Te,parameters:de})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:de})}attemptAnchorPlacement(i,c,f,y,x,E,P,C,A,L,R,G,te,Y,ee,oe){const de=[G.textOffset0,G.textOffset1],Se=Yt(i,f,y,de,x),ne=this.collisionIndex.placeCollisionBox(Nt(c,Se.x,Se.y,E,P,this.transform.angle),R,C,A,L.predicate,oe);if((!ee||this.collisionIndex.placeCollisionBox(Nt(ee,Se.x,Se.y,E,P,this.transform.angle),R,C,A,L.predicate,oe).box.length!==0)&&ne.box.length>0){let be;if(this.prevPlacement&&this.prevPlacement.variableOffsets[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID].text&&(be=this.prevPlacement.variableOffsets[G.crossTileID].anchor),G.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[G.crossTileID]={textOffset:de,width:f,height:y,anchor:i,textBoxScale:x,prevAnchor:be},this.markUsedJustification(te,i,G,Y),te.allowVerticalPlacement&&(this.markUsedOrientation(te,Y,G),this.placedOrientations[G.crossTileID]=Y),{shift:Se,placedGlyphBoxes:ne}}}placeLayerBucketPart(i,c,f){const{bucket:y,layout:x,posMatrix:E,textLabelPlaneMatrix:P,labelToScreenMatrix:C,textPixelRatio:A,holdingForFade:L,collisionBoxArray:R,partiallyEvaluatedTextSize:G,collisionGroup:te}=i.parameters,Y=x.get("text-optional"),ee=x.get("icon-optional"),oe=u.getOverlapMode(x,"text-overlap","text-allow-overlap"),de=oe==="always",Se=u.getOverlapMode(x,"icon-overlap","icon-allow-overlap"),ne=Se==="always",be=x.get("text-rotation-alignment")==="map",Te=x.get("text-pitch-alignment")==="map",De=x.get("icon-text-fit")!=="none",$e=x.get("symbol-z-order")==="viewport-y",Ue=de&&(ne||!y.hasIconData()||ee),Fe=ne&&(de||!y.hasTextData()||Y);!y.collisionArrays&&R&&y.deserializeCollisionBoxes(R);const tt=this.retainedQueryData[y.bucketInstanceId].tileID,wt=this.terrain?(He,Ct)=>this.terrain.getElevation(tt,He,Ct):null,Ft=(He,Ct)=>{if(c[He.crossTileID])return;if(L)return void(this.placements[He.crossTileID]=new Lt(!1,!1,!1));let nt=!1,rr=!1,tn=!0,nr=null,Bt={box:null,offscreen:null},Hr={box:null,offscreen:null},Yn=null,rn=null,En=null,Pi=0,lo=0,uo=0;Ct.textFeatureIndex?Pi=Ct.textFeatureIndex:He.useRuntimeCollisionCircles&&(Pi=He.featureIndex),Ct.verticalTextFeatureIndex&&(lo=Ct.verticalTextFeatureIndex);const Jn=Ct.textBox;if(Jn){const Nn=sr=>{let _n=u.WritingMode.horizontal;if(y.allowVerticalPlacement&&!sr&&this.prevPlacement){const Tn=this.prevPlacement.placedOrientations[He.crossTileID];Tn&&(this.placedOrientations[He.crossTileID]=Tn,_n=Tn,this.markUsedOrientation(y,_n,He))}return _n},kn=(sr,_n)=>{if(y.allowVerticalPlacement&&He.numVerticalGlyphVertices>0&&Ct.verticalTextBox){for(const Tn of y.writingModes)if(Tn===u.WritingMode.vertical?(Bt=_n(),Hr=Bt):Bt=sr(),Bt&&Bt.box&&Bt.box.length)break}else Bt=sr()};if(x.get("text-variable-anchor")){let sr=x.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[He.crossTileID]){const hr=this.prevPlacement.variableOffsets[He.crossTileID];sr.indexOf(hr.anchor)>0&&(sr=sr.filter(vn=>vn!==hr.anchor),sr.unshift(hr.anchor))}const _n=(hr,vn,Ii)=>{const nc=hr.x2-hr.x1,na=hr.y2-hr.y1,Q0=He.textBoxScale,qp=De&&Se==="never"?vn:null;let Ar={box:[],offscreen:!1};const fd=oe!=="never"?2*sr.length:sr.length;for(let Nl=0;Nl<fd;++Nl){const ia=this.attemptAnchorPlacement(sr[Nl%sr.length],hr,nc,na,Q0,be,Te,A,E,te,Nl>=sr.length?oe:"never",He,y,Ii,qp,wt);if(ia&&(Ar=ia.placedGlyphBoxes,Ar&&Ar.box&&Ar.box.length)){nt=!0,nr=ia.shift;break}}return Ar};kn(()=>_n(Jn,Ct.iconBox,u.WritingMode.horizontal),()=>{const hr=Ct.verticalTextBox;return y.allowVerticalPlacement&&!(Bt&&Bt.box&&Bt.box.length)&&He.numVerticalGlyphVertices>0&&hr?_n(hr,Ct.verticalIconBox,u.WritingMode.vertical):{box:null,offscreen:null}}),Bt&&(nt=Bt.box,tn=Bt.offscreen);const Tn=Nn(Bt&&Bt.box);if(!nt&&this.prevPlacement){const hr=this.prevPlacement.variableOffsets[He.crossTileID];hr&&(this.variableOffsets[He.crossTileID]=hr,this.markUsedJustification(y,hr.anchor,He,Tn))}}else{const sr=(_n,Tn)=>{const hr=this.collisionIndex.placeCollisionBox(_n,oe,A,E,te.predicate,wt);return hr&&hr.box&&hr.box.length&&(this.markUsedOrientation(y,Tn,He),this.placedOrientations[He.crossTileID]=Tn),hr};kn(()=>sr(Jn,u.WritingMode.horizontal),()=>{const _n=Ct.verticalTextBox;return y.allowVerticalPlacement&&He.numVerticalGlyphVertices>0&&_n?sr(_n,u.WritingMode.vertical):{box:null,offscreen:null}}),Nn(Bt&&Bt.box&&Bt.box.length)}}if(Yn=Bt,nt=Yn&&Yn.box&&Yn.box.length>0,tn=Yn&&Yn.offscreen,He.useRuntimeCollisionCircles){const Nn=y.text.placedSymbolArray.get(He.centerJustifiedTextSymbolIndex),kn=u.evaluateSizeForFeature(y.textSizeData,G,Nn),sr=x.get("text-padding");rn=this.collisionIndex.placeCollisionCircles(oe,Nn,y.lineVertexArray,y.glyphOffsetArray,kn,E,P,C,f,Te,te.predicate,He.collisionCircleDiameter,sr,wt),rn.circles.length&&rn.collisionDetected&&!f&&u.warnOnce("Collisions detected, but collision boxes are not shown"),nt=de||rn.circles.length>0&&!rn.collisionDetected,tn=tn&&rn.offscreen}if(Ct.iconFeatureIndex&&(uo=Ct.iconFeatureIndex),Ct.iconBox){const Nn=kn=>{const sr=De&&nr?Nt(kn,nr.x,nr.y,be,Te,this.transform.angle):kn;return this.collisionIndex.placeCollisionBox(sr,Se,A,E,te.predicate,wt)};Hr&&Hr.box&&Hr.box.length&&Ct.verticalIconBox?(En=Nn(Ct.verticalIconBox),rr=En.box.length>0):(En=Nn(Ct.iconBox),rr=En.box.length>0),tn=tn&&En.offscreen}const Vo=Y||He.numHorizontalGlyphVertices===0&&He.numVerticalGlyphVertices===0,Vl=ee||He.numIconVertices===0;if(Vo||Vl?Vl?Vo||(rr=rr&&nt):nt=rr&&nt:rr=nt=rr&&nt,nt&&Yn&&Yn.box&&this.collisionIndex.insertCollisionBox(Yn.box,oe,x.get("text-ignore-placement"),y.bucketInstanceId,Hr&&Hr.box&&lo?lo:Pi,te.ID),rr&&En&&this.collisionIndex.insertCollisionBox(En.box,Se,x.get("icon-ignore-placement"),y.bucketInstanceId,uo,te.ID),rn&&(nt&&this.collisionIndex.insertCollisionCircles(rn.circles,oe,x.get("text-ignore-placement"),y.bucketInstanceId,Pi,te.ID),f)){const Nn=y.bucketInstanceId;let kn=this.collisionCircleArrays[Nn];kn===void 0&&(kn=this.collisionCircleArrays[Nn]=new ut);for(let sr=0;sr<rn.circles.length;sr+=4)kn.circles.push(rn.circles[sr+0]),kn.circles.push(rn.circles[sr+1]),kn.circles.push(rn.circles[sr+2]),kn.circles.push(rn.collisionDetected?1:0)}if(He.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[He.crossTileID]=new Lt(nt||Ue,rr||Fe,tn||y.justReloaded),c[He.crossTileID]=!0};if($e){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const He=y.getSortedSymbolIndexes(this.transform.angle);for(let Ct=He.length-1;Ct>=0;--Ct){const nt=He[Ct];Ft(y.symbolInstances.get(nt),y.collisionArrays[nt])}}else for(let He=i.symbolInstanceStart;He<i.symbolInstanceEnd;He++)Ft(y.symbolInstances.get(He),y.collisionArrays[He]);if(f&&y.bucketInstanceId in this.collisionCircleArrays){const He=this.collisionCircleArrays[y.bucketInstanceId];u.invert(He.invProjMatrix,E),He.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}markUsedJustification(i,c,f,y){let x;x=y===u.WritingMode.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[u.getAnchorJustification(c)];const E=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const P of E)P>=0&&(i.text.placedSymbolArray.get(P).crossTileID=x>=0&&P!==x?0:f.crossTileID)}markUsedOrientation(i,c,f){const y=c===u.WritingMode.horizontal||c===u.WritingMode.horizontalOnly?c:0,x=c===u.WritingMode.vertical?c:0,E=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const P of E)i.text.placedSymbolArray.get(P).placedOrientation=y;f.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let f=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const y=c?c.symbolFadeChange(i):1,x=c?c.opacities:{},E=c?c.variableOffsets:{},P=c?c.placedOrientations:{};for(const C in this.placements){const A=this.placements[C],L=x[C];L?(this.opacities[C]=new _t(L,y,A.text,A.icon),f=f||A.text!==L.text.placed||A.icon!==L.icon.placed):(this.opacities[C]=new _t(null,y,A.text,A.icon,A.skipFade),f=f||A.text||A.icon)}for(const C in x){const A=x[C];if(!this.opacities[C]){const L=new _t(A,y,!1,!1);L.isHidden()||(this.opacities[C]=L,f=f||A.text.placed||A.icon.placed)}}for(const C in E)this.variableOffsets[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.variableOffsets[C]=E[C]);for(const C in P)this.placedOrientations[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.placedOrientations[C]=P[C]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const f={};for(const y of c){const x=y.getBucket(i);x&&y.latestFeatureIndex&&i.id===x.layerIds[0]&&this.updateBucketOpacities(x,f,y.collisionBoxArray)}}updateBucketOpacities(i,c,f){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const y=i.layers[0].layout,x=new _t(null,0,!1,!1,!0),E=y.get("text-allow-overlap"),P=y.get("icon-allow-overlap"),C=y.get("text-variable-anchor"),A=y.get("text-rotation-alignment")==="map",L=y.get("text-pitch-alignment")==="map",R=y.get("icon-text-fit")!=="none",G=new _t(null,0,E&&(P||!i.hasIconData()||y.get("icon-optional")),P&&(E||!i.hasTextData()||y.get("text-optional")),!0);!i.collisionArrays&&f&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(f);const te=(Y,ee,oe)=>{for(let de=0;de<ee/4;de++)Y.opacityVertexArray.emplaceBack(oe);Y.hasVisibleVertices=Y.hasVisibleVertices||oe!==Vn};for(let Y=0;Y<i.symbolInstances.length;Y++){const ee=i.symbolInstances.get(Y),{numHorizontalGlyphVertices:oe,numVerticalGlyphVertices:de,crossTileID:Se}=ee;let ne=this.opacities[Se];c[Se]?ne=x:ne||(ne=G,this.opacities[Se]=ne),c[Se]=!0;const be=ee.numIconVertices>0,Te=this.placedOrientations[ee.crossTileID],De=Te===u.WritingMode.vertical,$e=Te===u.WritingMode.horizontal||Te===u.WritingMode.horizontalOnly;if(oe>0||de>0){const Ue=ci(ne.text);te(i.text,oe,De?Vn:Ue),te(i.text,de,$e?Vn:Ue);const Fe=ne.text.isHidden();[ee.rightJustifiedTextSymbolIndex,ee.centerJustifiedTextSymbolIndex,ee.leftJustifiedTextSymbolIndex].forEach(Ft=>{Ft>=0&&(i.text.placedSymbolArray.get(Ft).hidden=Fe||De?1:0)}),ee.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(ee.verticalPlacedTextSymbolIndex).hidden=Fe||$e?1:0);const tt=this.variableOffsets[ee.crossTileID];tt&&this.markUsedJustification(i,tt.anchor,ee,Te);const wt=this.placedOrientations[ee.crossTileID];wt&&(this.markUsedJustification(i,"left",ee,wt),this.markUsedOrientation(i,wt,ee))}if(be){const Ue=ci(ne.icon),Fe=!(R&&ee.verticalPlacedIconSymbolIndex&&De);ee.placedIconSymbolIndex>=0&&(te(i.icon,ee.numIconVertices,Fe?Ue:Vn),i.icon.placedSymbolArray.get(ee.placedIconSymbolIndex).hidden=ne.icon.isHidden()),ee.verticalPlacedIconSymbolIndex>=0&&(te(i.icon,ee.numVerticalIconVertices,Fe?Vn:Ue),i.icon.placedSymbolArray.get(ee.verticalPlacedIconSymbolIndex).hidden=ne.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Ue=i.collisionArrays[Y];if(Ue){let Fe=new u.Point(0,0);if(Ue.textBox||Ue.verticalTextBox){let wt=!0;if(C){const Ft=this.variableOffsets[Se];Ft?(Fe=Yt(Ft.anchor,Ft.width,Ft.height,Ft.textOffset,Ft.textBoxScale),A&&Fe._rotate(L?this.transform.angle:-this.transform.angle)):wt=!1}Ue.textBox&&fr(i.textCollisionBox.collisionVertexArray,ne.text.placed,!wt||De,Fe.x,Fe.y),Ue.verticalTextBox&&fr(i.textCollisionBox.collisionVertexArray,ne.text.placed,!wt||$e,Fe.x,Fe.y)}const tt=Boolean(!$e&&Ue.verticalIconBox);Ue.iconBox&&fr(i.iconCollisionBox.collisionVertexArray,ne.icon.placed,tt,R?Fe.x:0,R?Fe.y:0),Ue.verticalIconBox&&fr(i.iconCollisionBox.collisionVertexArray,ne.icon.placed,!tt,R?Fe.x:0,R?Fe.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const Y=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=Y.invProjMatrix,i.placementViewportMatrix=Y.viewportMatrix,i.collisionCircleArray=Y.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const f=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*f>i}setStale(){this.stale=!0}}function fr(p,i,c,f,y){p.emplaceBack(i?1:0,c?1:0,f||0,y||0),p.emplaceBack(i?1:0,c?1:0,f||0,y||0),p.emplaceBack(i?1:0,c?1:0,f||0,y||0),p.emplaceBack(i?1:0,c?1:0,f||0,y||0)}const Ir=Math.pow(2,25),Lr=Math.pow(2,24),Qr=Math.pow(2,17),er=Math.pow(2,16),Ih=Math.pow(2,9),Mh=Math.pow(2,8),Ti=Math.pow(2,1);function ci(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;const i=p.placed?1:0,c=Math.floor(127*p.opacity);return c*Ir+i*Lr+c*Qr+i*er+c*Ih+i*Mh+c*Ti+i}const Vn=0;class hp{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,f,y,x){const E=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(E,y,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort((P,C)=>P.sortKey-C.sortKey));this._currentPartIndex<E.length;)if(c.placeLayerBucketPart(E[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,x())return!0;return!1}}class xu{constructor(i,c,f,y,x,E,P,C){this.placement=new cr(i,c,E,P,C),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(i,c,f){const y=u.exported.now(),x=()=>!this._forceFullPlacement&&u.exported.now()-y>2;for(;this._currentPlacementIndex>=0;){const E=c[i[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=P)&&(!E.maxzoom||E.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new hp(E)),this._inProgressLayer.continuePlacement(f[E.source],this.placement,this._showCollisionBoxes,E,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Fr=512/u.EXTENT/2;class vl{constructor(i,c,f){this.tileID=i,this.bucketInstanceId=f,this._symbolsByKey={};const y=new Map;for(let x=0;x<c.length;x++){const E=c.get(x),P=E.key,C=y.get(P);C?C.push(E):y.set(P,[E])}for(const[x,E]of y){const P={positions:E.map(C=>({x:Math.floor(C.anchorX*Fr),y:Math.floor(C.anchorY*Fr)})),crossTileIDs:E.map(C=>C.crossTileID)};if(P.positions.length>128){const C=new u.KDBush(P.positions.length,16,Uint16Array);for(const{x:A,y:L}of P.positions)C.add(A,L);C.finish(),delete P.positions,P.index=C}this._symbolsByKey[x]=P}}getScaledCoordinates(i,c){const{x:f,y,z:x}=this.tileID.canonical,{x:E,y:P,z:C}=c.canonical,A=Fr/Math.pow(2,C-x),L=(P*u.EXTENT+i.anchorY)*A,R=y*u.EXTENT*Fr;return{x:Math.floor((E*u.EXTENT+i.anchorX)*A-f*u.EXTENT*Fr),y:Math.floor(L-R)}}findMatches(i,c,f){const y=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let x=0;x<i.length;x++){const E=i.get(x);if(E.crossTileID)continue;const P=this._symbolsByKey[E.key];if(!P)continue;const C=this.getScaledCoordinates(E,c);if(P.index){const A=P.index.range(C.x-y,C.y-y,C.x+y,C.y+y).sort();for(const L of A){const R=P.crossTileIDs[L];if(!f[R]){f[R]=!0,E.crossTileID=R;break}}}else if(P.positions)for(let A=0;A<P.positions.length;A++){const L=P.positions[A],R=P.crossTileIDs[A];if(Math.abs(L.x-C.x)<=y&&Math.abs(L.y-C.y)<=y&&!f[R]){f[R]=!0,E.crossTileID=R;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class Ua{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Sn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(c!==0)for(const f in this.indexes){const y=this.indexes[f],x={};for(const E in y){const P=y[E];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+c),x[P.tileID.key]=P}this.indexes[f]=x}this.lng=i}addBucket(i,c,f){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let x=0;x<c.symbolInstances.length;x++)c.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const y=this.usedCrossTileIDs[i.overscaledZ];for(const x in this.indexes){const E=this.indexes[x];if(Number(x)>i.overscaledZ)for(const P in E){const C=E[P];C.tileID.isChildOf(i)&&C.findMatches(c.symbolInstances,i,y)}else{const P=E[i.scaledTo(Number(x)).key];P&&P.findMatches(c.symbolInstances,i,y)}}for(let x=0;x<c.symbolInstances.length;x++){const E=c.symbolInstances.get(x);E.crossTileID||(E.crossTileID=f.generate(),y[E.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new vl(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const f of c.getCrossTileIDsLists())for(const y of f)delete this.usedCrossTileIDs[i][y]}removeStaleBuckets(i){let c=!1;for(const f in this.indexes){const y=this.indexes[f];for(const x in y)i[y[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,y[x]),delete y[x],c=!0)}return c}}class xl{constructor(){this.layerIndexes={},this.crossTileIDs=new Ua,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,f){let y=this.layerIndexes[i.id];y===void 0&&(y=this.layerIndexes[i.id]=new Sn);let x=!1;const E={};y.handleWrapJump(f);for(const P of c){const C=P.getBucket(i);C&&i.id===C.layerIds[0]&&(C.bucketInstanceId||(C.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(P.tileID,C,this.crossTileIDs)&&(x=!0),E[C.bucketInstanceId]=!0)}return y.removeStaleBuckets(E)&&(x=!0),x}pruneUnusedLayers(i){const c={};i.forEach(f=>{c[f]=!0});for(const f in this.layerIndexes)c[f]||delete this.layerIndexes[f]}}const hi=(p,i)=>u.emitValidationErrors(p,i&&i.filter(c=>c.identifier!=="source.canvas")),dp=u.pick(u.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Sa=u.pick(u.operations,["setCenter","setZoom","setBearing","setPitch"]),L0=u.emptyStyle();class so extends u.Evented{constructor(i,c={}){super(),this.map=i,this.dispatcher=new qt(yn(),this,i._getMapId()),this.imageManager=new vt,this.imageManager.setEventedParent(this),this.glyphManager=new or(i._requestManager,c.localIdeographFontFamily),this.lineAtlas=new xr(256,512),this.crossTileSymbolIndex=new xl,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",u.getReferrer());const f=this;this._rtlTextPluginCallback=so.registerForPluginStateChange(y=>{f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:y.pluginStatus,pluginURL:y.pluginURL},(x,E)=>{if(u.triggerPluginCompletionEvent(x),E&&E.every(P=>P))for(const P in f.sourceCaches){const C=f.sourceCaches[P].getSource().type;C!=="vector"&&C!=="geojson"||f.sourceCaches[P].reload()}})}),this.on("data",y=>{if(y.dataType!=="source"||y.sourceDataType!=="metadata")return;const x=this.sourceCaches[y.sourceId];if(!x)return;const E=x.getSource();if(E&&E.vectorLayerIds)for(const P in this._layers){const C=this._layers[P];C.source===E.id&&this._validateLayer(C)}})}loadURL(i,c={},f){this.fire(new u.Event("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const y=this.map._requestManager.transformRequest(i,$.Style);this._request=u.getJSON(y,(x,E)=>{this._request=null,x?this.fire(new u.ErrorEvent(x)):E&&this._load(E,c,f)})}loadJSON(i,c={},f){this.fire(new u.Event("dataloading",{dataType:"style"})),this._request=u.exported.frame(()=>{this._request=null,c.validate=c.validate!==!1,this._load(i,c,f)})}loadEmpty(){this.fire(new u.Event("dataloading",{dataType:"style"})),this._load(L0,{validate:!1})}_load(i,c,f){const y=c.transformStyle?c.transformStyle(f,i):i;if(!c.validate||!hi(this,u.validateStyle(y))){this._loaded=!0,this.stylesheet=y;for(const x in y.sources)this.addSource(x,y.sources[x],{validate:!1});y.sprite?this._loadSprite(y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(y.glyphs),this._createLayers(),this.light=new it(this.stylesheet.light),this.map.setTerrain(this.stylesheet.terrain),this.fire(new u.Event("data",{dataType:"style"})),this.fire(new u.Event("style.load"))}}_createLayers(){const i=u.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of i){const f=u.createStyleLayer(c);f.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=f}}_loadSprite(i,c=!1,f){this.imageManager.setLoaded(!1),this._spriteRequest=function(y,x,E,P){const C=je(y),A=C.length,L=E>1?"@2x":"",R={},G={},te={};for(const{id:Y,url:ee}of C){const oe=x.transformRequest(x.normalizeSpriteURL(ee,L,".json"),$.SpriteJSON),de=`${Y}_${oe.url}`;R[de]=u.getJSON(oe,(be,Te)=>{delete R[de],G[Y]=Te,ke(P,G,te,be,A)});const Se=x.transformRequest(x.normalizeSpriteURL(ee,L,".png"),$.SpriteImage),ne=`${Y}_${Se.url}`;R[ne]=B.getImage(Se,(be,Te)=>{delete R[ne],te[Y]=Te,ke(P,G,te,be,A)})}return{cancel(){for(const Y of Object.values(R))Y.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(y,x)=>{if(this._spriteRequest=null,y)this.fire(new u.ErrorEvent(y));else if(x)for(const E in x){this._spritesImagesIds[E]=[];const P=this._spritesImagesIds[E]?this._spritesImagesIds[E].filter(C=>!(C in x)):[];for(const C of P)this.imageManager.removeImage(C),this._changedImages[C]=!0;for(const C in x[E]){const A=E==="default"?C:`${E}:${C}`;this._spritesImagesIds[E].push(A),A in this.imageManager.images?this.imageManager.updateImage(A,x[E][C],!1):this.imageManager.addImage(A,x[E][C]),c&&(this._changedImages[A]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.Event("data",{dataType:"style"})),f&&f(y)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.Event("data",{dataType:"style"}))}_validateLayer(i){const c=this.sourceCaches[i.source];if(!c)return;const f=i.sourceLayer;if(!f)return;const y=c.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(f)===-1)&&this.fire(new u.ErrorEvent(new Error(`Source layer "${f}" does not exist on source "${y.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const c=this._serializedAllLayers();if(!i||i.length===0)return Object.values(c);const f=[];for(const y of i)c[y]&&f.push(c[y]);return f}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const c=Object.keys(this._layers);for(const f of c){const y=this._layers[f];y.type!=="custom"&&(i[f]=y.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const c=this._changed;if(this._changed){const y=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(y.length||x.length)&&this._updateWorkerLayers(y,x);for(const E in this._updatedSources){const P=this._updatedSources[E];if(P==="reload")this._reloadSource(E);else{if(P!=="clear")throw new Error(`Invalid action ${P}`);this._clearSource(E)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const E in this._updatedPaintProps)this._layers[E].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const f={};for(const y in this.sourceCaches){const x=this.sourceCaches[y];f[y]=x.used,x.used=!1}for(const y of this._order){const x=this._layers[y];x.recalculate(i,this._availableImages),!x.isHidden(i.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const y in f){const x=this.sourceCaches[y];f[y]!==x.used&&x.fire(new u.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(i),this.z=i.zoom,c&&this.fire(new u.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,c={}){this._checkLoaded();const f=this.serialize();if(i=c.transformStyle?c.transformStyle(f,i):i,hi(this,u.validateStyle(i)))return!1;(i=u.clone$1(i)).layers=u.derefLayers(i.layers);const y=u.diffStyles(f,i).filter(E=>!(E.command in Sa));if(y.length===0)return!1;const x=y.filter(E=>!(E.command in dp));if(x.length>0)throw new Error(`Unimplemented: ${x.map(E=>E.command).join(", ")}.`);for(const E of y)E.command!=="setTransition"&&this[E.command].apply(this,E.args);return this.stylesheet=i,!0}addImage(i,c){if(this.getImage(i))return this.fire(new u.ErrorEvent(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,c),this._afterImageUpdated(i)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new u.ErrorEvent(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,c,f={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(u.validateStyle.source,`sources.${i}`,c,null,f))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const y=this.sourceCaches[i]=new Rr(i,c,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:i})),y.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===i)return this.fire(new u.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${f}" is using it.`)));const c=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],c.fire(new u.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,c){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const f=this.sourceCaches[i].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(c),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,c,f={}){this._checkLoaded();const y=i.id;if(this.getLayer(y))return void this.fire(new u.ErrorEvent(new Error(`Layer "${y}" already exists on this map.`)));let x;if(i.type==="custom"){if(hi(this,u.validateCustomStyleLayer(i)))return;x=u.createStyleLayer(i)}else{if(typeof i.source=="object"&&(this.addSource(y,i.source),i=u.clone$1(i),i=u.extend(i,{source:y})),this._validate(u.validateStyle.layer,`layers.${y}`,i,{arrayIndex:-1},f))return;x=u.createStyleLayer(i),this._validateLayer(x),x.setEventedParent(this,{layer:{id:y}})}const E=c?this._order.indexOf(c):this._order.length;if(c&&E===-1)this.fire(new u.ErrorEvent(new Error(`Cannot add layer "${y}" before non-existing layer "${c}".`)));else{if(this._order.splice(E,0,y),this._layerOrderChanged=!0,this._layers[y]=x,this._removedLayers[y]&&x.source&&x.type!=="custom"){const P=this._removedLayers[y];delete this._removedLayers[y],P.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new u.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const f=this._order.indexOf(i);this._order.splice(f,1);const y=c?this._order.indexOf(c):this._order.length;c&&y===-1?this.fire(new u.ErrorEvent(new Error(`Cannot move layer "${i}" before non-existing layer "${c}".`))):(this._order.splice(y,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new u.ErrorEvent(new Error(`Cannot remove non-existing layer "${i}".`)));c.setEventedParent(null);const f=this._order.indexOf(i);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map)}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,c,f){this._checkLoaded();const y=this.getLayer(i);y?y.minzoom===c&&y.maxzoom===f||(c!=null&&(y.minzoom=c),f!=null&&(y.maxzoom=f),this._updateLayer(y)):this.fire(new u.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,c,f={}){this._checkLoaded();const y=this.getLayer(i);if(y){if(!u.deepEqual(y.filter,c))return c==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(u.validateStyle.filter,`layers.${y.id}.filter`,c,null,f)||(y.filter=u.clone$1(c),this._updateLayer(y)))}else this.fire(new u.ErrorEvent(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return u.clone$1(this.getLayer(i).filter)}setLayoutProperty(i,c,f,y={}){this._checkLoaded();const x=this.getLayer(i);x?u.deepEqual(x.getLayoutProperty(c),f)||(x.setLayoutProperty(c,f,y),this._updateLayer(x)):this.fire(new u.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,c){const f=this.getLayer(i);if(f)return f.getLayoutProperty(c);this.fire(new u.ErrorEvent(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,c,f,y={}){this._checkLoaded();const x=this.getLayer(i);x?u.deepEqual(x.getPaintProperty(c),f)||(x.setPaintProperty(c,f,y)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new u.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,c){return this.getLayer(i).getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const f=i.source,y=i.sourceLayer,x=this.sourceCaches[f];if(x===void 0)return void this.fire(new u.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const E=x.getSource().type;E==="geojson"&&y?this.fire(new u.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):E!=="vector"||y?(i.id===void 0&&this.fire(new u.ErrorEvent(new Error("The feature id parameter must be provided."))),x.setFeatureState(y,i.id,c)):this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,c){this._checkLoaded();const f=i.source,y=this.sourceCaches[f];if(y===void 0)return void this.fire(new u.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const x=y.getSource().type,E=x==="vector"?i.sourceLayer:void 0;x!=="vector"||E?c&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new u.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(E,i.id,c):this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const c=i.source,f=i.sourceLayer,y=this.sourceCaches[c];if(y!==void 0)return y.getSource().type!=="vector"||f?(i.id===void 0&&this.fire(new u.ErrorEvent(new Error("The feature id parameter must be provided."))),y.getFeatureState(f,i.id)):void this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.ErrorEvent(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return u.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const i=u.mapObject(this.sourceCaches,y=>y.serialize()),c=this._serializeByIds(this._order),f=this.stylesheet;return u.filterObject({version:f.version,name:f.name,metadata:f.metadata,light:f.light,center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,sprite:f.sprite,glyphs:f.glyphs,transition:f.transition,sources:i,layers:c},y=>y!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const c=E=>this._layers[E].type==="fill-extrusion",f={},y=[];for(let E=this._order.length-1;E>=0;E--){const P=this._order[E];if(c(P)){f[P]=E;for(const C of i){const A=C[P];if(A)for(const L of A)y.push(L)}}}y.sort((E,P)=>P.intersectionZ-E.intersectionZ);const x=[];for(let E=this._order.length-1;E>=0;E--){const P=this._order[E];if(c(P))for(let C=y.length-1;C>=0;C--){const A=y[C].feature;if(f[A.layer.id]<E)break;x.push(A),y.pop()}else for(const C of i){const A=C[P];if(A)for(const L of A)x.push(L.feature)}}return x}queryRenderedFeatures(i,c,f){c&&c.filter&&this._validate(u.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);const y={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new u.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const P of c.layers){const C=this._layers[P];if(!C)return this.fire(new u.ErrorEvent(new Error(`The layer '${P}' does not exist in the map's style and cannot be queried for features.`))),[];y[C.source]=!0}}const x=[];c.availableImages=this._availableImages;const E=this._serializedAllLayers();for(const P in this.sourceCaches)c.layers&&!y[P]||x.push(Zt(this.sourceCaches[P],this._layers,E,i,c,f));return this.placement&&x.push(function(P,C,A,L,R,G,te){const Y={},ee=G.queryRenderedSymbols(L),oe=[];for(const de of Object.keys(ee).map(Number))oe.push(te[de]);oe.sort(un);for(const de of oe){const Se=de.featureIndex.lookupSymbolFeatures(ee[de.bucketInstanceId],C,de.bucketIndex,de.sourceLayerIndex,R.filter,R.layers,R.availableImages,P);for(const ne in Se){const be=Y[ne]=Y[ne]||[],Te=Se[ne];Te.sort((De,$e)=>{const Ue=de.featureSortOrder;if(Ue){const Fe=Ue.indexOf(De.featureIndex);return Ue.indexOf($e.featureIndex)-Fe}return $e.featureIndex-De.featureIndex});for(const De of Te)be.push(De)}}for(const de in Y)Y[de].forEach(Se=>{const ne=Se.feature,be=A[P[de].source].getFeatureState(ne.layer["source-layer"],ne.id);ne.source=ne.layer.source,ne.layer["source-layer"]&&(ne.sourceLayer=ne.layer["source-layer"]),ne.state=be});return Y}(this._layers,E,this.sourceCaches,i,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(i,c){c&&c.filter&&this._validate(u.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);const f=this.sourceCaches[i];return f?function(y,x){const E=y.getRenderableIds().map(A=>y.getTileByID(A)),P=[],C={};for(let A=0;A<E.length;A++){const L=E[A],R=L.tileID.canonical.key;C[R]||(C[R]=!0,L.querySourceFeatures(P,x))}return P}(f,c):[]}addSourceType(i,c,f){return so.getSourceType(i)?f(new Error(`A source type called "${i}" already exists.`)):(so.setSourceType(i,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:c.workerSourceURL},f):f(null,null))}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();const f=this.light.getLight();let y=!1;for(const E in i)if(!u.deepEqual(i[E],f[E])){y=!0;break}if(!y)return;const x={now:u.exported.now(),transition:u.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(x)}_validate(i,c,f,y,x={}){return(!x||x.validate!==!1)&&hi(this,i.call(u.validateStyle,u.extend({key:c,style:this.serialize(),value:f,styleSpec:u.v8Spec},y)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),u.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const f=this.sourceCaches[c];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const c in this.sourceCaches)this.sourceCaches[c].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,c,f,y,x=!1){let E=!1,P=!1;const C={};for(const A of this._order){const L=this._layers[A];if(L.type!=="symbol")continue;if(!C[L.source]){const G=this.sourceCaches[L.source];C[L.source]=G.getRenderableIds(!0).map(te=>G.getTileByID(te)).sort((te,Y)=>Y.tileID.overscaledZ-te.tileID.overscaledZ||(te.tileID.isLessThan(Y.tileID)?-1:1))}const R=this.crossTileSymbolIndex.addLayer(L,C[L.source],i.center.lng);E=E||R}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(u.exported.now(),i.zoom))&&(this.pauseablePlacement=new xu(i,this.map.terrain,this._order,x,c,f,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,C),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(u.exported.now()),P=!0),E&&this.pauseablePlacement.placement.setStale()),P||E)for(const A of this._order){const L=this._layers[A];L.type==="symbol"&&this.placement.updateLayerOpacities(L,C[L.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(u.exported.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c,f){this.imageManager.getImages(c.icons,f),this._updateTilesForChangedImages();const y=this.sourceCaches[c.source];y&&y.setDependencies(c.tileID.key,c.type,c.icons)}getGlyphs(i,c,f){this.glyphManager.getGlyphs(c.stacks,f);const y=this.sourceCaches[c.source];y&&y.setDependencies(c.tileID.key,c.type,[""])}getResource(i,c,f){return u.makeRequest(c,f)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,c={}){this._checkLoaded(),i&&this._validate(u.validateStyle.glyphs,"glyphs",i,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,c,f={},y){this._checkLoaded();const x=[{id:i,url:c}],E=[...je(this.stylesheet.sprite),...x];this._validate(u.validateStyle.sprite,"sprite",E,null,f)||(this.stylesheet.sprite=E,this._loadSprite(x,!0,y))}removeSprite(i){this._checkLoaded();const c=je(this.stylesheet.sprite);if(c.find(f=>f.id===i)){if(this._spritesImagesIds[i])for(const f of this._spritesImagesIds[i])this.imageManager.removeImage(f),this._changedImages[f]=!0;c.splice(c.findIndex(f=>f.id===i),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.Event("data",{dataType:"style"}))}else this.fire(new u.ErrorEvent(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return je(this.stylesheet.sprite)}setSprite(i,c={},f){this._checkLoaded(),i&&this._validate(u.validateStyle.sprite,"sprite",i,null,c)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,f):(this._unloadSprite(),f&&f(null)))}}so.getSourceType=function(p){return qi[p]},so.setSourceType=function(p,i){qi[p]=i},so.registerForPluginStateChange=u.registerForPluginStateChange;var Ss=u.createLayout([{name:"a_pos",type:"Int16",components:2}]),Es="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Hi={prelude:pr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:pr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:pr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:pr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:pr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:pr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:pr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:pr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:pr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:pr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:pr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:pr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:pr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:pr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:pr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:pr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:pr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:pr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:pr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:pr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:pr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:pr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:pr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:pr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:pr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:pr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:pr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Es),terrainDepth:pr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Es),terrainCoords:pr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Es)};function pr(p,i){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=i.match(/attribute ([\w]+) ([\w]+)/g),y=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=x?x.concat(y):y,P={};return{fragmentSource:p=p.replace(c,(C,A,L,R,G)=>(P[G]=!0,A==="define"?`
#ifndef HAS_UNIFORM_u_${G}
varying ${L} ${R} ${G};
#else
uniform ${L} ${R} u_${G};
#endif
`:`
#ifdef HAS_UNIFORM_u_${G}
    ${L} ${R} ${G} = u_${G};
#endif
`)),vertexSource:i=i.replace(c,(C,A,L,R,G)=>{const te=R==="float"?"vec2":"vec4",Y=G.match(/color/)?"color":te;return P[G]?A==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
attribute ${L} ${te} a_${G};
varying ${L} ${R} ${G};
#else
uniform ${L} ${R} u_${G};
#endif
`:Y==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = a_${G};
#else
    ${L} ${R} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = unpack_mix_${Y}(a_${G}, u_${G}_t);
#else
    ${L} ${R} ${G} = u_${G};
#endif
`:A==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
attribute ${L} ${te} a_${G};
#else
uniform ${L} ${R} u_${G};
#endif
`:Y==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${L} ${R} ${G} = a_${G};
#else
    ${L} ${R} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${L} ${R} ${G} = unpack_mix_${Y}(a_${G}, u_${G}_t);
#else
    ${L} ${R} ${G} = u_${G};
#endif
`}),staticAttributes:f,staticUniforms:E}}class wu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,f,y,x,E,P,C,A){this.context=i;let L=this.boundPaintVertexBuffers.length!==y.length;for(let R=0;!L&&R<y.length;R++)this.boundPaintVertexBuffers[R]!==y[R]&&(L=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==f||L||this.boundIndexBuffer!==x||this.boundVertexOffset!==E||this.boundDynamicVertexBuffer!==P||this.boundDynamicVertexBuffer2!==C||this.boundDynamicVertexBuffer3!==A?this.freshBind(c,f,y,x,E,P,C,A):(i.bindVertexArray.set(this.vao),P&&P.bind(),x&&x.dynamicDraw&&x.bind(),C&&C.bind(),A&&A.bind())}freshBind(i,c,f,y,x,E,P,C){const A=i.numAttributes,L=this.context,R=L.gl;this.vao&&this.destroy(),this.vao=L.createVertexArray(),L.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=y,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=P,this.boundDynamicVertexBuffer3=C,c.enableAttributes(R,i);for(const G of f)G.enableAttributes(R,i);E&&E.enableAttributes(R,i),P&&P.enableAttributes(R,i),C&&C.enableAttributes(R,i),c.bind(),c.setVertexAttribPointers(R,i,x);for(const G of f)G.bind(),G.setVertexAttribPointers(R,i,x);E&&(E.bind(),E.setVertexAttribPointers(R,i,x)),y&&y.bind(),P&&(P.bind(),P.setVertexAttribPointers(R,i,x)),C&&(C.bind(),C.setVertexAttribPointers(R,i,x)),L.currentNumAttributes=A}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Ah(p){const i=[];for(let c=0;c<p.length;c++){if(p[c]===null)continue;const f=p[c].split(" ");i.push(f.pop())}return i}class F0{constructor(i,c,f,y,x,E,P){const C=i.gl;this.program=C.createProgram();const A=Ah(f.staticAttributes),L=y?y.getBinderAttributes():[],R=A.concat(L),G=Hi.prelude.staticUniforms?Ah(Hi.prelude.staticUniforms):[],te=f.staticUniforms?Ah(f.staticUniforms):[],Y=y?y.getBinderUniforms():[],ee=G.concat(te).concat(Y),oe=[];for(const $e of ee)oe.indexOf($e)<0&&oe.push($e);const de=y?y.defines():[];E&&de.push("#define OVERDRAW_INSPECTOR;"),P&&de.push("#define TERRAIN3D;");const Se=de.concat(Hi.prelude.fragmentSource,f.fragmentSource).join(`
`),ne=de.concat(Hi.prelude.vertexSource,f.vertexSource).join(`
`),be=C.createShader(C.FRAGMENT_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);C.shaderSource(be,Se),C.compileShader(be),C.attachShader(this.program,be);const Te=C.createShader(C.VERTEX_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);C.shaderSource(Te,ne),C.compileShader(Te),C.attachShader(this.program,Te),this.attributes={};const De={};this.numAttributes=R.length;for(let $e=0;$e<this.numAttributes;$e++)R[$e]&&(C.bindAttribLocation(this.program,$e,R[$e]),this.attributes[R[$e]]=$e);C.linkProgram(this.program),C.deleteShader(Te),C.deleteShader(be);for(let $e=0;$e<oe.length;$e++){const Ue=oe[$e];if(Ue&&!De[Ue]){const Fe=C.getUniformLocation(this.program,Ue);Fe&&(De[Ue]=Fe)}}this.fixedUniforms=x(i,De),this.terrainUniforms=(($e,Ue)=>({u_depth:new u.Uniform1i($e,Ue.u_depth),u_terrain:new u.Uniform1i($e,Ue.u_terrain),u_terrain_dim:new u.Uniform1f($e,Ue.u_terrain_dim),u_terrain_matrix:new u.UniformMatrix4f($e,Ue.u_terrain_matrix),u_terrain_unpack:new u.Uniform4f($e,Ue.u_terrain_unpack),u_terrain_exaggeration:new u.Uniform1f($e,Ue.u_terrain_exaggeration)}))(i,De),this.binderUniforms=y?y.getUniforms(i,De):[]}draw(i,c,f,y,x,E,P,C,A,L,R,G,te,Y,ee,oe,de,Se){const ne=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(f),i.setStencilMode(y),i.setColorMode(x),i.setCullFace(E),C){i.activeTexture.set(ne.TEXTURE2),ne.bindTexture(ne.TEXTURE_2D,C.depthTexture),i.activeTexture.set(ne.TEXTURE3),ne.bindTexture(ne.TEXTURE_2D,C.texture);for(const Te in this.terrainUniforms)this.terrainUniforms[Te].set(C[Te])}for(const Te in this.fixedUniforms)this.fixedUniforms[Te].set(P[Te]);ee&&ee.setUniforms(i,this.binderUniforms,te,{zoom:Y});let be=0;switch(c){case ne.LINES:be=2;break;case ne.TRIANGLES:be=3;break;case ne.LINE_STRIP:be=1}for(const Te of G.get()){const De=Te.vaos||(Te.vaos={});(De[A]||(De[A]=new wu)).bind(i,this,L,ee?ee.getPaintVertexBuffers():[],R,Te.vertexOffset,oe,de,Se),ne.drawElements(c,Te.primitiveLength*be,ne.UNSIGNED_SHORT,Te.primitiveOffset*be*2)}}}function bu(p,i,c){const f=1/Ie(c,1,i.transform.tileZoom),y=Math.pow(2,c.tileID.overscaledZ),x=c.tileSize*Math.pow(2,i.transform.tileZoom)/y,E=x*(c.tileID.canonical.x+c.tileID.wrap*y),P=x*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[f,p.fromScale,p.toScale],u_fade:p.t,u_pixel_coord_upper:[E>>16,P>>16],u_pixel_coord_lower:[65535&E,65535&P]}}const fp=(p,i,c,f)=>{const y=i.style.light,x=y.properties.get("position"),E=[x.x,x.y,x.z],P=function(){var A=new u.ARRAY_TYPE(9);return u.ARRAY_TYPE!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A}();y.properties.get("anchor")==="viewport"&&function(A,L){var R=Math.sin(L),G=Math.cos(L);A[0]=G,A[1]=R,A[2]=0,A[3]=-R,A[4]=G,A[5]=0,A[6]=0,A[7]=0,A[8]=1}(P,-i.transform.angle),function(A,L,R){var G=L[0],te=L[1],Y=L[2];A[0]=G*R[0]+te*R[3]+Y*R[6],A[1]=G*R[1]+te*R[4]+Y*R[7],A[2]=G*R[2]+te*R[5]+Y*R[8]}(E,E,P);const C=y.properties.get("color");return{u_matrix:p,u_lightpos:E,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[C.r,C.g,C.b],u_vertical_gradient:+c,u_opacity:f}},pp=(p,i,c,f,y,x,E)=>u.extend(fp(p,i,c,f),bu(x,i,E),{u_height_factor:-Math.pow(2,y.overscaledZ)/E.tileSize/8}),mp=p=>({u_matrix:p}),zh=(p,i,c,f)=>u.extend(mp(p),bu(c,i,f)),O0=(p,i)=>({u_matrix:p,u_world:i}),Dh=(p,i,c,f,y)=>u.extend(zh(p,i,c,f),{u_world:y}),gp=(p,i,c,f)=>{const y=p.transform;let x,E;if(f.paint.get("circle-pitch-alignment")==="map"){const P=Ie(c,1,y.zoom);x=!0,E=[P,P]}else x=!1,E=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:p.translatePosMatrix(i.posMatrix,c,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:p.pixelRatio,u_extrude_scale:E}},yp=(p,i,c)=>{const f=Ie(c,1,i.zoom),y=Math.pow(2,i.zoom-c.tileID.overscaledZ),x=c.tileID.overscaleFactor();return{u_matrix:p,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[i.pixelsToGLUnits[0]/(f*y),i.pixelsToGLUnits[1]/(f*y)],u_overscale_factor:x}},Rh=(p,i,c=1)=>({u_matrix:p,u_color:i,u_overlay:0,u_overlay_scale:c}),Lh=p=>({u_matrix:p}),ja=(p,i,c,f)=>({u_matrix:p,u_extrude_scale:Ie(i,1,c),u_intensity:f});function Su(p,i){const c=Math.pow(2,i.canonical.z),f=i.canonical.y;return[new u.MercatorCoordinate(0,f/c).toLngLat().lat,new u.MercatorCoordinate(0,(f+1)/c).toLngLat().lat]}const di=(p,i,c,f)=>{const y=p.transform;return{u_matrix:Sl(p,i,c,f),u_ratio:1/Ie(i,1,y.zoom),u_device_pixel_ratio:p.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},Eu=(p,i,c,f,y)=>u.extend(di(p,i,c,y),{u_image:0,u_image_height:f}),ku=(p,i,c,f,y)=>{const x=p.transform,E=bl(i,x);return{u_matrix:Sl(p,i,c,y),u_texsize:i.imageAtlasTexture.size,u_ratio:1/Ie(i,1,x.zoom),u_device_pixel_ratio:p.pixelRatio,u_image:0,u_scale:[E,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},wl=(p,i,c,f,y,x)=>{const E=p.lineAtlas,P=bl(i,p.transform),C=c.layout.get("line-cap")==="round",A=E.getDash(f.from,C),L=E.getDash(f.to,C),R=A.width*y.fromScale,G=L.width*y.toScale;return u.extend(di(p,i,c,x),{u_patternscale_a:[P/R,-A.height/2],u_patternscale_b:[P/G,-L.height/2],u_sdfgamma:E.width/(256*Math.min(R,G)*p.pixelRatio)/2,u_image:0,u_tex_y_a:A.y,u_tex_y_b:L.y,u_mix:y.t})};function bl(p,i){return 1/Ie(p,1,i.tileZoom)}function Sl(p,i,c,f){return p.translatePosMatrix(f?f.posMatrix:i.tileID.posMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const El=(p,i,c,f,y)=>{return{u_matrix:p,u_tl_parent:i,u_scale_parent:c,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(E=y.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(x=y.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:kl(y.paint.get("raster-hue-rotate"))};var x,E};function kl(p){p*=Math.PI/180;const i=Math.sin(p),c=Math.cos(p);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const Tl=(p,i,c,f,y,x,E,P,C,A)=>{const L=y.transform;return{u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:L.cameraToCenterDistance,u_pitch:L.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:L.width/L.height,u_fade_change:y.options.fadeDuration?y.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:E,u_coord_matrix:P,u_is_text:+C,u_pitch_with_map:+f,u_texsize:A,u_texture:0}},fi=(p,i,c,f,y,x,E,P,C,A,L)=>{const R=y.transform;return u.extend(Tl(p,i,c,f,y,x,E,P,C,A),{u_gamma_scale:f?Math.cos(R._pitch)*R.cameraToCenterDistance:1,u_device_pixel_ratio:y.pixelRatio,u_is_halo:+L})},Ci=(p,i,c,f,y,x,E,P,C,A)=>u.extend(fi(p,i,c,f,y,x,E,P,!0,C,!0),{u_texsize_icon:A,u_texture_icon:1}),Fh=(p,i,c)=>({u_matrix:p,u_opacity:i,u_color:c}),Tu=(p,i,c,f,y,x)=>u.extend(function(E,P,C,A){const L=C.imageManager.getPattern(E.from.toString()),R=C.imageManager.getPattern(E.to.toString()),{width:G,height:te}=C.imageManager.getPixelSize(),Y=Math.pow(2,A.tileID.overscaledZ),ee=A.tileSize*Math.pow(2,C.transform.tileZoom)/Y,oe=ee*(A.tileID.canonical.x+A.tileID.wrap*Y),de=ee*A.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:L.tl,u_pattern_br_a:L.br,u_pattern_tl_b:R.tl,u_pattern_br_b:R.br,u_texsize:[G,te],u_mix:P.t,u_pattern_size_a:L.displaySize,u_pattern_size_b:R.displaySize,u_scale_a:P.fromScale,u_scale_b:P.toScale,u_tile_units_to_pixels:1/Ie(A,1,C.transform.tileZoom),u_pixel_coord_upper:[oe>>16,de>>16],u_pixel_coord_lower:[65535&oe,65535&de]}}(f,x,c,y),{u_matrix:p,u_opacity:i}),Cu={fillExtrusion:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_lightpos:new u.Uniform3f(p,i.u_lightpos),u_lightintensity:new u.Uniform1f(p,i.u_lightintensity),u_lightcolor:new u.Uniform3f(p,i.u_lightcolor),u_vertical_gradient:new u.Uniform1f(p,i.u_vertical_gradient),u_opacity:new u.Uniform1f(p,i.u_opacity)}),fillExtrusionPattern:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_lightpos:new u.Uniform3f(p,i.u_lightpos),u_lightintensity:new u.Uniform1f(p,i.u_lightintensity),u_lightcolor:new u.Uniform3f(p,i.u_lightcolor),u_vertical_gradient:new u.Uniform1f(p,i.u_vertical_gradient),u_height_factor:new u.Uniform1f(p,i.u_height_factor),u_image:new u.Uniform1i(p,i.u_image),u_texsize:new u.Uniform2f(p,i.u_texsize),u_pixel_coord_upper:new u.Uniform2f(p,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(p,i.u_pixel_coord_lower),u_scale:new u.Uniform3f(p,i.u_scale),u_fade:new u.Uniform1f(p,i.u_fade),u_opacity:new u.Uniform1f(p,i.u_opacity)}),fill:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix)}),fillPattern:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_image:new u.Uniform1i(p,i.u_image),u_texsize:new u.Uniform2f(p,i.u_texsize),u_pixel_coord_upper:new u.Uniform2f(p,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(p,i.u_pixel_coord_lower),u_scale:new u.Uniform3f(p,i.u_scale),u_fade:new u.Uniform1f(p,i.u_fade)}),fillOutline:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_world:new u.Uniform2f(p,i.u_world)}),fillOutlinePattern:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_world:new u.Uniform2f(p,i.u_world),u_image:new u.Uniform1i(p,i.u_image),u_texsize:new u.Uniform2f(p,i.u_texsize),u_pixel_coord_upper:new u.Uniform2f(p,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(p,i.u_pixel_coord_lower),u_scale:new u.Uniform3f(p,i.u_scale),u_fade:new u.Uniform1f(p,i.u_fade)}),circle:(p,i)=>({u_camera_to_center_distance:new u.Uniform1f(p,i.u_camera_to_center_distance),u_scale_with_map:new u.Uniform1i(p,i.u_scale_with_map),u_pitch_with_map:new u.Uniform1i(p,i.u_pitch_with_map),u_extrude_scale:new u.Uniform2f(p,i.u_extrude_scale),u_device_pixel_ratio:new u.Uniform1f(p,i.u_device_pixel_ratio),u_matrix:new u.UniformMatrix4f(p,i.u_matrix)}),collisionBox:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_camera_to_center_distance:new u.Uniform1f(p,i.u_camera_to_center_distance),u_pixels_to_tile_units:new u.Uniform1f(p,i.u_pixels_to_tile_units),u_extrude_scale:new u.Uniform2f(p,i.u_extrude_scale),u_overscale_factor:new u.Uniform1f(p,i.u_overscale_factor)}),collisionCircle:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_inv_matrix:new u.UniformMatrix4f(p,i.u_inv_matrix),u_camera_to_center_distance:new u.Uniform1f(p,i.u_camera_to_center_distance),u_viewport_size:new u.Uniform2f(p,i.u_viewport_size)}),debug:(p,i)=>({u_color:new u.UniformColor(p,i.u_color),u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_overlay:new u.Uniform1i(p,i.u_overlay),u_overlay_scale:new u.Uniform1f(p,i.u_overlay_scale)}),clippingMask:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix)}),heatmap:(p,i)=>({u_extrude_scale:new u.Uniform1f(p,i.u_extrude_scale),u_intensity:new u.Uniform1f(p,i.u_intensity),u_matrix:new u.UniformMatrix4f(p,i.u_matrix)}),heatmapTexture:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_world:new u.Uniform2f(p,i.u_world),u_image:new u.Uniform1i(p,i.u_image),u_color_ramp:new u.Uniform1i(p,i.u_color_ramp),u_opacity:new u.Uniform1f(p,i.u_opacity)}),hillshade:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_image:new u.Uniform1i(p,i.u_image),u_latrange:new u.Uniform2f(p,i.u_latrange),u_light:new u.Uniform2f(p,i.u_light),u_shadow:new u.UniformColor(p,i.u_shadow),u_highlight:new u.UniformColor(p,i.u_highlight),u_accent:new u.UniformColor(p,i.u_accent)}),hillshadePrepare:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_image:new u.Uniform1i(p,i.u_image),u_dimension:new u.Uniform2f(p,i.u_dimension),u_zoom:new u.Uniform1f(p,i.u_zoom),u_unpack:new u.Uniform4f(p,i.u_unpack)}),line:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_ratio:new u.Uniform1f(p,i.u_ratio),u_device_pixel_ratio:new u.Uniform1f(p,i.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(p,i.u_units_to_pixels)}),lineGradient:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_ratio:new u.Uniform1f(p,i.u_ratio),u_device_pixel_ratio:new u.Uniform1f(p,i.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(p,i.u_units_to_pixels),u_image:new u.Uniform1i(p,i.u_image),u_image_height:new u.Uniform1f(p,i.u_image_height)}),linePattern:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_texsize:new u.Uniform2f(p,i.u_texsize),u_ratio:new u.Uniform1f(p,i.u_ratio),u_device_pixel_ratio:new u.Uniform1f(p,i.u_device_pixel_ratio),u_image:new u.Uniform1i(p,i.u_image),u_units_to_pixels:new u.Uniform2f(p,i.u_units_to_pixels),u_scale:new u.Uniform3f(p,i.u_scale),u_fade:new u.Uniform1f(p,i.u_fade)}),lineSDF:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_ratio:new u.Uniform1f(p,i.u_ratio),u_device_pixel_ratio:new u.Uniform1f(p,i.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(p,i.u_units_to_pixels),u_patternscale_a:new u.Uniform2f(p,i.u_patternscale_a),u_patternscale_b:new u.Uniform2f(p,i.u_patternscale_b),u_sdfgamma:new u.Uniform1f(p,i.u_sdfgamma),u_image:new u.Uniform1i(p,i.u_image),u_tex_y_a:new u.Uniform1f(p,i.u_tex_y_a),u_tex_y_b:new u.Uniform1f(p,i.u_tex_y_b),u_mix:new u.Uniform1f(p,i.u_mix)}),raster:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_tl_parent:new u.Uniform2f(p,i.u_tl_parent),u_scale_parent:new u.Uniform1f(p,i.u_scale_parent),u_buffer_scale:new u.Uniform1f(p,i.u_buffer_scale),u_fade_t:new u.Uniform1f(p,i.u_fade_t),u_opacity:new u.Uniform1f(p,i.u_opacity),u_image0:new u.Uniform1i(p,i.u_image0),u_image1:new u.Uniform1i(p,i.u_image1),u_brightness_low:new u.Uniform1f(p,i.u_brightness_low),u_brightness_high:new u.Uniform1f(p,i.u_brightness_high),u_saturation_factor:new u.Uniform1f(p,i.u_saturation_factor),u_contrast_factor:new u.Uniform1f(p,i.u_contrast_factor),u_spin_weights:new u.Uniform3f(p,i.u_spin_weights)}),symbolIcon:(p,i)=>({u_is_size_zoom_constant:new u.Uniform1i(p,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(p,i.u_is_size_feature_constant),u_size_t:new u.Uniform1f(p,i.u_size_t),u_size:new u.Uniform1f(p,i.u_size),u_camera_to_center_distance:new u.Uniform1f(p,i.u_camera_to_center_distance),u_pitch:new u.Uniform1f(p,i.u_pitch),u_rotate_symbol:new u.Uniform1i(p,i.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(p,i.u_aspect_ratio),u_fade_change:new u.Uniform1f(p,i.u_fade_change),u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(p,i.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(p,i.u_coord_matrix),u_is_text:new u.Uniform1i(p,i.u_is_text),u_pitch_with_map:new u.Uniform1i(p,i.u_pitch_with_map),u_texsize:new u.Uniform2f(p,i.u_texsize),u_texture:new u.Uniform1i(p,i.u_texture)}),symbolSDF:(p,i)=>({u_is_size_zoom_constant:new u.Uniform1i(p,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(p,i.u_is_size_feature_constant),u_size_t:new u.Uniform1f(p,i.u_size_t),u_size:new u.Uniform1f(p,i.u_size),u_camera_to_center_distance:new u.Uniform1f(p,i.u_camera_to_center_distance),u_pitch:new u.Uniform1f(p,i.u_pitch),u_rotate_symbol:new u.Uniform1i(p,i.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(p,i.u_aspect_ratio),u_fade_change:new u.Uniform1f(p,i.u_fade_change),u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(p,i.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(p,i.u_coord_matrix),u_is_text:new u.Uniform1i(p,i.u_is_text),u_pitch_with_map:new u.Uniform1i(p,i.u_pitch_with_map),u_texsize:new u.Uniform2f(p,i.u_texsize),u_texture:new u.Uniform1i(p,i.u_texture),u_gamma_scale:new u.Uniform1f(p,i.u_gamma_scale),u_device_pixel_ratio:new u.Uniform1f(p,i.u_device_pixel_ratio),u_is_halo:new u.Uniform1i(p,i.u_is_halo)}),symbolTextAndIcon:(p,i)=>({u_is_size_zoom_constant:new u.Uniform1i(p,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(p,i.u_is_size_feature_constant),u_size_t:new u.Uniform1f(p,i.u_size_t),u_size:new u.Uniform1f(p,i.u_size),u_camera_to_center_distance:new u.Uniform1f(p,i.u_camera_to_center_distance),u_pitch:new u.Uniform1f(p,i.u_pitch),u_rotate_symbol:new u.Uniform1i(p,i.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(p,i.u_aspect_ratio),u_fade_change:new u.Uniform1f(p,i.u_fade_change),u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(p,i.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(p,i.u_coord_matrix),u_is_text:new u.Uniform1i(p,i.u_is_text),u_pitch_with_map:new u.Uniform1i(p,i.u_pitch_with_map),u_texsize:new u.Uniform2f(p,i.u_texsize),u_texsize_icon:new u.Uniform2f(p,i.u_texsize_icon),u_texture:new u.Uniform1i(p,i.u_texture),u_texture_icon:new u.Uniform1i(p,i.u_texture_icon),u_gamma_scale:new u.Uniform1f(p,i.u_gamma_scale),u_device_pixel_ratio:new u.Uniform1f(p,i.u_device_pixel_ratio),u_is_halo:new u.Uniform1i(p,i.u_is_halo)}),background:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_opacity:new u.Uniform1f(p,i.u_opacity),u_color:new u.UniformColor(p,i.u_color)}),backgroundPattern:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_opacity:new u.Uniform1f(p,i.u_opacity),u_image:new u.Uniform1i(p,i.u_image),u_pattern_tl_a:new u.Uniform2f(p,i.u_pattern_tl_a),u_pattern_br_a:new u.Uniform2f(p,i.u_pattern_br_a),u_pattern_tl_b:new u.Uniform2f(p,i.u_pattern_tl_b),u_pattern_br_b:new u.Uniform2f(p,i.u_pattern_br_b),u_texsize:new u.Uniform2f(p,i.u_texsize),u_mix:new u.Uniform1f(p,i.u_mix),u_pattern_size_a:new u.Uniform2f(p,i.u_pattern_size_a),u_pattern_size_b:new u.Uniform2f(p,i.u_pattern_size_b),u_scale_a:new u.Uniform1f(p,i.u_scale_a),u_scale_b:new u.Uniform1f(p,i.u_scale_b),u_pixel_coord_upper:new u.Uniform2f(p,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(p,i.u_pixel_coord_lower),u_tile_units_to_pixels:new u.Uniform1f(p,i.u_tile_units_to_pixels)}),terrain:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_texture:new u.Uniform1i(p,i.u_texture),u_ele_delta:new u.Uniform1f(p,i.u_ele_delta)}),terrainDepth:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_ele_delta:new u.Uniform1f(p,i.u_ele_delta)}),terrainCoords:(p,i)=>({u_matrix:new u.UniformMatrix4f(p,i.u_matrix),u_texture:new u.Uniform1i(p,i.u_texture),u_terrain_coords_id:new u.Uniform1f(p,i.u_terrain_coords_id),u_ele_delta:new u.Uniform1f(p,i.u_ele_delta)})};class Oh{constructor(i,c,f){this.context=i;const y=i.gl;this.buffer=y.createBuffer(),this.dynamicDraw=Boolean(f),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const $h={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Pu{constructor(i,c,f,y){this.length=c.length,this.attributes=f,this.itemSize=c.bytesPerElement,this.dynamicDraw=y,this.context=i;const x=i.gl;this.buffer=x.createBuffer(),i.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let f=0;f<this.attributes.length;f++){const y=c.attributes[this.attributes[f].name];y!==void 0&&i.enableVertexAttribArray(y)}}setVertexAttribPointers(i,c,f){for(let y=0;y<this.attributes.length;y++){const x=this.attributes[y],E=c.attributes[x.name];E!==void 0&&i.vertexAttribPointer(E,x.components,i[$h[x.type]],!1,this.itemSize,x.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class tr{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Bh extends tr{getDefault(){return u.Color.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Iu extends tr{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class _p extends tr{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class vp extends tr{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class ks extends tr{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class $0 extends tr{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class B0 extends tr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class V0 extends tr{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class N0 extends tr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class U0 extends tr{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class j0 extends tr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class Vh extends tr{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Mu extends tr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class Nh extends tr{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Uh extends tr{getDefault(){return u.Color.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Ts extends tr{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class xp extends tr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class wp extends tr{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class jh extends tr{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Ga extends tr{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class bp extends tr{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Cs extends tr{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Ps extends tr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Sp extends tr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Gh extends tr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class mr extends tr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Au extends tr{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class G0 extends tr{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.bindVertexArray(i),this.current=i,this.dirty=!1)}}class Ep extends tr{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Cl extends tr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class W0 extends tr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Wh extends tr{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class kp extends Wh{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class q0 extends Wh{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class qh extends Wh{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class zu{constructor(i,c,f,y,x){this.context=i,this.width=c,this.height=f;const E=i.gl,P=this.framebuffer=E.createFramebuffer();if(this.colorAttachment=new kp(i,P),y)this.depthAttachment=x?new qh(i,P):new q0(i,P);else if(x)throw new Error("Stencil cannot be setted without depth");if(E.checkFramebufferStatus(E.FRAMEBUFFER)!==E.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const f=this.depthAttachment.get();f&&i.deleteRenderbuffer(f)}i.deleteFramebuffer(this.framebuffer)}}class Or{constructor(i,c,f){this.blendFunction=i,this.blendColor=c,this.mask=f}}Or.Replace=[1,0],Or.disabled=new Or(Or.Replace,u.Color.transparent,[!1,!1,!1,!1]),Or.unblended=new Or(Or.Replace,u.Color.transparent,[!0,!0,!0,!0]),Or.alphaBlended=new Or([1,771],u.Color.transparent,[!0,!0,!0,!0]);class Zh{constructor(i){this.gl=i,this.clearColor=new Bh(this),this.clearDepth=new Iu(this),this.clearStencil=new _p(this),this.colorMask=new vp(this),this.depthMask=new ks(this),this.stencilMask=new $0(this),this.stencilFunc=new B0(this),this.stencilOp=new V0(this),this.stencilTest=new N0(this),this.depthRange=new U0(this),this.depthTest=new j0(this),this.depthFunc=new Vh(this),this.blend=new Mu(this),this.blendFunc=new Nh(this),this.blendColor=new Uh(this),this.blendEquation=new Ts(this),this.cullFace=new xp(this),this.cullFaceSide=new wp(this),this.frontFace=new jh(this),this.program=new Ga(this),this.activeTexture=new bp(this),this.viewport=new Cs(this),this.bindFramebuffer=new Ps(this),this.bindRenderbuffer=new Sp(this),this.bindTexture=new Gh(this),this.bindVertexBuffer=new mr(this),this.bindElementBuffer=new Au(this),this.bindVertexArray=new G0(this),this.pixelStoreUnpack=new Ep(this),this.pixelStoreUnpackPremultiplyAlpha=new Cl(this),this.pixelStoreUnpackFlipY=new W0(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),this.HALF_FLOAT=i.HALF_FLOAT,i.getExtension("EXT_color_buffer_half_float"),this.RGBA16F=i.RGBA16F,this.RGB16F=i.RGB16F}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new Oh(this,i,c)}createVertexBuffer(i,c,f){return new Pu(this,i,c,f)}createRenderbuffer(i,c,f){const y=this.gl,x=y.createRenderbuffer();return this.bindRenderbuffer.set(x),y.renderbufferStorage(y.RENDERBUFFER,i,c,f),this.bindRenderbuffer.set(null),x}createFramebuffer(i,c,f,y){return new zu(this,i,c,f,y)}clear({color:i,depth:c,stencil:f}){const y=this.gl;let x=0;i&&(x|=y.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(x|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),f!==void 0&&(x|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),y.clear(x)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){u.deepEqual(i.blendFunction,Or.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){return this.gl.createVertexArray()}deleteVertexArray(i){return this.gl.deleteVertexArray(i)}unbindVAO(){this.bindVertexArray.set(null)}}class Wt{constructor(i,c,f){this.func=i,this.mask=c,this.range=f}}Wt.ReadOnly=!1,Wt.ReadWrite=!0,Wt.disabled=new Wt(519,Wt.ReadOnly,[0,1]);const Du=7680;class Sr{constructor(i,c,f,y,x,E){this.test=i,this.ref=c,this.mask=f,this.fail=y,this.depthFail=x,this.pass=E}}Sr.disabled=new Sr({func:519,mask:0},0,0,Du,Du,Du);class wr{constructor(i,c,f){this.enable=i,this.mode=c,this.frontFace=f}}let Is;function Tp(p,i,c,f,y,x,E){const P=p.context,C=P.gl,A=p.useProgram("collisionBox"),L=[];let R=0,G=0;for(let ne=0;ne<f.length;ne++){const be=f[ne],Te=i.getTile(be),De=Te.getBucket(c);if(!De)continue;let $e=be.posMatrix;y[0]===0&&y[1]===0||($e=p.translatePosMatrix(be.posMatrix,Te,y,x));const Ue=E?De.textCollisionBox:De.iconCollisionBox,Fe=De.collisionCircleArray;if(Fe.length>0){const tt=u.create(),wt=$e;u.mul(tt,De.placementInvProjMatrix,p.transform.glCoordMatrix),u.mul(tt,tt,De.placementViewportMatrix),L.push({circleArray:Fe,circleOffset:G,transform:wt,invTransform:tt,coord:be}),R+=Fe.length/4,G=R}Ue&&A.draw(P,C.LINES,Wt.disabled,Sr.disabled,p.colorModeForRenderPass(),wr.disabled,yp($e,p.transform,Te),p.style.map.terrain&&p.style.map.terrain.getTerrainData(be),c.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,null,p.transform.zoom,null,null,Ue.collisionVertexBuffer)}if(!E||!L.length)return;const te=p.useProgram("collisionCircle"),Y=new u.CollisionCircleLayoutArray;Y.resize(4*R),Y._trim();let ee=0;for(const ne of L)for(let be=0;be<ne.circleArray.length/4;be++){const Te=4*be,De=ne.circleArray[Te+0],$e=ne.circleArray[Te+1],Ue=ne.circleArray[Te+2],Fe=ne.circleArray[Te+3];Y.emplace(ee++,De,$e,Ue,Fe,0),Y.emplace(ee++,De,$e,Ue,Fe,1),Y.emplace(ee++,De,$e,Ue,Fe,2),Y.emplace(ee++,De,$e,Ue,Fe,3)}(!Is||Is.length<2*R)&&(Is=function(ne){const be=2*ne,Te=new u.QuadTriangleArray;Te.resize(be),Te._trim();for(let De=0;De<be;De++){const $e=6*De;Te.uint16[$e+0]=4*De+0,Te.uint16[$e+1]=4*De+1,Te.uint16[$e+2]=4*De+2,Te.uint16[$e+3]=4*De+2,Te.uint16[$e+4]=4*De+3,Te.uint16[$e+5]=4*De+0}return Te}(R));const oe=P.createIndexBuffer(Is,!0),de=P.createVertexBuffer(Y,u.collisionCircleLayout.members,!0);for(const ne of L){const be={u_matrix:ne.transform,u_inv_matrix:ne.invTransform,u_camera_to_center_distance:(Se=p.transform).cameraToCenterDistance,u_viewport_size:[Se.width,Se.height]};te.draw(P,C.TRIANGLES,Wt.disabled,Sr.disabled,p.colorModeForRenderPass(),wr.disabled,be,p.style.map.terrain&&p.style.map.terrain.getTerrainData(ne.coord),c.id,de,oe,u.SegmentVector.simpleSegment(0,2*ne.circleOffset,ne.circleArray.length,ne.circleArray.length/2),null,p.transform.zoom,null,null,null)}var Se;de.destroy(),oe.destroy()}wr.disabled=new wr(!1,1029,2305),wr.backCCW=new wr(!0,1029,2305);const Hh=u.identity(new Float32Array(16));function Z0(p,i,c,f,y,x){const{horizontalAlign:E,verticalAlign:P}=u.getAnchorAlignment(p),C=-(E-.5)*i,A=-(P-.5)*c,L=u.evaluateVariableOffset(p,f);return new u.Point((C/y+L[0])*x,(A/y+L[1])*x)}function Cp(p,i,c,f,y,x,E,P,C,A,L){const R=p.text.placedSymbolArray,G=p.text.dynamicLayoutVertexArray,te=p.icon.dynamicLayoutVertexArray,Y={};G.clear();for(let ee=0;ee<R.length;ee++){const oe=R.get(ee),de=oe.hidden||!oe.crossTileID||p.allowVerticalPlacement&&!oe.placedOrientation?null:f[oe.crossTileID];if(de){const Se=new u.Point(oe.anchorX,oe.anchorY),ne=pt(Se,c?E:x,L),be=ki(y.cameraToCenterDistance,ne.signedDistanceFromCamera);let Te=u.evaluateSizeForFeature(p.textSizeData,C,oe)*be/u.ONE_EM;c&&(Te*=p.tilePixelRatio/P);const{width:De,height:$e,anchor:Ue,textOffset:Fe,textBoxScale:tt}=de,wt=Z0(Ue,De,$e,Fe,tt,Te),Ft=c?pt(Se.add(wt),x,L).point:ne.point.add(i?wt.rotate(-y.angle):wt),He=p.allowVerticalPlacement&&oe.placedOrientation===u.WritingMode.vertical?Math.PI/2:0;for(let Ct=0;Ct<oe.numGlyphs;Ct++)u.addDynamicAttributes(G,Ft,He);A&&oe.associatedIconIndex>=0&&(Y[oe.associatedIconIndex]={shiftedAnchor:Ft,angle:He})}else pe(oe.numGlyphs,G)}if(A){te.clear();const ee=p.icon.placedSymbolArray;for(let oe=0;oe<ee.length;oe++){const de=ee.get(oe);if(de.hidden)pe(de.numGlyphs,te);else{const Se=Y[oe];if(Se)for(let ne=0;ne<de.numGlyphs;ne++)u.addDynamicAttributes(te,Se.shiftedAnchor,Se.angle);else pe(de.numGlyphs,te)}}p.icon.dynamicLayoutVertexBuffer.updateData(te)}p.text.dynamicLayoutVertexBuffer.updateData(G)}function Ru(p,i,c){return c.iconsInText&&i?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function Lu(p,i,c,f,y,x,E,P,C,A,L,R){const G=p.context,te=G.gl,Y=p.transform,ee=P==="map",oe=C==="map",de=P!=="viewport"&&c.layout.get("symbol-placement")!=="point",Se=ee&&!oe&&!de,ne=!c.layout.get("symbol-sort-key").isConstant();let be=!1;const Te=p.depthModeForSublayer(0,Wt.ReadOnly),De=c.layout.get("text-variable-anchor"),$e=[];for(const Ue of f){const Fe=i.getTile(Ue),tt=Fe.getBucket(c);if(!tt)continue;const wt=y?tt.text:tt.icon;if(!wt||!wt.segments.get().length||!wt.hasVisibleVertices)continue;const Ft=wt.programConfigurations.get(c.id),He=y||tt.sdfIcons,Ct=y?tt.textSizeData:tt.iconSizeData,nt=oe||Y.pitch!==0,rr=p.useProgram(Ru(He,y,tt),Ft),tn=u.evaluateSizeForZoom(Ct,Y.zoom),nr=p.style.map.terrain&&p.style.map.terrain.getTerrainData(Ue);let Bt,Hr,Yn,rn,En=[0,0],Pi=null;if(y)Hr=Fe.glyphAtlasTexture,Yn=te.LINEAR,Bt=Fe.glyphAtlasTexture.size,tt.iconsInText&&(En=Fe.imageAtlasTexture.size,Pi=Fe.imageAtlasTexture,rn=nt||p.options.rotating||p.options.zooming||Ct.kind==="composite"||Ct.kind==="camera"?te.LINEAR:te.NEAREST);else{const vn=c.layout.get("icon-size").constantOr(0)!==1||tt.iconsNeedLinear;Hr=Fe.imageAtlasTexture,Yn=He||p.options.rotating||p.options.zooming||vn||nt?te.LINEAR:te.NEAREST,Bt=Fe.imageAtlasTexture.size}const lo=Ie(Fe,1,p.transform.zoom),uo=Ur(Ue.posMatrix,oe,ee,p.transform,lo),Jn=Kn(Ue.posMatrix,oe,ee,p.transform,lo),Vo=De&&tt.hasTextData(),Vl=c.layout.get("icon-text-fit")!=="none"&&Vo&&tt.hasIconData();if(de){const vn=p.style.map.terrain?(nc,na)=>p.style.map.terrain.getElevation(Ue,nc,na):null,Ii=c.layout.get("text-rotation-alignment")==="map";wa(tt,Ue.posMatrix,p,y,uo,Jn,oe,A,Ii,vn)}const Nn=p.translatePosMatrix(Ue.posMatrix,Fe,x,E),kn=de||y&&De||Vl?Hh:uo,sr=p.translatePosMatrix(Jn,Fe,x,E,!0),_n=He&&c.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Tn;Tn=He?tt.iconsInText?Ci(Ct.kind,tn,Se,oe,p,Nn,kn,sr,Bt,En):fi(Ct.kind,tn,Se,oe,p,Nn,kn,sr,y,Bt,!0):Tl(Ct.kind,tn,Se,oe,p,Nn,kn,sr,y,Bt);const hr={program:rr,buffers:wt,uniformValues:Tn,atlasTexture:Hr,atlasTextureIcon:Pi,atlasInterpolation:Yn,atlasInterpolationIcon:rn,isSDF:He,hasHalo:_n};if(ne&&tt.canOverlap){be=!0;const vn=wt.segments.get();for(const Ii of vn)$e.push({segments:new u.SegmentVector([Ii]),sortKey:Ii.sortKey,state:hr,terrainData:nr})}else $e.push({segments:wt.segments,sortKey:0,state:hr,terrainData:nr})}be&&$e.sort((Ue,Fe)=>Ue.sortKey-Fe.sortKey);for(const Ue of $e){const Fe=Ue.state;if(G.activeTexture.set(te.TEXTURE0),Fe.atlasTexture.bind(Fe.atlasInterpolation,te.CLAMP_TO_EDGE),Fe.atlasTextureIcon&&(G.activeTexture.set(te.TEXTURE1),Fe.atlasTextureIcon&&Fe.atlasTextureIcon.bind(Fe.atlasInterpolationIcon,te.CLAMP_TO_EDGE)),Fe.isSDF){const tt=Fe.uniformValues;Fe.hasHalo&&(tt.u_is_halo=1,Xh(Fe.buffers,Ue.segments,c,p,Fe.program,Te,L,R,tt,Ue.terrainData)),tt.u_is_halo=0}Xh(Fe.buffers,Ue.segments,c,p,Fe.program,Te,L,R,Fe.uniformValues,Ue.terrainData)}}function Xh(p,i,c,f,y,x,E,P,C,A){const L=f.context;y.draw(L,L.gl.TRIANGLES,x,E,P,wr.disabled,C,A,c.id,p.layoutVertexBuffer,p.indexBuffer,i,c.paint,f.transform.zoom,p.programConfigurations.get(c.id),p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer)}function Kh(p,i,c,f,y){if(!c||!f||!f.imageAtlas)return;const x=f.imageAtlas.patternPositions;let E=x[c.to.toString()],P=x[c.from.toString()];if(!E||!P){const C=y.getPaintProperty(i);E=x[C],P=x[C]}E&&P&&p.setConstantPatternPositions(E,P)}function Pl(p,i,c,f,y,x,E){const P=p.context.gl,C="fill-pattern",A=c.paint.get(C),L=A&&A.constantOr(1),R=c.getCrossfadeParameters();let G,te,Y,ee,oe;E?(te=L&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",G=P.LINES):(te=L?"fillPattern":"fill",G=P.TRIANGLES);const de=A.constantOr(null);for(const Se of f){const ne=i.getTile(Se);if(L&&!ne.patternsLoaded())continue;const be=ne.getBucket(c);if(!be)continue;const Te=be.programConfigurations.get(c.id),De=p.useProgram(te,Te),$e=p.style.map.terrain&&p.style.map.terrain.getTerrainData(Se);L&&(p.context.activeTexture.set(P.TEXTURE0),ne.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),Te.updatePaintBuffers(R)),Kh(Te,C,de,ne,c);const Ue=$e?Se:null,Fe=p.translatePosMatrix(Ue?Ue.posMatrix:Se.posMatrix,ne,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(E){ee=be.indexBuffer2,oe=be.segments2;const tt=[P.drawingBufferWidth,P.drawingBufferHeight];Y=te==="fillOutlinePattern"&&L?Dh(Fe,p,R,ne,tt):O0(Fe,tt)}else ee=be.indexBuffer,oe=be.segments,Y=L?zh(Fe,p,R,ne):mp(Fe);De.draw(p.context,G,y,p.stencilModeForClipping(Se),x,wr.disabled,Y,$e,c.id,be.layoutVertexBuffer,ee,oe,c.paint,p.transform.zoom,Te)}}function Il(p,i,c,f,y,x,E){const P=p.context,C=P.gl,A="fill-extrusion-pattern",L=c.paint.get(A),R=L.constantOr(1),G=c.getCrossfadeParameters(),te=c.paint.get("fill-extrusion-opacity"),Y=L.constantOr(null);for(const ee of f){const oe=i.getTile(ee),de=oe.getBucket(c);if(!de)continue;const Se=p.style.map.terrain&&p.style.map.terrain.getTerrainData(ee),ne=de.programConfigurations.get(c.id),be=p.useProgram(R?"fillExtrusionPattern":"fillExtrusion",ne);R&&(p.context.activeTexture.set(C.TEXTURE0),oe.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),ne.updatePaintBuffers(G)),Kh(ne,A,Y,oe,c);const Te=p.translatePosMatrix(ee.posMatrix,oe,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),De=c.paint.get("fill-extrusion-vertical-gradient"),$e=R?pp(Te,p,De,te,ee,G,oe):fp(Te,p,De,te);be.draw(P,P.gl.TRIANGLES,y,x,E,wr.backCCW,$e,Se,c.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,c.paint,p.transform.zoom,ne,p.style.map.terrain&&de.centroidVertexBuffer)}}function H0(p,i,c,f,y,x,E){const P=p.context,C=P.gl,A=c.fbo;if(!A)return;const L=p.useProgram("hillshade"),R=p.style.map.terrain&&p.style.map.terrain.getTerrainData(i);P.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,A.colorAttachment.get()),L.draw(P,C.TRIANGLES,y,x,E,wr.disabled,((G,te,Y,ee)=>{const oe=Y.paint.get("hillshade-shadow-color"),de=Y.paint.get("hillshade-highlight-color"),Se=Y.paint.get("hillshade-accent-color");let ne=Y.paint.get("hillshade-illumination-direction")*(Math.PI/180);Y.paint.get("hillshade-illumination-anchor")==="viewport"&&(ne-=G.transform.angle);const be=!G.options.moving;return{u_matrix:ee?ee.posMatrix:G.transform.calculatePosMatrix(te.tileID.toUnwrapped(),be),u_image:0,u_latrange:Su(0,te.tileID),u_light:[Y.paint.get("hillshade-exaggeration"),ne],u_shadow:oe,u_highlight:de,u_accent:Se}})(p,c,f,R?i:null),R,f.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}function Pp(p,i,c,f,y,x){const E=p.context,P=E.gl,C=i.dem;if(C&&C.data){const A=C.dim,L=C.stride,R=C.getPixels();if(E.activeTexture.set(P.TEXTURE1),E.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||p.getTileTexture(L),i.demTexture){const te=i.demTexture;te.update(R,{premultiply:!1}),te.bind(P.NEAREST,P.CLAMP_TO_EDGE)}else i.demTexture=new Be(E,R,P.RGBA,{premultiply:!1}),i.demTexture.bind(P.NEAREST,P.CLAMP_TO_EDGE);E.activeTexture.set(P.TEXTURE0);let G=i.fbo;if(!G){const te=new Be(E,{width:A,height:A,data:null},P.RGBA);te.bind(P.LINEAR,P.CLAMP_TO_EDGE),G=i.fbo=E.createFramebuffer(A,A,!0,!1),G.colorAttachment.set(te.texture)}E.bindFramebuffer.set(G.framebuffer),E.viewport.set([0,0,A,A]),p.useProgram("hillshadePrepare").draw(E,P.TRIANGLES,f,y,x,wr.disabled,((te,Y)=>{const ee=Y.stride,oe=u.create();return u.ortho(oe,0,u.EXTENT,-u.EXTENT,0,0,1),u.translate(oe,oe,[0,-u.EXTENT,0]),{u_matrix:oe,u_image:1,u_dimension:[ee,ee],u_zoom:te.overscaledZ,u_unpack:Y.getUnpackVector()}})(i.tileID,C),null,c.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function en(p,i,c,f,y,x){const E=f.paint.get("raster-fade-duration");if(!x&&E>0){const P=u.exported.now(),C=(P-p.timeAdded)/E,A=i?(P-i.timeAdded)/E:-1,L=c.getSource(),R=y.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),G=!i||Math.abs(i.tileID.overscaledZ-R)>Math.abs(p.tileID.overscaledZ-R),te=G&&p.refreshedUponExpiration?1:u.clamp(G?C:1-A,0,1);return p.refreshedUponExpiration&&C>=1&&(p.refreshedUponExpiration=!1),i?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}const Wa=new u.Color(1,0,0,1),Xi=new u.Color(0,1,0,1),Ip=new u.Color(0,0,1,1),Yh=new u.Color(1,0,1,1),Mp=new u.Color(0,1,1,1);function qa(p,i,c,f){Ms(p,0,i+c/2,p.transform.width,c,f)}function Ml(p,i,c,f){Ms(p,i-c/2,0,c,p.transform.height,f)}function Ms(p,i,c,f,y,x){const E=p.context,P=E.gl;P.enable(P.SCISSOR_TEST),P.scissor(i*p.pixelRatio,c*p.pixelRatio,f*p.pixelRatio,y*p.pixelRatio),E.clear({color:x}),P.disable(P.SCISSOR_TEST)}function Ap(p,i,c){const f=p.context,y=f.gl,x=c.posMatrix,E=p.useProgram("debug"),P=Wt.disabled,C=Sr.disabled,A=p.colorModeForRenderPass(),L="$debug",R=p.style.map.terrain&&p.style.map.terrain.getTerrainData(c);f.activeTexture.set(y.TEXTURE0);const G=i.getTileByID(c.key).latestRawTileData,te=Math.floor((G&&G.byteLength||0)/1024),Y=i.getTile(c).tileSize,ee=512/Math.min(Y,512)*(c.overscaledZ/p.transform.zoom)*.5;let oe=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(oe+=` => ${c.overscaledZ}`),function(de,Se){de.initDebugOverlayCanvas();const ne=de.debugOverlayCanvas,be=de.context.gl,Te=de.debugOverlayCanvas.getContext("2d");Te.clearRect(0,0,ne.width,ne.height),Te.shadowColor="white",Te.shadowBlur=2,Te.lineWidth=1.5,Te.strokeStyle="white",Te.textBaseline="top",Te.font="bold 36px Open Sans, sans-serif",Te.fillText(Se,5,5),Te.strokeText(Se,5,5),de.debugOverlayTexture.update(ne),de.debugOverlayTexture.bind(be.LINEAR,be.CLAMP_TO_EDGE)}(p,`${oe} ${te}kB`),E.draw(f,y.TRIANGLES,P,C,Or.alphaBlended,wr.disabled,Rh(x,u.Color.transparent,ee),null,L,p.debugBuffer,p.quadTriangleIndexBuffer,p.debugSegments),E.draw(f,y.LINE_STRIP,P,C,A,wr.disabled,Rh(x,u.Color.red),R,L,p.debugBuffer,p.tileBorderIndexBuffer,p.debugSegments)}function Jh(p,i,c){const f=p.context,y=f.gl,x=p.colorModeForRenderPass(),E=new Wt(y.LEQUAL,Wt.ReadWrite,p.depthRangeFor3D),P=p.useProgram("terrain"),C=i.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,p.width,p.height]);for(const A of c){const L=p.renderToTexture.getTexture(A),R=i.getTerrainData(A.tileID);f.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,L.texture);const G={u_matrix:p.transform.calculatePosMatrix(A.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(p.transform.zoom)};P.draw(f,y.TRIANGLES,E,Sr.disabled,x,wr.backCCW,G,R,"terrain",C.vertexBuffer,C.indexBuffer,C.segments)}}const Qh={symbol:function(p,i,c,f,y){if(p.renderPass!=="translucent")return;const x=Sr.disabled,E=p.colorModeForRenderPass();c.layout.get("text-variable-anchor")&&function(P,C,A,L,R,G,te){const Y=C.transform,ee=R==="map",oe=G==="map";for(const de of P){const Se=L.getTile(de),ne=Se.getBucket(A);if(!ne||!ne.text||!ne.text.segments.get().length)continue;const be=u.evaluateSizeForZoom(ne.textSizeData,Y.zoom),Te=Ie(Se,1,C.transform.zoom),De=Ur(de.posMatrix,oe,ee,C.transform,Te),$e=A.layout.get("icon-text-fit")!=="none"&&ne.hasIconData();if(be){const Ue=Math.pow(2,Y.zoom-Se.tileID.overscaledZ);Cp(ne,ee,oe,te,Y,De,de.posMatrix,Ue,be,$e,C.style.map.terrain?(Fe,tt)=>C.style.map.terrain.getElevation(de,Fe,tt):null)}}}(f,p,c,i,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),y),c.paint.get("icon-opacity").constantOr(1)!==0&&Lu(p,i,c,f,!1,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),c.layout.get("icon-rotation-alignment"),c.layout.get("icon-pitch-alignment"),c.layout.get("icon-keep-upright"),x,E),c.paint.get("text-opacity").constantOr(1)!==0&&Lu(p,i,c,f,!0,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),c.layout.get("text-keep-upright"),x,E),i.map.showCollisionBoxes&&(Tp(p,i,c,f,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),Tp(p,i,c,f,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))},circle:function(p,i,c,f){if(p.renderPass!=="translucent")return;const y=c.paint.get("circle-opacity"),x=c.paint.get("circle-stroke-width"),E=c.paint.get("circle-stroke-opacity"),P=!c.layout.get("circle-sort-key").isConstant();if(y.constantOr(1)===0&&(x.constantOr(1)===0||E.constantOr(1)===0))return;const C=p.context,A=C.gl,L=p.depthModeForSublayer(0,Wt.ReadOnly),R=Sr.disabled,G=p.colorModeForRenderPass(),te=[];for(let Y=0;Y<f.length;Y++){const ee=f[Y],oe=i.getTile(ee),de=oe.getBucket(c);if(!de)continue;const Se=de.programConfigurations.get(c.id),ne=p.useProgram("circle",Se),be=de.layoutVertexBuffer,Te=de.indexBuffer,De=p.style.map.terrain&&p.style.map.terrain.getTerrainData(ee),$e={programConfiguration:Se,program:ne,layoutVertexBuffer:be,indexBuffer:Te,uniformValues:gp(p,ee,oe,c),terrainData:De};if(P){const Ue=de.segments.get();for(const Fe of Ue)te.push({segments:new u.SegmentVector([Fe]),sortKey:Fe.sortKey,state:$e})}else te.push({segments:de.segments,sortKey:0,state:$e})}P&&te.sort((Y,ee)=>Y.sortKey-ee.sortKey);for(const Y of te){const{programConfiguration:ee,program:oe,layoutVertexBuffer:de,indexBuffer:Se,uniformValues:ne,terrainData:be}=Y.state;oe.draw(C,A.TRIANGLES,L,R,G,wr.disabled,ne,be,c.id,de,Se,Y.segments,c.paint,p.transform.zoom,ee)}},heatmap:function(p,i,c,f){if(c.paint.get("heatmap-opacity")!==0)if(p.renderPass==="offscreen"){const y=p.context,x=y.gl,E=Sr.disabled,P=new Or([x.ONE,x.ONE],u.Color.transparent,[!0,!0,!0,!0]);(function(C,A,L){const R=C.gl;C.activeTexture.set(R.TEXTURE1),C.viewport.set([0,0,A.width/4,A.height/4]);let G=L.heatmapFbo;if(G)R.bindTexture(R.TEXTURE_2D,G.colorAttachment.get()),C.bindFramebuffer.set(G.framebuffer);else{const te=R.createTexture();R.bindTexture(R.TEXTURE_2D,te),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,R.LINEAR),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,R.LINEAR),G=L.heatmapFbo=C.createFramebuffer(A.width/4,A.height/4,!1,!1),function(Y,ee,oe,de){var Se,ne;const be=Y.gl,Te=(Se=Y.HALF_FLOAT)!==null&&Se!==void 0?Se:be.UNSIGNED_BYTE,De=(ne=Y.RGBA16F)!==null&&ne!==void 0?ne:be.RGBA;be.texImage2D(be.TEXTURE_2D,0,De,ee.width/4,ee.height/4,0,be.RGBA,Te,null),de.colorAttachment.set(oe)}(C,A,te,G)}})(y,p,c),y.clear({color:u.Color.transparent});for(let C=0;C<f.length;C++){const A=f[C];if(i.hasRenderableParent(A))continue;const L=i.getTile(A),R=L.getBucket(c);if(!R)continue;const G=R.programConfigurations.get(c.id),te=p.useProgram("heatmap",G),{zoom:Y}=p.transform;te.draw(y,x.TRIANGLES,Wt.disabled,E,P,wr.disabled,ja(A.posMatrix,L,Y,c.paint.get("heatmap-intensity")),null,c.id,R.layoutVertexBuffer,R.indexBuffer,R.segments,c.paint,p.transform.zoom,G)}y.viewport.set([0,0,p.width,p.height])}else p.renderPass==="translucent"&&(p.context.setColorMode(p.colorModeForRenderPass()),function(y,x){const E=y.context,P=E.gl,C=x.heatmapFbo;if(!C)return;E.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,C.colorAttachment.get()),E.activeTexture.set(P.TEXTURE1);let A=x.colorRampTexture;A||(A=x.colorRampTexture=new Be(E,x.colorRamp,P.RGBA)),A.bind(P.LINEAR,P.CLAMP_TO_EDGE),y.useProgram("heatmapTexture").draw(E,P.TRIANGLES,Wt.disabled,Sr.disabled,y.colorModeForRenderPass(),wr.disabled,((L,R,G,te)=>{const Y=u.create();u.ortho(Y,0,L.width,L.height,0,0,1);const ee=L.context.gl;return{u_matrix:Y,u_world:[ee.drawingBufferWidth,ee.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:R.paint.get("heatmap-opacity")}})(y,x),null,x.id,y.viewportBuffer,y.quadTriangleIndexBuffer,y.viewportSegments,x.paint,y.transform.zoom)}(p,c))},line:function(p,i,c,f){if(p.renderPass!=="translucent")return;const y=c.paint.get("line-opacity"),x=c.paint.get("line-width");if(y.constantOr(1)===0||x.constantOr(1)===0)return;const E=p.depthModeForSublayer(0,Wt.ReadOnly),P=p.colorModeForRenderPass(),C=c.paint.get("line-dasharray"),A=c.paint.get("line-pattern"),L=A.constantOr(1),R=c.paint.get("line-gradient"),G=c.getCrossfadeParameters(),te=L?"linePattern":C?"lineSDF":R?"lineGradient":"line",Y=p.context,ee=Y.gl;let oe=!0;for(const de of f){const Se=i.getTile(de);if(L&&!Se.patternsLoaded())continue;const ne=Se.getBucket(c);if(!ne)continue;const be=ne.programConfigurations.get(c.id),Te=p.context.program.get(),De=p.useProgram(te,be),$e=oe||De.program!==Te,Ue=p.style.map.terrain&&p.style.map.terrain.getTerrainData(de),Fe=A.constantOr(null);if(Fe&&Se.imageAtlas){const Ft=Se.imageAtlas,He=Ft.patternPositions[Fe.to.toString()],Ct=Ft.patternPositions[Fe.from.toString()];He&&Ct&&be.setConstantPatternPositions(He,Ct)}const tt=Ue?de:null,wt=L?ku(p,Se,c,G,tt):C?wl(p,Se,c,C,G,tt):R?Eu(p,Se,c,ne.lineClipsArray.length,tt):di(p,Se,c,tt);if(L)Y.activeTexture.set(ee.TEXTURE0),Se.imageAtlasTexture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),be.updatePaintBuffers(G);else if(C&&($e||p.lineAtlas.dirty))Y.activeTexture.set(ee.TEXTURE0),p.lineAtlas.bind(Y);else if(R){const Ft=ne.gradients[c.id];let He=Ft.texture;if(c.gradientVersion!==Ft.version){let Ct=256;if(c.stepInterpolant){const nt=i.getSource().maxzoom,rr=de.canonical.z===nt?Math.ceil(1<<p.transform.maxZoom-de.canonical.z):1;Ct=u.clamp(u.nextPowerOfTwo(ne.maxLineLength/u.EXTENT*1024*rr),256,Y.maxTextureSize)}Ft.gradient=u.renderColorRamp({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:Ct,image:Ft.gradient||void 0,clips:ne.lineClipsArray}),Ft.texture?Ft.texture.update(Ft.gradient):Ft.texture=new Be(Y,Ft.gradient,ee.RGBA),Ft.version=c.gradientVersion,He=Ft.texture}Y.activeTexture.set(ee.TEXTURE0),He.bind(c.stepInterpolant?ee.NEAREST:ee.LINEAR,ee.CLAMP_TO_EDGE)}De.draw(Y,ee.TRIANGLES,E,p.stencilModeForClipping(de),P,wr.disabled,wt,Ue,c.id,ne.layoutVertexBuffer,ne.indexBuffer,ne.segments,c.paint,p.transform.zoom,be,ne.layoutVertexBuffer2),oe=!1}},fill:function(p,i,c,f){const y=c.paint.get("fill-color"),x=c.paint.get("fill-opacity");if(x.constantOr(1)===0)return;const E=p.colorModeForRenderPass(),P=c.paint.get("fill-pattern"),C=p.opaquePassEnabledForLayer()&&!P.constantOr(1)&&y.constantOr(u.Color.transparent).a===1&&x.constantOr(0)===1?"opaque":"translucent";if(p.renderPass===C){const A=p.depthModeForSublayer(1,p.renderPass==="opaque"?Wt.ReadWrite:Wt.ReadOnly);Pl(p,i,c,f,A,E,!1)}if(p.renderPass==="translucent"&&c.paint.get("fill-antialias")){const A=p.depthModeForSublayer(c.getPaintProperty("fill-outline-color")?2:0,Wt.ReadOnly);Pl(p,i,c,f,A,E,!0)}},"fill-extrusion":function(p,i,c,f){const y=c.paint.get("fill-extrusion-opacity");if(y!==0&&p.renderPass==="translucent"){const x=new Wt(p.context.gl.LEQUAL,Wt.ReadWrite,p.depthRangeFor3D);if(y!==1||c.paint.get("fill-extrusion-pattern").constantOr(1))Il(p,i,c,f,x,Sr.disabled,Or.disabled),Il(p,i,c,f,x,p.stencilModeFor3D(),p.colorModeForRenderPass());else{const E=p.colorModeForRenderPass();Il(p,i,c,f,x,Sr.disabled,E)}}},hillshade:function(p,i,c,f){if(p.renderPass!=="offscreen"&&p.renderPass!=="translucent")return;const y=p.context,x=p.depthModeForSublayer(0,Wt.ReadOnly),E=p.colorModeForRenderPass(),[P,C]=p.renderPass==="translucent"?p.stencilConfigForOverlap(f):[{},f];for(const A of C){const L=i.getTile(A);L.needsHillshadePrepare!==void 0&&L.needsHillshadePrepare&&p.renderPass==="offscreen"?Pp(p,L,c,x,Sr.disabled,E):p.renderPass==="translucent"&&H0(p,A,L,c,x,P[A.overscaledZ],E)}y.viewport.set([0,0,p.width,p.height])},raster:function(p,i,c,f){if(p.renderPass!=="translucent"||c.paint.get("raster-opacity")===0||!f.length)return;const y=p.context,x=y.gl,E=i.getSource(),P=p.useProgram("raster"),C=p.colorModeForRenderPass(),[A,L]=E instanceof mn?[{},f]:p.stencilConfigForOverlap(f),R=L[L.length-1].overscaledZ,G=!p.options.moving;for(const te of L){const Y=p.depthModeForSublayer(te.overscaledZ-R,c.paint.get("raster-opacity")===1?Wt.ReadWrite:Wt.ReadOnly,x.LESS),ee=i.getTile(te);ee.registerFadeDuration(c.paint.get("raster-fade-duration"));const oe=i.findLoadedParent(te,0),de=en(ee,oe,i,c,p.transform,p.style.map.terrain);let Se,ne;const be=c.paint.get("raster-resampling")==="nearest"?x.NEAREST:x.LINEAR;y.activeTexture.set(x.TEXTURE0),ee.texture.bind(be,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),y.activeTexture.set(x.TEXTURE1),oe?(oe.texture.bind(be,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),Se=Math.pow(2,oe.tileID.overscaledZ-ee.tileID.overscaledZ),ne=[ee.tileID.canonical.x*Se%1,ee.tileID.canonical.y*Se%1]):ee.texture.bind(be,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST);const Te=p.style.map.terrain&&p.style.map.terrain.getTerrainData(te),De=Te?te:null,$e=De?De.posMatrix:p.transform.calculatePosMatrix(te.toUnwrapped(),G),Ue=El($e,ne||[0,0],Se||1,de,c);E instanceof mn?P.draw(y,x.TRIANGLES,Y,Sr.disabled,C,wr.disabled,Ue,Te,c.id,E.boundsBuffer,p.quadTriangleIndexBuffer,E.boundsSegments):P.draw(y,x.TRIANGLES,Y,A[te.overscaledZ],C,wr.disabled,Ue,Te,c.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}},background:function(p,i,c,f){const y=c.paint.get("background-color"),x=c.paint.get("background-opacity");if(x===0)return;const E=p.context,P=E.gl,C=p.transform,A=C.tileSize,L=c.paint.get("background-pattern");if(p.isPatternMissing(L))return;const R=!L&&y.a===1&&x===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==R)return;const G=Sr.disabled,te=p.depthModeForSublayer(0,R==="opaque"?Wt.ReadWrite:Wt.ReadOnly),Y=p.colorModeForRenderPass(),ee=p.useProgram(L?"backgroundPattern":"background"),oe=f||C.coveringTiles({tileSize:A,terrain:p.style.map.terrain});L&&(E.activeTexture.set(P.TEXTURE0),p.imageManager.bind(p.context));const de=c.getCrossfadeParameters();for(const Se of oe){const ne=f?Se.posMatrix:p.transform.calculatePosMatrix(Se.toUnwrapped()),be=L?Tu(ne,x,p,L,{tileID:Se,tileSize:A},de):Fh(ne,x,y),Te=p.style.map.terrain&&p.style.map.terrain.getTerrainData(Se);ee.draw(E,P.TRIANGLES,te,G,Y,wr.disabled,be,Te,c.id,p.tileExtentBuffer,p.quadTriangleIndexBuffer,p.tileExtentSegments)}},debug:function(p,i,c){for(let f=0;f<c.length;f++)Ap(p,i,c[f])},custom:function(p,i,c){const f=p.context,y=c.implementation;if(p.renderPass==="offscreen"){const x=y.prerender;x&&(p.setCustomLayerDefaults(),f.setColorMode(p.colorModeForRenderPass()),x.call(y,f.gl,p.transform.customLayerMatrix()),f.setDirty(),p.setBaseState())}else if(p.renderPass==="translucent"){p.setCustomLayerDefaults(),f.setColorMode(p.colorModeForRenderPass()),f.setStencilMode(Sr.disabled);const x=y.renderingMode==="3d"?new Wt(p.context.gl.LEQUAL,Wt.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,Wt.ReadOnly);f.setDepthMode(x),y.render(f.gl,p.transform.customLayerMatrix()),f.setDirty(),p.setBaseState(),f.bindFramebuffer.set(null)}}};class zp{constructor(i,c){this.context=new Zh(i),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.create(),renderTime:0},this.setup(),this.numSublayers=Rr.maxUnderzooming+Rr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new xl}resize(i,c,f){if(this.width=i*f,this.height=c*f,this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const i=this.context,c=new u.PosArray;c.emplaceBack(0,0),c.emplaceBack(u.EXTENT,0),c.emplaceBack(0,u.EXTENT),c.emplaceBack(u.EXTENT,u.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(c,Ss.members),this.tileExtentSegments=u.SegmentVector.simpleSegment(0,0,4,2);const f=new u.PosArray;f.emplaceBack(0,0),f.emplaceBack(u.EXTENT,0),f.emplaceBack(0,u.EXTENT),f.emplaceBack(u.EXTENT,u.EXTENT),this.debugBuffer=i.createVertexBuffer(f,Ss.members),this.debugSegments=u.SegmentVector.simpleSegment(0,0,4,5);const y=new u.RasterBoundsArray;y.emplaceBack(0,0,0,0),y.emplaceBack(u.EXTENT,0,u.EXTENT,0),y.emplaceBack(0,u.EXTENT,0,u.EXTENT),y.emplaceBack(u.EXTENT,u.EXTENT,u.EXTENT,u.EXTENT),this.rasterBoundsBuffer=i.createVertexBuffer(y,ar.members),this.rasterBoundsSegments=u.SegmentVector.simpleSegment(0,0,4,2);const x=new u.PosArray;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(x,Ss.members),this.viewportSegments=u.SegmentVector.simpleSegment(0,0,4,2);const E=new u.LineStripIndexArray;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(E);const P=new u.TriangleIndexArray;P.emplaceBack(0,1,2),P.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(P);const C=this.context.gl;this.stencilClearMode=new Sr({func:C.ALWAYS,mask:0},0,255,C.ZERO,C.ZERO,C.ZERO)}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=u.create();u.ortho(f,0,this.width,this.height,0,0,1),u.scale(f,f,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,c.TRIANGLES,Wt.disabled,this.stencilClearMode,Or.disabled,wr.disabled,Lh(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,c){if(this.currentStencilSource===i.source||!i.isTileClipped()||!c||!c.length)return;this.currentStencilSource=i.source;const f=this.context,y=f.gl;this.nextStencilID+c.length>256&&this.clearStencil(),f.setColorMode(Or.disabled),f.setDepthMode(Wt.disabled);const x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const E of c){const P=this._tileClippingMaskIDs[E.key]=this.nextStencilID++,C=this.style.map.terrain&&this.style.map.terrain.getTerrainData(E);x.draw(f,y.TRIANGLES,Wt.disabled,new Sr({func:y.ALWAYS,mask:0},P,255,y.KEEP,y.KEEP,y.REPLACE),Or.disabled,wr.disabled,Lh(E.posMatrix),C,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new Sr({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){const c=this.context.gl;return new Sr({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){const c=this.context.gl,f=i.sort((E,P)=>P.overscaledZ-E.overscaledZ),y=f[f.length-1].overscaledZ,x=f[0].overscaledZ-y+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const E={};for(let P=0;P<x;P++)E[P+y]=new Sr({func:c.GEQUAL,mask:255},P+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=x,[E,f]}return[{[y]:Sr.disabled},f]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Or([i.CONSTANT_COLOR,i.ONE],new u.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Or.unblended:Or.alphaBlended}depthModeForSublayer(i,c,f){if(!this.opaquePassEnabledForLayer())return Wt.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Wt(f||this.context.gl.LEQUAL,c,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(u.exported.now()),this.imageManager.beginFrame();const f=this.style._order,y=this.style.sourceCaches,x={},E={},P={};for(const C in y){const A=y[C];A.used&&A.prepare(this.context),x[C]=A.getVisibleCoordinates(),E[C]=x[C].slice().reverse(),P[C]=A.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let C=0;C<f.length;C++)if(this.style._layers[f[C]].is3D()){this.opaquePassCutoff=C;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const C=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!u.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||C.length)&&(u.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(A,L){const R=A.context,G=R.gl,te=Or.unblended,Y=new Wt(G.LEQUAL,Wt.ReadWrite,[0,1]),ee=L.getTerrainMesh(),oe=L.sourceCache.getRenderableTiles(),de=A.useProgram("terrainDepth");R.bindFramebuffer.set(L.getFramebuffer("depth").framebuffer),R.viewport.set([0,0,A.width/devicePixelRatio,A.height/devicePixelRatio]),R.clear({color:u.Color.transparent,depth:1});for(const Se of oe){const ne=L.getTerrainData(Se.tileID),be={u_matrix:A.transform.calculatePosMatrix(Se.tileID.toUnwrapped()),u_ele_delta:L.getMeshFrameDelta(A.transform.zoom)};de.draw(R,G.TRIANGLES,Y,Sr.disabled,te,wr.backCCW,be,ne,"terrain",ee.vertexBuffer,ee.indexBuffer,ee.segments)}R.bindFramebuffer.set(null),R.viewport.set([0,0,A.width,A.height])}(this,this.style.map.terrain),function(A,L){const R=A.context,G=R.gl,te=Or.unblended,Y=new Wt(G.LEQUAL,Wt.ReadWrite,[0,1]),ee=L.getTerrainMesh(),oe=L.getCoordsTexture(),de=L.sourceCache.getRenderableTiles(),Se=A.useProgram("terrainCoords");R.bindFramebuffer.set(L.getFramebuffer("coords").framebuffer),R.viewport.set([0,0,A.width/devicePixelRatio,A.height/devicePixelRatio]),R.clear({color:u.Color.transparent,depth:1}),L.coordsIndex=[];for(const ne of de){const be=L.getTerrainData(ne.tileID);R.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,oe.texture);const Te={u_matrix:A.transform.calculatePosMatrix(ne.tileID.toUnwrapped()),u_terrain_coords_id:(255-L.coordsIndex.length)/255,u_texture:0,u_ele_delta:L.getMeshFrameDelta(A.transform.zoom)};Se.draw(R,G.TRIANGLES,Y,Sr.disabled,te,wr.backCCW,Te,be,"terrain",ee.vertexBuffer,ee.indexBuffer,ee.segments),L.coordsIndex.push(ne.tileID.key)}R.bindFramebuffer.set(null),R.viewport.set([0,0,A.width,A.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const C of f){const A=this.style._layers[C];if(!A.hasOffscreenPass()||A.isHidden(this.transform.zoom))continue;const L=E[A.source];(A.type==="custom"||L.length)&&this.renderLayer(this,y[A.source],A,L)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?u.Color.black:u.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const C=this.style._layers[f[this.currentLayer]],A=y[C.source],L=x[C.source];this._renderTileClippingMasks(C,L),this.renderLayer(this,A,C,L)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const C=this.style._layers[f[this.currentLayer]],A=y[C.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(C))continue;const L=(C.type==="symbol"?P:E)[C.source];this._renderTileClippingMasks(C,x[C.source]),this.renderLayer(this,A,C,L)}if(this.options.showTileBoundaries){const C=function(A,L){let R=null;const G=Object.values(A._layers).flatMap(oe=>oe.source&&!oe.isHidden(L)?[A.sourceCaches[oe.source]]:[]),te=G.filter(oe=>oe.getSource().type==="vector"),Y=G.filter(oe=>oe.getSource().type!=="vector"),ee=oe=>{(!R||R.getSource().maxzoom<oe.getSource().maxzoom)&&(R=oe)};return te.forEach(oe=>ee(oe)),R||Y.forEach(oe=>ee(oe)),R}(this.style,this.transform.zoom);C&&Qh.debug(this,C,C.getVisibleCoordinates())}this.options.showPadding&&function(C){const A=C.transform.padding;qa(C,C.transform.height-(A.top||0),3,Wa),qa(C,A.bottom||0,3,Xi),Ml(C,A.left||0,3,Ip),Ml(C,C.transform.width-(A.right||0),3,Yh);const L=C.transform.centerPoint;(function(R,G,te,Y){Ms(R,G-1,te-10,2,20,Y),Ms(R,G-10,te-1,20,2,Y)})(C,L.x,C.transform.height-L.y,Mp)}(this),this.context.setDefault()}renderLayer(i,c,f,y){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="custom"||(y||[]).length)&&(this.id=f.id,Qh[f.type](i,c,f,y,this.style.placement.variableOffsets))}translatePosMatrix(i,c,f,y,x){if(!f[0]&&!f[1])return i;const E=x?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(E){const A=Math.sin(E),L=Math.cos(E);f=[f[0]*L-f[1]*A,f[0]*A+f[1]*L]}const P=[x?f[0]:Ie(c,f[0],this.transform.zoom),x?f[1]:Ie(c,f[1],this.transform.zoom),0],C=new Float32Array(16);return u.translate(C,i,P),C}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const c=this.imageManager.getPattern(i.from.toString()),f=this.imageManager.getPattern(i.to.toString());return!c||!f}useProgram(i,c){this.cache=this.cache||{};const f=i+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new F0(this.context,i,Hi[i],c,Cu[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Be(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Fu{constructor(i,c){this.points=i,this.planes=c}static fromInvProjectionMatrix(i,c,f){const y=Math.pow(2,f),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(P=>{const C=1/(P=u.transformMat4([],P,i))[3]/c*y;return u.mul$1(P,P,[C,C,1/P[3],C])}),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(P=>{const C=function(G,te){var Y=te[0],ee=te[1],oe=te[2],de=Y*Y+ee*ee+oe*oe;return de>0&&(de=1/Math.sqrt(de)),G[0]=te[0]*de,G[1]=te[1]*de,G[2]=te[2]*de,G}([],function(G,te,Y){var ee=te[0],oe=te[1],de=te[2],Se=Y[0],ne=Y[1],be=Y[2];return G[0]=oe*be-de*ne,G[1]=de*Se-ee*be,G[2]=ee*ne-oe*Se,G}([],ge([],x[P[0]],x[P[1]]),ge([],x[P[2]],x[P[1]]))),A=-((L=C)[0]*(R=x[P[1]])[0]+L[1]*R[1]+L[2]*R[2]);var L,R;return C.concat(A)});return new Fu(x,E)}}class Ro{constructor(i,c){this.min=i,this.max=c,this.center=function(f,y,x){return f[0]=.5*y[0],f[1]=.5*y[1],f[2]=.5*y[2],f}([],function(f,y,x){return f[0]=y[0]+x[0],f[1]=y[1]+x[1],f[2]=y[2]+x[2],f}([],this.min,this.max))}quadrant(i){const c=[i%2==0,i<2],f=ce(this.min),y=ce(this.max);for(let x=0;x<c.length;x++)f[x]=c[x]?this.min[x]:this.center[x],y[x]=c[x]?this.center[x]:this.max[x];return y[2]=this.max[2],new Ro(f,y)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let y=0;y<i.planes.length;y++){const x=i.planes[y];let E=0;for(let P=0;P<c.length;P++)u.dot(x,c[P])>=0&&E++;if(E===0)return 0;E!==c.length&&(f=!1)}if(f)return 2;for(let y=0;y<3;y++){let x=Number.MAX_VALUE,E=-Number.MAX_VALUE;for(let P=0;P<i.points.length;P++){const C=i.points[P][y]-this.min[y];x=Math.min(x,C),E=Math.max(E,C)}if(E<0||x>this.max[y]-this.min[y])return 0}return 1}}class Ou{constructor(i=0,c=0,f=0,y=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(f)||f<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=f,this.right=y}interpolate(i,c,f){return c.top!=null&&i.top!=null&&(this.top=u.interpolate.number(i.top,c.top,f)),c.bottom!=null&&i.bottom!=null&&(this.bottom=u.interpolate.number(i.bottom,c.bottom,f)),c.left!=null&&i.left!=null&&(this.left=u.interpolate.number(i.left,c.left,f)),c.right!=null&&i.right!=null&&(this.right=u.interpolate.number(i.right,c.right,f)),this}getCenter(i,c){const f=u.clamp((this.left+i-this.right)/2,0,i),y=u.clamp((this.top+c-this.bottom)/2,0,c);return new u.Point(f,y)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Ou(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class $u{constructor(i,c,f,y,x){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=x===void 0||!!x,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=f==null?0:f,this._maxPitch=y==null?60:y,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ou,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const i=new $u(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const c=-u.wrap(i,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var f=new u.ARRAY_TYPE(4);return u.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,y,x){var E=y[0],P=y[1],C=y[2],A=y[3],L=Math.sin(x),R=Math.cos(x);f[0]=E*R+C*L,f[1]=P*R+A*L,f[2]=E*-L+C*R,f[3]=P*-L+A*R}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const c=u.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,f){this._unmodified=!1,this._edgeInsets.interpolate(i,c,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){const c=[new u.UnwrappedTileID(0,i)];if(this._renderWorldCopies){const f=this.pointCoordinate(new u.Point(0,0)),y=this.pointCoordinate(new u.Point(this.width,0)),x=this.pointCoordinate(new u.Point(this.width,this.height)),E=this.pointCoordinate(new u.Point(0,this.height)),P=Math.floor(Math.min(f.x,y.x,x.x,E.x)),C=Math.floor(Math.max(f.x,y.x,x.x,E.x)),A=1;for(let L=P-A;L<=C+A;L++)L!==0&&c.push(new u.UnwrappedTileID(L,i))}return c}coveringTiles(i){var c,f;let y=this.coveringZoomLevel(i);const x=y;if(i.minzoom!==void 0&&y<i.minzoom)return[];i.maxzoom!==void 0&&y>i.maxzoom&&(y=i.maxzoom);const E=this.pointCoordinate(this.getCameraPoint()),P=u.MercatorCoordinate.fromLngLat(this.center),C=Math.pow(2,y),A=[C*E.x,C*E.y,0],L=[C*P.x,C*P.y,0],R=Fu.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,y);let G=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(G=y);const te=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,Y=ne=>({aabb:new Ro([ne*C,0,0],[(ne+1)*C,C,0]),zoom:0,x:0,y:0,wrap:ne,fullyVisible:!1}),ee=[],oe=[],de=y,Se=i.reparseOverscaled?x:y;if(this._renderWorldCopies)for(let ne=1;ne<=3;ne++)ee.push(Y(-ne)),ee.push(Y(ne));for(ee.push(Y(0));ee.length>0;){const ne=ee.pop(),be=ne.x,Te=ne.y;let De=ne.fullyVisible;if(!De){const wt=ne.aabb.intersects(R);if(wt===0)continue;De=wt===2}const $e=i.terrain?A:L,Ue=ne.aabb.distanceX($e),Fe=ne.aabb.distanceY($e),tt=Math.max(Math.abs(Ue),Math.abs(Fe));if(ne.zoom===de||tt>te+(1<<de-ne.zoom)-2&&ne.zoom>=G){const wt=de-ne.zoom,Ft=A[0]-.5-(be<<wt),He=A[1]-.5-(Te<<wt);oe.push({tileID:new u.OverscaledTileID(ne.zoom===de?Se:ne.zoom,ne.wrap,ne.zoom,be,Te),distanceSq:xe([L[0]-.5-be,L[1]-.5-Te]),tileDistanceToCamera:Math.sqrt(Ft*Ft+He*He)})}else for(let wt=0;wt<4;wt++){const Ft=(be<<1)+wt%2,He=(Te<<1)+(wt>>1),Ct=ne.zoom+1;let nt=ne.aabb.quadrant(wt);if(i.terrain){const rr=new u.OverscaledTileID(Ct,ne.wrap,Ct,Ft,He),tn=i.terrain.getMinMaxElevation(rr),nr=(c=tn.minElevation)!==null&&c!==void 0?c:this.elevation,Bt=(f=tn.maxElevation)!==null&&f!==void 0?f:this.elevation;nt=new Ro([nt.min[0],nt.min[1],nr],[nt.max[0],nt.max[1],Bt])}ee.push({aabb:nt,zoom:Ct,x:Ft,y:He,wrap:ne.wrap,fullyVisible:De})}}return oe.sort((ne,be)=>ne.distanceSq-be.distanceSq).map(ne=>ne.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const c=u.clamp(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new u.Point(u.mercatorXfromLng(i.lng)*this.worldSize,u.mercatorYfromLat(c)*this.worldSize)}unproject(i){return new u.MercatorCoordinate(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(i){this.freezeElevation||(this.elevation=i?this.getElevation(this._center,i):0)}getElevation(i,c){const f=u.MercatorCoordinate.fromLngLat(i.wrap()),y=(1<<this.tileZoom)*u.EXTENT,x=f.x*y,E=f.y*y,P=Math.floor(x/u.EXTENT),C=Math.floor(E/u.EXTENT),A=new u.OverscaledTileID(this.tileZoom,0,this.tileZoom,P,C);return c.getElevation(A,x%u.EXTENT,E%u.EXTENT,u.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const c=this.pointLocation(this.centerPoint,i),f=this.getElevation(c,i);if(!(this.elevation-f))return;const y=this.getCameraPosition(),x=u.MercatorCoordinate.fromLngLat(y.lngLat,y.altitude),E=u.MercatorCoordinate.fromLngLat(c,f),P=x.x-E.x,C=x.y-E.y,A=x.z-E.z,L=Math.sqrt(P*P+C*C+A*A),R=this.scaleZoom(this.cameraToCenterDistance/L/this.tileSize);this._elevation=f,this._center=c,this.zoom=R}setLocationAtPoint(i,c){const f=this.pointCoordinate(c),y=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(i),E=new u.MercatorCoordinate(x.x-(f.x-y.x),x.y-(f.y-y.y));this.center=this.coordinateLocation(E),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,c){return c?this.coordinatePoint(this.locationCoordinate(i),this.getElevation(i,c),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,c){return this.coordinateLocation(this.pointCoordinate(i,c))}locationCoordinate(i){return u.MercatorCoordinate.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,c){if(c){const G=c.pointCoordinate(i);if(G!=null)return G}const f=[i.x,i.y,0,1],y=[i.x,i.y,1,1];u.transformMat4(f,f,this.pixelMatrixInverse),u.transformMat4(y,y,this.pixelMatrixInverse);const x=f[3],E=y[3],P=f[1]/x,C=y[1]/E,A=f[2]/x,L=y[2]/E,R=A===L?0:(0-A)/(L-A);return new u.MercatorCoordinate(u.interpolate.number(f[0]/x,y[0]/E,R)/this.worldSize,u.interpolate.number(P,C,R)/this.worldSize)}coordinatePoint(i,c=0,f=this.pixelMatrix){const y=[i.x*this.worldSize,i.y*this.worldSize,c,1];return u.transformMat4(y,y,f),new u.Point(y[0]/y[3],y[1]/y[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new At().extend(this.pointLocation(new u.Point(0,i))).extend(this.pointLocation(new u.Point(this.width,i))).extend(this.pointLocation(new u.Point(this.width,this.height))).extend(this.pointLocation(new u.Point(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new At([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,c=!1){const f=i.key,y=c?this._alignedPosMatrixCache:this._posMatrixCache;if(y[f])return y[f];const x=i.canonical,E=this.worldSize/this.zoomScale(x.z),P=x.x+Math.pow(2,x.z)*i.wrap,C=u.identity(new Float64Array(16));return u.translate(C,C,[P*E,x.y*E,0]),u.scale(C,C,[E/u.EXTENT,E/u.EXTENT,1]),u.multiply(C,c?this.alignedProjMatrix:this.projMatrix,C),y[f]=new Float32Array(C),y[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,c,f,y,x=-90,E=90,P=-180,C=180;const A=this.size,L=this._unmodified;if(this.latRange){const te=this.latRange;x=u.mercatorYfromLat(te[1])*this.worldSize,E=u.mercatorYfromLat(te[0])*this.worldSize,i=E-x<A.y?A.y/(E-x):0}if(this.lngRange){const te=this.lngRange;P=u.wrap(u.mercatorXfromLng(te[0])*this.worldSize,0,this.worldSize),C=u.wrap(u.mercatorXfromLng(te[1])*this.worldSize,0,this.worldSize),C<P&&(C+=this.worldSize),c=C-P<A.x?A.x/(C-P):0}const R=this.point,G=Math.max(c||0,i||0);if(G)return this.center=this.unproject(new u.Point(c?(C+P)/2:R.x,i?(E+x)/2:R.y)),this.zoom+=this.scaleZoom(G),this._unmodified=L,void(this._constraining=!1);if(this.latRange){const te=R.y,Y=A.y/2;te-Y<x&&(y=x+Y),te+Y>E&&(y=E-Y)}if(this.lngRange){const te=(P+C)/2,Y=u.wrap(R.x,te-this.worldSize/2,te+this.worldSize/2),ee=A.x/2;Y-ee<P&&(f=P+ee),Y+ee>C&&(f=C-ee)}f===void 0&&y===void 0||(this.center=this.unproject(new u.Point(f!==void 0?f:R.x,y!==void 0?y:R.y)).wrap()),this._unmodified=L,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,c=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let y=u.identity(new Float64Array(16));u.scale(y,y,[this.width/2,-this.height/2,1]),u.translate(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=u.identity(new Float64Array(16)),u.scale(y,y,[1,-1,1]),u.translate(y,y,[-1,-1,0]),u.scale(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const x=this._elevation<0?this.cameraToCenterDistance:this.cameraToSeaLevelDistance,E=Math.PI/2+this._pitch,P=this._fov*(.5+i.y/this.height),C=Math.sin(P)*x/Math.sin(u.clamp(Math.PI-E-P,.01,Math.PI-.01)),A=this.getHorizon(),L=2*Math.atan(A/this.cameraToCenterDistance)*(.5+i.y/(2*A)),R=Math.sin(L)*x/Math.sin(u.clamp(Math.PI-E-L,.01,Math.PI-.01)),G=Math.min(C,R),te=1.01*(Math.cos(Math.PI/2-this._pitch)*G+x),Y=this.height/50;y=new Float64Array(16),u.perspective(y,this._fov,this.width/this.height,Y,te),y[8]=2*-i.x/this.width,y[9]=2*i.y/this.height,u.scale(y,y,[1,-1,1]),u.translate(y,y,[0,0,-this.cameraToCenterDistance]),u.rotateX(y,y,this._pitch),u.rotateZ(y,y,this.angle),u.translate(y,y,[-c,-f,0]),this.mercatorMatrix=u.scale([],y,[this.worldSize,this.worldSize,this.worldSize]),u.scale(y,y,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.multiply(new Float64Array(16),this.labelPlaneMatrix,y),u.translate(y,y,[0,0,-this.elevation]),this.projMatrix=y,this.invProjMatrix=u.invert([],y),this.pixelMatrix3D=u.multiply(new Float64Array(16),this.labelPlaneMatrix,y);const ee=this.width%2/2,oe=this.height%2/2,de=Math.cos(this.angle),Se=Math.sin(this.angle),ne=c-Math.round(c)+de*ee+Se*oe,be=f-Math.round(f)+de*oe+Se*ee,Te=new Float64Array(y);if(u.translate(Te,Te,[ne>.5?ne-1:ne,be>.5?be-1:be,0]),this.alignedProjMatrix=Te,y=u.invert(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new u.Point(0,0)),c=[i.x*this.worldSize,i.y*this.worldSize,0,1];return u.transformMat4(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.Point(0,i))}getCameraQueryGeometry(i){const c=this.getCameraPoint();if(i.length===1)return[i[0],c];{let f=c.x,y=c.y,x=c.x,E=c.y;for(const P of i)f=Math.min(f,P.x),y=Math.min(y,P.y),x=Math.max(x,P.x),E=Math.max(E,P.y);return[new u.Point(f,y),new u.Point(x,y),new u.Point(x,E),new u.Point(f,E),new u.Point(f,y)]}}}class Dp{constructor(i){this._hashName=i&&encodeURIComponent(i),u.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(c,f){let y=!1,x=null;const E=()=>{x=null,y&&(c(),x=setTimeout(E,300),y=!1)};return()=>(y=!0,x||E(),x)}(this._updateHashUnthrottled.bind(this))}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const c=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,y=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,y),E=Math.round(c.lng*x)/x,P=Math.round(c.lat*x)/x,C=this._map.getBearing(),A=this._map.getPitch();let L="";if(L+=i?`/${E}/${P}/${f}`:`${f}/${P}/${E}`,(C||A)&&(L+="/"+Math.round(10*C)/10),A&&(L+=`/${Math.round(A)}`),this._hashName){const R=this._hashName;let G=!1;const te=window.location.hash.slice(1).split("&").map(Y=>{const ee=Y.split("=")[0];return ee===R?(G=!0,`${ee}=${L}`):Y}).filter(Y=>Y);return G||te.push(`${R}=${L}`),`#${te.join("&")}`}return`#${L}`}_getCurrentHash(){const i=window.location.hash.replace("#","");if(this._hashName){let c;return i.split("&").map(f=>f.split("=")).forEach(f=>{f[0]===this._hashName&&(c=f)}),(c&&c[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._getCurrentHash();if(i.length>=3&&!i.some(c=>isNaN(c))){const c=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:c,pitch:+(i[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,i)}catch{}}}const Al={linearity:.3,easing:u.bezier(0,0,.3,1)},Rp=u.extend({deceleration:2500,maxSpeed:1400},Al),Lp=u.extend({deceleration:20,maxSpeed:1400},Al),zl=u.extend({deceleration:1e3,maxSpeed:360},Al),Fp=u.extend({deceleration:1e3,maxSpeed:90},Al);class Lo{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:u.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=u.exported.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new u.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)c.zoom+=x.zoomDelta||0,c.bearing+=x.bearingDelta||0,c.pitch+=x.pitchDelta||0,x.panDelta&&c.pan._add(x.panDelta),x.around&&(c.around=x.around),x.pinchAround&&(c.pinchAround=x.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(c.pan.mag()){const x=Dl(c.pan.mag(),f,u.extend({},Rp,i||{}));y.offset=c.pan.mult(x.amount/c.pan.mag()),y.center=this._map.transform.center,Ki(y,x)}if(c.zoom){const x=Dl(c.zoom,f,Lp);y.zoom=this._map.transform.zoom+x.amount,Ki(y,x)}if(c.bearing){const x=Dl(c.bearing,f,zl);y.bearing=this._map.transform.bearing+u.clamp(x.amount,-179,179),Ki(y,x)}if(c.pitch){const x=Dl(c.pitch,f,Fp);y.pitch=this._map.transform.pitch+x.amount,Ki(y,x)}if(y.zoom||y.bearing){const x=c.pinchAround===void 0?c.around:c.pinchAround;y.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),u.extend(y,{noMoveStart:!0})}}function Ki(p,i){(!p.duration||p.duration<i.duration)&&(p.duration=i.duration,p.easing=i.easing)}function Dl(p,i,c){const{maxSpeed:f,linearity:y,deceleration:x}=c,E=u.clamp(p*y/(i/1e3),-f,f),P=Math.abs(E)/(x*y);return{easing:c.easing,duration:1e3*P,amount:E*(P/2)}}class cn extends u.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,f,y={}){const x=w.mousePos(c.getCanvasContainer(),f),E=c.unproject(x);super(i,u.extend({point:x,lngLat:E,originalEvent:f},y)),this._defaultPrevented=!1,this.target=c}}class Ea extends u.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,f){const y=i==="touchend"?f.changedTouches:f.touches,x=w.touchPos(c.getCanvasContainer(),y),E=x.map(C=>c.unproject(C)),P=x.reduce((C,A,L,R)=>C.add(A.div(R.length)),new u.Point(0,0));super(i,{points:x,point:P,lngLats:E,lngLat:c.unproject(P),originalEvent:f}),this._defaultPrevented=!1}}class X0 extends u.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,f){super(i,{originalEvent:f}),this._defaultPrevented=!1}}class K0{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new X0(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new cn(i.type,this._map,i))}mouseup(i){this._map.fire(new cn(i.type,this._map,i))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new cn(i.type,this._map,i))}dblclick(i){return this._firePreventable(new cn(i.type,this._map,i))}mouseover(i){this._map.fire(new cn(i.type,this._map,i))}mouseout(i){this._map.fire(new cn(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Ea(i.type,this._map,i))}touchmove(i){this._map.fire(new Ea(i.type,this._map,i))}touchend(i){this._map.fire(new Ea(i.type,this._map,i))}touchcancel(i){this._map.fire(new Ea(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Y0{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new cn(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new cn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new cn(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class As{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(u.Point.convert(i),this._map.terrain)}}class Rl{constructor(i,c){this._map=i,this._tr=new As(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(w.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const f=c;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=f,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const x=Math.min(y.x,f.x),E=Math.max(y.x,f.x),P=Math.min(y.y,f.y),C=Math.max(y.y,f.y);w.setTransform(this._box,`translate(${x}px,${P}px)`),this._box.style.width=E-x+"px",this._box.style.height=C-P+"px"}mouseupWindow(i,c){if(!this._active||i.button!==0)return;const f=this._startPos,y=c;if(this.reset(),w.suppressClick(),f.x!==y.x||f.y!==y.y)return this._map.fire(new u.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:x=>x.fitScreenCoordinates(f,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new u.Event(i,{originalEvent:c}))}}function Fo(p,i){if(p.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${p.length}, points ${i.length}`);const c={};for(let f=0;f<p.length;f++)c[p[f].identifier]=i[f];return c}class at{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,c,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),f.length===this.numTouches&&(this.centroid=function(y){const x=new u.Point(0,0);for(const E of y)x._add(E);return x.div(y.length)}(c),this.touches=Fo(f,c)))}touchmove(i,c,f){if(this.aborted||!this.centroid)return;const y=Fo(f,c);for(const x in this.touches){const E=y[x];(!E||E.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(i,c,f){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class Bu{constructor(i){this.singleTap=new at(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,c,f){this.singleTap.touchstart(i,c,f)}touchmove(i,c,f){this.singleTap.touchmove(i,c,f)}touchend(i,c,f){const y=this.singleTap.touchend(i,c,f);if(y){const x=i.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(y)<30;if(x&&E||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class Ll{constructor(i){this._tr=new As(i),this._zoomIn=new Bu({numTouches:1,numTaps:2}),this._zoomOut=new Bu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,f){this._zoomIn.touchstart(i,c,f),this._zoomOut.touchstart(i,c,f)}touchmove(i,c,f){this._zoomIn.touchmove(i,c,f),this._zoomOut.touchmove(i,c,f)}touchend(i,c,f){const y=this._zoomIn.touchend(i,c,f),x=this._zoomOut.touchend(i,c,f),E=this._tr;return y?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:E.zoom+1,around:E.unproject(y)},{originalEvent:i})}):x?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:E.zoom-1,around:E.unproject(x)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ta{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const c=this._moveFunction(...i);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(i,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,c){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const y=c.length?c[0]:c;return!this._moved&&y.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(f,y))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&w.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Op={0:1,2:2};class Ye{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const c=w.mouseButton(i);this._eventButton=c}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(c,f){const y=Op[f];return c.buttons===void 0||(c.buttons&y)!==y}(i,this._eventButton)}isValidEndEvent(i){return w.mouseButton(i)===this._eventButton}}class Vu{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const ed=p=>{p.mousedown=p.dragStart,p.mousemoveWindow=p.dragMove,p.mouseup=p.dragEnd,p.contextmenu=function(i){i.preventDefault()}},$p=({enable:p,clickTolerance:i,bearingDegreesPerPixelMoved:c=.8})=>{const f=new Ye({checkCorrectEvent:y=>w.mouseButton(y)===0&&y.ctrlKey||w.mouseButton(y)===2});return new ta({clickTolerance:i,move:(y,x)=>({bearingDelta:(x.x-y.x)*c}),moveStateManager:f,enable:p,assignEvents:ed})},Nu=({enable:p,clickTolerance:i,pitchDegreesPerPixelMoved:c=-.5})=>{const f=new Ye({checkCorrectEvent:y=>w.mouseButton(y)===0&&y.ctrlKey||w.mouseButton(y)===2});return new ta({clickTolerance:i,move:(y,x)=>({pitchDelta:(x.y-y.y)*c}),moveStateManager:f,enable:p,assignEvents:ed})};class Bp{constructor(i,c){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.Point(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,c,f){return this._calculateTransform(i,c,f)}touchmove(i,c,f){if(this._map._cooperativeGestures&&(this._minTouches===2&&f.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,f.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(f.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,c,f)}touchend(i,c,f){this._calculateTransform(i,c,f),this._active&&f.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,f){f.length>0&&(this._active=!0);const y=Fo(f,c),x=new u.Point(0,0),E=new u.Point(0,0);let P=0;for(const A in y){const L=y[A],R=this._touches[A];R&&(x._add(L),E._add(L.sub(R)),P++,y[A]=L)}if(this._touches=y,P<this._minTouches||!E.mag())return;const C=E.div(P);return this._sum._add(C),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(P),panDelta:C}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Uu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(i){}_move(i,c,f){return{}}touchstart(i,c,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,f){if(!this._firstTwoTouches)return;i.preventDefault();const[y,x]=this._firstTwoTouches,E=ju(f,c,y),P=ju(f,c,x);if(!E||!P)return;const C=this._aroundCenter?null:E.add(P).div(2);return this._move([E,P],C,i)}touchend(i,c,f){if(!this._firstTwoTouches)return;const[y,x]=this._firstTwoTouches,E=ju(f,c,y),P=ju(f,c,x);E&&P||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ju(p,i,c){for(let f=0;f<p.length;f++)if(p[f].identifier===c)return i[f]}function Vp(p,i){return Math.log(p/i)/Math.LN2}class td extends Uu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const f=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Vp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Vp(this._distance,f),pinchAround:c}}}function Gu(p,i){return 180*p.angleWith(i)/Math.PI}class rd extends Uu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c){const f=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Gu(this._vector,f),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,f=Gu(i,this._startVector);return Math.abs(f)<c}}function Fl(p){return Math.abs(p.y)>Math.abs(p.x)}class pi extends Uu{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,c,f){super.touchstart(i,c,f),this._currentTouchCount=f.length}_start(i){this._lastPoints=i,Fl(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,f){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const y=i[0].sub(this._lastPoints[0]),x=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,x,f.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(y.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(i,c,f){if(this._valid!==void 0)return this._valid;const y=i.mag()>=2,x=c.mag()>=2;if(!y&&!x)return;if(!y||!x)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const E=i.y>0==c.y>0;return Fl(i)&&Fl(c)&&E}}const ka={panStep:100,bearingStep:15,pitchStep:10};class Np{constructor(i){this._tr=new As(i);const c=ka;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,f=0,y=0,x=0,E=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?f=-1:(i.preventDefault(),x=-1);break;case 39:i.shiftKey?f=1:(i.preventDefault(),x=1);break;case 38:i.shiftKey?y=1:(i.preventDefault(),E=-1);break;case 40:i.shiftKey?y=-1:(i.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(f=0,y=0),{cameraAnimation:P=>{const C=this._tr;P.easeTo({duration:300,easeId:"keyboardHandler",easing:nd,zoom:c?Math.round(C.zoom)+c*(i.shiftKey?2:1):C.zoom,bearing:C.bearing+f*this._bearingStep,pitch:C.pitch+y*this._pitchStep,offset:[-x*this._panStep,-E*this._panStep],center:C.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function nd(p){return p*(2-p)}const Wu=4.000244140625;class id{constructor(i,c){this._map=i,this._tr=new As(i),this._el=i.getCanvasContainer(),this._handler=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,u.bindAll(["_onTimeout"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let c=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const f=u.exported.now(),y=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,c!==0&&c%Wu==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(y*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=w.mousePos(this._el,i),f=this._tr;this._around=u.LngLat.convert(this._aroundCenter?f.center:f.unproject(c)),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const P=this._type==="wheel"&&Math.abs(this._delta)>Wu?this._wheelZoomRate:this._defaultZoomRate;let C=2/(1+Math.exp(-Math.abs(this._delta*P)));this._delta<0&&C!==0&&(C=1/C);const A=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(A*C))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,f=this._startZoom,y=this._easing;let x,E=!1;if(this._type==="wheel"&&f&&y){const P=Math.min((u.exported.now()-this._lastWheelEventTime)/200,1),C=y(P);x=u.interpolate.number(f,c,C),P<1?this._frameId||(this._frameId=!0):E=!0}else x=c,E=!0;return this._active=!0,E&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!E,zoomDelta:x-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=u.ease;if(this._prevEase){const f=this._prevEase,y=(u.exported.now()-f.start)/f.duration,x=f.easing(y+.01)-f.easing(y),E=.27/Math.sqrt(x*x+1e-4)*.01,P=Math.sqrt(.0729-E*E);c=u.bezier(E,P,.25,1)}return this._prevEase={start:u.exported.now(),duration:i,easing:c},c}reset(){this._active=!1}}class Up{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Yi{constructor(i){this._tr=new As(i),this.reset()}reset(){this._active=!1}dblclick(i,c){return i.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Mr{constructor(){this._tap=new Bu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(i,c,f){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?f.length>0&&(this._swipePoint=c[0],this._swipeTouch=f[0].identifier):this._tap.touchstart(i,c,f))}touchmove(i,c,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const y=c[0],x=y.y-this._swipePoint.y;return this._swipePoint=y,i.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(i,c,f)}touchend(i,c,f){this._tapTime?this._swipePoint&&f.length===0&&this.reset():this._tap.touchend(i,c,f)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qu{constructor(i,c,f){this._el=i,this._mousePan=c,this._touchPan=f}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class od{constructor(i,c,f){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class jp{constructor(i,c,f,y){this._el=i,this._touchZoom=c,this._touchRotate=f,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ol=p=>p.zoom||p.drag||p.pitch||p.rotate;class Gp extends u.Event{}function ad(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class Oo{constructor(i,c){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Lo(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c),u.bindAll(["handleEvent","handleWindowEvent"],this);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,x,E]of this._listeners)w.addEventListener(y,x,y===document?this.handleWindowEvent:this.handleEvent,E)}destroy(){for(const[i,c,f]of this._listeners)w.removeEventListener(i,c,i===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(i){const c=this._map,f=c.getCanvasContainer();this._add("mapEvent",new K0(c,i));const y=c.boxZoom=new Rl(c,i);this._add("boxZoom",y);const x=new Ll(c),E=new Yi(c);c.doubleClickZoom=new Up(E,x),this._add("tapZoom",x),this._add("clickZoom",E);const P=new Mr;this._add("tapDragZoom",P);const C=c.touchPitch=new pi(c);this._add("touchPitch",C);const A=$p(i),L=Nu(i);c.dragRotate=new od(i,A,L),this._add("mouseRotate",A,["mousePitch"]),this._add("mousePitch",L,["mouseRotate"]);const R=(({enable:de,clickTolerance:Se})=>{const ne=new Ye({checkCorrectEvent:be=>w.mouseButton(be)===0&&!be.ctrlKey});return new ta({clickTolerance:Se,move:(be,Te)=>({around:Te,panDelta:Te.sub(be)}),activateOnStart:!0,moveStateManager:ne,enable:de,assignEvents:ed})})(i),G=new Bp(i,c);c.dragPan=new qu(f,R,G),this._add("mousePan",R),this._add("touchPan",G,["touchZoom","touchRotate"]);const te=new rd,Y=new td;c.touchZoomRotate=new jp(f,Y,te,P),this._add("touchRotate",te,["touchPan","touchZoom"]),this._add("touchZoom",Y,["touchPan","touchRotate"]);const ee=c.scrollZoom=new id(c,this);this._add("scrollZoom",ee,["mousePan"]);const oe=c.keyboard=new Np(c);this._add("keyboard",oe),this._add("blockableMapEvent",new Y0(c));for(const de of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[de]&&c[de].enable(i[de])}_add(i,c,f){this._handlers.push({handlerName:i,handler:c,allowed:f}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Ol(this._eventsInProgress))||this.isZooming()}_blockedByActive(i,c,f){for(const y in i)if(y!==f&&(!c||c.indexOf(y)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const c=[];for(const f of i)this._el.contains(f.target)&&c.push(f);return c}handleEvent(i,c){if(i.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const f=i.type==="renderFrame"?void 0:i,y={needsRenderFrame:!1},x={},E={},P=i.touches,C=P?this._getMapTouches(P):void 0,A=C?w.touchPos(this._el,C):w.mousePos(this._el,i);for(const{handlerName:G,handler:te,allowed:Y}of this._handlers){if(!te.isEnabled())continue;let ee;this._blockedByActive(E,Y,G)?te.reset():te[c||i.type]&&(ee=te[c||i.type](i,A,C),this.mergeHandlerResult(y,x,ee,G,f),ee&&ee.needsRenderFrame&&this._triggerRenderFrame()),(ee||te.isActive())&&(E[G]=te)}const L={};for(const G in this._previousActiveHandlers)E[G]||(L[G]=f);this._previousActiveHandlers=E,(Object.keys(L).length||ad(y))&&(this._changes.push([y,x,L]),this._triggerRenderFrame()),(Object.keys(E).length||ad(y))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:R}=y;R&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],R(this._map))}mergeHandlerResult(i,c,f,y,x){if(!f)return;u.extend(i,f);const E={handlerName:y,originalEvent:f.originalEvent||x};f.zoomDelta!==void 0&&(c.zoom=E),f.panDelta!==void 0&&(c.drag=E),f.pitchDelta!==void 0&&(c.pitch=E),f.bearingDelta!==void 0&&(c.rotate=E)}_applyChanges(){const i={},c={},f={};for(const[y,x,E]of this._changes)y.panDelta&&(i.panDelta=(i.panDelta||new u.Point(0,0))._add(y.panDelta)),y.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(i.around=y.around),y.pinchAround!==void 0&&(i.pinchAround=y.pinchAround),y.noInertia&&(i.noInertia=y.noInertia),u.extend(c,x),u.extend(f,E);this._updateMapTransform(i,c,f),this._changes=[]}_updateMapTransform(i,c,f){const y=this._map,x=y._getTransformForUpdate(),E=y.terrain;if(!(ad(i)||E&&this._terrainMovement))return this._fireEvents(c,f,!0);let{panDelta:P,zoomDelta:C,bearingDelta:A,pitchDelta:L,around:R,pinchAround:G}=i;G!==void 0&&(R=G),y._stop(!0),R=R||y.transform.centerPoint;const te=x.pointLocation(P?R.sub(P):R);A&&(x.bearing+=A),L&&(x.pitch+=L),C&&(x.zoom+=C),E?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?x.center=x.pointLocation(x.centerPoint.sub(P)):x.setLocationAtPoint(te,R):(this._terrainMovement=!0,x.freezeElevation=!0,x.setLocationAtPoint(te,R),this._map.once("moveend",()=>{x.freezeElevation=!1,this._terrainMovement=!1,x.recalculateZoom(y.terrain)})):x.setLocationAtPoint(te,R),y._applyUpdatedTransform(x),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,f,!0)}_fireEvents(i,c,f){const y=Ol(this._eventsInProgress),x=Ol(i),E={};for(const L in i){const{originalEvent:R}=i[L];this._eventsInProgress[L]||(E[`${L}start`]=R),this._eventsInProgress[L]=i[L]}!y&&x&&this._fireEvent("movestart",x.originalEvent);for(const L in E)this._fireEvent(L,E[L]);x&&this._fireEvent("move",x.originalEvent);for(const L in i){const{originalEvent:R}=i[L];this._fireEvent(L,R)}const P={};let C;for(const L in this._eventsInProgress){const{handlerName:R,originalEvent:G}=this._eventsInProgress[L];this._handlersById[R].isActive()||(delete this._eventsInProgress[L],C=c[R]||G,P[`${L}end`]=C)}for(const L in P)this._fireEvent(L,P[L]);const A=Ol(this._eventsInProgress);if(f&&(y||x)&&!A){this._updatingCamera=!0;const L=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),R=G=>G!==0&&-this._bearingSnap<G&&G<this._bearingSnap;L?(R(L.bearing||this._map.getBearing())&&(L.bearing=0),L.freezeElevation=!0,this._map.easeTo(L,{originalEvent:C})):(this._map.fire(new u.Event("moveend",{originalEvent:C})),R(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new u.Event(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Gp("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Zu={extend:(p,...i)=>u.extend(p,...i),run(p){p()},logToElement(p,i=!1,c="log"){const f=window.document.getElementById(c);f&&(i&&(f.innerHTML=""),f.innerHTML+=`<br>${p}`)}};class dt extends u.Evented{constructor(i,c){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,u.bindAll(["_renderFrameCallback"],this),this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,f){return i=u.Point.convert(i).mult(-1),this.panTo(this.transform.center,u.extend({offset:i},c),f)}panTo(i,c,f){return this.easeTo(u.extend({center:i},c),f)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,f){return this.easeTo(u.extend({zoom:i},c),f)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,f){return this.easeTo(u.extend({bearing:i},c),f)}resetNorth(i,c){return this.rotateTo(0,u.extend({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(u.extend({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=At.convert(i);const f=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),f,c)}_cameraForBoxAndBearing(i,c,f,y){const x={top:0,bottom:0,right:0,left:0};if(typeof(y=u.extend({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const Te=y.padding;y.padding={top:Te,bottom:Te,right:Te,left:Te}}y.padding=u.extend(x,y.padding);const E=this.transform,P=E.padding,C=E.project(u.LngLat.convert(i)),A=E.project(u.LngLat.convert(c)),L=C.rotate(-f*Math.PI/180),R=A.rotate(-f*Math.PI/180),G=new u.Point(Math.max(L.x,R.x),Math.max(L.y,R.y)),te=new u.Point(Math.min(L.x,R.x),Math.min(L.y,R.y)),Y=G.sub(te),ee=(E.width-(P.left+P.right+y.padding.left+y.padding.right))/Y.x,oe=(E.height-(P.top+P.bottom+y.padding.top+y.padding.bottom))/Y.y;if(oe<0||ee<0)return void u.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const de=Math.min(E.scaleZoom(E.scale*Math.min(ee,oe)),y.maxZoom),Se=u.Point.convert(y.offset),ne=new u.Point((y.padding.left-y.padding.right)/2,(y.padding.top-y.padding.bottom)/2).rotate(f*Math.PI/180),be=Se.add(ne).mult(E.scale/E.zoomScale(de));return{center:E.unproject(C.add(A).div(2).sub(be)),zoom:de,bearing:f}}fitBounds(i,c,f){return this._fitInternal(this.cameraForBounds(i,c),c,f)}fitScreenCoordinates(i,c,f,y,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.Point.convert(i)),this.transform.pointLocation(u.Point.convert(c)),f,y),y,x)}_fitInternal(i,c,f){return i?(delete(c=u.extend(i,c)).padding,c.linear?this.easeTo(c,f):this.flyTo(c,f)):this}jumpTo(i,c){this.stop();const f=this._getTransformForUpdate();let y=!1,x=!1,E=!1;return"zoom"in i&&f.zoom!==+i.zoom&&(y=!0,f.zoom=+i.zoom),i.center!==void 0&&(f.center=u.LngLat.convert(i.center)),"bearing"in i&&f.bearing!==+i.bearing&&(x=!0,f.bearing=+i.bearing),"pitch"in i&&f.pitch!==+i.pitch&&(E=!0,f.pitch=+i.pitch),i.padding==null||f.isPaddingEqual(i.padding)||(f.padding=i.padding),this._applyUpdatedTransform(f),this.fire(new u.Event("movestart",c)).fire(new u.Event("move",c)),y&&this.fire(new u.Event("zoomstart",c)).fire(new u.Event("zoom",c)).fire(new u.Event("zoomend",c)),x&&this.fire(new u.Event("rotatestart",c)).fire(new u.Event("rotate",c)).fire(new u.Event("rotateend",c)),E&&this.fire(new u.Event("pitchstart",c)).fire(new u.Event("pitch",c)).fire(new u.Event("pitchend",c)),this.fire(new u.Event("moveend",c))}calculateCameraOptionsFromTo(i,c,f,y=0){const x=u.MercatorCoordinate.fromLngLat(i,c),E=u.MercatorCoordinate.fromLngLat(f,y),P=E.x-x.x,C=E.y-x.y,A=E.z-x.z,L=Math.hypot(P,C,A);if(L===0)throw new Error("Can't calculate camera options with same From and To");const R=Math.hypot(P,C),G=this.transform.scaleZoom(this.transform.cameraToCenterDistance/L/this.transform.tileSize),te=180*Math.atan2(P,-C)/Math.PI;let Y=180*Math.acos(R/L)/Math.PI;return Y=A<0?90-Y:90+Y,{center:E.toLngLat(),zoom:G,pitch:Y,bearing:te}}easeTo(i,c){this._stop(!1,i.easeId),((i=u.extend({offset:[0,0],duration:500,easing:u.ease},i)).animate===!1||!i.essential&&u.exported.prefersReducedMotion)&&(i.duration=0);const f=this._getTransformForUpdate(),y=this.getZoom(),x=this.getBearing(),E=this.getPitch(),P=this.getPadding(),C="zoom"in i?+i.zoom:y,A="bearing"in i?this._normalizeBearing(i.bearing,x):x,L="pitch"in i?+i.pitch:E,R="padding"in i?i.padding:f.padding,G=u.Point.convert(i.offset);let te=f.centerPoint.add(G);const Y=f.pointLocation(te),ee=u.LngLat.convert(i.center||Y);this._normalizeCenter(ee);const oe=f.project(Y),de=f.project(ee).sub(oe),Se=f.zoomScale(C-y);let ne,be;i.around&&(ne=u.LngLat.convert(i.around),be=f.locationPoint(ne));const Te={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||C!==y,this._rotating=this._rotating||x!==A,this._pitching=this._pitching||L!==E,this._padding=!f.isPaddingEqual(R),this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,Te),this.terrain&&this._prepareElevation(ee),this._ease(De=>{if(this._zooming&&(f.zoom=u.interpolate.number(y,C,De)),this._rotating&&(f.bearing=u.interpolate.number(x,A,De)),this._pitching&&(f.pitch=u.interpolate.number(E,L,De)),this._padding&&(f.interpolatePadding(P,R,De),te=f.centerPoint.add(G)),this.terrain&&!i.freezeElevation&&this._updateElevation(De),ne)f.setLocationAtPoint(ne,be);else{const $e=f.zoomScale(f.zoom-y),Ue=C>y?Math.min(2,Se):Math.max(.5,Se),Fe=Math.pow(Ue,1-De),tt=f.unproject(oe.add(de.mult(De*Fe)).mult($e));f.setLocationAtPoint(f.renderWorldCopies?tt.wrap():tt,te)}this._applyUpdatedTransform(f),this._fireMoveEvents(c)},De=>{this.terrain&&this._finalizeElevation(),this._afterEase(c,De)},i),this}_prepareEase(i,c,f={}){this._moving=!0,c||f.moving||this.fire(new u.Event("movestart",i)),this._zooming&&!f.zooming&&this.fire(new u.Event("zoomstart",i)),this._rotating&&!f.rotating&&this.fire(new u.Event("rotatestart",i)),this._pitching&&!f.pitching&&this.fire(new u.Event("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.transform.getElevation(i,this.terrain),this.transform.freezeElevation=!0}_updateElevation(i){const c=this.transform.getElevation(this._elevationCenter,this.terrain);if(i<1&&c!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(f-(c-(f*i+this._elevationStart))/(1-i)),this._elevationTarget=c}this.transform.elevation=u.interpolate.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this.transform.freezeElevation=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const c=i.clone(),{center:f,zoom:y,pitch:x,bearing:E,elevation:P}=this.transformCameraUpdate(c);f&&(c.center=f),y!==void 0&&(c.zoom=y),x!==void 0&&(c.pitch=x),E!==void 0&&(c.bearing=E),P!==void 0&&(c.elevation=P),this.transform.apply(c)}_fireMoveEvents(i){this.fire(new u.Event("move",i)),this._zooming&&this.fire(new u.Event("zoom",i)),this._rotating&&this.fire(new u.Event("rotate",i)),this._pitching&&this.fire(new u.Event("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const f=this._zooming,y=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new u.Event("zoomend",i)),y&&this.fire(new u.Event("rotateend",i)),x&&this.fire(new u.Event("pitchend",i)),this.fire(new u.Event("moveend",i))}flyTo(i,c){if(!i.essential&&u.exported.prefersReducedMotion){const nt=u.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(nt,c)}this.stop(),i=u.extend({offset:[0,0],speed:1.2,curve:1.42,easing:u.ease},i);const f=this._getTransformForUpdate(),y=this.getZoom(),x=this.getBearing(),E=this.getPitch(),P=this.getPadding(),C="zoom"in i?u.clamp(+i.zoom,f.minZoom,f.maxZoom):y,A="bearing"in i?this._normalizeBearing(i.bearing,x):x,L="pitch"in i?+i.pitch:E,R="padding"in i?i.padding:f.padding,G=f.zoomScale(C-y),te=u.Point.convert(i.offset);let Y=f.centerPoint.add(te);const ee=f.pointLocation(Y),oe=u.LngLat.convert(i.center||ee);this._normalizeCenter(oe);const de=f.project(ee),Se=f.project(oe).sub(de);let ne=i.curve;const be=Math.max(f.width,f.height),Te=be/G,De=Se.mag();if("minZoom"in i){const nt=u.clamp(Math.min(i.minZoom,y,C),f.minZoom,f.maxZoom),rr=be/f.zoomScale(nt-y);ne=Math.sqrt(rr/De*2)}const $e=ne*ne;function Ue(nt){const rr=(Te*Te-be*be+(nt?-1:1)*$e*$e*De*De)/(2*(nt?Te:be)*$e*De);return Math.log(Math.sqrt(rr*rr+1)-rr)}function Fe(nt){return(Math.exp(nt)-Math.exp(-nt))/2}function tt(nt){return(Math.exp(nt)+Math.exp(-nt))/2}const wt=Ue(0);let Ft=function(nt){return tt(wt)/tt(wt+ne*nt)},He=function(nt){return be*((tt(wt)*(Fe(rr=wt+ne*nt)/tt(rr))-Fe(wt))/$e)/De;var rr},Ct=(Ue(1)-wt)/ne;if(Math.abs(De)<1e-6||!isFinite(Ct)){if(Math.abs(be-Te)<1e-6)return this.easeTo(i,c);const nt=Te<be?-1:1;Ct=Math.abs(Math.log(Te/be))/ne,He=function(){return 0},Ft=function(rr){return Math.exp(nt*ne*rr)}}return i.duration="duration"in i?+i.duration:1e3*Ct/("screenSpeed"in i?+i.screenSpeed/ne:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=x!==A,this._pitching=L!==E,this._padding=!f.isPaddingEqual(R),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(oe),this._ease(nt=>{const rr=nt*Ct,tn=1/Ft(rr);f.zoom=nt===1?C:y+f.scaleZoom(tn),this._rotating&&(f.bearing=u.interpolate.number(x,A,nt)),this._pitching&&(f.pitch=u.interpolate.number(E,L,nt)),this._padding&&(f.interpolatePadding(P,R,nt),Y=f.centerPoint.add(te)),this.terrain&&!i.freezeElevation&&this._updateElevation(nt);const nr=nt===1?oe:f.unproject(de.add(Se.mult(He(rr))).mult(tn));f.setLocationAtPoint(f.renderWorldCopies?nr.wrap():nr,Y),this._applyUpdatedTransform(f),this._fireMoveEvents(c)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(c)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,c)}if(!i){const f=this.handlers;f&&f.stop(!1)}return this}_ease(i,c,f){f.animate===!1||f.duration===0?(i(1),c()):(this._easeStart=u.exported.now(),this._easeOptions=f,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((u.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,c){i=u.wrap(i,-180,180);const f=Math.abs(i-c);return Math.abs(i-360-c)<f&&(i-=360),Math.abs(i+360-c)<f&&(i+=360),i}_normalizeCenter(i){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const f=i.lng-c.center.lng;i.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(i){return this.terrain?this.transform.getElevation(u.LngLat.convert(i),this.terrain)-this.transform.elevation:null}}class Tt{constructor(i={}){this.options=i,u.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const f=this._map._getUIString(`AttributionControl.${c}`);i.title=f,i.setAttribute("aria-label",f)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"&&i.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const c=this._map.style.sourceCaches;for(const y in c){const x=c[y];if(x.used||x.usedForTerrain){const E=x.getSource();E.attribution&&i.indexOf(E.attribution)<0&&i.push(E.attribution)}}i=i.filter(y=>String(y).trim()),i.sort((y,x)=>y.length-x.length),i=i.filter((y,x)=>{for(let E=x+1;E<i.length;E++)if(i[E].indexOf(y)>=0)return!1;return!0});const f=i.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,i.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")}}class $l{constructor(i={}){this.options=i,u.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const c=w.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const i=this._container.children;if(i.length){const c=i[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&c.classList.add("maplibregl-compact"):c.classList.remove("maplibregl-compact")}}}class sd{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,f=c?this._queue.concat(c):this._queue;for(const y of f)if(y.id===i)return void(y.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const f of c)if(!f.cancelled&&(f.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const ld={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var mi=u.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class Hu extends u.Evented{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,c){this.sourceCache.update(i,c),this._renderableTilesKeys=[];const f={};for(const y of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))f[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.posMatrix=new Float64Array(16),u.ortho(y.posMatrix,0,u.EXTENT,0,u.EXTENT,0,1),this._tiles[y.key]=new ui(y,this.tileSize));for(const y in this._tiles)f[y]||delete this._tiles[y]}freeRtt(i){for(const c in this._tiles){const f=this._tiles[c];(!i||f.tileID.equals(i)||f.tileID.isChildOf(i)||i.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const c={};for(const f of this._renderableTilesKeys){const y=this._tiles[f].tileID;if(y.canonical.equals(i.canonical)){const x=i.clone();x.posMatrix=new Float64Array(16),u.ortho(x.posMatrix,0,u.EXTENT,0,u.EXTENT,0,1),c[f]=x}else if(y.canonical.isChildOf(i.canonical)){const x=i.clone();x.posMatrix=new Float64Array(16);const E=y.canonical.z-i.canonical.z,P=y.canonical.x-(y.canonical.x>>E<<E),C=y.canonical.y-(y.canonical.y>>E<<E),A=u.EXTENT>>E;u.ortho(x.posMatrix,0,A,0,A,0,1),u.translate(x.posMatrix,x.posMatrix,[-P*A,-C*A,0]),c[f]=x}else if(i.canonical.isChildOf(y.canonical)){const x=i.clone();x.posMatrix=new Float64Array(16);const E=i.canonical.z-y.canonical.z,P=i.canonical.x-(i.canonical.x>>E<<E),C=i.canonical.y-(i.canonical.y>>E<<E),A=u.EXTENT>>E;u.ortho(x.posMatrix,0,u.EXTENT,0,u.EXTENT,0,1),u.translate(x.posMatrix,x.posMatrix,[P*A,C*A,0]),u.scale(x.posMatrix,x.posMatrix,[1/2**E,1/2**E,0]),c[f]=x}}return c}getSourceTile(i,c){const f=this.sourceCache._source;let y=i.overscaledZ-this.deltaZoom;if(y>f.maxzoom&&(y=f.maxzoom),y<f.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(y).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!x||!x.dem)&&c)for(;y>=f.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(i.scaledTo(y--).key);return x}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=i)}}class $o{constructor(i,c,f){this.painter=i,this.sourceCache=new Hu(c),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,c,f,y=u.EXTENT){if(!(c>=0&&c<y&&f>=0&&f<y))return 0;let x=0;const E=this.getTerrainData(i);if(E.tile&&E.tile.dem){const P=function(Y,ee,oe){var de=ee[0],Se=ee[1];return Y[0]=oe[0]*de+oe[4]*Se+oe[12],Y[1]=oe[1]*de+oe[5]*Se+oe[13],Y}([],[c/y*u.EXTENT,f/y*u.EXTENT],E.u_terrain_matrix),C=[P[0]*E.tile.dem.dim,P[1]*E.tile.dem.dim],A=[Math.floor(C[0]),Math.floor(C[1])],L=E.tile.dem.get(A[0],A[1]),R=E.tile.dem.get(A[0],A[1]+1),G=E.tile.dem.get(A[0]+1,A[1]),te=E.tile.dem.get(A[0]+1,A[1]+1);x=u.interpolate.number(u.interpolate.number(L,R,C[0]-A[0]),u.interpolate.number(G,te,C[0]-A[0]),C[1]-A[1])}return x}getElevation(i,c,f,y=u.EXTENT){return this.getDEMElevation(i,c,f,y)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const y=this.painter.context,x=new u.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Be(y,x,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Be(y,new u.RGBAImage({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.identity([])}const c=this.sourceCache.getSourceTile(i,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const y=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new Be(y,c.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),c.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const f=c&&c+c.tileID.key+i.key;if(f&&!this._demMatrixCache[f]){const y=this.sourceCache.sourceCache._source.maxzoom;let x=i.canonical.z-c.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=y?x=i.canonical.z-y:u.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const E=i.canonical.x-(i.canonical.x>>x<<x),P=i.canonical.y-(i.canonical.y>>x<<x),C=u.fromScaling(new Float64Array(16),[1/(u.EXTENT<<x),1/(u.EXTENT<<x),0]);u.translate(C,C,[E*u.EXTENT,P*u.EXTENT,0]),this._demMatrixCache[i.key]={matrix:C,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(i){const c=this.painter,f=c.width/devicePixelRatio,y=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Be(c.context,{width:f,height:y,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Be(c.context,{width:f,height:y,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(f,y,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,f,y))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,E=0;x<this._coordsTextureSize;x++)for(let P=0;P<this._coordsTextureSize;P++,E+=4)c[E+0]=255&P,c[E+1]=255&x,c[E+2]=P>>8<<4|x>>8,c[E+3]=0;const f=new u.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),y=new Be(i,f,i.gl.RGBA,{premultiply:!1});return y.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(i){const c=new Uint8Array(4),f=this.painter.context,y=f.gl;f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,c),f.bindFramebuffer.set(null);const x=c[0]+(c[2]>>4<<8),E=c[1]+((15&c[2])<<8),P=this.coordsIndex[255-c[3]],C=P&&this.sourceCache.getTileByID(P);if(!C)return null;const A=this._coordsTextureSize,L=(1<<C.tileID.canonical.z)*A;return new u.MercatorCoordinate((C.tileID.canonical.x*A+x)/L,(C.tileID.canonical.y*A+E)/L,this.getElevation(C.tileID,x,E,A))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,c=new u.Pos3dArray,f=new u.TriangleIndexArray,y=this.meshSize,x=u.EXTENT/y,E=y*y;for(let R=0;R<=y;R++)for(let G=0;G<=y;G++)c.emplaceBack(G*x,R*x,0);for(let R=0;R<E;R+=y+1)for(let G=0;G<y;G++)f.emplaceBack(G+R,y+G+R+1,y+G+R+2),f.emplaceBack(G+R,y+G+R+2,G+R+1);const P=c.length,C=P+2*(y+1);for(const R of[0,1])for(let G=0;G<=y;G++)for(const te of[0,1])c.emplaceBack(G*x,R*u.EXTENT,te);for(let R=0;R<2*y;R+=2)f.emplaceBack(C+R,C+R+1,C+R+3),f.emplaceBack(C+R,C+R+3,C+R+2),f.emplaceBack(P+R,P+R+3,P+R+1),f.emplaceBack(P+R,P+R+2,P+R+3);const A=c.length,L=A+2*(y+1);for(const R of[0,1])for(let G=0;G<=y;G++)for(const te of[0,1])c.emplaceBack(R*u.EXTENT,G*x,te);for(let R=0;R<2*y;R+=2)f.emplaceBack(A+R,A+R+1,A+R+3),f.emplaceBack(A+R,A+R+3,A+R+2),f.emplaceBack(L+R,L+R+3,L+R+1),f.emplaceBack(L+R,L+R+2,L+R+3);return this._mesh={indexBuffer:i.createIndexBuffer(f),vertexBuffer:i.createVertexBuffer(c,mi.members),segments:u.SegmentVector.simpleSegment(0,0,c.length,f.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*u.earthRadius/Math.pow(2,i)/5}getMinMaxElevation(i){const c=this.getTerrainData(i).tile,f={minElevation:null,maxElevation:null};return c&&c.dem&&(f.minElevation=c.dem.min*this.exaggeration,f.maxElevation=c.dem.max*this.exaggeration),f}}class J0{constructor(i,c,f){this._context=i,this._size=c,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new Be(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(f.texture),{id:i,fbo:c,texture:f,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>i.id!==c),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const ra={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Zr{constructor(i,c){this.painter=i,this.terrain=c,this.pool=new J0(i.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(f=>!i._layers[f].isHidden(c)),this._coordsDescendingInv={};for(const f in i.sourceCaches){this._coordsDescendingInv[f]={};const y=i.sourceCaches[f].getVisibleCoordinates();for(const x of y){const E=this.terrain.sourceCache.getTerrainCoords(x);for(const P in E)this._coordsDescendingInv[f][P]||(this._coordsDescendingInv[f][P]=[]),this._coordsDescendingInv[f][P].push(E[P])}}this._coordsDescendingInvStr={};for(const f of i._order){const y=i._layers[f],x=y.source;if(ra[y.type]&&!this._coordsDescendingInvStr[x]){this._coordsDescendingInvStr[x]={};for(const E in this._coordsDescendingInv[x])this._coordsDescendingInvStr[x][E]=this._coordsDescendingInv[x][E].map(P=>P.key).sort().join()}}for(const f of this._renderableTiles)for(const y in this._coordsDescendingInvStr){const x=this._coordsDescendingInvStr[y][f.tileID.key];x&&x!==f.rttCoords[y]&&(f.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const c=i.type,f=this.painter,y=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(ra[c]&&(this._prevType&&ra[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(i.id),!y))return!0;if(ra[this._prevType]||ra[c]&&y){this._prevType=c;const x=this._stacks.length-1,E=this._stacks[x]||[];for(const P of this._renderableTiles){if(this.pool.isFull()&&(Jh(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(P),P.rtt[x]){const A=this.pool.getObjectForId(P.rtt[x].id);if(A.stamp===P.rtt[x].stamp){this.pool.useObject(A);continue}}const C=this.pool.getOrCreateFreeObject();this.pool.useObject(C),this.pool.stampObject(C),P.rtt[x]={id:C.id,stamp:C.stamp},f.context.bindFramebuffer.set(C.fbo.framebuffer),f.context.clear({color:u.Color.transparent,stencil:0}),f.currentStencilSource=void 0;for(let A=0;A<E.length;A++){const L=f.style._layers[E[A]],R=L.source?this._coordsDescendingInv[L.source][P.tileID.key]:[P.tileID];f.context.viewport.set([0,0,C.fbo.width,C.fbo.height]),f._renderTileClippingMasks(L,R),f.renderLayer(f,f.style.sourceCaches[L.source],L,R),L.source&&(P.rttCoords[L.source]=this._coordsDescendingInvStr[L.source][P.tileID.key])}}return Jh(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ra[c]}return!1}}const hn=b,Wp={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0},zs=p=>{p.touchstart=p.dragStart,p.touchmoveWindow=p.dragMove,p.touchend=p.dragEnd},Xu={showCompass:!0,showZoom:!0,visualizePitch:!1};class ud{constructor(i,c,f=!1){this._clickTolerance=10;const y=i.dragRotate._mouseRotate.getClickTolerance(),x=i.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=$p({clickTolerance:y,enable:!0}),this.touchRotate=(({enable:E,clickTolerance:P,bearingDegreesPerPixelMoved:C=.8})=>{const A=new Vu;return new ta({clickTolerance:P,move:(L,R)=>({bearingDelta:(R.x-L.x)*C}),moveStateManager:A,enable:E,assignEvents:zs})})({clickTolerance:y,enable:!0}),this.map=i,f&&(this.mousePitch=Nu({clickTolerance:x,enable:!0}),this.touchPitch=(({enable:E,clickTolerance:P,pitchDegreesPerPixelMoved:C=-.5})=>{const A=new Vu;return new ta({clickTolerance:P,move:(L,R)=>({pitchDelta:(R.y-L.y)*C}),moveStateManager:A,enable:E,assignEvents:zs})})({clickTolerance:x,enable:!0})),u.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),w.addEventListener(c,"mousedown",this.mousedown),w.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(c,"touchcancel",this.reset)}startMouse(i,c){this.mouseRotate.dragStart(i,c),this.mousePitch&&this.mousePitch.dragStart(i,c),w.disableDrag()}startTouch(i,c){this.touchRotate.dragStart(i,c),this.touchPitch&&this.touchPitch.dragStart(i,c),w.disableDrag()}moveMouse(i,c){const f=this.map,{bearingDelta:y}=this.mouseRotate.dragMove(i,c)||{};if(y&&f.setBearing(f.getBearing()+y),this.mousePitch){const{pitchDelta:x}=this.mousePitch.dragMove(i,c)||{};x&&f.setPitch(f.getPitch()+x)}}moveTouch(i,c){const f=this.map,{bearingDelta:y}=this.touchRotate.dragMove(i,c)||{};if(y&&f.setBearing(f.getBearing()+y),this.touchPitch){const{pitchDelta:x}=this.touchPitch.dragMove(i,c)||{};x&&f.setPitch(f.getPitch()+x)}}off(){const i=this.element;w.removeEventListener(i,"mousedown",this.mousedown),w.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}mousedown(i){this.startMouse(u.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),w.mousePos(this.element,i)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)}mousemove(i){this.moveMouse(i,w.mousePos(this.element,i))}mouseup(i){this.mouseRotate.dragEnd(i),this.mousePitch&&this.mousePitch.dragEnd(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,i.targetTouches)[0],this.startTouch(i,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,i.targetTouches)[0],this.moveTouch(i,this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}let Bo;function Ku(p,i,c){if(p=new u.LngLat(p.lng,p.lat),i){const f=new u.LngLat(p.lng-360,p.lat),y=new u.LngLat(p.lng+360,p.lat),x=c.locationPoint(p).distSqr(i);c.locationPoint(f).distSqr(i)<x?p=f:c.locationPoint(y).distSqr(i)<x&&(p=y)}for(;Math.abs(p.lng-c.center.lng)>180;){const f=c.locationPoint(p);if(f.x>=0&&f.y>=0&&f.x<=c.width&&f.y<=c.height)break;p.lng>c.center.lng?p.lng-=360:p.lng+=360}return p}const Za={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Yu(p,i,c){const f=p.classList;for(const y in Za)f.remove(`maplibregl-${c}-anchor-${y}`);f.add(`maplibregl-${c}-anchor-${i}`)}class Bl extends u.Evented{constructor(i,c){if(super(),(i instanceof HTMLElement||c)&&(i=u.extend({element:i},c)),u.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=u.Point.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const f=w.createNS("http://www.w3.org/2000/svg","svg"),y=41,x=27;f.setAttributeNS(null,"display","block"),f.setAttributeNS(null,"height",`${y}px`),f.setAttributeNS(null,"width",`${x}px`),f.setAttributeNS(null,"viewBox",`0 0 ${x} ${y}`);const E=w.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"stroke","none"),E.setAttributeNS(null,"stroke-width","1"),E.setAttributeNS(null,"fill","none"),E.setAttributeNS(null,"fill-rule","evenodd");const P=w.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill-rule","nonzero");const C=w.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(3.0, 29.0)"),C.setAttributeNS(null,"fill","#000000");const A=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Se of A){const ne=w.createNS("http://www.w3.org/2000/svg","ellipse");ne.setAttributeNS(null,"opacity","0.04"),ne.setAttributeNS(null,"cx","10.5"),ne.setAttributeNS(null,"cy","5.80029008"),ne.setAttributeNS(null,"rx",Se.rx),ne.setAttributeNS(null,"ry",Se.ry),C.appendChild(ne)}const L=w.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"fill",this._color);const R=w.createNS("http://www.w3.org/2000/svg","path");R.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),L.appendChild(R);const G=w.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"opacity","0.25"),G.setAttributeNS(null,"fill","#000000");const te=w.createNS("http://www.w3.org/2000/svg","path");te.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),G.appendChild(te);const Y=w.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Y.setAttributeNS(null,"fill","#FFFFFF");const ee=w.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(8.0, 8.0)");const oe=w.createNS("http://www.w3.org/2000/svg","circle");oe.setAttributeNS(null,"fill","#000000"),oe.setAttributeNS(null,"opacity","0.25"),oe.setAttributeNS(null,"cx","5.5"),oe.setAttributeNS(null,"cy","5.5"),oe.setAttributeNS(null,"r","5.4999962");const de=w.createNS("http://www.w3.org/2000/svg","circle");de.setAttributeNS(null,"fill","#FFFFFF"),de.setAttributeNS(null,"cx","5.5"),de.setAttributeNS(null,"cy","5.5"),de.setAttributeNS(null,"r","5.4999962"),ee.appendChild(oe),ee.appendChild(de),P.appendChild(C),P.appendChild(L),P.appendChild(G),P.appendChild(Y),P.appendChild(ee),f.appendChild(P),f.setAttributeNS(null,"height",y*this._scale+"px"),f.setAttributeNS(null,"width",x*this._scale+"px"),this._element.appendChild(f),this._offset=u.Point.convert(i&&i.offset||[0,-14])}this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",f=>{f.preventDefault()}),this._element.addEventListener("mousedown",f=>{f.preventDefault()}),Yu(this._element,this._anchor,"marker"),this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=u.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const y=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(i){const c=i.code,f=i.charCode||i.keyCode;c!=="Space"&&c!=="Enter"&&f!==32&&f!==13||this.togglePopup()}_onMapClick(i){const c=i.originalEvent.target,f=this._element;this._popup&&(c===f||f.contains(c))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}_update(i){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Ku(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let c="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?c=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(c=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let f="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?f="rotateX(0deg)":this._pitchAlignment==="map"&&(f=`rotateX(${this._map.getPitch()}deg)`),i&&i.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${Za[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${f} ${c}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const y=this._map.unproject(this._pos),x=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=y.distanceTo(this._lngLat)>20*x?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(i){return this._offset=u.Point.convert(i),this._update(),this}_onMove(i){if(!this._isDragging){const c=this._clickTolerance||this._map._clickTolerance;this._isDragging=i.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=i.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.Event("dragstart"))),this.fire(new u.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.Event("dragend")),this._state="inactive"}_addDragHandler(i){this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos).add(this._offset),this._pointerdownPos=i.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const cd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ds=0,Ha=!1;const hd={maxWidth:100,unit:"metric"};function Ju(p,i,c){const f=c&&c.maxWidth||100,y=p._container.clientHeight/2,x=p.unproject([0,y]),E=p.unproject([f,y]),P=x.distanceTo(E);if(c&&c.unit==="imperial"){const C=3.2808*P;C>5280?Xa(i,f,C/5280,p._getUIString("ScaleControl.Miles")):Xa(i,f,C,p._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Xa(i,f,P/1852,p._getUIString("ScaleControl.NauticalMiles")):P>=1e3?Xa(i,f,P/1e3,p._getUIString("ScaleControl.Kilometers")):Xa(i,f,P,p._getUIString("ScaleControl.Meters"))}function Xa(p,i,c,f){const y=function(x){const E=Math.pow(10,`${Math.floor(x)}`.length-1);let P=x/E;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:P>=1?1:function(C){const A=Math.pow(10,Math.ceil(-Math.log(C)/Math.LN10));return Math.round(C*A)/A}(P),E*P}(c);p.style.width=i*(y/c)+"px",p.innerHTML=`${y}&nbsp;${f}`}const Qu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},dd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ec(p){if(p){if(typeof p=="number"){const i=Math.round(Math.sqrt(.5*Math.pow(p,2)));return{center:new u.Point(0,0),top:new u.Point(0,p),"top-left":new u.Point(i,i),"top-right":new u.Point(-i,i),bottom:new u.Point(0,-p),"bottom-left":new u.Point(i,-i),"bottom-right":new u.Point(-i,-i),left:new u.Point(p,0),right:new u.Point(-p,0)}}if(p instanceof u.Point||Array.isArray(p)){const i=u.Point.convert(p);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:u.Point.convert(p.center||[0,0]),top:u.Point.convert(p.top||[0,0]),"top-left":u.Point.convert(p["top-left"]||[0,0]),"top-right":u.Point.convert(p["top-right"]||[0,0]),bottom:u.Point.convert(p.bottom||[0,0]),"bottom-left":u.Point.convert(p["bottom-left"]||[0,0]),"bottom-right":u.Point.convert(p["bottom-right"]||[0,0]),left:u.Point.convert(p.left||[0,0]),right:u.Point.convert(p.right||[0,0])}}return ec(new u.Point(0,0))}const tc=b,rc={setRTLTextPlugin:u.setRTLTextPlugin,getRTLTextPluginStatus:u.getRTLTextPluginStatus,Map:class extends dt{constructor(p){var i;if(u.PerformanceUtils.mark(u.PerformanceMarkers.create),(p=u.extend({},Wp,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new $u(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies),{bearingSnap:p.bearingSnap}),this._interactive=p.interactive,this._cooperativeGestures=p.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=p.collectResourceTiming,this._renderTaskQueue=new sd,this._controls=[],this._mapId=u.uniqueId(),this._locale=u.extend({},ld,p.locale),this._clickTolerance=p.clickTolerance,this._pixelRatio=(i=p.pixelRatio)!==null&&i!==void 0?i:devicePixelRatio,this.transformCameraUpdate=p.transformCameraUpdate,this._imageQueueHandle=B.addThrottleControl(()=>this.isMoving()),this._requestManager=new X(p.transformRequest),typeof p.container=="string"){if(this._container=document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),u.bindAll(["_onWindowOnline","_onMapScroll","_cooperativeGesturesOnWheel","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let c=!1;this._resizeObserver=new ResizeObserver(f=>{c?this._trackResize&&this.resize(f)._update():c=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Oo(this,p),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=p.hash&&new Dp(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,u.extend({},p.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=p.localIdeographFontFamily,this._validateStyle=p.validateStyle,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new Tt({customAttribution:p.customAttribution})),p.maplibreLogo&&this.addControl(new $l,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new u.Event(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new u.Event(`${c.dataType}dataloading`,c))}),this.on("dataabort",c=>{this.fire(new u.Event("sourcedataabort",c))})}_getMapId(){return this._mapId}addControl(p,i){if(i===void 0&&(i=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new u.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=p.onAdd(this);this._controls.push(p);const f=this._controlPositions[i];return i.indexOf("bottom")!==-1?f.insertBefore(c,f.firstChild):f.appendChild(c),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new u.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(p);return i>-1&&this._controls.splice(i,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}calculateCameraOptionsFromTo(p,i,c,f){return f==null&&this.terrain&&(f=this.transform.getElevation(c,this.terrain)),super.calculateCameraOptionsFromTo(p,i,c,f)}resize(p){var i;const c=this._containerDimensions(),f=c[0],y=c[1];this._resizeCanvas(f,y,this.getPixelRatio()),this.transform.resize(f,y),(i=this._requestedCameraState)===null||i===void 0||i.resize(f,y),this.painter.resize(f,y,this.getPixelRatio());const x=!this._moving;return x&&(this.stop(),this.fire(new u.Event("movestart",p)).fire(new u.Event("move",p))),this.fire(new u.Event("resize",p)),x&&this.fire(new u.Event("moveend",p)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(p){const[i,c]=this._containerDimensions();this._pixelRatio=p,this._resizeCanvas(i,c,p),this.painter.resize(i,c,p)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(p){return this.transform.setMaxBounds(At.convert(p)),this._update()}setMinZoom(p){if((p=p==null?-2:p)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p&&this.setZoom(p),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=p==null?22:p)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p&&this.setZoom(p),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=p==null?0:p)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p&&this.setPitch(p),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=p==null?60:p)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p&&this.setPitch(p),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(p){return this._cooperativeGestures=p,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(p){return this.transform.locationPoint(u.LngLat.convert(p),this.style&&this.terrain)}unproject(p){return this.transform.pointLocation(u.Point.convert(p),this.terrain)}isMoving(){var p;return this._moving||((p=this.handlers)===null||p===void 0?void 0:p.isMoving())}isZooming(){var p;return this._zooming||((p=this.handlers)===null||p===void 0?void 0:p.isZooming())}isRotating(){var p;return this._rotating||((p=this.handlers)===null||p===void 0?void 0:p.isRotating())}_createDelegatedListener(p,i,c){if(p==="mouseenter"||p==="mouseover"){let f=!1;return{layer:i,listener:c,delegates:{mousemove:x=>{const E=this.getLayer(i)?this.queryRenderedFeatures(x.point,{layers:[i]}):[];E.length?f||(f=!0,c.call(this,new cn(p,this,x.originalEvent,{features:E}))):f=!1},mouseout:()=>{f=!1}}}}if(p==="mouseleave"||p==="mouseout"){let f=!1;return{layer:i,listener:c,delegates:{mousemove:E=>{(this.getLayer(i)?this.queryRenderedFeatures(E.point,{layers:[i]}):[]).length?f=!0:f&&(f=!1,c.call(this,new cn(p,this,E.originalEvent)))},mouseout:E=>{f&&(f=!1,c.call(this,new cn(p,this,E.originalEvent)))}}}}{const f=y=>{const x=this.getLayer(i)?this.queryRenderedFeatures(y.point,{layers:[i]}):[];x.length&&(y.features=x,c.call(this,y),delete y.features)};return{layer:i,listener:c,delegates:{[p]:f}}}}on(p,i,c){if(c===void 0)return super.on(p,i);const f=this._createDelegatedListener(p,i,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(f);for(const y in f.delegates)this.on(y,f.delegates[y]);return this}once(p,i,c){if(c===void 0)return super.once(p,i);const f=this._createDelegatedListener(p,i,c);for(const y in f.delegates)this.once(y,f.delegates[y]);return this}off(p,i,c){return c===void 0?super.off(p,i):(this._delegatedListeners&&this._delegatedListeners[p]&&(f=>{const y=this._delegatedListeners[p];for(let x=0;x<y.length;x++){const E=y[x];if(E.layer===i&&E.listener===c){for(const P in E.delegates)this.off(P,E.delegates[P]);return y.splice(x,1),this}}})(),this)}queryRenderedFeatures(p,i){if(!this.style)return[];let c;const f=p instanceof u.Point||Array.isArray(p),y=f?p:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(f?{}:p)||{},y instanceof u.Point||typeof y[0]=="number")c=[u.Point.convert(y)];else{const x=u.Point.convert(y[0]),E=u.Point.convert(y[1]);c=[x,new u.Point(E.x,x.y),E,new u.Point(x.x,E.y),x]}return this.style.queryRenderedFeatures(c,i,this.transform)}querySourceFeatures(p,i){return this.style.querySourceFeatures(p,i)}setStyle(p,i){return(i=u.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&p?(this._diffStyle(p,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(p,i))}setTransformRequest(p){return this._requestManager.setTransformRequest(p),this}_getUIString(p){const i=this._locale[p];if(i==null)throw new Error(`Missing UI string '${p}'`);return i}_updateStyle(p,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(p,i));const c=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!p)),p?(this.style=new so(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof p=="string"?this.style.loadURL(p,i,c):this.style.loadJSON(p,i,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new so(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(p,i){if(typeof p=="string"){const c=this._requestManager.transformRequest(p,$.Style);u.getJSON(c,(f,y)=>{f?this.fire(new u.ErrorEvent(f)):y&&this._updateDiff(y,i)})}else typeof p=="object"&&this._updateDiff(p,i)}_updateDiff(p,i){try{this.style.setState(p,i)&&this._update(!0)}catch(c){u.warnOnce(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(p,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.warnOnce("There is no style added to the map.")}addSource(p,i){return this._lazyInitEmptyStyle(),this.style.addSource(p,i),this._update(!0)}isSourceLoaded(p){const i=this.style&&this.style.sourceCaches[p];if(i!==void 0)return i.loaded();this.fire(new u.ErrorEvent(new Error(`There is no source with ID '${p}'`)))}setTerrain(p){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),p){const i=this.style.sourceCaches[p.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${p.source}`);for(const c in this.style._layers){const f=this.style._layers[c];f.type==="hillshade"&&f.source===p.source&&u.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new $o(this.painter,i,p),this.painter.renderToTexture=new Zr(this.painter,this.terrain),this.transform.updateElevation(this.terrain),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId===p.source&&this.transform.updateElevation(this.terrain),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.updateElevation(this.terrain);return this.fire(new u.Event("terrain",{terrain:p})),this}getTerrain(){return this.terrain&&this.terrain.options}areTilesLoaded(){const p=this.style&&this.style.sourceCaches;for(const i in p){const c=p[i]._tiles;for(const f in c){const y=c[f];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}addSourceType(p,i,c){return this._lazyInitEmptyStyle(),this.style.addSourceType(p,i,c)}removeSource(p){return this.style.removeSource(p),this._update(!0)}getSource(p){return this.style.getSource(p)}addImage(p,i,{pixelRatio:c=1,sdf:f=!1,stretchX:y,stretchY:x,content:E}={}){if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||u.isImageBitmap(i)){const{width:P,height:C,data:A}=u.exported.getImageData(i);this.style.addImage(p,{data:new u.RGBAImage({width:P,height:C},A),pixelRatio:c,stretchX:y,stretchY:x,content:E,sdf:f,version:0})}else{if(i.width===void 0||i.height===void 0)return this.fire(new u.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:P,height:C,data:A}=i,L=i;this.style.addImage(p,{data:new u.RGBAImage({width:P,height:C},new Uint8Array(A)),pixelRatio:c,stretchX:y,stretchY:x,content:E,sdf:f,version:0,userImage:L}),L.onAdd&&L.onAdd(this,p)}}}updateImage(p,i){const c=this.style.getImage(p);if(!c)return this.fire(new u.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=i instanceof HTMLImageElement||u.isImageBitmap(i)?u.exported.getImageData(i):i,{width:y,height:x,data:E}=f;if(y===void 0||x===void 0)return this.fire(new u.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==c.data.width||x!==c.data.height)return this.fire(new u.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const P=!(i instanceof HTMLImageElement||u.isImageBitmap(i));c.data.replace(E,P),this.style.updateImage(p,c)}getImage(p){return this.style.getImage(p)}hasImage(p){return p?!!this.style.getImage(p):(this.fire(new u.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p,i){B.getImage(this._requestManager.transformRequest(p,$.Image),i)}listImages(){return this.style.listImages()}addLayer(p,i){return this._lazyInitEmptyStyle(),this.style.addLayer(p,i),this._update(!0)}moveLayer(p,i){return this.style.moveLayer(p,i),this._update(!0)}removeLayer(p){return this.style.removeLayer(p),this._update(!0)}getLayer(p){return this.style.getLayer(p)}setLayerZoomRange(p,i,c){return this.style.setLayerZoomRange(p,i,c),this._update(!0)}setFilter(p,i,c={}){return this.style.setFilter(p,i,c),this._update(!0)}getFilter(p){return this.style.getFilter(p)}setPaintProperty(p,i,c,f={}){return this.style.setPaintProperty(p,i,c,f),this._update(!0)}getPaintProperty(p,i){return this.style.getPaintProperty(p,i)}setLayoutProperty(p,i,c,f={}){return this.style.setLayoutProperty(p,i,c,f),this._update(!0)}getLayoutProperty(p,i){return this.style.getLayoutProperty(p,i)}setGlyphs(p,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(p,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(p,i,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(p,i,c,f=>{f||this._update(!0)}),this}removeSprite(p){return this._lazyInitEmptyStyle(),this.style.removeSprite(p),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(p,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(p,i,c=>{c||this._update(!0)}),this}setLight(p,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(p,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(p,i){return this.style.setFeatureState(p,i),this._update()}removeFeatureState(p,i){return this.style.removeFeatureState(p,i),this._update()}getFeatureState(p){return this.style.getFeatureState(p)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let p=0,i=0;return this._container&&(p=this._container.clientWidth||400,i=this._container.clientHeight||300),[p,i]}_setupContainer(){const p=this._container;p.classList.add("maplibregl-map");const i=this._canvasContainer=w.create("div","maplibregl-canvas-container",p);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const c=this._containerDimensions();this._resizeCanvas(c[0],c[1],this.getPixelRatio());const f=this._controlContainer=w.create("div","maplibregl-control-container",p),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(x=>{y[x]=w.create("div",`maplibregl-ctrl-${x} `,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_cooperativeGesturesOnWheel(p){this._onCooperativeGesture(p,p[this._metaKey],1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",this._container);let p=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(p=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${p}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){w.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(p,i,c){this._canvas.width=c*p,this._canvas.height=c*i,this._canvas.style.width=`${p}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const p={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{i={requestedAttributes:p},f&&(i.statusMessage=f.statusMessage,i.type=f.type)},{once:!0});const c=this._canvas.getContext("webgl2",p);if(!c){const f="Failed to initialize WebGL";throw i?(i.message=f,new Error(JSON.stringify(i))):new Error(f)}this.painter=new zp(c,this.transform),T.testSupport(c)}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new u.Event("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.resize(),this._update(),this.fire(new u.Event("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(p,i,c){return!i&&c<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(p){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_render(p){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(p),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const y=this.transform.zoom,x=u.exported.now();this.style.zoomHistory.update(y,x);const E=new u.EvaluationParameters(y,{now:x,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),P=E.crossFadingFactor();P===1&&P===this._crossFadingFactor||(c=!0,this._crossFadingFactor=P),this.style.update(E)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain&&this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.updateElevation(this.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new u.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.PerformanceUtils.mark(u.PerformanceMarkers.load),this.fire(new u.Event("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.Event("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,u.PerformanceUtils.mark(u.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var p;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),B.removeThrottleControl(this._imageQueueHandle),(p=this._resizeObserver)===null||p===void 0||p.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),u.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new u.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=u.exported.frame(p=>{u.PerformanceUtils.frame(p),this._frame=null,this._render(p)}))}_onWindowOnline(){this._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}get version(){return hn}getCameraTargetElevation(){return this.transform.elevation}},NavigationControl:class{constructor(p){this.options=u.extend({},Xu,p),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(u.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(u.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const p=this._map.getZoom(),i=p===this._map.getMaxZoom(),c=p===this._map.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=c,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",c.toString())}_rotateCompassArrow(){const p=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=p}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ud(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(p,i){const c=w.create("button",p,this._container);return c.type="button",c.addEventListener("click",i),c}_setButtonTitle(p,i){const c=this._map._getUIString(`NavigationControl.${i}`);p.title=c,p.setAttribute("aria-label",c)}},GeolocateControl:class extends u.Evented{constructor(p){super(),this.options=u.extend({},cd,p),u.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(p){return this._map=p,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,c=!1){Bo===void 0||c?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(f=>{Bo=f.state!=="denied",i(Bo)}).catch(()=>{Bo=!!window.navigator.geolocation,i(Bo)}):(Bo=!!window.navigator.geolocation,i(Bo)):i(Bo)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ds=0,Ha=!1}_isOutOfMapMaxBounds(p){const i=this._map.getMaxBounds(),c=p.coords;return i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new u.Event("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.Event("geolocate",p)),this._finish()}}_updateCamera(p){const i=new u.LngLat(p.coords.longitude,p.coords.latitude),c=p.coords.accuracy,f=this._map.getBearing(),y=u.extend({bearing:f},this.options.fitBoundsOptions),x=At.fromLngLat(i,c);this._map.fitBounds(x,y,{geolocateSource:!0})}_updateMarker(p){if(p){const i=new u.LngLat(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map.getBounds(),i=p.getSouthEast(),c=p.getNorthEast(),f=i.distanceTo(c),y=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&Ha)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.Event("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._map){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",p===!1){u.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Bl(this._dotElement),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Bl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.Event("trackuserlocationend")))})}}trigger(){if(!this._setup)return u.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ds--,Ha=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let p;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ds++,Ds>1?(p={maximumAge:6e5,timeout:0},Ha=!0):(p=this.options.positionOptions,Ha=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,p)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Tt,LogoControl:$l,ScaleControl:class{constructor(p){this.options=u.extend({},hd,p),u.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Ju(this._map,this._container,this.options)}onAdd(p){return this._map=p,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",p.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(p){this.options.unit=p,Ju(this._map,this._container,this.options)}},FullscreenControl:class extends u.Evented{constructor(p={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,p&&p.container&&(p.container instanceof HTMLElement?this._container=p.container:u.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const p=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.title=p}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.Event("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new u.Event("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},TerrainControl:class{constructor(p){this.options=p,u.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(p){return this._map=p,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends u.Evented{constructor(p){super(),this.options=u.extend(Object.create(Qu),p),u.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new u.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(p){return this._lngLat=u.LngLat.convert(p),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(document.createTextNode(p))}setHTML(p){const i=document.createDocumentFragment(),c=document.createElement("body");let f;for(c.innerHTML=p;f=c.firstChild,f;)i.appendChild(f);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(p),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(p){this._container&&this._container.classList.add(p)}removeClassName(p){this._container&&this._container.classList.remove(p)}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){if(this._container)return this._container.classList.toggle(p)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(p){this._update(p.point)}_onMouseMove(p){this._update(p.point)}_onDrag(p){this._update(p.point)}_update(p){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(x=>this._container.classList.add(x)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ku(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!p))return;const i=this._pos=this._trackPointer&&p?p:this._map.project(this._lngLat);let c=this.options.anchor;const f=ec(this.options.offset);if(!c){const x=this._container.offsetWidth,E=this._container.offsetHeight;let P;P=i.y+f.bottom.y<E?["top"]:i.y>this._map.transform.height-E?["bottom"]:[],i.x<x/2?P.push("left"):i.x>this._map.transform.width-x/2&&P.push("right"),c=P.length===0?"bottom":P.join("-")}const y=i.add(f[c]).round();w.setTransform(this._container,`${Za[c]} translate(${y.x}px,${y.y}px)`),Yu(this._container,c,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(dd);p&&p.focus()}_onClose(){this.remove()}},Marker:Bl,Style:so,LngLat:u.LngLat,LngLatBounds:At,Point:u.Point,MercatorCoordinate:u.MercatorCoordinate,Evented:u.Evented,AJAXError:u.AJAXError,config:u.config,CanvasSource:$n,GeoJSONSource:Gt,ImageSource:mn,RasterDEMTileSource:bn,RasterTileSource:Mn,VectorTileSource:On,VideoSource:Ce,prewarm:function(){yn().acquire(Le)},clearPrewarmedResources:function(){const p=gn;p&&(p.isPreloaded()&&p.numActive()===1?(p.release(Le),gn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return tc},get workerCount(){return Jt.workerCount},set workerCount(p){Jt.workerCount=p},get maxParallelImageRequests(){return u.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){u.config.MAX_PARALLEL_IMAGE_REQUESTS=p},get workerUrl(){return u.config.WORKER_URL},set workerUrl(p){u.config.WORKER_URL=p},addProtocol(p,i){u.config.REGISTERED_PROTOCOLS[p]=i},removeProtocol(p){delete u.config.REGISTERED_PROTOCOLS[p]}};return Zu.extend(rc,{isSafari:u.isSafari,getPerformanceMetrics:u.PerformanceUtils.getPerformanceMetrics}),rc});var g=l;return g})})(hA);var tf=_D(hA.exports);function uU(e){return[{id:"background",type:"background",paint:{"background-color":"black"}},{id:"natural",type:"fill",source:e,"source-layer":"natural",paint:{"fill-color":"#19A974","fill-opacity":.5}},{id:"landuse",type:"fill",source:e,"source-layer":"landuse",paint:{"fill-color":"white","fill-opacity":.25}},{id:"water",type:"fill",source:e,"source-layer":"water",paint:{"fill-color":"#268bd2","fill-opacity":.5}},{id:"physical",type:"line",source:e,"source-layer":"physical",paint:{"line-color":"#357EDD","line-opacity":.5}},{id:"buildings",type:"fill",source:e,"source-layer":"buildings",paint:{"fill-color":"#6c71c4","fill-opacity":.8}},{id:"roads",type:"line",source:e,"source-layer":"roads",paint:{"line-color":"white","line-opacity":.5}},{id:"boundaries",type:"line",source:e,"source-layer":"boundaries",paint:{"line-color":"#5E2CA5","line-opacity":.5}},{id:"transit",type:"line",source:e,"source-layer":"transit",paint:{"line-color":"#dc322f","line-opacity":.5}},{id:"pois",type:"circle",source:e,"source-layer":"pois",paint:{"circle-radius":2,"circle-color":"#268bd2","circle-opacity":.9}},{id:"places",type:"circle",source:e,"source-layer":"places",paint:{"circle-radius":5,"circle-color":"#b58900","circle-opacity":.9}},{id:"mask",type:"fill",source:e,"source-layer":"mask",paint:{"fill-color":"#000000","fill-opacity":.5}}]}function cU(e,t){const r=t.hasCasings?"visible":"none";return[{id:"background",type:"background",paint:{"background-color":t.background}},{id:"earth",type:"fill",source:e,"source-layer":"earth",paint:{"fill-color":t.earth}},{id:"landuse_park",type:"fill",source:e,"source-layer":"landuse",filter:["any",["==","pmap:kind","park"],["==","landuse","cemetery"]],paint:{"fill-color":t.park}},{id:"landuse_hospital",type:"fill",source:e,"source-layer":"landuse",filter:["any",["==","pmap:kind","hospital"]],paint:{"fill-color":t.hospital}},{id:"landuse_industrial",type:"fill",source:e,"source-layer":"landuse",filter:["any",["==","pmap:kind","industrial"]],paint:{"fill-color":t.industrial}},{id:"landuse_school",type:"fill",source:e,"source-layer":"landuse",filter:["any",["==","pmap:kind","school"]],paint:{"fill-color":t.school}},{id:"natural_wood",type:"fill",source:e,"source-layer":"natural",filter:["any",["==","natural","wood"],["==","leisure","nature_reserve"],["==","landuse","forest"]],paint:{"fill-color":t.wood}},{id:"landuse_pedestrian",type:"fill",source:e,"source-layer":"landuse",filter:["any",["==","highway","footway"]],paint:{"fill-color":t.pedestrian}},{id:"natural_scrub",type:"fill",source:e,"source-layer":"natural",filter:["in","natural","scrub","grassland"],paint:{"fill-color":t.scrub}},{id:"natural_glacier",type:"fill",source:e,"source-layer":"natural",filter:["==","natural","glacier"],paint:{"fill-color":t.glacier}},{id:"natural_sand",type:"fill",source:e,"source-layer":"natural",filter:["==","natural","sand"],paint:{"fill-color":t.sand}},{id:"landuse_aerodrome",type:"fill",source:e,"source-layer":"landuse",filter:["==","aeroway","aerodrome"],paint:{"fill-color":t.aerodrome}},{id:"transit_runway",type:"line",source:e,"source-layer":"transit",filter:["has","aeroway"],paint:{"line-color":t.runway,"line-width":6}},{id:"landuse_runway",type:"fill",source:e,"source-layer":"landuse",filter:["any",["==","aeroway","runway"],["==","area:aeroway","runway"],["==","area:aeroway","taxiway"]],paint:{"fill-color":t.runway}},{id:"water",type:"fill",source:e,"source-layer":"water",paint:{"fill-color":t.water}},{id:"roads_tunnels_other_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","other"]],paint:{"line-color":t.tunnel_other_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],14,0,14.5,.5,20,12]},layout:{visibility:r}},{id:"roads_tunnels_other",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","other"]],paint:{"line-color":t.tunnel_other,"line-dasharray":[1,1],"line-width":["interpolate",["exponential",1.6],["zoom"],14,0,14.5,.5,20,12]}},{id:"roads_tunnels_minor_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":t.tunnel_minor_casing,"line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,.5,20,32],"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,1]},layout:{visibility:r}},{id:"roads_tunnels_minor",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":t.tunnel_minor,"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,.5,20,32]}},{id:"roads_tunnels_medium_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":t.tunnel_medium_casing,"line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,20,32],"line-width":["interpolate",["exponential",1.6],["zoom"],10,0,10.5,1]},layout:{visibility:r}},{id:"roads_tunnels_medium",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":t.tunnel_medium,"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,20,32]}},{id:"roads_tunnels_major_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":t.tunnel_major_casing,"line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,19,32],"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1]},layout:{visibility:r}},{id:"roads_tunnels_major",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":t.tunnel_major,"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,19,32]}},{id:"roads_tunnels_highway_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","highway"]],paint:{"line-color":t.tunnel_highway_casing,"line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,32],"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,1]},layout:{visibility:r}},{id:"roads_tunnels_highway",type:"line",source:e,"source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","highway"]],paint:{"line-color":t.tunnel_highway,"line-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,32]}},{id:"physical_line_waterway",type:"line",source:e,"source-layer":"physical_line",filter:["==",["get","pmap:kind"],"waterway"],paint:{"line-color":t.water,"line-width":.5}},{id:"buildings",type:"fill-extrusion",source:e,"source-layer":"buildings",paint:{"fill-extrusion-color":t.buildings,"fill-extrusion-height":["to-number",["get","height"]],"fill-extrusion-opacity":.5}},{id:"roads_other",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","other"]],paint:{"line-color":t.other,"line-dasharray":[2,1],"line-width":["interpolate",["exponential",1.6],["zoom"],14,0,14.5,.5,20,12]}},{id:"roads_minor_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":t.minor_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,.5,20,32],"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,1]},layout:{visibility:r}},{id:"roads_minor",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":t.minor,"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,.5,20,32]}},{id:"roads_medium_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":t.medium_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,20,32],"line-width":["interpolate",["exponential",1.6],["zoom"],10,0,10.5,1]},layout:{visibility:r}},{id:"roads_medium",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":t.medium,"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,20,32]}},{id:"roads_major_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":t.major_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,19,32],"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1]},layout:{visibility:r}},{id:"roads_major",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":t.major,"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,19,32]}},{id:"roads_highway_casing",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","highway"]],paint:{"line-color":t.highway_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,32],"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,1]},layout:{visibility:r}},{id:"roads_highway",type:"line",source:e,"source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","highway"]],paint:{"line-color":t.highway,"line-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,32]}},{id:"transit_railway",type:"line",source:e,"source-layer":"transit",filter:["all",["==","pmap:kind","railway"]],paint:{"line-color":t.railway,"line-width":2}},{id:"transit_railway_tracks",type:"line",source:e,"source-layer":"transit",filter:["all",["==","pmap:kind","railway"]],paint:{"line-color":t.railway_tracks,"line-width":.8,"line-dasharray":[6,10]}},{id:"boundaries",type:"line",source:e,"source-layer":"boundaries",paint:{"line-color":t.boundaries,"line-width":.5,"line-dasharray":[3,2]}},{id:"physical_line_waterway_label",type:"symbol",source:e,"source-layer":"physical_line",minzoom:14,layout:{"symbol-placement":"line","text-font":["NotoSans-Regular"],"text-field":["get","name"],"text-size":14,"text-letter-spacing":.3},paint:{"text-color":t.waterway_label,"text-halo-color":t.waterway_label_halo,"text-halo-width":2}},{id:"roads_bridges_other_casing",type:"line",source:e,"source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","other"]],paint:{"line-color":t.bridges_other_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],14,0,14.5,.5,20,12]},layout:{visibility:r}},{id:"roads_bridges_other",type:"line",source:e,"source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","other"]],paint:{"line-color":t.bridges_other,"line-dasharray":[2,1],"line-width":["interpolate",["exponential",1.6],["zoom"],14,0,14.5,.5,20,12]}},{id:"roads_bridges_minor_casing",type:"line",source:e,"source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":t.bridges_minor_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,.5,20,32],"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,1]},layout:{visibility:r}},{id:"roads_bridges_minor",type:"line",source:e,"source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":t.bridges_minor,"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,.5,20,32]}},{id:"roads_bridges_medium_casing",type:"line",source:e,"source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":t.bridges_medium_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,20,32],"line-width":["interpolate",["exponential",1.6],["zoom"],10,0,10.5,1]},layout:{visibility:r}},{id:"roads_bridges_medium",type:"line",source:e,"source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":t.bridges_medium,"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,20,32]}},{id:"roads_bridges_major_casing",type:"line",source:e,"source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":t.bridges_major_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,19,32],"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1]},layout:{visibility:r}},{id:"roads_bridges_major",type:"line",source:e,"source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":t.bridges_major,"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,19,32]}},{id:"roads_bridges_highway_casing",type:"line",source:e,"source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","highway"]],paint:{"line-color":t.bridges_highway_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,32],"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,1]},layout:{visibility:r}},{id:"roads_bridges_highway",type:"line",source:e,"source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","highway"]],paint:{"line-color":t.bridges_highway,"line-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,32]}},{id:"roads_labels",type:"symbol",source:e,"source-layer":"roads",layout:{"symbol-placement":"line","text-font":["NotoSans-Regular"],"text-field":["get","name"],"text-size":12},paint:{"text-color":t.roads_label,"text-halo-color":t.roads_label_halo,"text-halo-width":2}},{id:"mask",type:"fill",source:e,"source-layer":"mask",paint:{"fill-color":t.background}},{id:"physical_point_ocean",type:"symbol",source:e,"source-layer":"physical_point",filter:["any",["==","place","sea"],["==","place","ocean"]],layout:{"text-font":["NotoSans-Regular"],"text-field":["get","name"],"text-size":13,"text-letter-spacing":.1},paint:{"text-color":t.ocean_label,"text-halo-color":t.ocean_label_halo,"text-halo-width":1}},{id:"physical_point_peak",type:"symbol",source:e,"source-layer":"physical_point",filter:["any",["==","natural","peak"]],layout:{"text-font":["NotoSans-Regular"],"text-field":["get","name"],"text-size":14},paint:{"text-color":t.peak_label,"text-halo-color":t.peak_label_halo,"text-halo-width":1.5}},{id:"places_subplace",type:"symbol",source:e,"source-layer":"places",filter:["==","pmap:kind","neighbourhood"],layout:{"text-field":"{name}","text-font":["NotoSans-Regular"],"text-size":{base:1.2,stops:[[11,10],[14,12]]},"text-transform":"uppercase"},paint:{"text-color":t.subplace_label,"text-halo-color":t.subplace_label_halo,"text-halo-width":.5}},{id:"places_city_circle",type:"circle",source:e,"source-layer":"places",filter:["==","pmap:kind","city"],paint:{"circle-radius":2,"circle-stroke-width":2,"circle-stroke-color":t.city_circle_stroke,"circle-color":t.city_circle},maxzoom:8},{id:"places_city",type:"symbol",source:e,"source-layer":"places",filter:["==","pmap:kind","city"],layout:{"text-field":"{name}","text-font":["NotoSans-Bold"],"text-size":["step",["get","pmap:rank"],0,1,12,2,10],"text-variable-anchor":["bottom-left"],"text-radial-offset":.2},paint:{"text-color":t.city_label,"text-halo-color":t.city_label_halo,"text-halo-width":1}},{id:"places_state",type:"symbol",source:e,"source-layer":"places",filter:["==","pmap:kind","state"],layout:{"text-field":"{name}","text-font":["NotoSans-Regular"],"text-size":12,"text-radial-offset":.2,"text-anchor":"center","text-transform":"uppercase"},paint:{"text-color":t.state_label,"text-halo-color":t.state_label_halo,"text-halo-width":.5}},{id:"places_country",type:"symbol",source:e,"source-layer":"places",filter:["==","place","country"],layout:{"text-field":"{name}","text-font":["NotoSans-Bold"],"text-size":{base:1.2,stops:[[2,13],[6,13],[8,20]]},"text-transform":"uppercase"},paint:{"text-color":t.country_label,"text-halo-color":t.country_label_halo,"text-halo-width":1}}]}var hU={hasCasings:!0,background:"#dddddd",earth:"#e7f1ee",park:"#c2f7d1",hospital:"#ffeae8",industrial:"#f8ffed",school:"#f2fef9",wood:"#eafbe9",pedestrian:"#eef0f0",scrub:"rgb(219,239,209)",glacier:"white",sand:"#eff5e7",aerodrome:"#dbe7e7",runway:"#d1d9d9",water:"#a4cae1",tunnel_other_casing:"#ffffff",tunnel_other:"#f7f7f7",tunnel_minor_casing:"#e2e2e2",tunnel_minor:"#ebebeb",tunnel_medium_casing:"#e1e1e1",tunnel_medium:"#ebebeb",tunnel_major_casing:"#e3cfd3",tunnel_major:"#ebebeb",tunnel_highway_casing:"#ebcea2",tunnel_highway:"#ebebeb",buildings:"#cbcece",other:"#ffffff",minor_casing:"#e2e2e2",minor:"white",medium_casing:"#e1e1e1",medium:"#ffffff",major_casing:"#e3cfd3",major:"#ffffff",highway_casing:"#ebcea2",highway:"#fefffc",railway:"#b3bcc9",railway_tracks:"#ffffff",boundaries:"#5c4a6b",waterway_label_halo:"white",waterway_label:"#a4cae1",bridges_other_casing:"#ffffff",bridges_other:"#ffffff",bridges_minor_casing:"#e2e2e2",bridges_minor:"white",bridges_medium_casing:"#e1e1e1",bridges_medium:"#ffffff",bridges_major_casing:"#e3cfd3",bridges_major:"#ffffff",bridges_highway_casing:"#ebcea2",bridges_highway:"#fefffc",roads_label:"#91888b",roads_label_halo:"white",ocean_label:"white",ocean_label_halo:"#a4cae1",peak_label:"#61bb5b",peak_label_halo:"#ffffff",subplace_label:"#757d91",subplace_label_halo:"white",city_circle:"#666666",city_circle_stroke:"white",city_label:"#787878",city_label_halo:"white",state_label:"#bdbdbd",state_label_halo:"White",country_label:"#9590aa",country_label_halo:"white"},dU={hasCasings:!0,background:"#dddddd",earth:"#151515",park:"#1d3e2e",hospital:"#2e2226",industrial:"#20201e",school:"#193a3c",wood:"#212e25",pedestrian:"#1a1a1a",scrub:"#27362a",glacier:"#1c1c1c",sand:"#374238",aerodrome:"#000000",runway:"#000000",water:"#1e293b",tunnel_other_casing:"#ffffff",tunnel_other:"#000000",tunnel_minor_casing:"#ffffff",tunnel_minor:"#000000",tunnel_medium_casing:"#ffffff",tunnel_medium:"#000000",tunnel_major_casing:"#ffffff",tunnel_major:"#000000",tunnel_highway_casing:"#ffffff",tunnel_highway:"#000000",buildings:"#393f43",other:"#000000",minor_casing:"#222222",minor:"#000000",medium_casing:"#222222",medium:"#282828",major_casing:"#222222",major:"#2f2f2f",highway_casing:"#222222",highway:"#3b3b3b",railway:"#bbbbbb",railway_tracks:"#000000",boundaries:"#6b1001",waterway_label_halo:"#000000",waterway_label:"#ffffff",bridges_other_casing:"#ffffff",bridges_other:"#000000",bridges_minor_casing:"#ffffff",bridges_minor:"#000000",bridges_medium_casing:"#ffffff",bridges_medium:"#000000",bridges_major_casing:"#ffffff",bridges_major:"#000000",bridges_highway_casing:"#ffffff",bridges_highway:"#000000",roads_label:"#7a7a7a",roads_label_halo:"#000000",ocean_label:"#ffffff",ocean_label_halo:"#000000",peak_label:"#ffffff",peak_label_halo:"#000000",subplace_label:"#8e8e8e",subplace_label_halo:"#000000",city_circle:"#ffffff",city_circle_stroke:"#000000",city_label:"#ffffff",city_label_halo:"#000000",state_label:"#ffffff",state_label_halo:"#000000",country_label:"#ffffff",country_label_halo:"#000000"},fU={hasCasings:!1,background:"#fff",earth:"#fff",park:"#fafafa",hospital:"#fafafa",industrial:"#fafafa",school:"#fafafa",wood:"#fafafa",pedestrian:"#fafafa",scrub:"#fafafa",glacier:"#ffffff",sand:"#eee",aerodrome:"#eee",runway:"#eee",water:"#eeeeee",tunnel_other_casing:"#ff00ff",tunnel_other:"#c8c8c8",tunnel_minor_casing:"#ff00ff",tunnel_minor:"#c8c8c8",tunnel_medium_casing:"#ff00ff",tunnel_medium:"#c8c8c8",tunnel_major_casing:"#ff00ff",tunnel_major:"#c8c8c8",tunnel_highway_casing:"#ff00ff",tunnel_highway:"#c8c8c8",buildings:"#ffffff",other:"#c8c8c8",minor_casing:"#ff00ff",minor:"#c8c8c8",medium_casing:"#ff00ff",medium:"#c8c8c8",major_casing:"#ff00ff",major:"#c8c8c8",highway_casing:"#ff00ff",highway:"#c8c8c8",railway:"#eee",railway_tracks:"#ffffff",boundaries:"#000000",waterway_label_halo:"#ffffff",waterway_label:"#000000",bridges_other_casing:"#ff00ff",bridges_other:"#c8c8c8",bridges_minor_casing:"#ff00ff",bridges_minor:"#c8c8c8",bridges_medium_casing:"#ff00ff",bridges_medium:"#c8c8c8",bridges_major_casing:"#ff00ff",bridges_major:"#c8c8c8",bridges_highway_casing:"#ff00ff",bridges_highway:"#ffffff",roads_label:"#888",roads_label_halo:"#ffffff",ocean_label:"#aaa",ocean_label_halo:"#ffffff",peak_label:"#888",peak_label_halo:"#ffffff",subplace_label:"#888",subplace_label_halo:"#ffffff",city_circle:"#aaa",city_circle_stroke:"#ffffff",city_label:"#888",city_label_halo:"#ffffff",state_label:"#999",state_label_halo:"#ffffff",country_label:"#bbb",country_label_halo:"#ffffff"},pU={hasCasings:!1,background:"#000000",earth:"#000000",park:"#060606",hospital:"#060606",industrial:"#060606",school:"#060606",wood:"#060606",pedestrian:"#060606",scrub:"#060606",glacier:"#060606",sand:"#060606",aerodrome:"#060606",runway:"#060606",water:"#333",tunnel_other_casing:"#ff00ff",tunnel_other:"#222",tunnel_minor_casing:"#ff00ff",tunnel_minor:"#222",tunnel_medium_casing:"#ff00ff",tunnel_medium:"#222",tunnel_major_casing:"#ff00ff",tunnel_major:"#222",tunnel_highway_casing:"#ff00ff",tunnel_highway:"#222",buildings:"#101010",other:"#000000",minor_casing:"#ff00ff",minor:"#222",medium_casing:"#ff00ff",medium:"#222",major_casing:"#ff00ff",major:"#222",highway_casing:"#ff00ff",highway:"#222",railway:"#121212",railway_tracks:"#121212",boundaries:"#555",waterway_label_halo:"#333",waterway_label:"#888",bridges_other_casing:"#ff00ff",bridges_other:"#222",bridges_minor_casing:"#ff00ff",bridges_minor:"#222",bridges_medium_casing:"#ff00ff",bridges_medium:"#222",bridges_major_casing:"#ff00ff",bridges_major:"#222",bridges_highway_casing:"#ff00ff",bridges_highway:"#222",roads_label:"#666",roads_label_halo:"#000",ocean_label:"#666",ocean_label_halo:"#333",peak_label:"#777",peak_label_halo:"#000000",subplace_label:"#777",subplace_label_halo:"#000000",city_circle:"#777",city_circle_stroke:"#000000",city_label:"#777",city_label_halo:"#000000",state_label:"#555",state_label_halo:"#000000",country_label:"#555",country_label_halo:"#000000"},mU={hasCasings:!1,background:"#eee",earth:"#eee",park:"#e8e8e8",hospital:"#e8e8e8",industrial:"#e8e8e8",school:"#e8e8e8",wood:"#e8e8e8",pedestrian:"#e8e8e8",scrub:"#e8e8e8",glacier:"#e8e8e8",sand:"#e8e8e8",aerodrome:"#e8e8e8",runway:"#e8e8e8",water:"#ddd",tunnel_other_casing:"#ff00ff",tunnel_other:"#ffffff",tunnel_minor_casing:"#ff00ff",tunnel_minor:"#ffffff",tunnel_medium_casing:"#ff00ff",tunnel_medium:"#ffffff",tunnel_major_casing:"#ff00ff",tunnel_major:"#ffffff",tunnel_highway_casing:"#ff00ff",tunnel_highway:"#ffffff",buildings:"#ffffff",other:"#fff",minor_casing:"#ff00ff",minor:"#fff",medium_casing:"#ff00ff",medium:"#fff",major_casing:"#ff00ff",major:"#fff",highway_casing:"#ff00ff",highway:"#fff",railway:"#fff",railway_tracks:"#eee",boundaries:"#666",waterway_label_halo:"#bbbbbb",waterway_label:"#ffffff",bridges_other_casing:"#ff00ff",bridges_other:"#ffffff",bridges_minor_casing:"#ff00ff",bridges_minor:"#ffffff",bridges_medium_casing:"#ff00ff",bridges_medium:"#ffffff",bridges_major_casing:"#ff00ff",bridges_major:"#ffffff",bridges_highway_casing:"#ff00ff",bridges_highway:"#ffffff",roads_label:"#888",roads_label_halo:"#ffffff",ocean_label:"#666",ocean_label_halo:"#ffffff",peak_label:"#000000",peak_label_halo:"#ffffff",subplace_label:"#888",subplace_label_halo:"#ffffff",city_circle:"#666",city_circle_stroke:"#ffffff",city_label:"#888",city_label_halo:"#ffffff",state_label:"#888",state_label_halo:"#ffffff",country_label:"#888",country_label_halo:"#ffffff"},gU={light:hU,dark:dU,white:fU,black:pU,grayscale:mU};function fA(e,t){return t=="debug"?uU(e):cU(e,gU[t])}const UT=0,jT=0,GT=0;tf.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",()=>{},!0);const yU=dr("div",{height:"calc(100vh - $4 - $4)"}),_U=dr("div",{color:"black"}),vU=dr("div",{marginBottom:"0.5em","&:not(:last-of-type)":{borderBottom:"1px solid black"}}),xU=dr("div",{position:"absolute",top:"10px",right:"10px",width:40,height:40,backgroundColor:"#444",cursor:"pointer",zIndex:9999}),wU=dr("div",{position:"absolute",backgroundColor:"#444",top:"50px",right:"10px",padding:"$1",zIndex:9999}),Py=dr("label",{display:"flex",gap:6,cursor:"pointer"}),bU=dr("ul",{listStyleType:"none"}),SU=e=>Oe(_U,{children:e.features.map((t,r)=>Pt(vU,{children:[Pt("span",{children:[Oe("strong",{children:t.layer["source-layer"]}),Pt("span",{style:{fontSize:"0.8em"},children:[" (",t.geometry.type,")"]})]}),Oe("table",{children:Object.entries(t.properties).map(([o,l],h)=>Pt("tr",{children:[Oe("td",{children:o}),Oe("td",{children:l})]},h))})]},r))}),EU=e=>{const{layers:t,onChange:r}=e,o=W.exports.useRef(null),l=t.filter(b=>b.visible).length,h=l>0&&l!==t.length;if(W.exports.useEffect(()=>{o.current&&(o.current.indeterminate=h)},[h]),!e.layers.length)return Pt(Bf,{children:[Oe("h4",{children:"Layers"}),Oe("span",{children:"No vector layers found"})]});const g=()=>{const b=l!==t.length,w=t.map(T=>({...T,visible:b}));r(w)},u=b=>{const w=b.target.getAttribute("data-layer-id"),T=t.map(I=>I.id===w?{...I,visible:!I.visible}:I);r(T)};return Pt(Bf,{children:[Oe("h4",{children:"Layers"}),Pt(Py,{children:[Oe("input",{ref:o,type:"checkbox",checked:l===t.length,onChange:g}),Oe("em",{children:"All layers"})]}),Oe(bU,{children:e.layers.map(({id:b,visible:w})=>Oe("li",{children:Pt(Py,{style:{paddingLeft:8},children:[Oe("input",{type:"checkbox",checked:w,onChange:u,"data-layer-id":b}),b]})},b))})]})},kU=async e=>{let t=await e.getHeader(),r=await e.getMetadata(),o=[];return r.type!=="baselayer"&&(o=fA("basemap","black"),o[0].paint["background-color"]="black"),o.push({id:"raster",type:"raster",source:"source"}),{version:8,sources:{source:{type:"raster",tiles:["pmtiles://"+e.source.getKey()+"/{z}/{x}/{y}"],minzoom:t.minZoom,maxzoom:t.maxZoom},basemap:{type:"vector",tiles:["https://api.protomaps.com/tiles/v2/{z}/{x}/{y}.pbf?key=1003762824b9687f"],maxzoom:14}},glyphs:"https://cdn.protomaps.com/fonts/pbf/{fontstack}/{range}.pbf",layers:o}},TU=async e=>{let t=await e.getHeader(),r=await e.getMetadata(),o=[];r.type!=="baselayer"&&(o=fA("basemap","black"),o[0].paint["background-color"]="black");var l;if(r.json){let g=JSON.parse(r.json);g.tilestats,l=g.vector_layers}else r.tilestats,l=r.vector_layers;if(l)for(let[g,u]of l.entries())o.push({id:u.id+"_fill",type:"fill",source:"source","source-layer":u.id,paint:{"fill-color":mg[g%12],"fill-opacity":["case",["boolean",["feature-state","hover"],!1],.35,.2],"fill-outline-color":["case",["boolean",["feature-state","hover"],!1],"hsl(0,100%,90%)","rgba(0,0,0,0)"]},filter:["==",["geometry-type"],"Polygon"]}),o.push({id:u.id+"_stroke",type:"line",source:"source","source-layer":u.id,paint:{"line-color":mg[g%12],"line-width":["case",["boolean",["feature-state","hover"],!1],2,.5]},filter:["==",["geometry-type"],"LineString"]}),o.push({id:u.id+"_point",type:"circle",source:"source","source-layer":u.id,paint:{"circle-color":mg[g%12],"circle-radius":["case",["boolean",["feature-state","hover"],!1],6,5]},filter:["==",["geometry-type"],"Point"]});for(let g of o)g["source-layer"]==="mask"&&g.type==="fill"&&(g.paint["fill-color"]="black",g.paint["fill-opacity"]=.8);const h=[t.minLon,t.minLat,t.maxLon,t.maxLat];return{style:{version:8,sources:{source:{type:"vector",tiles:["pmtiles://"+e.source.getKey()+"/{z}/{x}/{y}"],minzoom:t.minZoom,maxzoom:t.maxZoom,bounds:h},basemap:{type:"vector",tiles:["https://api.protomaps.com/tiles/v2/{z}/{x}/{y}.pbf?key=1003762824b9687f"],maxzoom:14,bounds:h}},glyphs:"https://cdn.protomaps.com/fonts/pbf/{fontstack}/{range}.pbf",layers:o},layersVisibility:l.map(g=>({id:g.id,visible:!0}))}};function CU(e){let t=W.exports.useRef(null),[r,o]=W.exports.useState(!0),[l,h]=W.exports.useState(!1),[g,u]=W.exports.useState(!1),[b,w]=W.exports.useState([]);const T=W.exports.useRef(null),I=W.exports.useRef(new Set),z=W.exports.useRef(l);W.exports.useEffect(()=>{z.current=l},[l]);const j=()=>{o(!r)},Z=()=>{h(!l),T.current.getCanvas().style.cursor=l?"":"crosshair"},H=()=>{u(!g),T.current.showTileBoundaries=!g},le=$=>{w($);const B=T.current;for(const{id:X,visible:ue}of $){const ce=ue?"visible":"none";B.setLayoutProperty(`${X}_fill`,"visibility",ce),B.setLayoutProperty(`${X}_stroke`,"visibility",ce),B.setLayoutProperty(`${X}_point`,"visibility",ce)}};return W.exports.useEffect(()=>{let $=new aF;tf.addProtocol("pmtiles",$.tile),$.add(e.file);const B=new tf.Map({container:t.current,hash:"map",zoom:UT,center:[jT,GT],style:{version:8,sources:{},layers:[]}});B.addControl(new tf.NavigationControl({}),"bottom-left"),B.on("load",B.resize);const X=new tf.Popup({closeButton:!1,closeOnClick:!1,maxWidth:"none"});return T.current=B,B.on("mousemove",ue=>{const ce=I.current;for(const Be of ce)B.setFeatureState(Be,{hover:!1}),ce.delete(Be);if(!z.current){X.remove();return}const{x:me,y:ge}=ue.point,xe=2;var je=B.queryRenderedFeatures([[me-xe,ge-xe],[me+xe,ge+xe]]);je=je.filter(Be=>Be.source==="source");for(const Be of je)B.setFeatureState(Be,{hover:!0}),ce.add(Be);let ke=lU(Oe(SU,{features:je}));je.length?(X.setHTML(ke),X.setLngLat(ue.lngLat),X.addTo(B)):X.remove()}),()=>{B.remove()}},[]),W.exports.useEffect(()=>{(async()=>{if(T.current){let B=T.current,X=await e.file.getHeader();if(B.getCenter().lng===jT&&B.getCenter().lat==GT&&B.getZoom()===UT&&B.fitBounds([[X.minLon,X.minLat],[X.maxLon,X.maxLat]],{animate:!1}),X.tileType===lu.Png||X.tileType===lu.Webp||X.tileType==lu.Jpeg){let ue=await kU(e.file);B.setStyle(ue)}else{let{style:ue,layersVisibility:ce}=await TU(e.file);B.setStyle(ue),w(ce)}}})()},[]),Pt(yU,{ref:t,children:[Oe("div",{ref:t}),Oe(xU,{onClick:j,children:"menu"}),r?Pt(wU,{children:[Oe("h4",{children:"Filter"}),Oe("h4",{children:"Popup"}),Pt(Py,{children:[Oe("input",{type:"checkbox",checked:l,onChange:Z}),"show attributes"]}),Oe("h4",{children:"Tiles"}),Pt(Py,{children:[Oe("input",{type:"checkbox",checked:g,onChange:H}),"show tile boundaries"]}),Oe(EU,{layers:b,onChange:le})]}):null]})}function PU(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function IU(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var MU=function(){function e(r){var o=this;this._insertTag=function(l){var h;o.tags.length===0?o.insertionPoint?h=o.insertionPoint.nextSibling:o.prepend?h=o.container.firstChild:h=o.before:h=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(l,h),o.tags.push(l)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(o){o.forEach(this._insertTag)},t.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(IU(this));var l=this.tags[this.tags.length-1];if(this.isSpeedy){var h=PU(l);try{h.insertRule(o,h.cssRules.length)}catch{}}else l.appendChild(document.createTextNode(o));this.ctr++},t.flush=function(){this.tags.forEach(function(o){return o.parentNode&&o.parentNode.removeChild(o)}),this.tags=[],this.ctr=0},e}(),xi="-ms-",Iy="-moz-",_r="-webkit-",pA="comm",pb="rule",mb="decl",AU="@import",mA="@keyframes",zU=Math.abs,a0=String.fromCharCode,DU=Object.assign;function RU(e,t){return ni(e,0)^45?(((t<<2^ni(e,0))<<2^ni(e,1))<<2^ni(e,2))<<2^ni(e,3):0}function gA(e){return e.trim()}function LU(e,t){return(e=t.exec(e))?e[0]:e}function br(e,t,r){return e.replace(t,r)}function Ax(e,t){return e.indexOf(t)}function ni(e,t){return e.charCodeAt(t)|0}function Gf(e,t,r){return e.slice(t,r)}function Aa(e){return e.length}function gb(e){return e.length}function Xm(e,t){return t.push(e),e}function FU(e,t){return e.map(t).join("")}var s0=1,fh=1,yA=0,ao=0,Pn=0,Th="";function l0(e,t,r,o,l,h,g){return{value:e,root:t,parent:r,type:o,props:l,children:h,line:s0,column:fh,length:g,return:""}}function jd(e,t){return DU(l0("",null,null,"",null,null,0),e,{length:-e.length},t)}function OU(){return Pn}function $U(){return Pn=ao>0?ni(Th,--ao):0,fh--,Pn===10&&(fh=1,s0--),Pn}function Co(){return Pn=ao<yA?ni(Th,ao++):0,fh++,Pn===10&&(fh=1,s0++),Pn}function Va(){return ni(Th,ao)}function Cg(){return ao}function sp(e,t){return Gf(Th,e,t)}function Wf(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function _A(e){return s0=fh=1,yA=Aa(Th=e),ao=0,[]}function vA(e){return Th="",e}function Pg(e){return gA(sp(ao-1,zx(e===91?e+2:e===40?e+1:e)))}function BU(e){for(;(Pn=Va())&&Pn<33;)Co();return Wf(e)>2||Wf(Pn)>3?"":" "}function VU(e,t){for(;--t&&Co()&&!(Pn<48||Pn>102||Pn>57&&Pn<65||Pn>70&&Pn<97););return sp(e,Cg()+(t<6&&Va()==32&&Co()==32))}function zx(e){for(;Co();)switch(Pn){case e:return ao;case 34:case 39:e!==34&&e!==39&&zx(Pn);break;case 40:e===41&&zx(e);break;case 92:Co();break}return ao}function NU(e,t){for(;Co()&&e+Pn!==47+10;)if(e+Pn===42+42&&Va()===47)break;return"/*"+sp(t,ao-1)+"*"+a0(e===47?e:Co())}function UU(e){for(;!Wf(Va());)Co();return sp(e,ao)}function jU(e){return vA(Ig("",null,null,null,[""],e=_A(e),0,[0],e))}function Ig(e,t,r,o,l,h,g,u,b){for(var w=0,T=0,I=g,z=0,j=0,Z=0,H=1,le=1,$=1,B=0,X="",ue=l,ce=h,me=o,ge=X;le;)switch(Z=B,B=Co()){case 40:if(Z!=108&&ni(ge,I-1)==58){Ax(ge+=br(Pg(B),"&","&\f"),"&\f")!=-1&&($=-1);break}case 34:case 39:case 91:ge+=Pg(B);break;case 9:case 10:case 13:case 32:ge+=BU(Z);break;case 92:ge+=VU(Cg()-1,7);continue;case 47:switch(Va()){case 42:case 47:Xm(GU(NU(Co(),Cg()),t,r),b);break;default:ge+="/"}break;case 123*H:u[w++]=Aa(ge)*$;case 125*H:case 59:case 0:switch(B){case 0:case 125:le=0;case 59+T:j>0&&Aa(ge)-I&&Xm(j>32?qT(ge+";",o,r,I-1):qT(br(ge," ","")+";",o,r,I-2),b);break;case 59:ge+=";";default:if(Xm(me=WT(ge,t,r,w,T,l,u,X,ue=[],ce=[],I),h),B===123)if(T===0)Ig(ge,t,me,me,ue,h,I,u,ce);else switch(z===99&&ni(ge,3)===110?100:z){case 100:case 109:case 115:Ig(e,me,me,o&&Xm(WT(e,me,me,0,0,l,u,X,l,ue=[],I),ce),l,ce,I,u,o?ue:ce);break;default:Ig(ge,me,me,me,[""],ce,0,u,ce)}}w=T=j=0,H=$=1,X=ge="",I=g;break;case 58:I=1+Aa(ge),j=Z;default:if(H<1){if(B==123)--H;else if(B==125&&H++==0&&$U()==125)continue}switch(ge+=a0(B),B*H){case 38:$=T>0?1:(ge+="\f",-1);break;case 44:u[w++]=(Aa(ge)-1)*$,$=1;break;case 64:Va()===45&&(ge+=Pg(Co())),z=Va(),T=I=Aa(X=ge+=UU(Cg())),B++;break;case 45:Z===45&&Aa(ge)==2&&(H=0)}}return h}function WT(e,t,r,o,l,h,g,u,b,w,T){for(var I=l-1,z=l===0?h:[""],j=gb(z),Z=0,H=0,le=0;Z<o;++Z)for(var $=0,B=Gf(e,I+1,I=zU(H=g[Z])),X=e;$<j;++$)(X=gA(H>0?z[$]+" "+B:br(B,/&\f/g,z[$])))&&(b[le++]=X);return l0(e,t,r,l===0?pb:u,b,w,T)}function GU(e,t,r){return l0(e,t,r,pA,a0(OU()),Gf(e,2,-2),0)}function qT(e,t,r,o){return l0(e,t,r,mb,Gf(e,0,o),Gf(e,o+1,-1),o)}function eh(e,t){for(var r="",o=gb(e),l=0;l<o;l++)r+=t(e[l],l,e,t)||"";return r}function WU(e,t,r,o){switch(e.type){case AU:case mb:return e.return=e.return||e.value;case pA:return"";case mA:return e.return=e.value+"{"+eh(e.children,o)+"}";case pb:e.value=e.props.join(",")}return Aa(r=eh(e.children,o))?e.return=e.value+"{"+r+"}":""}function qU(e){var t=gb(e);return function(r,o,l,h){for(var g="",u=0;u<t;u++)g+=e[u](r,o,l,h)||"";return g}}function ZU(e){return function(t){t.root||(t=t.return)&&e(t)}}function xA(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var HU=function(t,r,o){for(var l=0,h=0;l=h,h=Va(),l===38&&h===12&&(r[o]=1),!Wf(h);)Co();return sp(t,ao)},XU=function(t,r){var o=-1,l=44;do switch(Wf(l)){case 0:l===38&&Va()===12&&(r[o]=1),t[o]+=HU(ao-1,r,o);break;case 2:t[o]+=Pg(l);break;case 4:if(l===44){t[++o]=Va()===58?"&\f":"",r[o]=t[o].length;break}default:t[o]+=a0(l)}while(l=Co());return t},KU=function(t,r){return vA(XU(_A(t),r))},ZT=new WeakMap,YU=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,o=t.parent,l=t.column===o.column&&t.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!ZT.get(o))&&!l){ZT.set(t,!0);for(var h=[],g=KU(r,h),u=o.props,b=0,w=0;b<g.length;b++)for(var T=0;T<u.length;T++,w++)t.props[w]=h[b]?g[b].replace(/&\f/g,u[T]):u[T]+" "+g[b]}}},JU=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function wA(e,t){switch(RU(e,t)){case 5103:return _r+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return _r+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return _r+e+Iy+e+xi+e+e;case 6828:case 4268:return _r+e+xi+e+e;case 6165:return _r+e+xi+"flex-"+e+e;case 5187:return _r+e+br(e,/(\w+).+(:[^]+)/,_r+"box-$1$2"+xi+"flex-$1$2")+e;case 5443:return _r+e+xi+"flex-item-"+br(e,/flex-|-self/,"")+e;case 4675:return _r+e+xi+"flex-line-pack"+br(e,/align-content|flex-|-self/,"")+e;case 5548:return _r+e+xi+br(e,"shrink","negative")+e;case 5292:return _r+e+xi+br(e,"basis","preferred-size")+e;case 6060:return _r+"box-"+br(e,"-grow","")+_r+e+xi+br(e,"grow","positive")+e;case 4554:return _r+br(e,/([^-])(transform)/g,"$1"+_r+"$2")+e;case 6187:return br(br(br(e,/(zoom-|grab)/,_r+"$1"),/(image-set)/,_r+"$1"),e,"")+e;case 5495:case 3959:return br(e,/(image-set\([^]*)/,_r+"$1$`$1");case 4968:return br(br(e,/(.+:)(flex-)?(.*)/,_r+"box-pack:$3"+xi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+_r+e+e;case 4095:case 3583:case 4068:case 2532:return br(e,/(.+)-inline(.+)/,_r+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Aa(e)-1-t>6)switch(ni(e,t+1)){case 109:if(ni(e,t+4)!==45)break;case 102:return br(e,/(.+:)(.+)-([^]+)/,"$1"+_r+"$2-$3$1"+Iy+(ni(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Ax(e,"stretch")?wA(br(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ni(e,t+1)!==115)break;case 6444:switch(ni(e,Aa(e)-3-(~Ax(e,"!important")&&10))){case 107:return br(e,":",":"+_r)+e;case 101:return br(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+_r+(ni(e,14)===45?"inline-":"")+"box$3$1"+_r+"$2$3$1"+xi+"$2box$3")+e}break;case 5936:switch(ni(e,t+11)){case 114:return _r+e+xi+br(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return _r+e+xi+br(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return _r+e+xi+br(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return _r+e+xi+e+e}return e}var QU=function(t,r,o,l){if(t.length>-1&&!t.return)switch(t.type){case mb:t.return=wA(t.value,t.length);break;case mA:return eh([jd(t,{value:br(t.value,"@","@"+_r)})],l);case pb:if(t.length)return FU(t.props,function(h){switch(LU(h,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return eh([jd(t,{props:[br(h,/:(read-\w+)/,":"+Iy+"$1")]})],l);case"::placeholder":return eh([jd(t,{props:[br(h,/:(plac\w+)/,":"+_r+"input-$1")]}),jd(t,{props:[br(h,/:(plac\w+)/,":"+Iy+"$1")]}),jd(t,{props:[br(h,/:(plac\w+)/,xi+"input-$1")]})],l)}return""})}},e9=[QU],t9=function(t){var r=t.key;if(r==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(H){var le=H.getAttribute("data-emotion");le.indexOf(" ")!==-1&&(document.head.appendChild(H),H.setAttribute("data-s",""))})}var l=t.stylisPlugins||e9,h={},g,u=[];g=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(H){for(var le=H.getAttribute("data-emotion").split(" "),$=1;$<le.length;$++)h[le[$]]=!0;u.push(H)});var b,w=[YU,JU];{var T,I=[WU,ZU(function(H){T.insert(H)})],z=qU(w.concat(l,I)),j=function(le){return eh(jU(le),z)};b=function(le,$,B,X){T=B,j(le?le+"{"+$.styles+"}":$.styles),X&&(Z.inserted[$.name]=!0)}}var Z={key:r,sheet:new MU({key:r,container:g,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:h,registered:{},insert:b};return Z.sheet.hydrate(u),Z},bA={exports:{}},kr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xn=typeof Symbol=="function"&&Symbol.for,yb=Xn?Symbol.for("react.element"):60103,_b=Xn?Symbol.for("react.portal"):60106,u0=Xn?Symbol.for("react.fragment"):60107,c0=Xn?Symbol.for("react.strict_mode"):60108,h0=Xn?Symbol.for("react.profiler"):60114,d0=Xn?Symbol.for("react.provider"):60109,f0=Xn?Symbol.for("react.context"):60110,vb=Xn?Symbol.for("react.async_mode"):60111,p0=Xn?Symbol.for("react.concurrent_mode"):60111,m0=Xn?Symbol.for("react.forward_ref"):60112,g0=Xn?Symbol.for("react.suspense"):60113,r9=Xn?Symbol.for("react.suspense_list"):60120,y0=Xn?Symbol.for("react.memo"):60115,_0=Xn?Symbol.for("react.lazy"):60116,n9=Xn?Symbol.for("react.block"):60121,i9=Xn?Symbol.for("react.fundamental"):60117,o9=Xn?Symbol.for("react.responder"):60118,a9=Xn?Symbol.for("react.scope"):60119;function Do(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case yb:switch(e=e.type,e){case vb:case p0:case u0:case h0:case c0:case g0:return e;default:switch(e=e&&e.$$typeof,e){case f0:case m0:case _0:case y0:case d0:return e;default:return t}}case _b:return t}}}function SA(e){return Do(e)===p0}kr.AsyncMode=vb;kr.ConcurrentMode=p0;kr.ContextConsumer=f0;kr.ContextProvider=d0;kr.Element=yb;kr.ForwardRef=m0;kr.Fragment=u0;kr.Lazy=_0;kr.Memo=y0;kr.Portal=_b;kr.Profiler=h0;kr.StrictMode=c0;kr.Suspense=g0;kr.isAsyncMode=function(e){return SA(e)||Do(e)===vb};kr.isConcurrentMode=SA;kr.isContextConsumer=function(e){return Do(e)===f0};kr.isContextProvider=function(e){return Do(e)===d0};kr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===yb};kr.isForwardRef=function(e){return Do(e)===m0};kr.isFragment=function(e){return Do(e)===u0};kr.isLazy=function(e){return Do(e)===_0};kr.isMemo=function(e){return Do(e)===y0};kr.isPortal=function(e){return Do(e)===_b};kr.isProfiler=function(e){return Do(e)===h0};kr.isStrictMode=function(e){return Do(e)===c0};kr.isSuspense=function(e){return Do(e)===g0};kr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===u0||e===p0||e===h0||e===c0||e===g0||e===r9||typeof e=="object"&&e!==null&&(e.$$typeof===_0||e.$$typeof===y0||e.$$typeof===d0||e.$$typeof===f0||e.$$typeof===m0||e.$$typeof===i9||e.$$typeof===o9||e.$$typeof===a9||e.$$typeof===n9)};kr.typeOf=Do;bA.exports=kr;var EA=bA.exports,s9={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l9={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},kA={};kA[EA.ForwardRef]=s9;kA[EA.Memo]=l9;var u9=!0;function TA(e,t,r){var o="";return r.split(" ").forEach(function(l){e[l]!==void 0?t.push(e[l]+";"):o+=l+" "}),o}var xb=function(t,r,o){var l=t.key+"-"+r.name;(o===!1||u9===!1)&&t.registered[l]===void 0&&(t.registered[l]=r.styles)},wb=function(t,r,o){xb(t,r,o);var l=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var h=r;do t.insert(r===h?"."+l:"",h,t.sheet,!0),h=h.next;while(h!==void 0)}};function c9(e){for(var t=0,r,o=0,l=e.length;l>=4;++o,l-=4)r=e.charCodeAt(o)&255|(e.charCodeAt(++o)&255)<<8|(e.charCodeAt(++o)&255)<<16|(e.charCodeAt(++o)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(l){case 3:t^=(e.charCodeAt(o+2)&255)<<16;case 2:t^=(e.charCodeAt(o+1)&255)<<8;case 1:t^=e.charCodeAt(o)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var h9={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},d9=/[A-Z]|^ms/g,f9=/_EMO_([^_]+?)_([^]*?)_EMO_/g,CA=function(t){return t.charCodeAt(1)===45},HT=function(t){return t!=null&&typeof t!="boolean"},zv=xA(function(e){return CA(e)?e:e.replace(d9,"-$&").toLowerCase()}),XT=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(f9,function(o,l,h){return za={name:l,styles:h,next:za},l})}return h9[t]!==1&&!CA(t)&&typeof r=="number"&&r!==0?r+"px":r};function qf(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return za={name:r.name,styles:r.styles,next:za},r.name;if(r.styles!==void 0){var o=r.next;if(o!==void 0)for(;o!==void 0;)za={name:o.name,styles:o.styles,next:za},o=o.next;var l=r.styles+";";return l}return p9(e,t,r)}case"function":{if(e!==void 0){var h=za,g=r(e);return za=h,qf(e,t,g)}break}}if(t==null)return r;var u=t[r];return u!==void 0?u:r}function p9(e,t,r){var o="";if(Array.isArray(r))for(var l=0;l<r.length;l++)o+=qf(e,t,r[l])+";";else for(var h in r){var g=r[h];if(typeof g!="object")t!=null&&t[g]!==void 0?o+=h+"{"+t[g]+"}":HT(g)&&(o+=zv(h)+":"+XT(h,g)+";");else if(Array.isArray(g)&&typeof g[0]=="string"&&(t==null||t[g[0]]===void 0))for(var u=0;u<g.length;u++)HT(g[u])&&(o+=zv(h)+":"+XT(h,g[u])+";");else{var b=qf(e,t,g);switch(h){case"animation":case"animationName":{o+=zv(h)+":"+b+";";break}default:o+=h+"{"+b+"}"}}}return o}var KT=/label:\s*([^\s;\n{]+)\s*(;|$)/g,za,bb=function(t,r,o){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var l=!0,h="";za=void 0;var g=t[0];g==null||g.raw===void 0?(l=!1,h+=qf(o,r,g)):h+=g[0];for(var u=1;u<t.length;u++)h+=qf(o,r,t[u]),l&&(h+=g[u]);KT.lastIndex=0;for(var b="",w;(w=KT.exec(h))!==null;)b+="-"+w[1];var T=c9(h)+b;return{name:T,styles:h,next:za}},m9=function(t){return t()},PA=Yv["useInsertionEffect"]?Yv["useInsertionEffect"]:!1,IA=PA||m9,YT=PA||W.exports.useLayoutEffect,v0={}.hasOwnProperty,MA=W.exports.createContext(typeof HTMLElement!="undefined"?t9({key:"css"}):null);MA.Provider;var Sb=function(t){return W.exports.forwardRef(function(r,o){var l=W.exports.useContext(MA);return t(r,l,o)})},x0=W.exports.createContext({}),Dx="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",AA=function(t,r){var o={};for(var l in r)v0.call(r,l)&&(o[l]=r[l]);return o[Dx]=t,o},g9=function(t){var r=t.cache,o=t.serialized,l=t.isStringTag;return xb(r,o,l),IA(function(){return wb(r,o,l)}),null},zA=Sb(function(e,t,r){var o=e.css;typeof o=="string"&&t.registered[o]!==void 0&&(o=t.registered[o]);var l=e[Dx],h=[o],g="";typeof e.className=="string"?g=TA(t.registered,h,e.className):e.className!=null&&(g=e.className+" ");var u=bb(h,void 0,W.exports.useContext(x0));g+=t.key+"-"+u.name;var b={};for(var w in e)v0.call(e,w)&&w!=="css"&&w!==Dx&&(b[w]=e[w]);return b.ref=r,b.className=g,W.exports.createElement(W.exports.Fragment,null,W.exports.createElement(g9,{cache:t,serialized:u,isStringTag:typeof l=="string"}),W.exports.createElement(l,b))}),So=Bf;function St(e,t,r){return v0.call(t,"css")?Oe(zA,AA(e,t),r):Oe(e,t,r)}function Oi(e,t,r){return v0.call(t,"css")?Pt(zA,AA(e,t),r):Pt(e,t,r)}const y9={black:"#000",white:"#fff"};var Zf=y9;const _9={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};var bc=_9;const v9={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"};var Sc=v9;const x9={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"};var Ec=x9;const w9={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"};var kc=w9;const b9={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};var Tc=b9;const S9={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"};var Gd=S9;const E9={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};var k9=E9;function Si(e,t){if(e==null)return{};var r={},o=Object.keys(e),l,h;for(h=0;h<o.length;h++)l=o[h],!(t.indexOf(l)>=0)&&(r[l]=e[l]);return r}var T9=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,C9=xA(function(e){return T9.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),P9=Sb(function(e,t){var r=e.styles,o=bb([r],void 0,W.exports.useContext(x0)),l=W.exports.useRef();return YT(function(){var h=t.key+"-global",g=new t.sheet.constructor({key:h,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),u=!1,b=document.querySelector('style[data-emotion="'+h+" "+o.name+'"]');return t.sheet.tags.length&&(g.before=t.sheet.tags[0]),b!==null&&(u=!0,b.setAttribute("data-emotion",h),g.hydrate([b])),l.current=[g,u],function(){g.flush()}},[t]),YT(function(){var h=l.current,g=h[0],u=h[1];if(u){h[1]=!1;return}if(o.next!==void 0&&wb(t,o.next,!0),g.tags.length){var b=g.tags[g.tags.length-1].nextElementSibling;g.before=b,g.flush()}t.insert("",o,g,!1)},[t,o.name]),null}),I9=C9,M9=function(t){return t!=="theme"},JT=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?I9:M9},QT=function(t,r,o){var l;if(r){var h=r.shouldForwardProp;l=t.__emotion_forwardProp&&h?function(g){return t.__emotion_forwardProp(g)&&h(g)}:h}return typeof l!="function"&&o&&(l=t.__emotion_forwardProp),l},A9=function(t){var r=t.cache,o=t.serialized,l=t.isStringTag;return xb(r,o,l),IA(function(){return wb(r,o,l)}),null},z9=function e(t,r){var o=t.__emotion_real===t,l=o&&t.__emotion_base||t,h,g;r!==void 0&&(h=r.label,g=r.target);var u=QT(t,r,o),b=u||JT(l),w=!b("as");return function(){var T=arguments,I=o&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(h!==void 0&&I.push("label:"+h+";"),T[0]==null||T[0].raw===void 0)I.push.apply(I,T);else{I.push(T[0][0]);for(var z=T.length,j=1;j<z;j++)I.push(T[j],T[0][j])}var Z=Sb(function(H,le,$){var B=w&&H.as||l,X="",ue=[],ce=H;if(H.theme==null){ce={};for(var me in H)ce[me]=H[me];ce.theme=W.exports.useContext(x0)}typeof H.className=="string"?X=TA(le.registered,ue,H.className):H.className!=null&&(X=H.className+" ");var ge=bb(I.concat(ue),le.registered,ce);X+=le.key+"-"+ge.name,g!==void 0&&(X+=" "+g);var xe=w&&u===void 0?JT(B):b,je={};for(var ke in H)w&&ke==="as"||xe(ke)&&(je[ke]=H[ke]);return je.className=X,je.ref=$,W.exports.createElement(W.exports.Fragment,null,W.exports.createElement(A9,{cache:le,serialized:ge,isStringTag:typeof B=="string"}),W.exports.createElement(B,je))});return Z.displayName=h!==void 0?h:"Styled("+(typeof l=="string"?l:l.displayName||l.name||"Component")+")",Z.defaultProps=t.defaultProps,Z.__emotion_real=Z,Z.__emotion_base=l,Z.__emotion_styles=I,Z.__emotion_forwardProp=u,Object.defineProperty(Z,"toString",{value:function(){return"."+g}}),Z.withComponent=function(H,le){return e(H,Ze({},r,le,{shouldForwardProp:QT(Z,le,!0)})).apply(void 0,I)},Z}},D9=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Rx=z9.bind();D9.forEach(function(e){Rx[e]=Rx(e)});var R9=Rx;function L9(e){return e==null||Object.keys(e).length===0}function F9(e){const{styles:t,defaultTheme:r={}}=e;return Oe(P9,{styles:typeof t=="function"?l=>t(L9(l)?r:l):t})}/** @license MUI v5.10.16
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function DA(e,t){return R9(e,t)}const O9=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function rf(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function ds(e,t,r={clone:!0}){const o=r.clone?Ze({},e):e;return rf(e)&&rf(t)&&Object.keys(t).forEach(l=>{l!=="__proto__"&&(rf(t[l])&&l in e&&rf(e[l])?o[l]=ds(e[l],t[l],r):o[l]=t[l])}),o}function gu(e){let t="https://mui.com/production-error/?code="+e;for(let r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function Na(e){if(typeof e!="string")throw new Error(gu(7));return e.charAt(0).toUpperCase()+e.slice(1)}function $9(e,t=166){let r;function o(...l){const h=()=>{e.apply(this,l)};clearTimeout(r),r=setTimeout(h,t)}return o.clear=()=>{clearTimeout(r)},o}function B9(e){return e&&e.ownerDocument||document}function eC(e){return B9(e).defaultView||window}function V9(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const N9=typeof window!="undefined"?W.exports.useLayoutEffect:W.exports.useEffect;var Eb=N9;function RA(...e){return W.exports.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{V9(r,t)})},e)}function U9(e,t){const r=Ze({},t);return Object.keys(e).forEach(o=>{r[o]===void 0&&(r[o]=e[o])}),r}function kb(e,t,r){const o={};return Object.keys(e).forEach(l=>{o[l]=e[l].reduce((h,g)=>(g&&(h.push(t(g)),r&&r[g]&&h.push(r[g])),h),[]).join(" ")}),o}const tC=e=>e,j9=()=>{let e=tC;return{configure(t){e=t},generate(t){return e(t)},reset(){e=tC}}},G9=j9();var LA=G9;const W9={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function w0(e,t,r="Mui"){const o=W9[t];return o?`${r}-${o}`:`${LA.generate(e)}-${t}`}function Tb(e,t,r="Mui"){const o={};return t.forEach(l=>{o[l]=w0(e,l,r)}),o}function _f(e,t){return t?ds(e,t,{clone:!1}):e}const Cb={xs:0,sm:600,md:900,lg:1200,xl:1536},rC={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Cb[e]}px)`};function gl(e,t,r){const o=e.theme||{};if(Array.isArray(t)){const h=o.breakpoints||rC;return t.reduce((g,u,b)=>(g[h.up(h.keys[b])]=r(t[b]),g),{})}if(typeof t=="object"){const h=o.breakpoints||rC;return Object.keys(t).reduce((g,u)=>{if(Object.keys(h.values||Cb).indexOf(u)!==-1){const b=h.up(u);g[b]=r(t[u],u)}else{const b=u;g[b]=t[b]}return g},{})}return r(t)}function q9(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((o,l)=>{const h=e.up(l);return o[h]={},o},{}))||{}}function Z9(e,t){return e.reduce((r,o)=>{const l=r[o];return(!l||Object.keys(l).length===0)&&delete r[o],r},t)}function Pb(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const o=`vars.${t}`.split(".").reduce((l,h)=>l&&l[h]?l[h]:null,e);if(o!=null)return o}return t.split(".").reduce((o,l)=>o&&o[l]!=null?o[l]:null,e)}function nC(e,t,r,o=r){let l;return typeof e=="function"?l=e(r):Array.isArray(e)?l=e[r]||o:l=Pb(e,r)||o,t&&(l=t(l,o)),l}function yt(e){const{prop:t,cssProperty:r=e.prop,themeKey:o,transform:l}=e,h=g=>{if(g[t]==null)return null;const u=g[t],b=g.theme,w=Pb(b,o)||{};return gl(g,u,I=>{let z=nC(w,l,I);return I===z&&typeof I=="string"&&(z=nC(w,l,`${t}${I==="default"?"":Na(I)}`,I)),r===!1?z:{[r]:z}})};return h.propTypes={},h.filterProps=[t],h}function yl(...e){const t=e.reduce((o,l)=>(l.filterProps.forEach(h=>{o[h]=l}),o),{}),r=o=>Object.keys(o).reduce((l,h)=>t[h]?_f(l,t[h](o)):l,{});return r.propTypes={},r.filterProps=e.reduce((o,l)=>o.concat(l.filterProps),[]),r}function H9(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const X9={m:"margin",p:"padding"},K9={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},iC={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Y9=H9(e=>{if(e.length>2)if(iC[e])e=iC[e];else return[e];const[t,r]=e.split(""),o=X9[t],l=K9[r]||"";return Array.isArray(l)?l.map(h=>o+h):[o+l]}),J9=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Q9=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],FA=[...J9,...Q9];function lp(e,t,r,o){var l;const h=(l=Pb(e,t,!1))!=null?l:r;return typeof h=="number"?g=>typeof g=="string"?g:h*g:Array.isArray(h)?g=>typeof g=="string"?g:h[g]:typeof h=="function"?h:()=>{}}function OA(e){return lp(e,"spacing",8)}function up(e,t){if(typeof t=="string"||t==null)return t;const r=Math.abs(t),o=e(r);return t>=0?o:typeof o=="number"?-o:`-${o}`}function e7(e,t){return r=>e.reduce((o,l)=>(o[l]=up(t,r),o),{})}function t7(e,t,r,o){if(t.indexOf(r)===-1)return null;const l=Y9(r),h=e7(l,o),g=e[r];return gl(e,g,h)}function r7(e,t){const r=OA(e.theme);return Object.keys(e).map(o=>t7(e,t,o,r)).reduce(_f,{})}function b0(e){return r7(e,FA)}b0.propTypes={};b0.filterProps=FA;function cp(e){return typeof e!="number"?e:`${e}px solid`}const n7=yt({prop:"border",themeKey:"borders",transform:cp}),i7=yt({prop:"borderTop",themeKey:"borders",transform:cp}),o7=yt({prop:"borderRight",themeKey:"borders",transform:cp}),a7=yt({prop:"borderBottom",themeKey:"borders",transform:cp}),s7=yt({prop:"borderLeft",themeKey:"borders",transform:cp}),l7=yt({prop:"borderColor",themeKey:"palette"}),u7=yt({prop:"borderTopColor",themeKey:"palette"}),c7=yt({prop:"borderRightColor",themeKey:"palette"}),h7=yt({prop:"borderBottomColor",themeKey:"palette"}),d7=yt({prop:"borderLeftColor",themeKey:"palette"}),Ib=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=lp(e.theme,"shape.borderRadius",4),r=o=>({borderRadius:up(t,o)});return gl(e,e.borderRadius,r)}return null};Ib.propTypes={};Ib.filterProps=["borderRadius"];const f7=yl(n7,i7,o7,a7,s7,l7,u7,c7,h7,d7,Ib);var $A=f7;const p7=yt({prop:"displayPrint",cssProperty:!1,transform:e=>({"@media print":{display:e}})}),m7=yt({prop:"display"}),g7=yt({prop:"overflow"}),y7=yt({prop:"textOverflow"}),_7=yt({prop:"visibility"}),v7=yt({prop:"whiteSpace"});var BA=yl(p7,m7,g7,y7,_7,v7);const x7=yt({prop:"flexBasis"}),w7=yt({prop:"flexDirection"}),b7=yt({prop:"flexWrap"}),S7=yt({prop:"justifyContent"}),E7=yt({prop:"alignItems"}),k7=yt({prop:"alignContent"}),T7=yt({prop:"order"}),C7=yt({prop:"flex"}),P7=yt({prop:"flexGrow"}),I7=yt({prop:"flexShrink"}),M7=yt({prop:"alignSelf"}),A7=yt({prop:"justifyItems"}),z7=yt({prop:"justifySelf"}),D7=yl(x7,w7,b7,S7,E7,k7,T7,C7,P7,I7,M7,A7,z7);var VA=D7;const Mb=e=>{if(e.gap!==void 0&&e.gap!==null){const t=lp(e.theme,"spacing",8),r=o=>({gap:up(t,o)});return gl(e,e.gap,r)}return null};Mb.propTypes={};Mb.filterProps=["gap"];const Ab=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=lp(e.theme,"spacing",8),r=o=>({columnGap:up(t,o)});return gl(e,e.columnGap,r)}return null};Ab.propTypes={};Ab.filterProps=["columnGap"];const zb=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=lp(e.theme,"spacing",8),r=o=>({rowGap:up(t,o)});return gl(e,e.rowGap,r)}return null};zb.propTypes={};zb.filterProps=["rowGap"];const R7=yt({prop:"gridColumn"}),L7=yt({prop:"gridRow"}),F7=yt({prop:"gridAutoFlow"}),O7=yt({prop:"gridAutoColumns"}),$7=yt({prop:"gridAutoRows"}),B7=yt({prop:"gridTemplateColumns"}),V7=yt({prop:"gridTemplateRows"}),N7=yt({prop:"gridTemplateAreas"}),U7=yt({prop:"gridArea"}),j7=yl(Mb,Ab,zb,R7,L7,F7,O7,$7,B7,V7,N7,U7);var NA=j7;function Db(e,t){return t==="grey"?t:e}const G7=yt({prop:"color",themeKey:"palette",transform:Db}),W7=yt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Db}),q7=yt({prop:"backgroundColor",themeKey:"palette",transform:Db}),Z7=yl(G7,W7,q7);var UA=Z7;const H7=yt({prop:"position"}),X7=yt({prop:"zIndex",themeKey:"zIndex"}),K7=yt({prop:"top"}),Y7=yt({prop:"right"}),J7=yt({prop:"bottom"}),Q7=yt({prop:"left"});var jA=yl(H7,X7,K7,Y7,J7,Q7);const ej=yt({prop:"boxShadow",themeKey:"shadows"});var GA=ej;function _l(e){return e<=1&&e!==0?`${e*100}%`:e}const tj=yt({prop:"width",transform:_l}),WA=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var o,l,h;return{maxWidth:((o=e.theme)==null||(l=o.breakpoints)==null||(h=l.values)==null?void 0:h[r])||Cb[r]||_l(r)}};return gl(e,e.maxWidth,t)}return null};WA.filterProps=["maxWidth"];const rj=yt({prop:"minWidth",transform:_l}),nj=yt({prop:"height",transform:_l}),ij=yt({prop:"maxHeight",transform:_l}),oj=yt({prop:"minHeight",transform:_l});yt({prop:"size",cssProperty:"width",transform:_l});yt({prop:"size",cssProperty:"height",transform:_l});const aj=yt({prop:"boxSizing"}),sj=yl(tj,WA,rj,nj,ij,oj,aj);var qA=sj;const lj=yt({prop:"fontFamily",themeKey:"typography"}),uj=yt({prop:"fontSize",themeKey:"typography"}),cj=yt({prop:"fontStyle",themeKey:"typography"}),hj=yt({prop:"fontWeight",themeKey:"typography"}),dj=yt({prop:"letterSpacing"}),fj=yt({prop:"textTransform"}),pj=yt({prop:"lineHeight"}),mj=yt({prop:"textAlign"}),gj=yt({prop:"typography",cssProperty:!1,themeKey:"typography"}),yj=yl(gj,lj,uj,cj,hj,dj,pj,mj,fj);var ZA=yj;const oC={borders:$A.filterProps,display:BA.filterProps,flexbox:VA.filterProps,grid:NA.filterProps,positions:jA.filterProps,palette:UA.filterProps,shadows:GA.filterProps,sizing:qA.filterProps,spacing:b0.filterProps,typography:ZA.filterProps},HA={borders:$A,display:BA,flexbox:VA,grid:NA,positions:jA,palette:UA,shadows:GA,sizing:qA,spacing:b0,typography:ZA},_j=Object.keys(oC).reduce((e,t)=>(oC[t].forEach(r=>{e[r]=HA[t]}),e),{});function vj(...e){const t=e.reduce((o,l)=>o.concat(Object.keys(l)),[]),r=new Set(t);return e.every(o=>r.size===Object.keys(o).length)}function xj(e,t){return typeof e=="function"?e(t):e}function wj(e=HA){const t=Object.keys(e).reduce((l,h)=>(e[h].filterProps.forEach(g=>{l[g]=e[h]}),l),{});function r(l,h,g){const u={[l]:h,theme:g},b=t[l];return b?b(u):{[l]:h}}function o(l){const{sx:h,theme:g={}}=l||{};if(!h)return null;function u(b){let w=b;if(typeof b=="function")w=b(g);else if(typeof b!="object")return b;if(!w)return null;const T=q9(g.breakpoints),I=Object.keys(T);let z=T;return Object.keys(w).forEach(j=>{const Z=xj(w[j],g);if(Z!=null)if(typeof Z=="object")if(t[j])z=_f(z,r(j,Z,g));else{const H=gl({theme:g},Z,le=>({[j]:le}));vj(H,Z)?z[j]=o({sx:Z,theme:g}):z=_f(z,H)}else z=_f(z,r(j,Z,g))}),Z9(I,z)}return Array.isArray(h)?h.map(u):u(h)}return o}const XA=wj();XA.filterProps=["sx"];var KA=XA;const bj=["sx"],Sj=e=>{const t={systemProps:{},otherProps:{}};return Object.keys(e).forEach(r=>{_j[r]?t.systemProps[r]=e[r]:t.otherProps[r]=e[r]}),t};function Ej(e){const{sx:t}=e,r=Si(e,bj),{systemProps:o,otherProps:l}=Sj(r);let h;return Array.isArray(t)?h=[o,...t]:typeof t=="function"?h=(...g)=>{const u=t(...g);return rf(u)?Ze({},o,u):o}:h=Ze({},o,t),Ze({},l,{sx:h})}function YA(e){var t,r,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=YA(e[t]))&&(o&&(o+=" "),o+=r);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}function Hf(){for(var e,t,r=0,o="";r<arguments.length;)(e=arguments[r++])&&(t=YA(e))&&(o&&(o+=" "),o+=t);return o}const kj=["values","unit","step"],Tj=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,o)=>r.val-o.val),t.reduce((r,o)=>Ze({},r,{[o.key]:o.val}),{})};function Cj(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:o=5}=e,l=Si(e,kj),h=Tj(t),g=Object.keys(h);function u(z){return`@media (min-width:${typeof t[z]=="number"?t[z]:z}${r})`}function b(z){return`@media (max-width:${(typeof t[z]=="number"?t[z]:z)-o/100}${r})`}function w(z,j){const Z=g.indexOf(j);return`@media (min-width:${typeof t[z]=="number"?t[z]:z}${r}) and (max-width:${(Z!==-1&&typeof t[g[Z]]=="number"?t[g[Z]]:j)-o/100}${r})`}function T(z){return g.indexOf(z)+1<g.length?w(z,g[g.indexOf(z)+1]):u(z)}function I(z){const j=g.indexOf(z);return j===0?u(g[1]):j===g.length-1?b(g[j]):w(z,g[g.indexOf(z)+1]).replace("@media","@media not all and")}return Ze({keys:g,values:h,up:u,down:b,between:w,only:T,not:I,unit:r},l)}const Pj={borderRadius:4};var Ij=Pj;function Mj(e=8){if(e.mui)return e;const t=OA({spacing:e}),r=(...o)=>(o.length===0?[1]:o).map(h=>{const g=t(h);return typeof g=="number"?`${g}px`:g}).join(" ");return r.mui=!0,r}const Aj=["breakpoints","palette","spacing","shape"];function Rb(e={},...t){const{breakpoints:r={},palette:o={},spacing:l,shape:h={}}=e,g=Si(e,Aj),u=Cj(r),b=Mj(l);let w=ds({breakpoints:u,direction:"ltr",components:{},palette:Ze({mode:"light"},o),spacing:b,shape:Ze({},Ij,h)},g);return w=t.reduce((T,I)=>ds(T,I),w),w}const zj=W.exports.createContext(null);var JA=zj;function QA(){return W.exports.useContext(JA)}const Dj=typeof Symbol=="function"&&Symbol.for;var Rj=Dj?Symbol.for("mui.nested"):"__THEME_NESTED__";function Lj(e,t){return typeof t=="function"?t(e):Ze({},e,t)}function Fj(e){const{children:t,theme:r}=e,o=QA(),l=W.exports.useMemo(()=>{const h=o===null?r:Lj(o,r);return h!=null&&(h[Rj]=o!==null),h},[r,o]);return Oe(JA.Provider,{value:l,children:t})}function Oj(e){return Object.keys(e).length===0}function $j(e=null){const t=QA();return!t||Oj(t)?e:t}const Bj=Rb();function Lb(e=Bj){return $j(e)}const Vj=["className","component"];function Nj(e={}){const{defaultTheme:t,defaultClassName:r="MuiBox-root",generateClassName:o,styleFunctionSx:l=KA}=e,h=DA("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})(l);return W.exports.forwardRef(function(b,w){const T=Lb(t),I=Ej(b),{className:z,component:j="div"}=I,Z=Si(I,Vj);return Oe(h,Ze({as:j,ref:w,className:Hf(z,o?o(r):r),theme:T},Z))})}const Uj=["variant"];function aC(e){return e.length===0}function ez(e){const{variant:t}=e,r=Si(e,Uj);let o=t||"";return Object.keys(r).sort().forEach(l=>{l==="color"?o+=aC(o)?e[l]:Na(e[l]):o+=`${aC(o)?l:Na(l)}${Na(e[l].toString())}`}),o}const jj=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],Gj=["theme"],Wj=["theme"];function Wd(e){return Object.keys(e).length===0}function qj(e){return typeof e=="string"&&e.charCodeAt(0)>96}const Zj=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,Hj=(e,t)=>{let r=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(r=t.components[e].variants);const o={};return r.forEach(l=>{const h=ez(l.props);o[h]=l.style}),o},Xj=(e,t,r,o)=>{var l,h;const{ownerState:g={}}=e,u=[],b=r==null||(l=r.components)==null||(h=l[o])==null?void 0:h.variants;return b&&b.forEach(w=>{let T=!0;Object.keys(w.props).forEach(I=>{g[I]!==w.props[I]&&e[I]!==w.props[I]&&(T=!1)}),T&&u.push(t[ez(w.props)])}),u};function Mg(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Kj=Rb();function Yj(e={}){const{defaultTheme:t=Kj,rootShouldForwardProp:r=Mg,slotShouldForwardProp:o=Mg,styleFunctionSx:l=KA}=e,h=g=>{const u=Wd(g.theme)?t:g.theme;return l(Ze({},g,{theme:u}))};return h.__mui_systemSx=!0,(g,u={})=>{O9(g,ue=>ue.filter(ce=>!(ce!=null&&ce.__mui_systemSx)));const{name:b,slot:w,skipVariantsResolver:T,skipSx:I,overridesResolver:z}=u,j=Si(u,jj),Z=T!==void 0?T:w&&w!=="Root"||!1,H=I||!1;let le,$=Mg;w==="Root"?$=r:w?$=o:qj(g)&&($=void 0);const B=DA(g,Ze({shouldForwardProp:$,label:le},j)),X=(ue,...ce)=>{const me=ce?ce.map(ke=>typeof ke=="function"&&ke.__emotion_real!==ke?Be=>{let{theme:zt}=Be,vt=Si(Be,Gj);return ke(Ze({theme:Wd(zt)?t:zt},vt))}:ke):[];let ge=ue;b&&z&&me.push(ke=>{const Be=Wd(ke.theme)?t:ke.theme,zt=Zj(b,Be);if(zt){const vt={};return Object.entries(zt).forEach(([Et,Ot])=>{vt[Et]=typeof Ot=="function"?Ot(Ze({},ke,{theme:Be})):Ot}),z(ke,vt)}return null}),b&&!Z&&me.push(ke=>{const Be=Wd(ke.theme)?t:ke.theme;return Xj(ke,Hj(b,Be),Be,b)}),H||me.push(h);const xe=me.length-ce.length;if(Array.isArray(ue)&&xe>0){const ke=new Array(xe).fill("");ge=[...ue,...ke],ge.raw=[...ue.raw,...ke]}else typeof ue=="function"&&ue.__emotion_real!==ue&&(ge=ke=>{let{theme:Be}=ke,zt=Si(ke,Wj);return ue(Ze({theme:Wd(Be)?t:Be},zt))});return B(ge,...me)};return B.withConfig&&(X.withConfig=B.withConfig),X}}function Jj(e){const{theme:t,name:r,props:o}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?o:U9(t.components[r].defaultProps,o)}function Qj({props:e,name:t,defaultTheme:r}){const o=Lb(r);return Jj({theme:o,name:t,props:e})}function Fb(e,t=0,r=1){return Math.min(Math.max(t,e),r)}function eG(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(o=>o+o)),r?`rgb${r.length===4?"a":""}(${r.map((o,l)=>l<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function yu(e){if(e.type)return e;if(e.charAt(0)==="#")return yu(eG(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error(gu(9,e));let o=e.substring(t+1,e.length-1),l;if(r==="color"){if(o=o.split(" "),l=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(l)===-1)throw new Error(gu(10,l))}else o=o.split(",");return o=o.map(h=>parseFloat(h)),{type:r,values:o,colorSpace:l}}function S0(e){const{type:t,colorSpace:r}=e;let{values:o}=e;return t.indexOf("rgb")!==-1?o=o.map((l,h)=>h<3?parseInt(l,10):l):t.indexOf("hsl")!==-1&&(o[1]=`${o[1]}%`,o[2]=`${o[2]}%`),t.indexOf("color")!==-1?o=`${r} ${o.join(" ")}`:o=`${o.join(", ")}`,`${t}(${o})`}function tG(e){e=yu(e);const{values:t}=e,r=t[0],o=t[1]/100,l=t[2]/100,h=o*Math.min(l,1-l),g=(w,T=(w+r/30)%12)=>l-h*Math.max(Math.min(T-3,9-T,1),-1);let u="rgb";const b=[Math.round(g(0)*255),Math.round(g(8)*255),Math.round(g(4)*255)];return e.type==="hsla"&&(u+="a",b.push(t[3])),S0({type:u,values:b})}function sC(e){e=yu(e);let t=e.type==="hsl"||e.type==="hsla"?yu(tG(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function rG(e,t){const r=sC(e),o=sC(t);return(Math.max(r,o)+.05)/(Math.min(r,o)+.05)}function lC(e,t){return e=yu(e),t=Fb(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,S0(e)}function nG(e,t){if(e=yu(e),t=Fb(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]*=1-t;return S0(e)}function iG(e,t){if(e=yu(e),t=Fb(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return S0(e)}const oG={};function aG(e){const t=Lb();return Oe(x0.Provider,{value:typeof t=="object"?t:oG,children:e.children})}function sG(e){const{children:t,theme:r}=e;return Oe(Fj,{theme:r,children:Oe(aG,{children:t})})}function lG(e,t){return Ze({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const uG=["mode","contrastThreshold","tonalOffset"],uC={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Zf.white,default:Zf.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Dv={text:{primary:Zf.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Zf.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function cC(e,t,r,o){const l=o.light||o,h=o.dark||o*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=iG(e.main,l):t==="dark"&&(e.dark=nG(e.main,h)))}function cG(e="light"){return e==="dark"?{main:Ec[200],light:Ec[50],dark:Ec[400]}:{main:Ec[700],light:Ec[400],dark:Ec[800]}}function hG(e="light"){return e==="dark"?{main:Sc[200],light:Sc[50],dark:Sc[400]}:{main:Sc[500],light:Sc[300],dark:Sc[700]}}function dG(e="light"){return e==="dark"?{main:bc[500],light:bc[300],dark:bc[700]}:{main:bc[700],light:bc[400],dark:bc[800]}}function fG(e="light"){return e==="dark"?{main:kc[400],light:kc[300],dark:kc[700]}:{main:kc[700],light:kc[500],dark:kc[900]}}function pG(e="light"){return e==="dark"?{main:Tc[400],light:Tc[300],dark:Tc[700]}:{main:Tc[800],light:Tc[500],dark:Tc[900]}}function mG(e="light"){return e==="dark"?{main:Gd[400],light:Gd[300],dark:Gd[700]}:{main:"#ed6c02",light:Gd[500],dark:Gd[900]}}function gG(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:o=.2}=e,l=Si(e,uG),h=e.primary||cG(t),g=e.secondary||hG(t),u=e.error||dG(t),b=e.info||fG(t),w=e.success||pG(t),T=e.warning||mG(t);function I(H){return rG(H,Dv.text.primary)>=r?Dv.text.primary:uC.text.primary}const z=({color:H,name:le,mainShade:$=500,lightShade:B=300,darkShade:X=700})=>{if(H=Ze({},H),!H.main&&H[$]&&(H.main=H[$]),!H.hasOwnProperty("main"))throw new Error(gu(11,le?` (${le})`:"",$));if(typeof H.main!="string")throw new Error(gu(12,le?` (${le})`:"",JSON.stringify(H.main)));return cC(H,"light",B,o),cC(H,"dark",X,o),H.contrastText||(H.contrastText=I(H.main)),H},j={dark:Dv,light:uC};return ds(Ze({common:Ze({},Zf),mode:t,primary:z({color:h,name:"primary"}),secondary:z({color:g,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:z({color:u,name:"error"}),warning:z({color:T,name:"warning"}),info:z({color:b,name:"info"}),success:z({color:w,name:"success"}),grey:k9,contrastThreshold:r,getContrastText:I,augmentColor:z,tonalOffset:o},j[t]),l)}const yG=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function _G(e){return Math.round(e*1e5)/1e5}const hC={textTransform:"uppercase"},dC='"Roboto", "Helvetica", "Arial", sans-serif';function vG(e,t){const r=typeof t=="function"?t(e):t,{fontFamily:o=dC,fontSize:l=14,fontWeightLight:h=300,fontWeightRegular:g=400,fontWeightMedium:u=500,fontWeightBold:b=700,htmlFontSize:w=16,allVariants:T,pxToRem:I}=r,z=Si(r,yG),j=l/14,Z=I||($=>`${$/w*j}rem`),H=($,B,X,ue,ce)=>Ze({fontFamily:o,fontWeight:$,fontSize:Z(B),lineHeight:X},o===dC?{letterSpacing:`${_G(ue/B)}em`}:{},ce,T),le={h1:H(h,96,1.167,-1.5),h2:H(h,60,1.2,-.5),h3:H(g,48,1.167,0),h4:H(g,34,1.235,.25),h5:H(g,24,1.334,0),h6:H(u,20,1.6,.15),subtitle1:H(g,16,1.75,.15),subtitle2:H(u,14,1.57,.1),body1:H(g,16,1.5,.15),body2:H(g,14,1.43,.15),button:H(u,14,1.75,.4,hC),caption:H(g,12,1.66,.4),overline:H(g,12,2.66,1,hC)};return ds(Ze({htmlFontSize:w,pxToRem:Z,fontFamily:o,fontSize:l,fontWeightLight:h,fontWeightRegular:g,fontWeightMedium:u,fontWeightBold:b},le),z,{clone:!1})}const xG=.2,wG=.14,bG=.12;function Kr(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${xG})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${wG})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${bG})`].join(",")}const SG=["none",Kr(0,2,1,-1,0,1,1,0,0,1,3,0),Kr(0,3,1,-2,0,2,2,0,0,1,5,0),Kr(0,3,3,-2,0,3,4,0,0,1,8,0),Kr(0,2,4,-1,0,4,5,0,0,1,10,0),Kr(0,3,5,-1,0,5,8,0,0,1,14,0),Kr(0,3,5,-1,0,6,10,0,0,1,18,0),Kr(0,4,5,-2,0,7,10,1,0,2,16,1),Kr(0,5,5,-3,0,8,10,1,0,3,14,2),Kr(0,5,6,-3,0,9,12,1,0,3,16,2),Kr(0,6,6,-3,0,10,14,1,0,4,18,3),Kr(0,6,7,-4,0,11,15,1,0,4,20,3),Kr(0,7,8,-4,0,12,17,2,0,5,22,4),Kr(0,7,8,-4,0,13,19,2,0,5,24,4),Kr(0,7,9,-4,0,14,21,2,0,5,26,4),Kr(0,8,9,-5,0,15,22,2,0,6,28,5),Kr(0,8,10,-5,0,16,24,2,0,6,30,5),Kr(0,8,11,-5,0,17,26,2,0,6,32,5),Kr(0,9,11,-5,0,18,28,2,0,7,34,6),Kr(0,9,12,-6,0,19,29,2,0,7,36,6),Kr(0,10,13,-6,0,20,31,3,0,8,38,7),Kr(0,10,13,-6,0,21,33,3,0,8,40,7),Kr(0,10,14,-6,0,22,35,3,0,8,42,7),Kr(0,11,14,-7,0,23,36,3,0,9,44,8),Kr(0,11,15,-7,0,24,38,3,0,9,46,8)];var EG=SG;const kG=["duration","easing","delay"],TG={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},CG={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function fC(e){return`${Math.round(e)}ms`}function PG(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function IG(e){const t=Ze({},TG,e.easing),r=Ze({},CG,e.duration);return Ze({getAutoHeightDuration:PG,create:(l=["all"],h={})=>{const{duration:g=r.standard,easing:u=t.easeInOut,delay:b=0}=h;return Si(h,kG),(Array.isArray(l)?l:[l]).map(w=>`${w} ${typeof g=="string"?g:fC(g)} ${u} ${typeof b=="string"?b:fC(b)}`).join(",")}},e,{easing:t,duration:r})}const MG={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};var AG=MG;const zG=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Ob(e={},...t){const{mixins:r={},palette:o={},transitions:l={},typography:h={}}=e,g=Si(e,zG);if(e.vars)throw new Error(gu(18));const u=gG(o),b=Rb(e);let w=ds(b,{mixins:lG(b.breakpoints,r),palette:u,shadows:EG.slice(),typography:vG(u,h),transitions:IG(l),zIndex:Ze({},AG)});return w=ds(w,g),w=t.reduce((T,I)=>ds(T,I),w),w}const DG=Ob();var $b=DG;function Bb({props:e,name:t}){return Qj({props:e,name:t,defaultTheme:$b})}const RG=e=>Mg(e)&&e!=="classes",LG=Yj({defaultTheme:$b,rootShouldForwardProp:RG});var Ch=LG;const FG=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)};var pC=FG;function mC(e){return typeof e=="string"}function Vb(e){const{children:t,defer:r=!1,fallback:o=null}=e,[l,h]=W.exports.useState(!1);return Eb(()=>{r||h(!0)},[r]),W.exports.useEffect(()=>{r&&h(!0)},[r]),Oe(W.exports.Fragment,{children:l?t:o})}const OG=["onChange","maxRows","minRows","style","value"];function Km(e,t){return parseInt(e[t],10)||0}const $G={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function gC(e){return e==null||Object.keys(e).length===0}const BG=W.exports.forwardRef(function(t,r){const{onChange:o,maxRows:l,minRows:h=1,style:g,value:u}=t,b=Si(t,OG),{current:w}=W.exports.useRef(u!=null),T=W.exports.useRef(null),I=RA(r,T),z=W.exports.useRef(null),j=W.exports.useRef(0),[Z,H]=W.exports.useState({}),le=W.exports.useCallback(()=>{const ce=T.current,ge=eC(ce).getComputedStyle(ce);if(ge.width==="0px")return{};const xe=z.current;xe.style.width=ge.width,xe.value=ce.value||t.placeholder||"x",xe.value.slice(-1)===`
`&&(xe.value+=" ");const je=ge["box-sizing"],ke=Km(ge,"padding-bottom")+Km(ge,"padding-top"),Be=Km(ge,"border-bottom-width")+Km(ge,"border-top-width"),zt=xe.scrollHeight;xe.value="x";const vt=xe.scrollHeight;let Et=zt;h&&(Et=Math.max(Number(h)*vt,Et)),l&&(Et=Math.min(Number(l)*vt,Et)),Et=Math.max(Et,vt);const Ot=Et+(je==="border-box"?ke+Be:0),Xt=Math.abs(Et-zt)<=1;return{outerHeightStyle:Ot,overflow:Xt}},[l,h,t.placeholder]),$=(ce,me)=>{const{outerHeightStyle:ge,overflow:xe}=me;return j.current<20&&(ge>0&&Math.abs((ce.outerHeightStyle||0)-ge)>1||ce.overflow!==xe)?(j.current+=1,{overflow:xe,outerHeightStyle:ge}):ce},B=W.exports.useCallback(()=>{const ce=le();gC(ce)||H(me=>$(me,ce))},[le]),X=()=>{const ce=le();gC(ce)||My.exports.flushSync(()=>{H(me=>$(me,ce))})};W.exports.useEffect(()=>{const ce=$9(()=>{j.current=0,T.current&&X()}),me=eC(T.current);me.addEventListener("resize",ce);let ge;return typeof ResizeObserver!="undefined"&&(ge=new ResizeObserver(ce),ge.observe(T.current)),()=>{ce.clear(),me.removeEventListener("resize",ce),ge&&ge.disconnect()}}),Eb(()=>{B()}),W.exports.useEffect(()=>{j.current=0},[u]);const ue=ce=>{j.current=0,w||B(),o&&o(ce)};return Pt(W.exports.Fragment,{children:[Oe("textarea",Ze({value:u,onChange:ue,ref:I,rows:h,style:Ze({height:Z.outerHeightStyle,overflow:Z.overflow?"hidden":null},g)},b)),Oe("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:z,tabIndex:-1,style:Ze({},$G.shadow,g,{padding:0})})]})});var VG=BG;function NG(e){return w0("MuiSvgIcon",e)}Tb("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const UG=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],jG=e=>{const{color:t,fontSize:r,classes:o}=e,l={root:["root",t!=="inherit"&&`color${Na(t)}`,`fontSize${Na(r)}`]};return kb(l,NG,o)},GG=Ch("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${Na(r.color)}`],t[`fontSize${Na(r.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var r,o,l,h,g,u,b,w,T,I,z,j,Z,H,le,$,B;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(r=e.transitions)==null||(o=r.create)==null?void 0:o.call(r,"fill",{duration:(l=e.transitions)==null||(h=l.duration)==null?void 0:h.shorter}),fontSize:{inherit:"inherit",small:((g=e.typography)==null||(u=g.pxToRem)==null?void 0:u.call(g,20))||"1.25rem",medium:((b=e.typography)==null||(w=b.pxToRem)==null?void 0:w.call(b,24))||"1.5rem",large:((T=e.typography)==null||(I=T.pxToRem)==null?void 0:I.call(T,35))||"2.1875rem"}[t.fontSize],color:(z=(j=(e.vars||e).palette)==null||(Z=j[t.color])==null?void 0:Z.main)!=null?z:{action:(H=(e.vars||e).palette)==null||(le=H.action)==null?void 0:le.active,disabled:($=(e.vars||e).palette)==null||(B=$.action)==null?void 0:B.disabled,inherit:void 0}[t.color]}}),tz=W.exports.forwardRef(function(t,r){const o=Bb({props:t,name:"MuiSvgIcon"}),{children:l,className:h,color:g="inherit",component:u="svg",fontSize:b="medium",htmlColor:w,inheritViewBox:T=!1,titleAccess:I,viewBox:z="0 0 24 24"}=o,j=Si(o,UG),Z=Ze({},o,{color:g,component:u,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:T,viewBox:z}),H={};T||(H.viewBox=z);const le=jG(Z);return Pt(GG,Ze({as:u,className:Hf(le.root,h),focusable:"false",color:w,"aria-hidden":I?void 0:!0,role:I?"img":void 0,ref:r},H,j,{ownerState:Z,children:[l,I?Oe("title",{children:I}):null]}))});tz.muiName="SvgIcon";var Lx=tz;function Ph(e,t){function r(o,l){return Oe(Lx,Ze({"data-testid":`${t}Icon`,ref:l},o,{children:e}))}return r.muiName=Lx.muiName,W.exports.memo(W.exports.forwardRef(r))}function WG(e){return w0("MuiPaper",e)}Tb("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const qG=["className","component","elevation","square","variant"],ZG=e=>{const{square:t,elevation:r,variant:o,classes:l}=e,h={root:["root",o,!t&&"rounded",o==="elevation"&&`elevation${r}`]};return kb(h,WG,l)},HG=Ch("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],!r.square&&t.rounded,r.variant==="elevation"&&t[`elevation${r.elevation}`]]}})(({theme:e,ownerState:t})=>{var r;return Ze({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&Ze({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${lC("#fff",pC(t.elevation))}, ${lC("#fff",pC(t.elevation))})`},e.vars&&{backgroundImage:(r=e.vars.overlays)==null?void 0:r[t.elevation]}))}),XG=W.exports.forwardRef(function(t,r){const o=Bb({props:t,name:"MuiPaper"}),{className:l,component:h="div",elevation:g=1,square:u=!1,variant:b="elevation"}=o,w=Si(o,qG),T=Ze({},o,{component:h,elevation:g,square:u,variant:b}),I=ZG(T);return Oe(HG,Ze({as:h,ownerState:T,className:Hf(I.root,l),ref:r},w))});var KG=XG;function YG({props:e,states:t,muiFormControl:r}){return t.reduce((o,l)=>(o[l]=e[l],r&&typeof e[l]=="undefined"&&(o[l]=r[l]),o),{})}const JG=W.exports.createContext(void 0);var rz=JG;function QG(){return W.exports.useContext(rz)}function eW(e){return Oe(F9,Ze({},e,{defaultTheme:$b}))}function yC(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function tW(e,t=!1){return e&&(yC(e.value)&&e.value!==""||t&&yC(e.defaultValue)&&e.defaultValue!=="")}function rW(e){return w0("MuiInputBase",e)}const nW=Tb("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var Fx=nW;const iW=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],oW=(e,t)=>{const{ownerState:r}=e;return[t.root,r.formControl&&t.formControl,r.startAdornment&&t.adornedStart,r.endAdornment&&t.adornedEnd,r.error&&t.error,r.size==="small"&&t.sizeSmall,r.multiline&&t.multiline,r.color&&t[`color${Na(r.color)}`],r.fullWidth&&t.fullWidth,r.hiddenLabel&&t.hiddenLabel]},aW=(e,t)=>{const{ownerState:r}=e;return[t.input,r.size==="small"&&t.inputSizeSmall,r.multiline&&t.inputMultiline,r.type==="search"&&t.inputTypeSearch,r.startAdornment&&t.inputAdornedStart,r.endAdornment&&t.inputAdornedEnd,r.hiddenLabel&&t.inputHiddenLabel]},sW=e=>{const{classes:t,color:r,disabled:o,error:l,endAdornment:h,focused:g,formControl:u,fullWidth:b,hiddenLabel:w,multiline:T,readOnly:I,size:z,startAdornment:j,type:Z}=e,H={root:["root",`color${Na(r)}`,o&&"disabled",l&&"error",b&&"fullWidth",g&&"focused",u&&"formControl",z==="small"&&"sizeSmall",T&&"multiline",j&&"adornedStart",h&&"adornedEnd",w&&"hiddenLabel",I&&"readOnly"],input:["input",o&&"disabled",Z==="search"&&"inputTypeSearch",T&&"inputMultiline",z==="small"&&"inputSizeSmall",w&&"inputHiddenLabel",j&&"inputAdornedStart",h&&"inputAdornedEnd",I&&"readOnly"]};return kb(H,rW,t)},lW=Ch("div",{name:"MuiInputBase",slot:"Root",overridesResolver:oW})(({theme:e,ownerState:t})=>Ze({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Fx.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&Ze({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),uW=Ch("input",{name:"MuiInputBase",slot:"Input",overridesResolver:aW})(({theme:e,ownerState:t})=>{const r=e.palette.mode==="light",o=Ze({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),l={opacity:"0 !important"},h=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5};return Ze({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Fx.formControl} &`]:{"&::-webkit-input-placeholder":l,"&::-moz-placeholder":l,"&:-ms-input-placeholder":l,"&::-ms-input-placeholder":l,"&:focus::-webkit-input-placeholder":h,"&:focus::-moz-placeholder":h,"&:focus:-ms-input-placeholder":h,"&:focus::-ms-input-placeholder":h},[`&.${Fx.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),cW=Oe(eW,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),hW=W.exports.forwardRef(function(t,r){var o;const l=Bb({props:t,name:"MuiInputBase"}),{"aria-describedby":h,autoComplete:g,autoFocus:u,className:b,components:w={},componentsProps:T={},defaultValue:I,disabled:z,disableInjectingGlobalStyles:j,endAdornment:Z,fullWidth:H=!1,id:le,inputComponent:$="input",inputProps:B={},inputRef:X,maxRows:ue,minRows:ce,multiline:me=!1,name:ge,onBlur:xe,onChange:je,onClick:ke,onFocus:Be,onKeyDown:zt,onKeyUp:vt,placeholder:Et,readOnly:Ot,renderSuffix:Xt,rows:or,slotProps:Ne={},slots:rt={},startAdornment:ht,type:Dt="text",value:it}=l,xr=Si(l,iW),qt=B.value!=null?B.value:it,{current:Dr}=W.exports.useRef(qt!=null),At=W.exports.useRef(),Pr=W.exports.useCallback(Mt=>{},[]),On=RA(At,X,B.ref,Pr),[Mn,bn]=W.exports.useState(!1),Gt=QG(),ar=YG({props:l,muiFormControl:Gt,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ar.focused=Gt?Gt.focused:Mn,W.exports.useEffect(()=>{!Gt&&z&&Mn&&(bn(!1),xe&&xe())},[Gt,z,Mn,xe]);const mn=Gt&&Gt.onFilled,Ce=Gt&&Gt.onEmpty,$n=W.exports.useCallback(Mt=>{tW(Mt)?mn&&mn():Ce&&Ce()},[mn,Ce]);Eb(()=>{Dr&&$n({value:qt})},[qt,$n,Dr]);const qi=Mt=>{if(ar.disabled){Mt.stopPropagation();return}Be&&Be(Mt),B.onFocus&&B.onFocus(Mt),Gt&&Gt.onFocus?Gt.onFocus(Mt):bn(!0)},Kt=Mt=>{xe&&xe(Mt),B.onBlur&&B.onBlur(Mt),Gt&&Gt.onBlur?Gt.onBlur(Mt):bn(!1)},Zt=(Mt,...gn)=>{if(!Dr){const yn=Mt.target||At.current;if(yn==null)throw new Error(gu(1));$n({value:yn.value})}B.onChange&&B.onChange(Mt,...gn),je&&je(Mt,...gn)};W.exports.useEffect(()=>{$n(At.current)},[]);const un=Mt=>{At.current&&Mt.currentTarget===Mt.target&&At.current.focus(),ke&&ke(Mt)};let ui=$,Bn=B;me&&ui==="input"&&(or?Bn=Ze({type:void 0,minRows:or,maxRows:or},Bn):Bn=Ze({type:void 0,maxRows:ue,minRows:ce},Bn),ui=VG);const xa=Mt=>{$n(Mt.animationName==="mui-auto-fill-cancel"?At.current:{value:"x"})};W.exports.useEffect(()=>{Gt&&Gt.setAdornedStart(Boolean(ht))},[Gt,ht]);const Rr=Ze({},l,{color:ar.color||"primary",disabled:ar.disabled,endAdornment:Z,error:ar.error,focused:ar.focused,formControl:Gt,fullWidth:H,hiddenLabel:ar.hiddenLabel,multiline:me,size:ar.size,startAdornment:ht,type:Dt}),Qe=sW(Rr),kt=rt.root||w.Root||lW,Le=Ne.root||T.root||{},Jt=rt.input||w.Input||uW;return Bn=Ze({},Bn,(o=Ne.input)!=null?o:T.input),Pt(W.exports.Fragment,{children:[!j&&cW,Pt(kt,Ze({},Le,!mC(kt)&&{ownerState:Ze({},Rr,Le.ownerState)},{ref:r,onClick:un},xr,{className:Hf(Qe.root,Le.className,b),children:[ht,Oe(rz.Provider,{value:null,children:Oe(Jt,Ze({ownerState:Rr,"aria-invalid":ar.error,"aria-describedby":h,autoComplete:g,autoFocus:u,defaultValue:I,disabled:ar.disabled,id:le,onAnimationStart:xa,name:ge,placeholder:Et,readOnly:Ot,required:ar.required,rows:or,value:qt,onKeyDown:zt,onKeyUp:vt,type:Dt},Bn,!mC(Jt)&&{as:ui,ownerState:Ze({},Rr,Bn.ownerState)},{ref:On,className:Hf(Qe.input,Bn.className),onBlur:Kt,onChange:Zt,onFocus:qi}))}),Z,Xt?Xt(Ze({},ar,{startAdornment:ht})):null]}))]})});var dW=hW;const fW=Ob(),pW=Nj({defaultTheme:fW,defaultClassName:"MuiBox-root",generateClassName:LA.generate});var Ln=pW,_C=Ph(Oe("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),mW=Ph(Oe("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight"),gW=Ph(Oe("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),yW=Ph(Oe("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopy"),_W=Ph(Oe("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit"),vW=Ph(Oe("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");const vC=e=>{let t;const r=new Set,o=(b,w)=>{const T=typeof b=="function"?b(t):b;if(!Object.is(T,t)){const I=t;t=(w!=null?w:typeof T!="object")?T:Object.assign({},t,T),r.forEach(z=>z(t,I))}},l=()=>t,u={setState:o,getState:l,subscribe:b=>(r.add(b),()=>r.delete(b)),destroy:()=>r.clear()};return t=e(o,l,u),u},xW=e=>e?vC(e):vC;var nz={exports:{}},iz={},oz={exports:{}},az={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ph=W.exports;function wW(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bW=typeof Object.is=="function"?Object.is:wW,SW=ph.useState,EW=ph.useEffect,kW=ph.useLayoutEffect,TW=ph.useDebugValue;function CW(e,t){var r=t(),o=SW({inst:{value:r,getSnapshot:t}}),l=o[0].inst,h=o[1];return kW(function(){l.value=r,l.getSnapshot=t,Rv(l)&&h({inst:l})},[e,r,t]),EW(function(){return Rv(l)&&h({inst:l}),e(function(){Rv(l)&&h({inst:l})})},[e]),TW(r),r}function Rv(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!bW(e,r)}catch{return!0}}function PW(e,t){return t()}var IW=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?PW:CW;az.useSyncExternalStore=ph.useSyncExternalStore!==void 0?ph.useSyncExternalStore:IW;oz.exports=az;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E0=W.exports,MW=oz.exports;function AW(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zW=typeof Object.is=="function"?Object.is:AW,DW=MW.useSyncExternalStore,RW=E0.useRef,LW=E0.useEffect,FW=E0.useMemo,OW=E0.useDebugValue;iz.useSyncExternalStoreWithSelector=function(e,t,r,o,l){var h=RW(null);if(h.current===null){var g={hasValue:!1,value:null};h.current=g}else g=h.current;h=FW(function(){function b(j){if(!w){if(w=!0,T=j,j=o(j),l!==void 0&&g.hasValue){var Z=g.value;if(l(Z,j))return I=Z}return I=j}if(Z=I,zW(T,j))return Z;var H=o(j);return l!==void 0&&l(Z,H)?Z:(T=j,I=H)}var w=!1,T,I,z=r===void 0?null:r;return[function(){return b(t())},z===null?void 0:function(){return b(z())}]},[t,r,o,l]);var u=DW(e,h[0],h[1]);return LW(function(){g.hasValue=!0,g.value=u},[u]),OW(u),u};nz.exports=iz;var $W=nz.exports;const{useSyncExternalStoreWithSelector:BW}=$W;function sz(e,t=e.getState,r){const o=BW(e.subscribe,e.getState,e.getServerState||e.getState,t,r);return W.exports.useDebugValue(o),o}const xC=e=>{const t=typeof e=="function"?xW(e):e,r=(o,l)=>sz(t,o,l);return Object.assign(r,t),r},lz=e=>e?xC(e):xC;function uz(){const e=W.exports.createContext(void 0);return{Provider:({createStore:l,children:h})=>{const g=W.exports.useRef();return g.current||(g.current=l()),W.exports.createElement(e.Provider,{value:g.current},h)},useStore:(l,h)=>{const g=W.exports.useContext(e);if(!g)throw new Error("Seems like you have not used zustand provider as an ancestor.");return sz(g,l,h)},useStoreApi:()=>{const l=W.exports.useContext(e);if(!l)throw new Error("Seems like you have not used zustand provider as an ancestor.");return W.exports.useMemo(()=>({...l}),[l])}}}const cz=(e,t)=>(...r)=>Object.assign({},e,t(...r));var hz={},k0={},Nb={exports:{}},dz={exports:{}};(function(e,t){(function(r,o){e.exports=o()})(vf,function(){var r=typeof Promise=="function",o=typeof self=="object"?self:vf,l=typeof Symbol!="undefined",h=typeof Map!="undefined",g=typeof Set!="undefined",u=typeof WeakMap!="undefined",b=typeof WeakSet!="undefined",w=typeof DataView!="undefined",T=l&&typeof Symbol.iterator!="undefined",I=l&&typeof Symbol.toStringTag!="undefined",z=g&&typeof Set.prototype.entries=="function",j=h&&typeof Map.prototype.entries=="function",Z=z&&Object.getPrototypeOf(new Set().entries()),H=j&&Object.getPrototypeOf(new Map().entries()),le=T&&typeof Array.prototype[Symbol.iterator]=="function",$=le&&Object.getPrototypeOf([][Symbol.iterator]()),B=T&&typeof String.prototype[Symbol.iterator]=="function",X=B&&Object.getPrototypeOf(""[Symbol.iterator]()),ue=8,ce=-1;function me(ge){var xe=typeof ge;if(xe!=="object")return xe;if(ge===null)return"null";if(ge===o)return"global";if(Array.isArray(ge)&&(I===!1||!(Symbol.toStringTag in ge)))return"Array";if(typeof window=="object"&&window!==null){if(typeof window.location=="object"&&ge===window.location)return"Location";if(typeof window.document=="object"&&ge===window.document)return"Document";if(typeof window.navigator=="object"){if(typeof window.navigator.mimeTypes=="object"&&ge===window.navigator.mimeTypes)return"MimeTypeArray";if(typeof window.navigator.plugins=="object"&&ge===window.navigator.plugins)return"PluginArray"}if((typeof window.HTMLElement=="function"||typeof window.HTMLElement=="object")&&ge instanceof window.HTMLElement){if(ge.tagName==="BLOCKQUOTE")return"HTMLQuoteElement";if(ge.tagName==="TD")return"HTMLTableDataCellElement";if(ge.tagName==="TH")return"HTMLTableHeaderCellElement"}}var je=I&&ge[Symbol.toStringTag];if(typeof je=="string")return je;var ke=Object.getPrototypeOf(ge);return ke===RegExp.prototype?"RegExp":ke===Date.prototype?"Date":r&&ke===Promise.prototype?"Promise":g&&ke===Set.prototype?"Set":h&&ke===Map.prototype?"Map":b&&ke===WeakSet.prototype?"WeakSet":u&&ke===WeakMap.prototype?"WeakMap":w&&ke===DataView.prototype?"DataView":h&&ke===H?"Map Iterator":g&&ke===Z?"Set Iterator":le&&ke===$?"Array Iterator":B&&ke===X?"String Iterator":ke===null?"Object":Object.prototype.toString.call(ge).slice(ue,ce)}return me})})(dz);/*!
 * deep-eql
 * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */var wC=dz.exports;function fz(){this._key="chai/deep-eql__"+Math.random()+Date.now()}fz.prototype={get:function(t){return t[this._key]},set:function(t,r){Object.isExtensible(t)&&Object.defineProperty(t,this._key,{value:r,configurable:!0})}};var Ub=typeof WeakMap=="function"?WeakMap:fz;/*!
 * Check to see if the MemoizeMap has recorded a result of the two operands
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @returns {Boolean|null} result
*/function bC(e,t,r){if(!r||mh(e)||mh(t))return null;var o=r.get(e);if(o){var l=o.get(t);if(typeof l=="boolean")return l}return null}/*!
 * Set the result of the equality into the MemoizeMap
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @param {Boolean} result
*/function Ym(e,t,r,o){if(!(!r||mh(e)||mh(t))){var l=r.get(e);l?l.set(t,o):(l=new Ub,l.set(t,o),r.set(e,l))}}/*!
 * Primary Export
 */Nb.exports=T0;Nb.exports.MemoizeMap=Ub;function T0(e,t,r){if(r&&r.comparator)return SC(e,t,r);var o=pz(e,t);return o!==null?o:SC(e,t,r)}function pz(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t?!0:mh(e)||mh(t)?!1:null}/*!
 * The main logic of the `deepEqual` function.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (optional) Additional options
 * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
 * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
    complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
    references to blow the stack.
 * @return {Boolean} equal match
*/function SC(e,t,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new Ub;var o=r&&r.comparator,l=bC(e,t,r.memoize);if(l!==null)return l;var h=bC(t,e,r.memoize);if(h!==null)return h;if(o){var g=o(e,t);if(g===!1||g===!0)return Ym(e,t,r.memoize,g),g;var u=pz(e,t);if(u!==null)return u}var b=wC(e);if(b!==wC(t))return Ym(e,t,r.memoize,!1),!1;Ym(e,t,r.memoize,!0);var w=VW(e,t,b,r);return Ym(e,t,r.memoize,w),w}function VW(e,t,r,o){switch(r){case"String":case"Number":case"Boolean":case"Date":return T0(e.valueOf(),t.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return e===t;case"Error":return mz(e,t,["name","message","code"],o);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return cu(e,t,o);case"RegExp":return NW(e,t);case"Generator":return UW(e,t,o);case"DataView":return cu(new Uint8Array(e.buffer),new Uint8Array(t.buffer),o);case"ArrayBuffer":return cu(new Uint8Array(e),new Uint8Array(t),o);case"Set":return EC(e,t,o);case"Map":return EC(e,t,o);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return e.equals(t);case"Temporal.Duration":return e.total("nanoseconds")===t.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return e.toString()===t.toString();default:return GW(e,t,o)}}/*!
 * Compare two Regular Expressions for equality.
 *
 * @param {RegExp} leftHandOperand
 * @param {RegExp} rightHandOperand
 * @return {Boolean} result
 */function NW(e,t){return e.toString()===t.toString()}/*!
 * Compare two Sets/Maps for equality. Faster than other equality functions.
 *
 * @param {Set} leftHandOperand
 * @param {Set} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */function EC(e,t,r){if(e.size!==t.size)return!1;if(e.size===0)return!0;var o=[],l=[];return e.forEach(function(g,u){o.push([g,u])}),t.forEach(function(g,u){l.push([g,u])}),cu(o.sort(),l.sort(),r)}/*!
 * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */function cu(e,t,r){var o=e.length;if(o!==t.length)return!1;if(o===0)return!0;for(var l=-1;++l<o;)if(T0(e[l],t[l],r)===!1)return!1;return!0}/*!
 * Simple equality for generator objects such as those returned by generator functions.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */function UW(e,t,r){return cu(Ox(e),Ox(t),r)}/*!
 * Determine if the given object has an @@iterator function.
 *
 * @param {Object} target
 * @return {Boolean} `true` if the object has an @@iterator function.
 */function jW(e){return typeof Symbol!="undefined"&&typeof e=="object"&&typeof Symbol.iterator!="undefined"&&typeof e[Symbol.iterator]=="function"}/*!
 * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
 * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
 *
 * @param {Object} target
 * @returns {Array} an array of entries from the @@iterator function
 */function kC(e){if(jW(e))try{return Ox(e[Symbol.iterator]())}catch{return[]}return[]}/*!
 * Gets all entries from a Generator. This will consume the generator - which could have side effects.
 *
 * @param {Generator} target
 * @returns {Array} an array of entries from the Generator.
 */function Ox(e){for(var t=e.next(),r=[t.value];t.done===!1;)t=e.next(),r.push(t.value);return r}/*!
 * Gets all own and inherited enumerable keys from a target.
 *
 * @param {Object} target
 * @returns {Array} an array of own and inherited enumerable keys from the target.
 */function TC(e){var t=[];for(var r in e)t.push(r);return t}function CC(e){var t=Object.getOwnPropertySymbols(e);return t}/*!
 * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
 * each key. If any value of the given key is not equal, the function will return false (early).
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */function mz(e,t,r,o){var l=r.length;if(l===0)return!0;for(var h=0;h<l;h+=1)if(T0(e[r[h]],t[r[h]],o)===!1)return!1;return!0}/*!
 * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
 * for each enumerable key in the object.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */function GW(e,t,r){var o=TC(e),l=TC(t),h=CC(e),g=CC(t);if(o=o.concat(h),l=l.concat(g),o.length&&o.length===l.length)return cu(PC(o).sort(),PC(l).sort())===!1?!1:mz(e,t,o,r);var u=kC(e),b=kC(t);return u.length&&u.length===b.length?(u.sort(),b.sort(),cu(u,b,r)):o.length===0&&u.length===0&&l.length===0&&b.length===0}/*!
 * Returns true if the argument is a primitive.
 *
 * This intentionally returns true for all objects that can be compared by reference,
 * including functions and symbols.
 *
 * @param {Mixed} value
 * @return {Boolean} result
 */function mh(e){return e===null||typeof e!="object"}function PC(e){return e.map(function(r){return typeof r=="symbol"?r.toString():r})}var C0={};Object.defineProperty(C0,"__esModule",{value:!0});C0.findOrCreate=void 0;function WW(e,t,r){const o=e.findIndex(h=>t(h));if(o>=0)return e[o];const l=r();return e.push(l),l}C0.findOrCreate=WW;var P0={};Object.defineProperty(P0,"__esModule",{value:!0});P0.asArraysFactory=void 0;function qW(e){return()=>e.map(t=>t.items)}P0.asArraysFactory=qW;var I0={};Object.defineProperty(I0,"__esModule",{value:!0});I0.asEntriesFactory=void 0;function ZW(e){return t=>{var r,o;const l=(r=t==null?void 0:t.keyName)!==null&&r!==void 0?r:"key",h=(o=t==null?void 0:t.itemsName)!==null&&o!==void 0?o:"items";return e.map(g=>({[l]:g.key,[h]:g.items}))}}I0.asEntriesFactory=ZW;var M0={};Object.defineProperty(M0,"__esModule",{value:!0});M0.asMapFactory=void 0;function HW(e){return()=>{const t=new Map;for(const r of e)t.set(r.key,r.items);return t}}M0.asMapFactory=HW;var A0={};Object.defineProperty(A0,"__esModule",{value:!0});A0.asObjectFactory=void 0;function XW(e){return typeof e=="string"||typeof e=="number"||typeof e=="symbol"}function KW(e){return()=>{const t={};for(const r of e)XW(r.key)&&(t[r.key]=r.items);return t}}A0.asObjectFactory=KW;var z0={};Object.defineProperty(z0,"__esModule",{value:!0});z0.asTuplesFactory=void 0;function YW(e){return()=>e.map(t=>[t.key,t.items])}z0.asTuplesFactory=YW;var D0={};Object.defineProperty(D0,"__esModule",{value:!0});D0.keysFactory=void 0;function JW(e){return()=>e.map(t=>t.key)}D0.keysFactory=JW;var QW=vf&&vf.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(k0,"__esModule",{value:!0});k0.group=void 0;const eq=QW(Nb.exports),tq=C0,rq=P0,nq=I0,iq=M0,oq=A0,aq=z0,sq=D0;function lq(e,t){const r=[];let o=0;for(const l of e){const h=t(l,o);o++;const g=b=>(0,eq.default)(b.key,h),u=()=>({key:h,items:[]});(0,tq.findOrCreate)(r,g,u).items.push(l)}return r}function uq(e){return Object.freeze({by:r=>{const l=lq(e,typeof r=="function"?r:h=>h[r]);return Object.freeze({asArrays:(0,rq.asArraysFactory)(l),asEntries:(0,nq.asEntriesFactory)(l),asMap:(0,iq.asMapFactory)(l),asObject:(0,oq.asObjectFactory)(l),asTuples:(0,aq.asTuplesFactory)(l),keys:(0,sq.keysFactory)(l)})}})}k0.group=uq;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.group=void 0;var t=k0;Object.defineProperty(e,"group",{enumerable:!0,get:function(){return t.group}})})(hz);const jb={scheme:"Light Theme",author:"mac gainor (https://github.com/mac-s-g)",base00:"rgba(0, 0, 0, 0)",base01:"rgb(245, 245, 245)",base02:"rgb(235, 235, 235)",base03:"#93a1a1",base04:"rgba(0, 0, 0, 0.3)",base05:"#586e75",base06:"#073642",base07:"#002b36",base08:"#d33682",base09:"#cb4b16",base0A:"#dc322f",base0B:"#859900",base0C:"#6c71c4",base0D:"#586e75",base0E:"#2aa198",base0F:"#268bd2"},gz={scheme:"Dark Theme",author:"Chris Kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"},yz=()=>null;yz.when=()=>!1;var Lv,Fv,Ov,$v,Bv,Vv,Nv,Uv,jv,Gv,Wv,qv,Zv,Hv,Xv;const cq=e=>lz(cz({enableClipboard:(Lv=e.enableClipboard)!==null&&Lv!==void 0?Lv:!0,indentWidth:(Fv=e.indentWidth)!==null&&Fv!==void 0?Fv:3,groupArraysAfterLength:(Ov=e.groupArraysAfterLength)!==null&&Ov!==void 0?Ov:100,collapseStringsAfterLength:e.collapseStringsAfterLength===!1?Number.MAX_VALUE:($v=e.collapseStringsAfterLength)!==null&&$v!==void 0?$v:50,maxDisplayLength:(Bv=e.maxDisplayLength)!==null&&Bv!==void 0?Bv:30,rootName:(Vv=e.rootName)!==null&&Vv!==void 0?Vv:"root",onChange:(Nv=e.onChange)!==null&&Nv!==void 0?Nv:()=>{},onCopy:(Uv=e.onCopy)!==null&&Uv!==void 0?Uv:void 0,keyRenderer:(jv=e.keyRenderer)!==null&&jv!==void 0?jv:yz,editable:(Gv=e.editable)!==null&&Gv!==void 0?Gv:!1,defaultInspectDepth:(Wv=e.defaultInspectDepth)!==null&&Wv!==void 0?Wv:5,objectSortKeys:(qv=e.objectSortKeys)!==null&&qv!==void 0?qv:!1,quotesOnKeys:(Zv=e.quotesOnKeys)!==null&&Zv!==void 0?Zv:!0,displayDataTypes:(Hv=e.displayDataTypes)!==null&&Hv!==void 0?Hv:!0,inspectCache:{},hoverPath:null,colorspace:jb,value:e.value,displayObjectSize:(Xv=e.displayObjectSize)!==null&&Xv!==void 0?Xv:!0},(t,r)=>({getInspectCache:(o,l)=>{const h=l!==void 0?o.join(".")+`[${l}]nt`:o.join(".");return r().inspectCache[h]},setInspectCache:(o,l,h)=>{const g=h!==void 0?o.join(".")+`[${h}]nt`:o.join(".");t(u=>({inspectCache:{...u.inspectCache,[g]:typeof l=="function"?l(u.inspectCache[g]):l}}))},setHover:(o,l)=>{t({hoverPath:o?{path:o,nestedIndex:l}:null})}}))),{useStore:lr,useStoreApi:_z,Provider:hq}=uz(),Gb=()=>lr(e=>e.colorspace.base07);function dq({timeout:e=2e3}={}){const[t,r]=W.exports.useState(!1),o=W.exports.useRef(null),l=W.exports.useCallback(b=>{const w=o.current;w&&window.clearTimeout(w),o.current=window.setTimeout(()=>r(!1),e),r(b)},[e]),h=lr(b=>b.onCopy),g=W.exports.useCallback((b,w)=>{if(typeof h=="function")try{const T=h(b,w);T instanceof Promise?T.then(()=>{l(!0)}).catch(I=>{console.error(`error when copy ${b.length===0?"src":`src[${b.join(".")}`}]`,I)}):l(!0)}catch(T){console.error(`error when copy ${b.length===0?"src":`src[${b.join(".")}`}]`,T)}else{const T=JSON.stringify(typeof w=="function"?w.toString():w,null,"  ");"clipboard"in navigator?navigator.clipboard.writeText(T).then(()=>l(!0)).catch(()=>Sk(T)):Sk(T)}},[l,h]),u=W.exports.useCallback(()=>{r(!1),o.current&&clearTimeout(o.current)},[]);return{copy:g,reset:u,copied:t}}const fq=(e,t,r)=>{if(e===null||r===null||typeof e!="object"||typeof r!="object")return!1;if(Object.is(e,r)&&t.length!==0)return"";const o=[],l=[...t];let h=e;for(;h!==r||l.length!==0;){if(typeof h!="object"||h===null)return!1;if(Object.is(h,r))return o.reduce((u,b,w)=>typeof b=="number"?u+`[${b}]`:u+`${w===0?"":"."}${b}`,"");const g=l.shift();o.push(g),h=h[g]}return!1};function Wb(e,t){const r=lr(o=>o.value);return W.exports.useMemo(()=>fq(r,e,t),[e,t,r])}function pq(e,t,r){const o=e.length,l=Wb(e,t),h=lr(I=>I.getInspectCache),g=lr(I=>I.setInspectCache),u=lr(I=>I.defaultInspectDepth);W.exports.useEffect(()=>{if(h(e,r)===void 0)if(r!==void 0)g(e,!1,r);else{const z=l?!1:o<u;g(e,z)}},[u,o,h,l,r,e,g]);const[b,w]=W.exports.useState(()=>{const I=h(e,r);return I!==void 0?I:r!==void 0||l?!1:o<u}),T=W.exports.useCallback(I=>{w(z=>{const j=typeof I=="boolean"?I:I(z);return g(e,j,r),j})},[r,e,g]);return[b,T]}class mq extends Error{constructor(t){super(t?`${t}
`:`The behavior is not expected and not allowed.
If you see this in development, please fix the error ASAP.
If you see this in production, please contract our customer service.
`)}}const al=Ch(e=>St(Ln,{component:"div",...e}))`
  display: inline-block;
`,vz=({dataType:e,enable:t=!0})=>t?St(al,{className:"data-type-label",sx:{mx:.5,fontSize:"0.7rem",opacity:.8},children:e}):null;function ns(e,t,r){var o;const l=(o=r.displayTypeLabel)!==null&&o!==void 0?o:!0,h=Re.memo(t),g=w=>{const T=lr(z=>z.displayDataTypes),I=lr(z=>z.colorspace[r.colorKey]);return Oi(al,{sx:{color:I},children:[l&&T&&St(vz,{dataType:e}),St(al,{className:`${e}-value`,children:St(h,{value:w.value})})]})};if(g.displayName=`easy-${e}-type`,!r.fromString)return{Component:g};const u=r.fromString,b=({value:w,setValue:T})=>{const I=lr(z=>z.colorspace[r.colorKey]);return St(dW,{value:`${w}`,onChange:W.exports.useCallback(z=>{const j=u(z.target.value);T(j)},[T]),size:"small",multiline:!0,sx:{color:I,padding:.5,borderStyle:"solid",borderColor:"black",borderWidth:1,fontSize:"0.8rem",fontFamily:"monospace",display:"inline-flex"}})};return b.displayName=`easy-${e}-type-editor`,{Component:g,Editor:b}}const gq=e=>{const t=e.toString();let r=!0;const o=t.indexOf(")"),l=t.indexOf("=>");return l!==-1&&l>o&&(r=!1),r?t.substring(t.indexOf("{",o)+1,t.lastIndexOf("}")):t.substring(t.indexOf("=>")+2)},yq=e=>{const t=e.toString();return t.indexOf("function")!==-1?t.substring(8,t.indexOf("{")).trim():t.substring(0,t.indexOf("=>")+2).trim()},_q="{",vq="}",xq=e=>Oi(Vb,{children:[St(vz,{dataType:"function"}),Oi(Ln,{component:"span",className:"data-function-start",sx:{letterSpacing:.5},children:[yq(e.value)," ",_q]})]}),wq=()=>St(Vb,{children:St(Ln,{component:"span",className:"data-function-end",children:vq})}),bq=e=>{const t=lr(r=>r.colorspace.base05);return St(Vb,{children:St(Ln,{className:"data-function",sx:{display:e.inspect?"block":"inline-block",pl:e.inspect?2:0,color:t},children:e.inspect?gq(e.value):St(Ln,{component:"span",className:"data-function-body",onClick:()=>e.setInspect(!0),sx:{"&:hover":{cursor:"pointer"}},children:"..."})})})},Sq=e=>St(Lx,{...e,children:St("path",{d:"M 12 2 C 10.615 1.998 9.214625 2.2867656 7.890625 2.8847656 L 8.9003906 4.6328125 C 9.9043906 4.2098125 10.957 3.998 12 4 C 15.080783 4 17.738521 5.7633175 19.074219 8.3222656 L 17.125 9 L 21.25 11 L 22.875 7 L 20.998047 7.6523438 C 19.377701 4.3110398 15.95585 2 12 2 z M 6.5097656 4.4882812 L 2.2324219 5.0820312 L 3.734375 6.3808594 C 1.6515335 9.4550558 1.3615962 13.574578 3.3398438 17 C 4.0308437 18.201 4.9801562 19.268234 6.1601562 20.115234 L 7.1699219 18.367188 C 6.3019219 17.710187 5.5922656 16.904 5.0722656 16 C 3.5320014 13.332354 3.729203 10.148679 5.2773438 7.7128906 L 6.8398438 9.0625 L 6.5097656 4.4882812 z M 19.929688 13 C 19.794687 14.08 19.450734 15.098 18.927734 16 C 17.386985 18.668487 14.531361 20.090637 11.646484 19.966797 L 12.035156 17.9375 L 8.2402344 20.511719 L 10.892578 23.917969 L 11.265625 21.966797 C 14.968963 22.233766 18.681899 20.426323 20.660156 17 C 21.355156 15.801 21.805219 14.445 21.949219 13 L 19.929688 13 z"})}),Eq="{",kq="[",Tq="}",Cq="]";function xz(e){let t,r="";return Array.isArray(e)?t=e.length:e instanceof Map||e instanceof Set?(r=e[Symbol.toStringTag],t=e.size):t=Object.keys(e).length,Object.prototype.hasOwnProperty.call(e,Symbol.toStringTag)&&(r=e[Symbol.toStringTag]),`${t} Items${r?` (${r})`:""}`}const Pq=e=>{const t=lr(u=>u.colorspace.base04),r=Gb(),o=W.exports.useMemo(()=>Array.isArray(e.value),[e.value]),l=W.exports.useMemo(()=>e.inspect?xz(e.value):"",[e.inspect,e.value]),h=lr(u=>u.displayObjectSize),g=Wb(e.path,e.value);return Oi(Ln,{component:"span",className:"data-object-start",sx:{letterSpacing:.5},children:[o?kq:Eq,h?St(Ln,{component:"span",sx:{pl:.5,fontStyle:"italic",color:t},children:l}):null,g&&!e.inspect?Oi(So,{children:[St(Sq,{sx:{fontSize:12,color:r,mx:.5}}),g]}):null]})},Iq=e=>{const t=lr(h=>h.colorspace.base04),r=W.exports.useMemo(()=>Array.isArray(e.value),[e.value]),o=lr(h=>h.displayObjectSize),l=W.exports.useMemo(()=>e.inspect?"":xz(e.value),[e.inspect,e.value]);return Oi(Ln,{component:"span",className:"data-object-end",children:[r?Cq:Tq,o?St(Ln,{component:"span",sx:{pl:.5,fontStyle:"italic",color:t},children:l}):null]})};function Mq(e){return typeof(e==null?void 0:e[Symbol.iterator])=="function"}const Aq=e=>{const t=Gb(),r=lr(z=>z.colorspace.base02),o=lr(z=>z.groupArraysAfterLength),l=Wb(e.path,e.value),[h,g]=W.exports.useState(lr(z=>z.maxDisplayLength)),u=lr(z=>z.objectSortKeys),b=W.exports.useMemo(()=>{if(!e.inspect)return null;const z=e.value;if(Mq(z)&&!Array.isArray(z)){const le=[];if(z instanceof Map)for(const $ of z){const[B,X]=$,ue=`${B}`;le.push(St(Ic,{path:[...e.path,ue],value:X,editable:!1},ue))}else{let $=0;for(const B of z)le.push(St(Ic,{path:[...e.path,`iterator:${$}`],value:B,nestedIndex:$,editable:!1},$)),$++}return le}if(Array.isArray(z)){if(z.length<=o){const $=z.slice(0,h).map((B,X)=>{const ue=[...e.path,X];return St(Ic,{path:ue,value:B},X)});if(z.length>h){const B=z.length-h;$.push(Oi(al,{sx:{cursor:"pointer",lineHeight:1.5,color:t,letterSpacing:.5,opacity:.8},onClick:()=>g(X=>X*2),children:["hidden ",B," items..."]},"last"))}return $}return hz.group(z).by(($,B)=>Math.floor(B/o)).asArrays().map(($,B)=>{const X=[...e.path];return St(Ic,{path:X,value:$,nestedIndex:B},B)})}let Z=Object.entries(z);u&&(Z=Z.sort(([le],[$])=>u===!0?le.localeCompare($):u(le,$)));const H=Z.slice(0,h).map(([le,$])=>{const B=[...e.path,le];return St(Ic,{path:B,value:$},le)});if(Z.length>h){const le=Z.length-h;H.push(Oi(al,{sx:{cursor:"pointer",lineHeight:1.5,color:t,letterSpacing:.5,opacity:.8},onClick:()=>g($=>$*2),children:["hidden ",le," items..."]},"last"))}return H},[e.inspect,e.value,e.path,o,h,t,u]),w=e.inspect?.6:0,T=lr(z=>z.indentWidth),I=e.inspect?T-w:T;return St(Ln,{className:"data-object",sx:{display:e.inspect?"block":"inline-block",pl:e.inspect?I-.6:0,marginLeft:w,color:t,borderLeft:e.inspect?`1px solid ${r}`:"none"},children:e.inspect?b:l?null:St(Ln,{component:"span",className:"data-object-body",onClick:()=>e.setInspect(!0),sx:{"&:hover":{cursor:"pointer"}},children:"..."})})},zq=()=>lz(cz({registry:[]},e=>({registerTypes:t=>{e(r=>({registry:typeof t=="function"?t(r.registry):t}))}}))),{Provider:Dq,useStore:wz,useStoreApi:BZ}=uz(),Rq={is:e=>typeof e=="object",Component:Aq,PreComponent:Pq,PostComponent:Iq};function Lq(e,t,r){let o;for(const l of r)if(l.is(e,t)&&(o=l,typeof e=="object"))return l;if(o===void 0){if(typeof e=="object")return Rq;throw new mq("this is not possible")}return o}function Fq(e,t){const r=wz(o=>o.registry);return W.exports.useMemo(()=>Lq(e,t,r),[e,t,r])}function Oq(){const e=[];function t(l){function h(g,u){var b,w;return Object.is(g.value,u.value)&&g.inspect&&u.inspect&&((b=g.path)===null||b===void 0?void 0:b.join("."))===((w=u.path)===null||w===void 0?void 0:w.join("."))}l.Component=W.exports.memo(l.Component,h),l.Editor&&(l.Editor=W.exports.memo(l.Editor,function(u,b){return Object.is(u.value,b.value)})),l.PreComponent&&(l.PreComponent=W.exports.memo(l.PreComponent,h)),l.PostComponent&&(l.PostComponent=W.exports.memo(l.PostComponent,h)),e.push(l)}t({is:l=>typeof l=="boolean",...ns("bool",({value:l})=>St(So,{children:l?"true":"false"}),{colorKey:"base0E",fromString:l=>Boolean(l)})});const r={weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};t({is:l=>l instanceof Date,...ns("date",({value:l})=>St(So,{children:l.toLocaleTimeString("en-us",r)}),{colorKey:"base0D"})}),t({is:l=>l===null,...ns("null",()=>{const l=lr(h=>h.colorspace.base02);return St(Ln,{sx:{fontSize:"0.8rem",backgroundColor:l,fontWeight:"bold",borderRadius:"3px",padding:"0.5px 2px"},children:"NULL"})},{colorKey:"base08",displayTypeLabel:!1})}),t({is:l=>l===void 0,...ns("undefined",()=>{const l=lr(h=>h.colorspace.base02);return St(Ln,{sx:{fontSize:"0.7rem",backgroundColor:l,borderRadius:"3px",padding:"0.5px 2px"},children:"undefined"})},{colorKey:"base05",displayTypeLabel:!1})}),t({is:l=>typeof l=="string",...ns("string",l=>{const[h,g]=W.exports.useState(!1),u=lr(T=>T.collapseStringsAfterLength),b=h?l.value:l.value.slice(0,u),w=l.value.length>u;return Oi(Ln,{component:"span",sx:{overflowWrap:"anywhere",cursor:w?"pointer":"inherit"},onClick:()=>{g(T=>!T)},children:['"',b,h?St("span",{children:"..."}):St(So,{}),'"']})},{colorKey:"base09",fromString:l=>l})}),t({is:l=>typeof l=="function",Component:bq,PreComponent:xq,PostComponent:wq});const o=l=>l%1===0;return t({is:l=>typeof l=="number"&&isNaN(l),...ns("NaN",()=>{const l=lr(h=>h.colorspace.base02);return St(Ln,{sx:{backgroundColor:l,fontSize:"0.8rem",fontWeight:"bold",borderRadius:"3px"},children:"NaN"})},{colorKey:"base08",displayTypeLabel:!1})}),t({is:l=>typeof l=="number"&&!o(l),...ns("float",({value:l})=>St(So,{children:`${l}`}),{colorKey:"base0B",fromString:l=>parseFloat(l)})}),t({is:l=>typeof l=="number"&&o(l),...ns("int",({value:l})=>St(So,{children:`${l}`}),{colorKey:"base0F",fromString:l=>parseInt(l)})}),t({is:l=>typeof l=="bigint",...ns("bigint",({value:l})=>St(So,{children:`${l}n`}),{colorKey:"base0F",fromString:l=>BigInt(l.replace(/\D/g,""))})}),e}const Jm=Ch(e=>St(Ln,{...e,component:"span"}))`
  cursor: pointer;
  padding-left: 0.7rem;
`,Ic=e=>{const{value:t,path:r,nestedIndex:o}=e;var l;const h=(l=e.editable)!==null&&l!==void 0?l:void 0,g=lr(it=>it.editable),u=W.exports.useMemo(()=>g===!1||h===!1?!1:typeof g=="function"?!!g(r,t):g,[r,h,g,t]),[b,w]=W.exports.useState(typeof t=="function"?()=>t:t),T=r.length,I=r[T-1],z=lr(it=>it.hoverPath),j=W.exports.useMemo(()=>z&&r.every((it,xr)=>it===z.path[xr]&&o===z.nestedIndex),[z,r,o]),Z=lr(it=>it.setHover),H=lr(it=>it.value),[le,$]=pq(r,t,o),[B,X]=W.exports.useState(!1),ue=lr(it=>it.onChange),ce=Gb(),me=lr(it=>it.colorspace.base0C),{Component:ge,PreComponent:xe,PostComponent:je,Editor:ke}=Fq(t,r),Be=lr(it=>it.quotesOnKeys),zt=lr(it=>it.rootName),vt=H===t,Et=Number.isInteger(Number(I)),Ot=lr(it=>it.enableClipboard),{copy:Xt,copied:or}=dq(),Ne=W.exports.useMemo(()=>B?Oi(So,{children:[St(Jm,{children:St(gW,{sx:{fontSize:".8rem"},onClick:()=>{X(!1),w(t)}})}),St(Jm,{children:St(_C,{sx:{fontSize:".8rem"},onClick:()=>{X(!1),ue(r,t,b)}})})]}):Oi(So,{children:[Ot&&St(Jm,{onClick:it=>{it.preventDefault();try{Xt(r,t)}catch(xr){console.error(xr)}},children:or?St(_C,{sx:{fontSize:".8rem"}}):St(yW,{sx:{fontSize:".8rem"}})}),ke&&u&&St(Jm,{onClick:it=>{it.preventDefault(),X(!0)},children:St(_W,{sx:{fontSize:".8rem"}})})]}),[ke,or,Xt,u,B,Ot,ue,r,b,t]),rt=!!(xe&&je),ht=lr(it=>it.keyRenderer),Dt=W.exports.useMemo(()=>({path:r,inspect:le,setInspect:$,value:t}),[le,r,$,t]);return Oi(Ln,{className:"data-key-pair","data-testid":"data-key-pair"+r.join("."),onMouseEnter:W.exports.useCallback(()=>Z(r,o),[Z,r,o]),children:[Oi(al,{component:"span",className:"data-key",sx:{lineHeight:1.5,color:ce,letterSpacing:.5,opacity:.8},onClick:W.exports.useCallback(it=>{it.isDefaultPrevented()||$(xr=>!xr)},[$]),children:[rt?le?St(vW,{sx:{fontSize:".8rem","&:hover":{cursor:"pointer"}}}):St(mW,{sx:{fontSize:".8rem","&:hover":{cursor:"pointer"}}}):null,vt?zt!==!1?Be?Oi(So,{children:['"',zt,'"']}):St(So,{children:zt}):null:ht.when(Dt)?St(ht,{...Dt}):o===void 0&&(Et?St(Ln,{component:"span",style:{color:me},children:I}):Be?Oi(So,{children:['"',I,'"']}):St(So,{children:I})),vt?zt!==!1?St(al,{sx:{mx:.5},children:":"}):null:o===void 0&&St(al,{sx:{mx:.5},children:":"}),xe&&St(xe,{...Dt}),j&&rt&&le&&Ne]}),B&&u?ke&&St(ke,{value:b,setValue:w}):ge?St(ge,{...Dt}):St(Ln,{component:"span",className:"data-value-fallback",children:`fallback: ${t}`}),je&&St(je,{...Dt}),j&&rt&&!le&&Ne,j&&!rt&&Ne]})},IC="(prefers-color-scheme: dark)";function $q(){const[e,t]=W.exports.useState(!1);return W.exports.useEffect(()=>{const r=l=>{t(l.matches)};t(window.matchMedia(IC).matches);const o=window.matchMedia(IC);return o.addEventListener("change",r),()=>o.removeEventListener("change",r)},[]),e}function jo(e,t){const r=_z();W.exports.useEffect(()=>{t!==void 0&&r.setState({[e]:t})},[e,t,r])}const Bq=e=>{const t=_z();jo("value",e.value),jo("editable",e.editable),jo("indentWidth",e.indentWidth),jo("onChange",e.onChange),jo("groupArraysAfterLength",e.groupArraysAfterLength),jo("keyRenderer",e.keyRenderer),jo("maxDisplayLength",e.maxDisplayLength),jo("enableClipboard",e.enableClipboard),jo("rootName",e.rootName),jo("displayDataTypes",e.displayDataTypes),jo("displayObjectSize",e.displayObjectSize),jo("onCopy",e.onCopy),W.exports.useEffect(()=>{e.theme==="light"?t.setState({colorspace:jb}):e.theme==="dark"?t.setState({colorspace:gz}):typeof e.theme=="object"&&t.setState({colorspace:e.theme})},[t,e.theme]);const r=W.exports.useRef(!0),o=W.exports.useMemo(()=>Oq(),[]),l=wz(b=>b.registerTypes);if(r.current){var h;const b=[...o];(h=e.valueTypes)===null||h===void 0||h.forEach(w=>{b.push(w)}),l(b),r.current=!1}W.exports.useEffect(()=>{var b;const w=[...o];(b=e.valueTypes)===null||b===void 0||b.forEach(T=>{w.push(T)}),l(w)},[o,e.valueTypes,l]);const g=lr(b=>b.value),u=lr(b=>b.setHover);return St(KG,{elevation:0,className:e.className,style:e.style,sx:{fontFamily:"monospace",userSelect:"none",contentVisibility:"auto"},onMouseLeave:W.exports.useCallback(()=>{u(null)},[u]),children:St(Ic,{value:g,path:W.exports.useMemo(()=>[],[])})})},Vq=function(t){const r=$q();var o;const l=W.exports.useMemo(()=>t.theme==="auto"?r?"light":"dark":(o=t.theme)!==null&&o!==void 0?o:"light",[r,t.theme]),h=W.exports.useMemo(()=>{const u=typeof l=="object"?l.base00:l==="dark"?gz.base00:jb.base00;return Ob({components:{MuiPaper:{styleOverrides:{root:{backgroundColor:u}}}},palette:{mode:l==="dark"?"dark":"light",background:{default:u}}})},[l]),g={...t,theme:l};return St(sG,{theme:h,children:St(Dq,{createStore:zq,children:St(hq,{createStore:()=>cq(t),children:St(Bq,{...g})})})})},Nq=dr("div",{padding:"2rem"}),Uq=dr("div",{paddingBottom:"2rem",fontFamily:"monospace"});function jq(e){let[t,r]=W.exports.useState(),[o,l]=W.exports.useState(null);return W.exports.useEffect(()=>{let h=e.file;(async()=>{r(await h.getMetadata()),l(await h.getHeader())})()},[e.file]),Pt(Nq,{children:[o?Pt(Uq,{children:[Pt("div",{children:["root directory: offset=",o.rootDirectoryOffset," len=",o.rootDirectoryLength]}),Pt("div",{children:["metadata: offset=",o.jsonMetadataOffset," len=",o.jsonMetadataLength]}),Pt("div",{children:["leaf directories: offset=",o.leafDirectoryOffset," len=",o.leafDirectoryLength]}),Pt("div",{children:["tile data: offset=",o.tileDataOffset," len=",o.tileDataLength]}),Pt("div",{children:["num addressed tiles: ",o.numAddressedTiles]}),Pt("div",{children:["num tile entries: ",o.numTileEntries]}),Pt("div",{children:["num tile contents: ",o.numTileContents]}),Pt("div",{children:["clustered: ",o.clustered?"true":"false"]}),Pt("div",{children:["internal compression: ",o.internalCompression]}),Pt("div",{children:["tile compression: ",o.tileCompression]}),Pt("div",{children:["tile type: ",o.tileType]}),Pt("div",{children:["min zoom: ",o.minZoom]}),Pt("div",{children:["max zoom: ",o.maxZoom]}),Pt("div",{children:["min lon, min lat, max lon, max lat: ",o.minLon,", ",o.minLat,", ",o.maxLon,", ",o.maxLat]}),Pt("div",{children:["center zoom: ",o.centerZoom]}),Pt("div",{children:["center lon, center lat: ",o.centerLon,", ",o.centerLat]})]}):null,Oe(Vq,{value:t,theme:"dark",defaultInspectDepth:1})]})}const Gq=W.exports.forwardRef((e,t)=>{const{pressed:r,defaultPressed:o=!1,onPressedChange:l,...h}=e,[g=!1,u]=rp({prop:r,onChange:l,defaultProp:o});return W.exports.createElement(oo.button,Ze({type:"button","aria-pressed":g,"data-state":g?"on":"off","data-disabled":e.disabled?"":void 0},h,{ref:t,onClick:Vi(e.onClick,()=>{e.disabled||u(!g)})}))});function Wq(e){const t=e+"CollectionProvider",[r,o]=np(t),[l,h]=r(t,{collectionRef:{current:null},itemMap:new Map}),g=z=>{const{scope:j,children:Z}=z,H=Re.useRef(null),le=Re.useRef(new Map).current;return Re.createElement(l,{scope:j,itemMap:le,collectionRef:H},Z)},u=e+"CollectionSlot",b=Re.forwardRef((z,j)=>{const{scope:Z,children:H}=z,le=h(u,Z),$=ys(j,le.collectionRef);return Re.createElement(Of,{ref:$},H)}),w=e+"CollectionItemSlot",T="data-radix-collection-item";return[{Provider:g,Slot:b,ItemSlot:Re.forwardRef((z,j)=>{const{scope:Z,children:H,...le}=z,$=Re.useRef(null),B=ys(j,$),X=h(w,Z);return Re.useEffect(()=>(X.itemMap.set($,{ref:$,...le}),()=>{X.itemMap.delete($)})),Re.createElement(Of,{[T]:"",ref:B},H)})},function(z){const j=h(e+"CollectionConsumer",z);return Re.useCallback(()=>{const Z=j.collectionRef.current;if(!Z)return[];const H=Array.from(Z.querySelectorAll(`[${T}]`));return Array.from(j.itemMap.values()).sort((le,$)=>H.indexOf(le.ref.current)-H.indexOf($.ref.current))},[j.collectionRef,j.itemMap])},o]}const qq={bubbles:!1,cancelable:!0},[$x,bz,Zq]=Wq("RovingFocusGroup"),[Hq,R0]=np("RovingFocusGroup",[Zq]),[Xq,Kq]=Hq("RovingFocusGroup"),Yq=W.exports.forwardRef((e,t)=>W.exports.createElement($x.Provider,{scope:e.__scopeRovingFocusGroup},W.exports.createElement($x.Slot,{scope:e.__scopeRovingFocusGroup},W.exports.createElement(Jq,Ze({},e,{ref:t}))))),Jq=W.exports.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:o,dir:l="ltr",loop:h=!1,currentTabStopId:g,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:b,onEntryFocus:w,...T}=e,I=W.exports.useRef(null),z=ys(t,I),[j=null,Z]=rp({prop:g,defaultProp:u,onChange:b}),[H,le]=W.exports.useState(!1),$=cl(w),B=bz(r),X=W.exports.useRef(!1);return W.exports.useEffect(()=>{const ue=I.current;if(ue)return ue.addEventListener("rovingFocusGroup.onEntryFocus",$),()=>ue.removeEventListener("rovingFocusGroup.onEntryFocus",$)},[$]),W.exports.createElement(Xq,{scope:r,orientation:o,dir:l,loop:h,currentTabStopId:j,onItemFocus:W.exports.useCallback(ue=>Z(ue),[Z]),onItemShiftTab:W.exports.useCallback(()=>le(!0),[])},W.exports.createElement(oo.div,Ze({tabIndex:H?-1:0,"data-orientation":o},T,{ref:z,style:{outline:"none",...e.style},onMouseDown:Vi(e.onMouseDown,()=>{X.current=!0}),onFocus:Vi(e.onFocus,ue=>{const ce=!X.current;if(ue.target===ue.currentTarget&&ce&&!H){const me=new Event("rovingFocusGroup.onEntryFocus",qq);if(ue.currentTarget.dispatchEvent(me),!me.defaultPrevented){const ge=B().filter(xe=>xe.focusable);Sz([ge.find(xe=>xe.active),ge.find(xe=>xe.id===j),...ge].filter(Boolean).map(xe=>xe.ref.current))}}X.current=!1}),onBlur:Vi(e.onBlur,()=>le(!1))})))}),Qq=W.exports.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:o=!0,active:l=!1,...h}=e,g=mf(),u=Kq("RovingFocusGroupItem",r),b=u.currentTabStopId===g,w=bz(r);return W.exports.createElement($x.ItemSlot,{scope:r,id:g,focusable:o,active:l},W.exports.createElement(oo.span,Ze({tabIndex:b?0:-1,"data-orientation":u.orientation},h,{ref:t,onMouseDown:Vi(e.onMouseDown,T=>{o?u.onItemFocus(g):T.preventDefault()}),onFocus:Vi(e.onFocus,()=>u.onItemFocus(g)),onKeyDown:Vi(e.onKeyDown,T=>{if(T.key==="Tab"&&T.shiftKey)return void u.onItemShiftTab();if(T.target!==T.currentTarget)return;const I=function(Z,H,le){const $=function(B,X){return X!=="rtl"?B:B==="ArrowLeft"?"ArrowRight":B==="ArrowRight"?"ArrowLeft":B}(Z.key,le);return H==="vertical"&&["ArrowLeft","ArrowRight"].includes($)||H==="horizontal"&&["ArrowUp","ArrowDown"].includes($)?void 0:eZ[$]}(T,u.orientation,u.dir);if(I!==void 0){T.preventDefault();let Z=w().filter(H=>H.focusable).map(H=>H.ref.current);if(I==="last")Z.reverse();else if(I==="prev"||I==="next"){I==="prev"&&Z.reverse();const H=Z.indexOf(T.currentTarget);Z=u.loop?(j=H+1,(z=Z).map((le,$)=>z[(j+$)%z.length])):Z.slice(H+1)}setTimeout(()=>Sz(Z))}var z,j})})))}),eZ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Sz(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}const Ez=Yq,qb=Qq,[kz,Tz]=np("ToggleGroup",[R0]),Cz=R0(),tZ=Re.forwardRef((e,t)=>{const{type:r,...o}=e;if(r==="single"){const l=o;return Re.createElement(rZ,Ze({},l,{ref:t}))}if(r==="multiple"){const l=o;return Re.createElement(nZ,Ze({},l,{ref:t}))}throw new Error("Missing prop `type` expected on `ToggleGroup`")}),[Pz,Iz]=kz("ToggleGroup"),rZ=Re.forwardRef((e,t)=>{const{value:r,defaultValue:o,onValueChange:l=()=>{},...h}=e,[g,u]=rp({prop:r,defaultProp:o,onChange:l});return Re.createElement(Pz,{scope:e.__scopeToggleGroup,type:"single",value:g?[g]:[],onItemActivate:u,onItemDeactivate:Re.useCallback(()=>u(""),[u])},Re.createElement(Mz,Ze({},h,{ref:t})))}),nZ=Re.forwardRef((e,t)=>{const{value:r,defaultValue:o,onValueChange:l=()=>{},...h}=e,[g=[],u]=rp({prop:r,defaultProp:o,onChange:l}),b=Re.useCallback(T=>u((I=[])=>[...I,T]),[u]),w=Re.useCallback(T=>u((I=[])=>I.filter(z=>z!==T)),[u]);return Re.createElement(Pz,{scope:e.__scopeToggleGroup,type:"multiple",value:g,onItemActivate:b,onItemDeactivate:w},Re.createElement(Mz,Ze({},h,{ref:t})))}),[iZ,oZ]=kz("ToggleGroup"),Mz=Re.forwardRef((e,t)=>{const{__scopeToggleGroup:r,disabled:o=!1,rovingFocus:l=!0,orientation:h,dir:g="ltr",loop:u=!0,...b}=e,w=Cz(r),T={role:"group",dir:g,...b};return Re.createElement(iZ,{scope:r,rovingFocus:l,disabled:o},l?Re.createElement(Ez,Ze({asChild:!0},w,{orientation:h,dir:g,loop:u}),Re.createElement(oo.div,Ze({},T,{ref:t}))):Re.createElement(oo.div,Ze({},T,{ref:t})))}),aZ=Re.forwardRef((e,t)=>{const r=Iz("ToggleGroupItem",e.__scopeToggleGroup),o=oZ("ToggleGroupItem",e.__scopeToggleGroup),l=Cz(e.__scopeToggleGroup),h=r.value.includes(e.value),g=o.disabled||e.disabled,u={...e,pressed:h,disabled:g},b=Re.useRef(null);return o.rovingFocus?Re.createElement(qb,Ze({asChild:!0},l,{focusable:!g,active:h,ref:b}),Re.createElement(MC,Ze({},u,{ref:t}))):Re.createElement(MC,Ze({},u,{ref:t}))}),MC=Re.forwardRef((e,t)=>{const{__scopeToggleGroup:r,value:o,...l}=e,h=Iz("ToggleGroupItem",r),g={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},u=h.type==="single"?g:void 0;return Re.createElement(Gq,Ze({},u,l,{ref:t,onPressedChange:b=>{b?h.onItemActivate(o):h.onItemDeactivate(o)}}))}),sZ=tZ,lZ=aZ,[uZ,VZ]=np("Toolbar",[R0,Tz]),Zb=R0(),Az=Tz(),[cZ,hZ]=uZ("Toolbar"),dZ=W.exports.forwardRef((e,t)=>{const{__scopeToolbar:r,orientation:o="horizontal",dir:l="ltr",loop:h=!0,...g}=e,u=Zb(r);return W.exports.createElement(cZ,{scope:r,orientation:o},W.exports.createElement(Ez,Ze({asChild:!0},u,{orientation:o,dir:l,loop:h}),W.exports.createElement(oo.div,Ze({role:"toolbar","aria-orientation":o,dir:l},g,{ref:t}))))}),fZ=W.exports.forwardRef((e,t)=>{const{__scopeToolbar:r,...o}=e,l=Zb(r);return W.exports.createElement(qb,Ze({asChild:!0},l,{focusable:!e.disabled}),W.exports.createElement(oo.button,Ze({type:"button"},o,{ref:t})))}),pZ=W.exports.forwardRef((e,t)=>{const{__scopeToolbar:r,...o}=e,l=Zb(r);return W.exports.createElement(qb,Ze({asChild:!0},l,{focusable:!0}),W.exports.createElement(oo.a,Ze({},o,{ref:t,onKeyDown:Vi(e.onKeyDown,h=>{h.key===" "&&h.currentTarget.click()})})))}),mZ=W.exports.forwardRef((e,t)=>{const{__scopeToolbar:r,...o}=e,l=hZ("ToolbarToggleGroup",r),h=Az(r);return W.exports.createElement(sZ,Ze({"data-orientation":l.orientation},h,o,{ref:t,rovingFocus:!1}))}),gZ=W.exports.forwardRef((e,t)=>{const{__scopeToolbar:r,...o}=e,l=Az(r);return W.exports.createElement(fZ,Ze({asChild:!0},e),W.exports.createElement(lZ,Ze({},l,o,{ref:t})))}),yZ=dZ,_Z=pZ,vZ=mZ,xZ=gZ,wZ=dr(yZ,{display:"flex",height:"$4",width:"100%",boxSizing:"border-box",minWidth:"max-content",backgroundColor:"white",boxShadow:'0 2px 10px "black"'}),zz={all:"unset",flex:"0 0 auto",color:"$black",display:"inline-flex",padding:"0 $1 0 $1",fontSize:"$2",alignItems:"center","&:hover":{backgroundColor:"$hover",color:"$white"},"&:focus":{position:"relative",boxShadow:"0 0 0 2px blue"}},bZ=dr(_Z,{...zz,backgroundColor:"transparent",color:"black",display:"inline-flex",justifyContent:"center",alignItems:"center"},{"&:hover":{backgroundColor:"$hover",color:"$white",cursor:"pointer"}}),SZ=dr(vZ,{display:"inline-flex",borderRadius:4}),EZ=dr(xZ,{...zz,boxShadow:0,backgroundColor:"white",marginLeft:2,cursor:"pointer","&:first-child":{marginLeft:0},"&[data-state=on]":{backgroundColor:"$primary",color:"$primaryText"}}),kZ=wZ,TZ=bZ,CZ=SZ,Kv=EZ;function PZ(e){let[t,r]=W.exports.useState("maplibre"),o;return t==="maplibre"?o=Oe(CU,{file:e.file}):t==="inspector"?o=Oe(aV,{file:e.file}):o=Oe(jq,{file:e.file}),Pt(Bf,{children:[Pt(kZ,{"aria-label":"Formatting options",children:[Pt(CZ,{type:"single",defaultValue:"center","aria-label":"Text alignment",value:t,onValueChange:r,children:[Oe(Kv,{value:"maplibre","aria-label":"Right aligned",children:"Map View"}),Pt(Kv,{value:"inspector","aria-label":"Left aligned",children:[Oe(SF,{})," Tile Inspector"]}),Oe(Kv,{value:"metadata","aria-label":"Left aligned",children:"Metadata"})]}),Oe(TZ,{css:{marginRight:10},children:e.file.source.getKey()})]}),o]})}const IZ=dr("div",{height:"$4",display:"flex",alignItems:"center",padding:"0 $2 0 $2"}),MZ=dr("a",{fontWeight:500,color:"unset",textDecoration:"none"}),AZ=dr("a",{color:"white",textDecoration:"none",fontSize:"$1"}),zZ=dr("span",{marginLeft:"auto"}),DZ=dr(z6,{backgroundColor:"black",position:"fixed",inset:0,opacity:"40%",zIndex:3}),RZ=dr(D6,{backgroundColor:"black",color:"#ef4444",padding:"$1",borderRadius:6,position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90vw",zIndex:4,"&:focus":{outline:"none"}}),LZ="8f50762".substr(0,8);function FZ(){hL();let[e,t]=W.exports.useState(),[r,o]=W.exports.useState();W.exports.useEffect(()=>{const g=new URLSearchParams(location.search).get("url");if(g){let u=new Jc(g);o(u)}},[]),W.exports.useEffect(()=>{r&&r.getHeader().catch(g=>{t(g.message)})},[r]),W.exports.useEffect(()=>{const g=new URL(window.location.href);r&&r.source.getKey().startsWith("http")?(g.searchParams.set("url",r.source.getKey()),history.pushState(null,"",g.toString())):(g.searchParams.delete("url"),history.pushState(null,"",g.toString()))},[r]);let l=g=>{g.preventDefault(),o(void 0)};const h=()=>{t(void 0)};return Pt("div",{children:[Pt(IZ,{children:[Oe(MZ,{href:"/PMTiles/",onClick:l,children:"PMTiles Viewer"}),Oe(zZ,{children:Pt(AZ,{href:"https://github.com/protomaps/PMTiles",target:"_blank",children:[Oe(wF,{})," ",LZ]})})]}),r?Oe(PZ,{file:r}):Oe(YO,{setFile:o}),Oe(M6,{open:e!==void 0,children:Pt(A6,{children:[Oe(DZ,{}),Pt(RZ,{onEscapeKeyDown:h,onPointerDownOutside:h,children:[Oe("div",{children:r?r.source.getKey():null}),Oe("div",{children:e}),Oe(R6,{})]})]})})]})}Jv.createRoot(document.getElementById("root")).render(Oe(Re.StrictMode,{children:Oe(FZ,{})}));
